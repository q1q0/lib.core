import { Injectable, Directive, ElementRef, EventEmitter, Output, NgZone, Input, NgModule, Component, SkipSelf, Optional, ChangeDetectionStrategy, ChangeDetectorRef, Renderer2, forwardRef, ContentChildren, ViewChild, TemplateRef, ViewContainerRef, ViewChildren, CUSTOM_ELEMENTS_SCHEMA, IterableDiffers, ViewEncapsulation, ContentChild, Injector, ComponentFactoryResolver, Type, HostListener, defineInjectable, inject } from '@angular/core';
import { map, keys, forEach, uniq, filter, parseInt as parseInt$1, random, findIndex, find, isEqual, orderBy, clone, sortBy, get, throttle, concat, padStart, uniqBy, lastIndexOf } from 'lodash';
import { Subject, timer } from 'rxjs';
import * as moment from 'moment';
import { isMoment } from 'moment';
import { CommonModule } from '@angular/common';
import { FormsModule, ReactiveFormsModule } from '@angular/forms';
import { BsDropdownDirective, BsDropdownModule, ModalModule } from 'ngx-bootstrap';
import * as tabbableFRollup from 'tabbable';
import * as momentImported from 'moment-timezone';
import { writeText } from 'clipboard-polyfill';
import { debounce } from 'rxjs/operators';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** *
 * This constant provide a global access to injector so we can use it to retrieve
 * service from place where we can't inject (like function).
 *
 * !!!!!!!!!!!!!!DO NOT USE THIS IN PLACES WHERE YOU CAN INJECT SERVICES!!!!!!!!!!!
  @type {?} */
let injectorRef;
/** @type {?} */
const appInjector = (injector) => {
    if (injector) {
        injectorRef = injector;
    }
    return injectorRef;
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @enum {number} */
const AttributesEnum = {
    ID: 0,
    VISIBLE: 1,
    CLASS: 2,
    DISABLED: 3,
    ENABLED: 4,
    TEXT: 5,
    COLOR: 6,
    ON_COMMAND: 7,
    REQUIRE: 8,
    TITLE: 9,
    FONT_BOLD: 10,
    SELECTED: 11,
    BG_COLOR: 12,
    VALUE: 13,
    PATTERN: 14,
    MAX_LENGTH: 15,
    MAX: 16,
    MIN: 17,
};
AttributesEnum[AttributesEnum.ID] = 'ID';
AttributesEnum[AttributesEnum.VISIBLE] = 'VISIBLE';
AttributesEnum[AttributesEnum.CLASS] = 'CLASS';
AttributesEnum[AttributesEnum.DISABLED] = 'DISABLED';
AttributesEnum[AttributesEnum.ENABLED] = 'ENABLED';
AttributesEnum[AttributesEnum.TEXT] = 'TEXT';
AttributesEnum[AttributesEnum.COLOR] = 'COLOR';
AttributesEnum[AttributesEnum.ON_COMMAND] = 'ON_COMMAND';
AttributesEnum[AttributesEnum.REQUIRE] = 'REQUIRE';
AttributesEnum[AttributesEnum.TITLE] = 'TITLE';
AttributesEnum[AttributesEnum.FONT_BOLD] = 'FONT_BOLD';
AttributesEnum[AttributesEnum.SELECTED] = 'SELECTED';
AttributesEnum[AttributesEnum.BG_COLOR] = 'BG_COLOR';
AttributesEnum[AttributesEnum.VALUE] = 'VALUE';
AttributesEnum[AttributesEnum.PATTERN] = 'PATTERN';
AttributesEnum[AttributesEnum.MAX_LENGTH] = 'MAX_LENGTH';
AttributesEnum[AttributesEnum.MAX] = 'MAX';
AttributesEnum[AttributesEnum.MIN] = 'MIN';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class KeyUtils {
    /**
     * Make key case insensitive
     * @param {?} key
     * @return {?}
     */
    static toMapKey(key) {
        if (key != null) {
            return key.toLowerCase();
        }
        return null;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    static toJsonValue(val) {
        if (typeof val === "number" || typeof val === "boolean") {
            return val + "";
        }
        else {
            return val;
        }
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class McoContainerService {
    constructor() {
        /**
         * Keeps internal list of active ViewComponents
         */
        this.activeViewsStack = [];
        /**
         * Internal map of MCO instances
         */
        this._mcoMap = new Map();
        this.MIN_Z_INDEX = 1000;
        this.MAX_Z_INDEX = 99999;
        //1050 is for actual modal
        this.viewsChanged = new Subject();
    }
    /**
     * Get mco instance from internal [[_mcoMap]]
     * @param {?} mcoName Name of MCO instance
     * @return {?}
     */
    getMco(mcoName) {
        return this._mcoMap.get(KeyUtils.toMapKey(mcoName));
    }
    /**
     * Get the maximum allowed z-index value for layering windows
     * @return {?}
     */
    getMaxZIndex() {
        return this.MAX_Z_INDEX;
    }
    /**
     * Alias of [[registerMco]]
     * @param {?} mcoName
     * @param {?} mco
     * @return {?}
     */
    addMco(mcoName, mco) {
        this.registerMco(mcoName, mco);
    }
    /**
     * Add an mco instance to internal [[_mcoMap]]
     * @param {?} mcoName
     * @param {?} mco
     * @return {?}
     */
    registerMco(mcoName, mco) {
        this._mcoMap.set(KeyUtils.toMapKey(mcoName), mco);
    }
    /**
     * Remove mco object from internal [[_mcoMap]]
     * @param {?} mcoName Name of mco instance to remove
     * @return {?}
     */
    removeMco(mcoName) {
        /** @type {?} */
        const key = KeyUtils.toMapKey(mcoName);
        /** @type {?} */
        const mco = this._mcoMap.get(key);
        if (mco != null && typeof mco["cleanup"] === "function") {
            mco.cleanup();
        }
        this._mcoMap.delete(key);
    }
    /**
     * Push view to the last active view stack. This will be the view that returned
     * when popLastActiveView is called.
     *
     * @param {?} view ViewComponent to be add to the stack
     * @return {?}
     */
    registerView(view) {
        if (view.canBeActiveView !== true) {
            // this.activeViewsStack.splice(0, 0, view);
            // view.zIndex = this.MIN_Z_INDEX - this.activeViewsCount();
            if (this.actionForwardHandler == null) {
                this.actionForwardHandler = new Map();
            }
            this.actionForwardHandler.set(view.actionForwardName, view);
        }
        else {
            this.activeViewsStack.push(view);
            view.zIndex = this.getViewZIndex();
        }
        this.activeViewsStack = uniqBy(this.activeViewsStack, (v) => v.uniqueId);
    }
    /**
     * Pop last active view. This will remove the view from the active stack
     * @return {?}
     */
    popLastActiveView() {
        return this.activeViewsStack.pop();
    }
    /**
     * Remove a view that has been destroyed from the stack.
     *
     * @param {?} view ViewComponent to be removed from stack
     * @return {?}
     */
    removeView(view) {
        if (view.canBeActiveView !== true) {
            if (this.actionForwardHandler != null) {
                this.actionForwardHandler.delete(view.actionForwardName);
            }
        }
        else {
            this.activeViewsStack = filter(this.activeViewsStack, (v) => v.uniqueId !== view.uniqueId);
            this.reStackView();
        }
    }
    /**
     * Minimize a view window by ID
     * @param {?} viewId Id of view to minimize
     * @param {?=} screenIndex (optional) index of screen if multi screen support is allowed
     * @return {?}
     */
    minimizeView(viewId, screenIndex = null) {
        /** @type {?} */
        const view = this.getViewById(viewId, screenIndex);
        if (view != null) {
            view.isMinimized = true;
        }
        /** @type {?} */
        let activeView = null;
        /** @type {?} */
        let isModalActive = false;
        if (this.activeViewsCount() > 1) {
            /** @type {?} */
            const visibleViews = this.activeViewsStack.filter(v => v.isMinimized !== true && v.skipBreadCrumb !== true);
            if (visibleViews != null && visibleViews.length > 0) {
                activeView = visibleViews[visibleViews.length - 1];
                /** @type {?} */
                let i = visibleViews.length - 1;
                // Itterate through visibile views to look for the next dialog view (not subview)
                while (visibleViews[i] && !activeView.dialog) {
                    activeView = visibleViews[i];
                    i--;
                }
                /** @type {?} */
                let count = 0;
                do {
                    if (visibleViews[count]) {
                        isModalActive = visibleViews[count].isModalDialog();
                        count = count + 1;
                    }
                } while (isModalActive !== true && count < visibleViews.length);
            }
        }
        this.viewsChanged.next({
            views: this.getBreadcrumb(this.activeViewsStack),
            activeView: activeView,
            minMaxEvent: true,
            isModalActive: isModalActive
        });
    }
    /**
     * Shows a view by id
     * @param {?} viewId Id of view to show
     * @param {?=} screenIndex (optional) index of screen if multi screen support is allowed
     * @return {?}
     */
    showView(viewId, screenIndex = null) {
        /** @type {?} */
        const view = this.getViewById(viewId, screenIndex);
        if (view != null) {
            view.isMinimized = true;
        }
        /** @type {?} */
        let isModalActive = false;
        /** @type {?} */
        let count = 0;
        do {
            if (this.activeViewsStack[count]) {
                isModalActive = this.activeViewsStack[count].isModalDialog();
                count = count + 1;
            }
        } while (isModalActive !== true && count < this.activeViewsStack.length);
        this.viewsChanged.next({
            views: this.getBreadcrumb(this.activeViewsStack),
            activeView: view,
            minMaxEvent: true,
            isModalActive: isModalActive
        });
    }
    /**
     * Close the view window
     * @param {?} viewId Id of view to close
     * @param {?=} screenIndex (optional) index of the screen if multi screen support
     * @return {?}
     */
    closeView(viewId, screenIndex = null) {
        /** @type {?} */
        const view = this.getViewById(viewId, screenIndex);
        if (view != null) {
            view.close();
        }
    }
    /**
     * Get the number of current active view from [[activeViewsStack]]
     * @return {?} Number of active views
     */
    activeViewsCount() {
        return this.activeViewsStack.length;
    }
    /**
     * Check to see if a view is in the [[activeViewStack]]
     * @param {?} view ViewComponent's id as a string or [[ViewComponent]] instance
     * @return {?} True if the view component is in the [[activeViewStack]]
     */
    hasView(view) {
        if (typeof view === 'string') {
            return filter(this.activeViewsStack, (v) => v.id === /** @type {?} */ (view)).length > 0;
        }
        return filter(this.activeViewsStack, (v) => v.uniqueId === view.uniqueId).length > 0;
    }
    /**
     * Get the current active view
     * @return {?} the active view from the view stack
     */
    activeView() {
        return this.activeViewsCount() > 0 ? this.activeViewsStack[this.activeViewsCount() - 1] : null;
    }
    /**
     * Get a view from [[actriveViewStack]] by ID
     * @param {?} viewId Views id value
     * @param {?=} screenIndex (optional) the screenIndex of the view (if multiple screen is allow)
     * @return {?} View that matches value of id
     */
    getViewById(viewId, screenIndex = null) {
        return find(this.activeViewsStack, (view) => {
            return view.id === viewId && (screenIndex == null || (screenIndex != null && view.screenIndex === screenIndex));
        });
    }
    /**
     * Get handler view component by name
     * @param {?} actionForwardName
     * @return {?} View component or null if there is no component with actionForwardName
     */
    getActionForwardHandler(actionForwardName) {
        if (this.actionForwardHandler != null) {
            return this.actionForwardHandler.get(actionForwardName);
        }
        return null;
    }
    /**
     * Get the [[actionForwardHandler]]
     * @return {?}
     */
    getActionForwardHandlerMap() {
        return this.actionForwardHandler;
    }
    /**
     * Get the [[activeViewStack]]
     * @return {?}
     */
    getViews() {
        return this.activeViewsStack;
    }
    /**
     * Update z-index (layer position) of all active views
     * @param {?=} topViewId ID of view component to set max z-index (top)
     * @param {?=} screenIndex
     * @return {?}
     */
    reStackView(topViewId = null, screenIndex = null) {
        this.activeViewsStack = sortBy(this.activeViewsStack, (view) => {
            //we are top view
            if (view.id === topViewId && (screenIndex == null || (screenIndex === view.screenIndex))) {
                return this.MAX_Z_INDEX;
            }
            return view.zIndex;
        });
        /** @type {?} */
        let isModalActive = false;
        forEach(this.activeViewsStack, (view, idx) => {
            view.updateZIndex(this.MIN_Z_INDEX + idx);
            if (isModalActive !== true && view.isModalDialog() === true) {
                isModalActive = true;
            }
        });
        this.viewsChanged.next({
            views: this.getBreadcrumb(this.activeViewsStack),
            activeView: this.activeViewsStack[this.activeViewsStack.length - 1],
            isModalActive: isModalActive
        });
    }
    /**
     * Get the z-index
     * @return {?}
     */
    getViewZIndex() {
        return this.MIN_Z_INDEX + this.activeViewsCount();
    }
    /**
     * @param {?} views
     * @return {?}
     */
    getBreadcrumb(views) {
        return views.filter(v => v.skipBreadCrumb !== true && v.dialog != null && v.visible !== false);
    }
    /**
     * Get the session from an MCO instance
     * @param {?} mco
     * @return {?} Session
     */
    static getClientSessionFromMco(mco) {
        return mco.getSession();
    }
    /**
     * 次のscreenIndexを取得します。
     * screenIndexは1~8の値をとるように、サーバで想定されています。
     * @param {?} baseScreenId
     * @param {?=} id
     * @return {?}
     */
    nextScreenIndex(baseScreenId, id = null) {
        /** @type {?} */
        const existingScreens = this.activeViewsStack.filter(v => (id)
            ? v.id === id
            : v.baseScreenId === baseScreenId);
        if (existingScreens.length > 0) {
            /** @type {?} */
            const i = orderBy(existingScreens, (scr) => scr.screenIndex, "desc")
                .pop().screenIndex;
            return i + 1;
        }
        else {
            return 1;
        }
    }
    /**
     * @return {?}
     */
    refreshBreadCrumb() {
        /** @type {?} */
        let isModalActive = false;
        forEach(this.activeViewsStack, (view) => {
            if (isModalActive !== true && view.isModalDialog() === true) {
                isModalActive = true;
            }
        });
        this.viewsChanged.next({
            views: this.getBreadcrumb(this.activeViewsStack),
            activeView: this.activeViewsStack[this.activeViewsStack.length - 1],
            isModalActive: isModalActive
        });
    }
}
McoContainerService.decorators = [
    { type: Injectable, args: [{
                providedIn: 'root'
            },] }
];
/** @nocollapse */ McoContainerService.ngInjectableDef = defineInjectable({ factory: function McoContainerService_Factory() { return new McoContainerService(); }, token: McoContainerService, providedIn: "root" });

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Track events
 */
class EventHandlerService {
    /**
     * @param {?} mcoContainerService
     */
    constructor(mcoContainerService) {
        this.mcoContainerService = mcoContainerService;
    }
    /**
     * @param {?} event
     * @return {?}
     */
    setClientEvent(event) {
        this._clientEvent = event;
    }
    /**
     * @return {?}
     */
    getClientEvent() {
        return this._clientEvent;
    }
    /**
     * @param {?} command
     * @param {?} mcoName
     * @param {?} actionName
     * @param {?} arg
     * @param {?} source
     * @param {?} clientEvent
     * @return {?}
     */
    fireEvent(command, mcoName, actionName, arg, source, clientEvent) {
        /** @type {?} */
        const mco = this.mcoContainerService.getMco(mcoName);
        if (mco != null && typeof mco[actionName] === "function") {
            if (Array.isArray(arg)) {
                (/** @type {?} */ (mco[actionName])).apply(mco, arg);
            }
            else {
                (/** @type {?} */ (mco[actionName])).apply(mco, [arg]);
            }
        }
    }
}
EventHandlerService.decorators = [
    { type: Injectable, args: [{
                providedIn: 'root'
            },] }
];
/** @nocollapse */
EventHandlerService.ctorParameters = () => [
    { type: McoContainerService }
];
/** @nocollapse */ EventHandlerService.ngInjectableDef = defineInjectable({ factory: function EventHandlerService_Factory() { return new EventHandlerService(inject(McoContainerService)); }, token: EventHandlerService, providedIn: "root" });

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Class for creating [[MenuItems]]
 */
class MenuItemBuilder {
    /**
     *
     * @param {?=} menuItem
     */
    constructor(menuItem = null) {
        /**
         * Map of HTML attributes to add to menu item
         */
        this.attributes = {};
        this._internalMenuItem = menuItem;
    }
    /**
     * Create a menu separator using hyphens
     * @return {?}
     */
    static createHorizontalDivider() {
        /** @type {?} */
        const menuItem = new MenuItemBuilder();
        menuItem.setAttribute("text", "-");
        return menuItem;
    }
    /**
     * Get a new [[MenuItemBuilder]] instance
     * @return {?} [[MenuItemBuilder]] instance
     */
    static createMenuItem() {
        return new MenuItemBuilder();
    }
    /**
     * Set text attribute
     * @param {?} text
     * @return {?}
     */
    setText(text) {
        this.setAttribute("text", text);
    }
    /**
     *
     * @param {?} width
     * @return {?}
     */
    setWidth(width) {
        //don't think this should be doing anything, all menu item shared the same width
    }
    /**
     *
     * @param {?} img
     * @return {?}
     */
    setImgHint(img) {
        //TODO
    }
    /**
     * Sets event handler for mousedown
     * @param {?} fn Mouse down event handler function
     * @return {?}
     */
    setOnMouseDown(fn) {
        this.setAttribute("onMouseDownCallback", fn);
    }
    /**
     * Set margin attribute
     * @param {?} margin Should be number
     * @return {?}
     */
    setMargin(margin) {
        this.setAttribute("margin", margin);
    }
    /**
     * Set fontColor attribute
     * @param {?} color Should be CSS valid color string (e.g. #ff0000, red, etc.)
     * @return {?}
     */
    setFontColor(color) {
        this.setAttribute("fontColor", color);
    }
    /**
     * Set fontSize attribute
     * @param {?} size Should be number
     * @return {?}
     */
    setFontSize(size) {
        this.setAttribute("fontSize", size);
    }
    /**
     * Set fontBold attribute
     * @param {?} bold
     * @return {?}
     */
    setFontBold(bold) {
        this.setAttribute("fontBold", bold);
    }
    /**
     * Set custom attribute on [[MenuItem]]
     * @param {?} name
     * @param {?} value
     * @return {?}
     */
    setAttribute(name, value) {
        this.attributes[name] = value;
        if (this._internalMenuItem != null) {
            if (MenuItemBuilder.knownKeys.indexOf(name) >= 0) {
                this._internalMenuItem[name] = value;
            }
            else {
                if (this._internalMenuItem.customAttributes == null) {
                    this._internalMenuItem.customAttributes = {};
                }
                this._internalMenuItem.customAttributes[name] = value;
            }
        }
    }
    /**
     * Return the value of the attribute
     *
     * @param {?} name the name of the attribute
     * @return {?}
     */
    getAttribute(name) {
        return this.attributes[name];
    }
    /**
     * Convert [[MenuItemDirective]] to [[MenuItem]]
     * @param {?=} parentScreenId
     * @return {?}
     */
    toMenuItem(parentScreenId) {
        /** @type {?} */
        const menuItem = {};
        menuItem.parentScreenId = parentScreenId;
        /* istanbul ignore next */
        if (this.attributes["id"] != null) {
            menuItem.id = this.attributes["id"];
        }
        if (this.attributes["text"] != null) {
            menuItem.text = this.attributes["text"];
        }
        /* istanbul ignore next */
        if (this.attributes["menuItems"] != null) {
            menuItem.menuItems = map(this.attributes["menuItems"], (subMenu) => subMenu.toMenuItem(parentScreenId));
        }
        if (this.attributes["onCommandCallback"] != null) {
            menuItem.onCommandCallback = this.attributes["onCommandCallback"];
        }
        if (this.attributes["onCommand"] != null) {
            menuItem.onCommandCallback = this.attributes["onCommand"];
        }
        /* istanbul ignore next */
        if (this.attributes["onMouseDownCallback"] != null) {
            menuItem.onMouseDownCallback = this.attributes["onMouseDownCallback"];
        }
        if (this.attributes["display"] != null) {
            menuItem.display = this.attributes["display"];
        }
        if (this.attributes["fontColor"] != null) {
            MenuItemBuilder.initStyle(menuItem);
            menuItem.styles["color"] = this.attributes["fontColor"];
        }
        if (this.attributes["fontSize"] != null) {
            MenuItemBuilder.initStyle(menuItem);
            menuItem.styles["font-size"] = this.attributes["fontSize"];
        }
        /* istanbul ignore next */
        if (this.attributes["fontBold"] != null) {
            MenuItemBuilder.initStyle(menuItem);
            if (this.attributes["fontBold"] === true || this.attributes["fontBold"] === "true") {
                menuItem.styles["font-weight"] = this.attributes["bold"];
            }
            else {
                menuItem.styles["font-weight"] = "normal";
            }
        }
        if (this.attributes["margin"] != null) {
            MenuItemBuilder.initStyle(menuItem);
            menuItem.styles["margin"] = this.attributes["margin"];
        }
        /** @type {?} */
        const keys$$1 = filter(keys(this.attributes), (key) => {
            return MenuItemBuilder.knownKeys.indexOf(key) < 0;
        });
        if (keys$$1 && keys$$1.length > 0) {
            menuItem.customAttributes = {};
            for (let key of keys$$1) {
                menuItem.customAttributes[key] = this.attributes[key];
            }
        }
        return menuItem;
    }
    /**
     * Add [[MenuItemBuilder]] instance to menuItems attribute
     * @param {?} menuItem
     * @return {?}
     */
    appendChild(menuItem) {
        if (this.attributes["menuItems"] == null) {
            this.attributes["menuItems"] = [];
        }
        if (menuItem instanceof MenuItemBuilder) {
            this.attributes["menuItems"].push(menuItem);
        }
    }
    /**
     * Parse MenuItem and convert to a builder. Need for case where table column trigger context menu
     * prior to the contextmenu of row is activated. Thus the MenuItemComponent does not exists yet so
     * we need something as temporary.
     *
     * @param {?} menuItem
     * @return {?}
     */
    static fromMenuItem(menuItem) {
        return new MenuItemBuilder(menuItem);
    }
    /**
     * Clear out style values for [[MenuItem]]
     * @param {?} menuItem
     * @return {?}
     */
    static initStyle(menuItem) {
        if (menuItem.styles == null) {
            menuItem.styles = {};
        }
    }
    /**
     * @return {?}
     */
    _free() {
        this._internalMenuItem = null;
        this.attributes = null;
    }
}
/**
 * Allowed attribute names
 */
MenuItemBuilder.knownKeys = [
    "id",
    "text",
    "onCommand",
    "onCommandCallback",
    "onMouseDownCallback",
    "menuItems",
    "display",
    "fontColor",
    "fontBold",
    "fontSize",
    "margin"
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Service class to handle context menus
 */
class ContextMenuService {
    constructor() {
        this.contextMenuMap = new Map();
        this.activeMenuSubject = new Subject();
        this.activeMenuObservable = this.activeMenuSubject.asObservable();
    }
    /**
     *
     * @param {?} name
     * @param {?} menuItems
     * @param {?=} parentScreenId
     * @return {?}
     */
    registerContextMenu(name, menuItems, parentScreenId = null) {
        /** @type {?} */
        const key = this.rekey(name);
        if (this.contextMenuMap.has(key)) {
            /** @type {?} */
            const menuData = this.contextMenuMap.get(key);
            if (parentScreenId != null && parentScreenId !== "") {
                menuData.parentScreenId = parentScreenId;
            }
            menuData.menuItems = menuItems;
        }
        else {
            this.contextMenuMap.set(key, {
                menuItems: menuItems,
                parentScreenId: parentScreenId
            });
        }
    }
    /**
     * Set the active and visible context menu by name
     * @param {?} name
     * @return {?}
     */
    showContextMenu(name) {
        /** @type {?} */
        let hasContextMenu = false;
        if (this.contextMenuMap.has(this.rekey(name))) {
            hasContextMenu = true;
        }
        this.setActiveMenu(name);
        this.activeMenu = name;
        if (this.menuItemBuilders != null) {
            this.menuItemBuilders.forEach(menuItemBuilder => menuItemBuilder._free());
            this.menuItemBuilders = [];
        }
        return hasContextMenu;
    }
    /**
     * Deactivate menu by name, and hide it
     * @param {?} name
     * @return {?}
     */
    hideContextMenu(name) {
        this.setActiveMenu(null);
        this.activeMenu = null;
    }
    /**
     * Get menu items by [[PopupMenuData]] name key
     * @param {?} name Name of [[PopupMenuData]] key
     * @return {?} Menu items in data if it exists, otherwise null
     */
    getContextMenuItems(name) {
        /** @type {?} */
        const menuData = this.contextMenuMap.get(this.rekey(name));
        if (menuData != null) {
            return menuData.menuItems;
        }
        return null;
    }
    /**
     * Get the menu's parent id
     * @param {?} name Name of [[PopupMenuData]] item key
     * @return {?}
     */
    getContextMenuParentScreenId(name) {
        /** @type {?} */
        const menuData = this.contextMenuMap.get(this.rekey(name));
        if (menuData != null) {
            return menuData.parentScreenId;
        }
        return null;
    }
    /**
     * Remove context menu item by name
     * @param {?} name Name of [[PopupMenuData]] item key
     * @return {?}
     */
    removeContextMenu(name) {
        this.contextMenuMap.delete(this.rekey(name));
        if (this.activeMenu === name) {
            this.activeMenu = null;
        }
    }
    /**
     * Set active menu
     * @param {?} id Id of menu to set as active
     * @return {?}
     */
    setActiveMenu(id) {
        this.activeMenuSubject.next(id);
    }
    /**
     * Set menu items by parent screen id
     * @param {?} id Id of parent containing menu
     * @param {?} menuItems Items to set
     * @return {?}
     */
    resetMenu(id, menuItems) {
        /** @type {?} */
        let newMenuItems;
        /** @type {?} */
        const parentScreenId = this.getContextMenuParentScreenId(id);
        if (menuItems.length > 0 && menuItems[0] instanceof MenuItemBuilder) {
            newMenuItems = map(menuItems, (menuItem) => menuItem.toMenuItem(parentScreenId));
        }
        else {
            newMenuItems = (/** @type {?} */ (menuItems)) || [];
        }
        this.registerContextMenu(id, newMenuItems);
    }
    /**
     * Convert key to lowercase
     * @param {?} key
     * @return {?} key value as lowercased string
     */
    rekey(key) {
        return key.toLowerCase();
    }
    /**
     * This is for special case
     * @param {?} menuItemBuilder MenuItemBuilder to be released of memory when showContextMenu is called.
     * @return {?}
     */
    _trackMenuItemBuilderForMemRelease(menuItemBuilder) {
        if (this.menuItemBuilders == null) {
            this.menuItemBuilders = [];
        }
        this.menuItemBuilders.push(menuItemBuilder);
    }
}
ContextMenuService.decorators = [
    { type: Injectable, args: [{
                providedIn: 'root'
            },] }
];
/** @nocollapse */
ContextMenuService.ctorParameters = () => [];
/** @nocollapse */ ContextMenuService.ngInjectableDef = defineInjectable({ factory: function ContextMenuService_Factory() { return new ContextMenuService(); }, token: ContextMenuService, providedIn: "root" });

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Class for managing client sessions
 */
class SessionService {
    /**
     *
     * @param {?} _mcoContainer
     * @param {?} _eventHandlerService
     * @param {?} injector
     * @param {?} contextMenuService
     * @param {?} ngZone
     */
    constructor(_mcoContainer, _eventHandlerService, injector, contextMenuService, ngZone) {
        this._mcoContainer = _mcoContainer;
        this._eventHandlerService = _eventHandlerService;
        this.injector = injector;
        this.contextMenuService = contextMenuService;
        this.defsMap = new Map();
        ngZone.runOutsideAngular(() => {
            document.addEventListener("keydown", (event) => this.checkKey(event), true);
            document.addEventListener("keyup", (event) => this.resetKey(event), true);
            //track when window lost/gain focus
            window.addEventListener("focusout", (event) => {
                this._windowLostFocus = true;
            }, true);
            window.addEventListener("focusin", () => {
                this._windowLostFocus = false;
            }, true);
        });
    }
    /**
     * Get internal [[_mcoContainer]]
     * @return {?}
     */
    getMcoContainer() {
        return this._mcoContainer;
    }
    /**
     * Get internal [[_eventHandlerService]]
     * @return {?}
     */
    getEventHandler() {
        return this._eventHandlerService;
    }
    /**
     * Set [[requestService]] value
     * @param {?} requestService
     * @return {?}
     */
    registerRequestService(requestService) {
        this.requestService = requestService;
    }
    /**
     * Get value of [[requestService]] property
     * @return {?} The requestService
     */
    getRequestService() {
        return this.requestService;
    }
    /**
     * Set [[routeNavigator]] value
     * @param {?} routeNavigator
     * @return {?}
     */
    registerRouteNavigatorService(routeNavigator) {
        this.routeNavigator = routeNavigator;
    }
    /**
     * Get value of [[routeNavigator]] property
     * @return {?}
     */
    getRouteNavigatorService() {
        return this.routeNavigator;
    }
    /**
     * Set the position of the mouse
     * @param {?} event
     * @return {?}
     */
    setMousePosition(event) {
        this.mousePosition = {
            x: event.clientX,
            y: event.clientY,
            screenX: event.screenX,
            screenY: event.screenY
        };
    }
    /**
     * Get the mouse position
     * @return {?} Object with properties: x, y, screenX, screenY
     */
    getMousePosition() {
        return this.mousePosition;
    }
    /**
     * Delegate to [[Injector]].get method
     * @param {?} type
     * @return {?}
     */
    getInjector(type) {
        return this.injector.get(type);
    }
    /**
     * Get display service.
     * @return {?}
     */
    getDisplayService() {
        //TODO
        return null;
    }
    /**
     * Delegate to [[ContextMenuService]].showContextMenu
     * @param {?} id Context menu id
     * @return {?}
     */
    showContextMenu(id) {
        return this.contextMenuService.showContextMenu(id);
    }
    /**
     * Delegate to [[ContextMenuService]].hideContextMenu
     * @param {?} id Context menu id
     * @return {?}
     */
    hideContextMenu(id) {
        this.contextMenuService.hideContextMenu(id);
    }
    /**
     * Delegate to [[ContextMenuService]].resetMenu. And set [[_currentPopupMenuId]]
     * @param {?} id Menu id
     * @param {?} menuItems
     * @return {?}
     */
    resetContextMenu(id, menuItems) {
        this.contextMenuService.resetMenu(id, menuItems);
        this._currentPopupMenuId = id;
    }
    /**
     * Add entry to [[defsMap]] Map
     * @param {?} id Key
     * @param {?} data Value
     * @return {?}
     */
    storeDef(id, data) {
        this.defsMap.set(id, data);
    }
    /**
     * Get def map entry by key
     * @param {?} id Key
     * @return {?}
     */
    getDef(id) {
        return this.defsMap.get(id);
    }
    /**
     * Delete def from [[defsMap]] by key
     * @param {?} id Key to delete
     * @return {?}
     */
    deleteDef(id) {
        this.defsMap.delete(id);
    }
    /**
     * Get [[isCtrl]] property value
     * @return {?} True if control key is pressed, otherwise false.
     */
    isCtrlPressed() {
        return this.isCtrl === true;
    }
    /**
     * Get [[isShift]] property value
     * @return {?} True if shift key is pressed, otherwise false.
     */
    isShiftPressed() {
        return this.isShift === true;
    }
    /**
     * Get [[isAlt]] property value
     * @return {?} True if alt key is pressed, otherwise false.
     */
    isAltPressed() {
        return this.isAlt === true;
    }
    /**
     * Get [[messagingService]] property
     * @return {?} Value of [[messagingServiced]]
     */
    getMessagingService() {
        return this.messagingService;
    }
    /**
     * Set [[messagingService]] property
     * @param {?} service
     * @return {?}
     */
    registerMessagingService(service) {
        this.messagingService = service;
    }
    /**
     * Key down handler to set internal flags for Control, Shift, and Alt
     * @param {?} event
     * @return {?}
     */
    checkKey(event) {
        this.isCtrl = event.ctrlKey;
        this.isShift = event.shiftKey;
        this.isAlt = event.altKey;
    }
    /**
     * Keyboard event handler for setting all internal flags for Control, Shift, and Alt to false
     * @param {?} event
     * @return {?}
     */
    resetKey(event) {
        this.isCtrl = false;
        this.isShift = false;
        this.isAlt = false;
    }
}
SessionService.decorators = [
    { type: Injectable }
];
/** @nocollapse */
SessionService.ctorParameters = () => [
    { type: McoContainerService },
    { type: EventHandlerService },
    { type: Injector },
    { type: ContextMenuService },
    { type: NgZone }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class IllegalArgumentException extends Error {
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class JavaUtils {
    /**
     * @param {?} str
     * @return {?}
     */
    static isNumber(str) {
        return str == null ? false : JavaUtils.NUMERIC.test(str);
    }
    /**
     * @param {?} boo
     * @return {?}
     */
    static booleanToString(boo) {
        if (boo === true) {
            return 'true';
        }
        return 'false';
    }
    /**
     * @param {?} a
     * @param {?} b
     * @return {?}
     */
    static equals(a, b) {
        return a == b;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    static parseBoolean(val) {
        if (typeof val === 'boolean') {
            return val;
        }
        else if (typeof val === 'string') {
            return val === 'true' ? true : false;
        }
        else {
            throw new Error('Unsupport boolean value: ' + val);
        }
    }
    /**
     * @param {?} val
     * @return {?}
     */
    static stringValue(val) {
        if (typeof val === 'string') {
            return val;
        }
        return val + '';
    }
    /**
     * @param {?} str
     * @return {?}
     */
    static longValue(str) {
        if (str != null) {
            return parseInt$1(str);
        }
        return null;
    }
    /**
     * @param {?} str
     * @return {?}
     */
    static doubleValue(str) {
        if (str != null) {
            /** @type {?} */
            let result = str.indexOf(".") >= 0 ? parseFloat(str) : parseInt$1(str);
            if (isNaN(result)) {
                throw new IllegalArgumentException;
            }
            return result;
        }
        return null;
    }
    /**
     * @param {?} str
     * @return {?}
     */
    static intValue(str) {
        if (str != null) {
            return parseInt$1(str);
        }
        return null;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    static toString(val) {
        if (typeof val === 'number') {
            return val + '';
        }
        else if (typeof val === 'boolean') {
            return JavaUtils.booleanToString(val);
        }
    }
    /**
     * @param {?} a
     * @param {?} b
     * @return {?}
     */
    static compareTo(a, b) {
        /** @type {?} */
        let retVal = null;
        if (a === b) {
            retVal = 0;
        }
        else if (a > b) {
            retVal = 1;
        }
        else {
            retVal = -1;
        }
        return retVal;
    }
    /**
     * @param {?} val
     * @param {?=} scale
     * @param {?=} roundingMode
     * @return {?}
     */
    static bigDecimal(val, scale = 0, roundingMode = -1) {
        /** @type {?} */
        const fixedValue = typeof val === 'number' ? val : parseFloat(val);
        if (scale > 0) {
            return parseFloat(`${fixedValue}.${padStart('', scale, '0')}`);
        }
        else {
            return fixedValue;
        }
    }
    /**
     * @param {?} num
     * @return {?}
     */
    static signum(num) {
        return num === 0 ? 0 : num > 0 ? 1 : -1;
    }
    /**
     * @param {?} str
     * @return {?}
     */
    static floatValue(str) {
        return parseFloat(str);
    }
    /**
     * @param {?} a
     * @param {?} b
     * @return {?}
     */
    static lessThan(a, b) {
        if (isMoment(a) && isMoment(b)) {
            return (/** @type {?} */ (a)).isBefore(b);
        }
        return a < b;
    }
}
JavaUtils.NUMERIC = new RegExp("^[0-9]+$");

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class ClientEvent {
    /**
     * @param {?} _source
     * @param {?} _event
     */
    constructor(_source, _event) {
        this._source = _source;
        this._event = _event;
        this._parameters = new Map();
        this._attributes = new Map();
    }
    /**
     * @return {?}
     */
    getSource() {
        return this._source;
    }
    /**
     * @return {?}
     */
    getEvent() {
        return this._event;
    }
    /**
     * @param {?} paramName
     * @param {?} value
     * @return {?}
     */
    setParameter(paramName, value) {
        this._parameters.set(KeyUtils.toMapKey(paramName), value);
    }
    /**
     * @param {?} paramName
     * @return {?}
     */
    getParameter(paramName) {
        return this._parameters.get(KeyUtils.toMapKey(paramName));
    }
    /**
     * @param {?} attributeName
     * @param {?} value
     * @return {?}
     */
    setAttribute(attributeName, value) {
        this._attributes.set(KeyUtils.toMapKey(attributeName), value);
    }
    /**
     * @param {?} attributeName
     * @return {?}
     */
    getAttribute(attributeName) {
        return this._attributes.get(KeyUtils.toMapKey(attributeName));
    }
    /**
     * @return {?}
     */
    stopPropagation() {
        if (this._event != null) {
            this._event.stopPropagation();
        }
    }
    /**
     * @return {?}
     */
    preventDefault() {
        if (this._event != null) {
            this._event.preventDefault();
        }
    }
    /**
     * @param {?} value
     * @return {?}
     */
    setReturnValue(value) {
        this._returnValue = value;
        this._returnValueSet = true;
    }
    /**
     * @return {?}
     */
    getReturnValue() {
        return this._returnValue;
    }
    /**
     * @return {?}
     */
    isReturnValueSet() {
        //can't check for returnValue is null b/c it can be set to null
        return this._returnValueSet === true ? true : false;
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * @template E
 */
class ListIterator {
    /**
     * @param {?} data
     */
    constructor(data) {
        this.data = data;
        this.currentIndex = 0;
    }
    /**
     * @return {?}
     */
    hasNext() {
        return this.data != null && this.data.length > this.currentIndex;
    }
    /**
     * @template T
     * @return {?}
     */
    next() {
        if (this.currentIndex < this.data.length) {
            return this.data[this.currentIndex++];
        }
        throw new Error('No such element');
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * @template E
 */
class Vector {
    /**
     * @param {?=} size
     */
    constructor(size) {
        this.data = [];
        if (Array.isArray(size)) {
            this.data = size;
        }
    }
    /**
     * @return {?}
     */
    toArray() {
        return this.data;
    }
    /**
     * @param {?} data
     * @return {?}
     */
    setData(data) {
        this.data = data;
    }
    /**
     * @return {?}
     */
    size() {
        return this.data == null ? 0 : this.data.length;
    }
    /**
     * @template T
     * @param {?} idx
     * @return {?}
     */
    get(idx) {
        if (this.size() > idx) {
            return /** @type {?} */ (this.data[idx]);
        }
        return null;
    }
    /**
     * @param {?} element
     * @param {?=} insertionIndex
     * @return {?}
     */
    add(element, insertionIndex = -1) {
        if (insertionIndex === -1) {
            return this.data.push(element);
        }
        else {
            this.data.splice(insertionIndex, 0, element);
            return insertionIndex;
        }
    }
    /**
     * @param {?} idx
     * @return {?}
     */
    delete(idx) {
        if (this.get(idx)) {
            this.data.splice(idx, 1);
        }
    }
    /**
     * @param {?} element
     * @return {?}
     */
    addElement(element) {
        return this.add(element);
    }
    /**
     * @param {?} vec
     * @return {?}
     */
    addAll(vec) {
        /** @type {?} */
        let it = vec.iterator();
        while (it.hasNext()) {
            this.add(it.next());
        }
    }
    /**
     * @return {?}
     */
    firstElement() {
        return this.data != null && this.data.length > 0 ? this.data[0] : null;
    }
    /**
     * @return {?}
     */
    lastElement() {
        return this.data != null && this.data.length > 0 ? this.data[this.data.length - 1] : null;
    }
    /**
     * @param {?} element
     * @return {?}
     */
    contains(element) {
        return this.data != null && this.data.indexOf(element) >= 0 ? true : false;
    }
    /**
     * @param {?} idx
     * @return {?}
     */
    elementAt(idx) {
        return this.get(idx);
    }
    /**
     * @return {?}
     */
    isEmpty() {
        return this.data == null || this.data.length === 0;
    }
    /**
     * @return {?}
     */
    iterator() {
        return new ListIterator(clone(this.data));
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class AttributeChangeEvent {
    /**
     * @param {?} name
     * @param {?} oldValue
     * @param {?} newValue
     * @param {?} sourceElement
     */
    constructor(name, oldValue, newValue, sourceElement) {
        this.name = name;
        this.oldValue = oldValue;
        this.newValue = newValue;
        this.sourceElement = sourceElement;
    }
    /**
     * @return {?}
     */
    getName() {
        return this.name;
    }
    /**
     * @return {?}
     */
    getOldValue() {
        return this.oldValue;
    }
    /**
     * @return {?}
     */
    getNewValue() {
        return this.newValue;
    }
    /**
     * @return {?}
     */
    getSourceElement() {
        return this.sourceElement;
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class AppUtils {
    /**
     * @param {?} str
     * @return {?}
     */
    static parseDom(str) {
        return this.domParser.parseFromString(str, "application/xml").firstElementChild;
    }
    /**
     * attributeOverrideInitializer
     * @return {?}
     */
    static attributeOverrideInitializer() {
        this.attributeOverrideClassInitializer();
        this.attributeOverrideValidateInitializer();
    }
}
AppUtils.domParser = new DOMParser();
/**
 * クラス属性変換用マップ
 */
AppUtils._classOverrideMap = new Map();
AppUtils.attributeOverrideClassInitializer = null;
AppUtils.attributeOverrideClass = null;
/**
 * バリデート属性変換用マップ
 */
AppUtils._validateOverrideMap = new Map();
AppUtils.attributeOverrideValidateInitializer = null;
AppUtils.attributeOverrideValidate = null;
AppUtils.customizeClientEvent = null;
AppUtils.validateField = null;
/**
 * Validate HTML attribute to see if they should be pass to the server. This is needed
 * because Nexaweb framework allow passing of custom attributes
 */
AppUtils.validateAttribute = null;
AppUtils.enableLogging = true;
AppUtils.maxFindElementCache = 500;
AppUtils.isCloseBtn = false;

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * @template K, V
 */
class HashMap {
    constructor() {
        this._internalMap = new Map();
    }
    /**
     * @return {?}
     */
    get size() {
        return this._internalMap.size;
    }
    /**
     * @param {?} key
     * @param {?} value
     * @return {?}
     */
    put(key, value) {
        this._internalMap.set(key, value);
    }
    /**
     * @param {?} key
     * @return {?}
     */
    get(key) {
        return this._internalMap.get(key);
    }
    /**
     * @param {?} key
     * @param {?} value
     * @return {?}
     */
    set(key, value) {
        this._internalMap.set(key, value);
        return this;
    }
    /**
     * @param {?} key
     * @return {?}
     */
    delete(key) {
        return this._internalMap.delete(key);
    }
    /**
     * @param {?} key
     * @return {?}
     */
    remove(key) {
        this.delete(key);
    }
    /**
     * @return {?}
     */
    clear() {
        return this._internalMap.clear();
    }
    /**
     * @return {?}
     */
    entries() {
        return this._internalMap.entries();
    }
    /**
     * @param {?} cb
     * @param {?} thisArg
     * @return {?}
     */
    forEach(cb, thisArg) {
        return this._internalMap.forEach(cb, thisArg);
    }
    /**
     * @param {?} key
     * @return {?}
     */
    has(key) {
        return this._internalMap.has(key);
    }
    /**
     * @return {?}
     */
    keys() {
        return this._internalMap.keys();
    }
    /**
     * @return {?}
     */
    values() {
        return this._internalMap.values();
    }
    /**
     * @return {?}
     */
    toJson() {
        /** @type {?} */
        const json = {};
        /** @type {?} */
        const keys$$1 = this.keys();
        /** @type {?} */
        let key = keys$$1.next();
        while (key.done !== true) {
            json[/** @type {?} */ (key.value)] = this.get(key.value);
            key = keys$$1.next();
        }
        return json;
    }
    /**
     * @return {?}
     */
    get [Symbol.iterator]() {
        return this._internalMap[Symbol.iterator];
    }
    /**
     * @return {?}
     */
    get [Symbol.toStringTag]() {
        return this._internalMap[Symbol.toStringTag];
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * @template K, V
 */
class Hashtable extends HashMap {
    constructor() {
        super();
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class Logger {
    /**
     * @param {?} e
     * @return {?}
     */
    static warn(e) {
        if (AppUtils.enableLogging === true) {
            console.warn(e);
        }
    }
    /**
     * @param {?} e
     * @return {?}
     */
    static log(e) {
        if (AppUtils.enableLogging === true) {
            console.log(e);
        }
    }
    /**
     * @param {?} e
     * @return {?}
     */
    static info(e) {
        if (AppUtils.enableLogging === true) {
            console.info(e);
        }
    }
    /**
     * @param {?} e
     * @return {?}
     */
    static error(e) {
        if (AppUtils.enableLogging === true) {
            console.error(e);
        }
    }
    /**
     * @param {?} e
     * @return {?}
     */
    static debug(e) {
        if (AppUtils.enableLogging === true) {
            console.debug(e);
        }
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Main class that all core components should inherit.
 */
class BaseComponent {
    /**
     * Constructor where it required minimal injection in order for this class to function properly. Subclass can overload this constructor
     * but it must provided the minimal required items to be injected.
     *
     * @param {?} parent The component where this component will be used. This injection is provided by Angular if the parent component "provide" itself.
     * @param {?} sessionService SessionService needed by this class, this should be injected by Angular.
     * @param {?} elementRef the element reference that wrap the element (tag) of this component.
     * @param {?} renderer The renderer (injected by Angular) that we used to perform DOM manipulation.
     */
    constructor(parent, sessionService, elementRef, renderer) {
        this.parent = parent;
        this.sessionService = sessionService;
        this.elementRef = elementRef;
        this.renderer = renderer;
        this.disabled = false;
        this.sort = "";
        this.visible = true;
        this.text = "";
        this.required = false;
        this.orderIndex = -1;
        /* istanbul ignore next */
        this.onContextMenu = new EventEmitter();
        this.onActiveLost = new EventEmitter();
        this.onBeforeActiveLost = new EventEmitter();
        this.styles = {};
        this._children = null;
        /* istanbul ignore next */
        this._childrenIndex = null;
        this._uniqueId = BaseComponent.generateUniqueId();
        //initial id
        this.id = this._uniqueId;
    }
    /**
     * @param {?} css
     * @return {?}
     */
    set cssClass(css) {
        this._cssClass = this.cleanCss(css);
        this.initBorderLayout();
    }
    /**
     * @param {?} req
     * @return {?}
     */
    set require(req) {
        this.required = req;
    }
    /**
     * Accessor for [[required]] property
     * @return {?}
     */
    get require() {
        return this.required;
    }
    /**
     * @param {?} css
     * @return {?}
     */
    class(css) {
        this.cssClass = css;
    }
    /**
     * Accessor for [[cssClass]] property
     * @return {?}
     */
    get cssClass() {
        return this._cssClass;
    }
    /**
     * @param {?} boo
     * @return {?}
     */
    set enabled(boo) {
        if (typeof boo === 'string') {
            //if enabled is false, disabled is true
            this.disabled = boo === 'true' ? false : true;
        }
        else {
            this.disabled = !boo;
        }
    }
    /**
     * @return {?}
     */
    get enabled() {
        return !this.disabled;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set sortValue(value) {
        this.sort = value;
    }
    /**
     * @return {?}
     */
    get sortValue() {
        return this.sort;
    }
    /**
     * @return {?}
     */
    get uniqueId() {
        return this._uniqueId;
    }
    /**
     * @return {?}
     */
    get children() {
        return this._children;
    }
    /**
     * Got call when this component finished initializing, if you override this, make sure to call super.ngAfterViewInit()
     * @return {?}
     */
    ngAfterViewInit() {
        if (this.parent != null) {
            this.parent.addChild(this);
        }
        this._childrenIndex = uniq(this._childrenIndex);
        //commnet out, causing regression b/c the css selector need id of parent window
        // if (this.renderer != null && typeof this.renderer["removeAttribute"] === "function") {
        //   this.renderer.removeAttribute(this.elementRef.nativeElement, "id");
        // }
    }
    /**
     * Init life cycle of this class, if you override this, make sure to call super.ngOnInit()
     * @return {?}
     */
    ngOnInit() {
        this.initBorderLayout();
        if (this.fontBold === true || this.fontBold === "true") {
            this.setFontBold(true);
        }
        if (this.fontItalic === true || this.fontItalic === "true") {
            this.styles["font-style"] = "italic";
            this.setFontItalic(true);
        }
        if (this.fontSize != null) {
            this.setFontSize(this.fontSize);
        }
        if (this.fontUnderline === true || this.fontUnderline === "true") {
            this.setFontUnderline(true);
        }
        if (this.fontColor != null) {
            this.setColor(this.fontColor);
        }
        if (this.autoWrap === true) {
            this.styles["white-space"] = "normal";
            this.markForCheck();
        }
        else if (this.autoWrap === false) {
            this.styles["white-space"] = "nowrap";
            this.markForCheck();
        }
        this.checkNxStyling();
    }
    /**
     * @param {?=} skipAttributeOverride
     * @return {?}
     */
    checkNxStyling(skipAttributeOverride = false) {
        if (skipAttributeOverride !== true && this._cssClass != null && this._cssClass.length > 0 && typeof AppUtils.attributeOverrideClass === "function") {
            /** @type {?} */
            let newAttributes = AppUtils.attributeOverrideClass(this._cssClass);
            if (newAttributes != null) {
                /** @type {?} */
                const newCssClass = filter(newAttributes, (attr) => attr.attributeName === AttributesEnum.CLASS).map((attr) => attr.value).join(" ");
                newAttributes = filter(newAttributes, (attr) => attr.attributeName !== AttributesEnum.CLASS);
                newAttributes.push({
                    attributeName: AttributesEnum.CLASS,
                    value: (this._cssClass + " " + newCssClass).trim(),
                });
                this.setAttributes(newAttributes, true);
            }
        }
        if (this.elementRef != null) {
            /** @type {?} */
            const _validate = this.elementRef.nativeElement.getAttribute("validate");
            if (skipAttributeOverride !== true && _validate != null && _validate.length > 0) {
                /** @type {?} */
                let newAttributes = AppUtils.attributeOverrideValidate(_validate);
                if (newAttributes != null) {
                    /** @type {?} */
                    const newCssClass = filter(newAttributes, (attr) => attr.attributeName === AttributesEnum.CLASS).map((attr) => attr.value).join(" ");
                    newAttributes = filter(newAttributes, (attr) => attr.attributeName !== AttributesEnum.CLASS);
                    newAttributes.push({
                        attributeName: AttributesEnum.CLASS,
                        value: (this._cssClass + " " + newCssClass).trim(),
                    });
                    this.setAttributes(newAttributes, true);
                }
            }
        }
    }
    /**
     * Sets border CSS based on borderPosition value (top | left | bottom | right)
     * @return {?}
     */
    initBorderLayout() {
        if (this.borderPosition != null && this.borderPosition != '') {
            if (this._cssClass != null) {
                this._cssClass = this._cssClass + ' border-' + this.borderPosition;
            }
            else {
                this._cssClass = 'border-' + this.borderPosition;
            }
        }
    }
    /**
     * Destroy lifecycle. Clear component references and cache
     * @return {?}
     */
    ngOnDestroy() {
        this.cleanup();
        this._isDying = true;
        /** @type {?} */
        const parentView = this.getParentView();
        if (parentView != null) {
            //remove ourself from the view children map
            if (parentView._viewChildrenMap != null) {
                parentView._viewChildrenMap.delete(KeyUtils.toMapKey(this.getId()));
            }
        }
        this._internalChangeCb = null;
        if (this.parent) {
            this.parent.removeChild(this);
        }
        if (this._viewChildrenMap != null) {
            this._viewChildrenMap.clear();
        }
        if (this._children !== null) {
            this._children.clear();
        }
        this._childrenIndex = null;
        this._viewChildrenMap = null;
        this.parent = null;
        this.sessionService = null;
        this.attributeChangeListeners = null;
        this.radioButtonGroups = null;
        this.elementRef = null;
        this.scrollPanes = null;
    }
    /**
     * @return {?}
     */
    cleanup() {
    }
    /**
     * Get [[SessionService]] instance injected via constructor
     * @return {?} SessionService instance
     */
    getSession() {
        return this.sessionService;
    }
    /**
     * Get child component by id
     * @param {?} id Component ID
     * @return {?} Child [[BaseComponent]]
     */
    getChild(id) {
        if (this._children !== null) {
            return this._children.get(KeyUtils.toMapKey(id));
        }
        else {
            return null;
        }
    }
    /**
     * Set [[disabled]] property value
     * @param {?} boo Value for disabled property
     * @return {?}
     */
    setDisabled(boo) {
        this.disabled = boo;
        this.markForCheck();
    }
    /**
     * Set [[visible]] property value
     * @param {?} boo Value for visible property
     * @return {?}
     */
    setVisible(boo) {
        this.visible = boo;
        this.markForCheck();
    }
    /**
     * @param {?} expression
     * @return {?}
     */
    setScrollPosVertical(expression) {
        //TODO
    }
    /**
     * Set color of text on the component
     * @param {?} value Color string. Should be hexadecimal or color name supported by CSS
     * @return {?}
     */
    setFontColor(value) {
        this.setColor(value);
    }
    /**
     * Value of [[disabled]] property
     * @return {?} Value of disabled
     */
    getDisabled() {
        return this.disabled;
    }
    /**
     * Value of opposite of [[disabled]] value
     * @return {?} Value of enabled
     */
    getEnabled() {
        return !this.getDisabled();
    }
    /**
     * Value of soColumnNo attribute
     * @return {?} Column number
     */
    getSoColumnNo() {
        return this.getAttribute("soColumnNo");
    }
    /**
     * Get the component ref string value from [[editor]] property
     * @return {?} Ref of component
     */
    getEditor() {
        return this.editor;
    }
    /**
     * Value of soRequire attribute
     * @return {?} soRequire value
     */
    getSoRequire() {
        return this.getAttribute("soRequire");
    }
    /**
     * Value of soValidate attribute
     * @return {?} soValidate value
     */
    getSoValidate() {
        return this.getAttribute("soValidate");
    }
    /**
     * Value of soType attribute
     * @return {?} soType value
     */
    getSoType() {
        return this.getAttribute("soType");
    }
    /**
     * Value of soFormat attribute
     * @return {?} soFormat value
     */
    getSoFormat() {
        return this.getAttribute("soFormat");
    }
    /**
     * Value of soMin attribute
     * @return {?} soMin value
     */
    getSoMin() {
        return this.getAttribute("soMin");
    }
    /**
     * Value of soMax attribute
     * @return {?} soMax value
     */
    getSoMax() {
        return this.getAttribute("soMax");
    }
    /**
     * Value of soMaxLength attribute
     * @return {?} soMaxLength value
     */
    getSoMaxLength() {
        return this.getAttribute("soMaxLength");
    }
    /**
     * Value of soPattern attribute
     * @return {?} soPattern value
     */
    getSoPattern() {
        return this.getAttribute("soPattern");
    }
    /**
     * Value of soMaxByteLen attribute
     * @return {?} soMaxByteLen value
     */
    getSoMaxByteLen() {
        return this.getAttribute("soMaxByteLen");
    }
    /**
     * Set [[disabled]] property to opposite of input
     * @param {?} boo Value of enabled
     * @return {?}
     */
    setEnabled(boo) {
        if (typeof boo === 'string') {
            boo = boo === 'true' ? true : false;
        }
        this.setDisabled(!boo);
    }
    /**
     * Set value of [[sort]] property
     * @param {?} value Sort value to set
     * @return {?}
     */
    setSortValue(value) {
        this.sort = value;
    }
    /**
     * Get value of [[visible]] property
     * @return {?} Visble property value
     */
    getVisible() {
        return this.visible;
    }
    /**
     * Sets value of text attribute and marks component for change detection
     * @param {?} value Text to set. If it's a null value, it will be converted to an empty string
     * If it's a number or non-string, it will be converted to a string representation of the value.
     * @return {?}
     */
    setText(value) {
        if (typeof value === 'string') {
            this.text = value;
        }
        else if (value == null) {
            this.text = '';
        }
        else {
            this.text = value + '';
        }
        this.markForCheck();
    }
    /**
     * Set callback function for [[onCommand]]
     * @param {?} fn Function to be invoked for [[onCommand]] event
     * @return {?}
     */
    setOnCommand(fn) {
        this._internalOnCommand = fn;
    }
    /**
     * Set callback function for [[onActiveLost]]
     * @param {?} fn Function to be invoked for [[onActiveLost]] event
     * @return {?}
     */
    setOnActiveLost(fn) {
        this._internalOnActiveLost = fn;
    }
    /**
     * Set all attributes in one go
     *
     * @param {?} attrs
     * @param {?=} skipAttributeOverride Set to 'true' if you do not want custom attribute to override exisiting HTML attribute
     * @return {?}
     */
    setAttributes(attrs, skipAttributeOverride = false) {
        this._tempFreezeCd = true;
        for (const attr of attrs) {
            this.setAttribute(attr.attributeName, attr.value, skipAttributeOverride);
        }
        this._tempFreezeCd = false;
        this.markForCheck();
    }
    /**
     * Set HTML attribute value on component
     * @param {?} attribute HTML attribute to set
     * @param {?} value Value of attribute
     * @param {?=} skipAttributeOverride Set to 'true' if you do not want custom attribute to override exisiting HTML attribute
     * @return {?}
     */
    setAttribute(attribute, value, skipAttributeOverride = false) {
        if (typeof attribute === 'string') {
            /** @type {?} */
            const originalAttributeName = attribute;
            attribute = attribute.toLowerCase();
            if (attribute === "id") {
                this.setAttribute(AttributesEnum.ID, value);
            }
            else if (attribute === 'visible') {
                this.setAttribute(AttributesEnum.VISIBLE, value);
            }
            else if (attribute === "class") {
                this.setAttribute(AttributesEnum.CLASS, value);
            }
            else if (attribute === 'enabled') {
                this.setAttribute(AttributesEnum.ENABLED, value);
            }
            else if (attribute === 'disabled') {
                this.setAttribute(AttributesEnum.DISABLED, value);
            }
            else if (attribute === 'text') {
                this.setAttribute(AttributesEnum.TEXT, value);
            }
            else if (attribute === 'color') {
                this.setAttribute(AttributesEnum.COLOR, value);
            }
            else if (attribute === "title") {
                this.setAttribute(AttributesEnum.TITLE, value);
            }
            else if (attribute === "require") {
                this.setAttribute(AttributesEnum.REQUIRE, value);
            }
            else if (attribute === "fontBold" || attribute === "fontbold") {
                this.setAttribute(AttributesEnum.FONT_BOLD, value);
            }
            else if (attribute === "selected") {
                this.setAttribute(AttributesEnum.SELECTED, value);
            }
            else if (attribute === "bgcolor") {
                this.setAttribute(AttributesEnum.BG_COLOR, value);
            }
            else if (attribute === "value") {
                this.setAttribute(AttributesEnum.VALUE, value);
            }
            else if (attribute === "maxlength" || attribute === "max_length") {
                this.setAttribute(AttributesEnum.MAX_LENGTH, value);
            }
            else if (attribute === "require" || attribute === "required") {
                this.setRequire(value);
            }
            else if (attribute === "width") {
                this.setControlWidth(value);
            }
            else if (attribute === "height") {
                this.setControlHeight(value);
            }
            else if (attribute === "fontSize" || attribute === "fontsize") {
                this.setFontSize(value);
            }
            else if (attribute === "oncommand") {
                this.setOnCommand(value);
            }
            else if (attribute === "onactivelost") {
                this.setOnActiveLost(value);
            }
            else if (attribute === "pattern") {
                this.setAttribute(AttributesEnum.PATTERN, value);
            }
            else if (attribute === "max") {
                this.setAttribute(AttributesEnum.MAX, value);
            }
            else if (attribute === "min") {
                this.setAttribute(AttributesEnum.MIN, value);
            }
            else if (JavaUtils.isNumber(originalAttributeName) === true) {
                this.setAttribute(parseInt$1(originalAttributeName), value);
            }
            else {
                this.setCustomAttribute(originalAttributeName, value);
                // Logger.warn(`Unknown attribute: ${attribute}, setting as custom attribute`);
                if (attribute === "validate" && skipAttributeOverride !== true && value != null && value.length > 0) {
                    /** @type {?} */
                    let newAttributes = AppUtils.attributeOverrideValidate(value);
                    if (newAttributes != null) {
                        /** @type {?} */
                        const newCssClass = filter(newAttributes, (attr) => attr.attributeName === AttributesEnum.CLASS).map((attr) => attr.value).join(" ");
                        newAttributes = filter(newAttributes, (attr) => attr.attributeName !== AttributesEnum.CLASS);
                        newAttributes.push({
                            attributeName: AttributesEnum.CLASS,
                            value: (this._cssClass + " " + newCssClass).trim(),
                        });
                        this.setAttributes(newAttributes, true);
                    }
                }
            }
            this.fireSetAttributeEvent(originalAttributeName, value);
        }
        else {
            if (attribute === AttributesEnum.CLASS && skipAttributeOverride !== true && value != null && value.length > 0 && typeof AppUtils.attributeOverrideClass === "function") {
                /** @type {?} */
                let newAttributes = AppUtils.attributeOverrideClass(value);
                if (newAttributes != null) {
                    /** @type {?} */
                    const newCssClass = filter(newAttributes, (attr) => attr.attributeName === AttributesEnum.CLASS).map((attr) => attr.value).join(" ");
                    newAttributes = filter(newAttributes, (attr) => attr.attributeName !== AttributesEnum.CLASS);
                    newAttributes.push({
                        attributeName: AttributesEnum.CLASS,
                        value: (this._cssClass + " " + newCssClass).trim(),
                    });
                    this.setAttributes(newAttributes, true);
                }
            }
            if (attribute === AttributesEnum.ID) {
                this.setId(value);
            }
            else if (attribute === AttributesEnum.VISIBLE) {
                if (value != null && value !== "") {
                    this.setVisible(JavaUtils.parseBoolean(value));
                }
            }
            else if (attribute === AttributesEnum.CLASS) {
                this.setCssClass(value, skipAttributeOverride);
            }
            else if (attribute === AttributesEnum.DISABLED) {
                if (value != null && value !== "") {
                    this.setDisabled(JavaUtils.parseBoolean(value));
                }
            }
            else if (attribute === AttributesEnum.ENABLED) {
                if (value != null && value !== "") {
                    this.setDisabled(!JavaUtils.parseBoolean(value));
                }
            }
            else if (attribute === AttributesEnum.TEXT) {
                this.setText(value);
            }
            else if (attribute === AttributesEnum.COLOR) {
                this.setColor(value);
            }
            else if (attribute === AttributesEnum.FONT_BOLD) {
                this.setFontBold(value);
            }
            else if (attribute === AttributesEnum.ON_COMMAND) {
                this.setOnCommand(value);
            }
            else if (attribute === AttributesEnum.REQUIRE) {
                this.setRequire(value);
            }
            else if (attribute === AttributesEnum.TITLE) {
                this.setTitle(value);
            }
            else if (attribute === AttributesEnum.SELECTED) {
                this.setSelected(value);
            }
            else if (attribute === AttributesEnum.BG_COLOR) {
                this.setBgColor(value);
            }
            else if (attribute === AttributesEnum.VALUE) {
                this.setValue(value);
            }
            else if (attribute === AttributesEnum.MAX_LENGTH) {
                this.setMaxLength(value);
            }
            else if (attribute === AttributesEnum.MAX) {
                this.setMax(value);
            }
            else if (attribute === AttributesEnum.MIN) {
                this.setMin(value);
            }
            else if (attribute === AttributesEnum.PATTERN) {
                this.setPattern(value);
            }
            else {
                Logger.warn('Unable to set attribute, unknown attribute id: ' + attribute);
            }
            this.markForCheck();
        }
    }
    /**
     * Get value of HTML attribute
     * @param {?} attribute Name of HTML attribute to get
     * @param {?=} skipQueryDOMIfNotExists
     * @return {?} Value of attribute
     */
    getAttribute(attribute, skipQueryDOMIfNotExists = false) {
        if (typeof attribute === 'string') {
            /** @type {?} */
            const attributeLower = attribute.toLowerCase();
            if (attributeLower === 'visible') {
                return this.getVisible() + '';
            }
            else if (attributeLower === 'enabled') {
                return this.getEnabled() + '';
            }
            else if (attributeLower === 'disabled') {
                return this.getDisabled() + '';
            }
            else if (attributeLower === 'text') {
                return this.getText();
            }
            else if (attributeLower === 'color') {
                return this.getColor();
            }
            else if (attributeLower === 'require') {
                return this.getRequired() + '';
            }
            else if (attributeLower === "value") {
                return this.getValue();
            }
            else if (attributeLower === "selected") {
                return this.getChecked() + '';
            }
            else if (attributeLower === "id") {
                return this.getId();
            }
            else if (attributeLower === "pattern") {
                return this.getPattern();
            }
            else if (attributeLower === "min") {
                return this.getMin();
            }
            else if (attributeLower === "max") {
                return this.getMax();
            }
            else if (attributeLower === "max_length") {
                return this.getMaxLength();
            }
            else if (this.customAttributes != null && this.customAttributes[attribute] !== undefined) {
                return this.getCustomAttribute(attribute);
            }
            else if (attribute === "isLockedColumn") {
                return false;
            }
            else if (skipQueryDOMIfNotExists !== true) {
                Logger.warn(`Attribute ${attribute} does not exists, trying to get from DOM`);
                if (this.elementRef != null) {
                    return this.elementRef.nativeElement.getAttribute(attribute);
                }
            }
            else {
                return undefined;
            }
        }
        else if (attribute === AttributesEnum.VISIBLE) {
            return this.getVisible() + '';
        }
        else if (attribute === AttributesEnum.DISABLED) {
            return this.getDisabled() + '';
        }
        else if (attribute === AttributesEnum.ENABLED) {
            return !this.getDisabled() + '';
        }
        else if (attribute === AttributesEnum.TEXT) {
            return this.getText();
        }
        else if (attribute === AttributesEnum.COLOR) {
            return this.getColor();
        }
        else if (attribute === AttributesEnum.REQUIRE) {
            return this.getRequired() + '';
        }
        else if (attribute === AttributesEnum.VALUE) {
            return this.getValue();
        }
        else if (attribute === AttributesEnum.SELECTED) {
            return this.getChecked() + '';
        }
        else if (attribute === AttributesEnum.PATTERN) {
            return this.getPattern();
        }
        else if (attribute === AttributesEnum.MIN) {
            return this.getMin();
        }
        else if (attribute === AttributesEnum.MAX) {
            return this.getMax();
        }
        else if (attribute === AttributesEnum.MAX_LENGTH) {
            return this.getMaxLength();
        }
        else {
            console.error('Unable to get attribute, unknown attribute id: ' + attribute);
        }
        return undefined;
    }
    /**
     * Focus the HTML element of this component
     * @return {?}
     */
    requestFocus() {
        if (this.getElement() != null) {
            this.getElement().focus();
        }
    }
    /**
     * Focus the native HTML element of the component and mark for change detection
     * @return {?}
     */
    setFocus() {
        if (this.elementRef != null) {
            (/** @type {?} */ (this.elementRef.nativeElement)).focus();
            this.markForCheck();
        }
    }
    /**
     * Event handler for when focus is lost. Invokes onActiveLost event handler
     * \@event [[OnActiveLost]]
     * @return {?}
     */
    focusLost() {
        this.onActiveLost.emit();
        if (typeof this._internalOnActiveLost === 'function') {
            this._internalOnActiveLost(this);
        }
    }
    /**
     * Creates a unique id using an optional prefix
     * @param {?=} prefix String to append to beginning of ID
     * @return {?} Unique ID
     */
    static generateUniqueId(prefix = 'base') {
        return prefix + Date.now() + '_' + random(1, 1000) + random(1, 100);
    }
    /**
     * Adds child component to this component
     * @param {?} child Component to add as child
     * @return {?}
     */
    addChild(child) {
        if (child.id !== this.id) {
            /** @type {?} */
            const childKey = KeyUtils.toMapKey(child.id);
            if (this._children === null) {
                this._children = new Map();
            }
            if (this._childrenIndex === null) {
                this._childrenIndex = new Array();
            }
            this._children.set(childKey, child);
            this._childrenIndex.push(child.id);
            /** @type {?} */
            const parentView = this.getParentView();
            if (parentView != null && (child.isFauxElement() || child.isDialog() !== true)) {
                if (parentView._viewChildrenMap == null) {
                    parentView._viewChildrenMap = new Map();
                }
                parentView._viewChildrenMap.set(childKey, child);
                //track ScrollPane for scroll adjustment
                if (typeof child.isScrollPane === "function" && child.isScrollPane() === true) {
                    parentView.registerScrollPane(child);
                }
            }
        }
    }
    /**
     * Get the native element of the component if a reference to it is defined
     * @return {?} The HTML native element or 'null' if reference is missing
     */
    getElement() {
        return this.elementRef ? this.elementRef.nativeElement : null;
    }
    /**
     * Get the text property value
     * @return {?} Text value
     */
    getText() {
        return this.text;
    }
    /**
     * Set CSS color style attribute and marks for change detection
     * @param {?} color CSS color string value. Should be hexadecimal or valid CSS color string
     * @return {?}
     */
    setColor(color) {
        if (color == null || color === "") {
            delete this.styles['color'];
        }
        else {
            this.styles['color'] = color;
        }
        this.markForCheck();
    }
    /**
     * Get the color style attribute value
     * @return {?} Color string. Hexadecimal or CSS color string
     */
    getColor() {
        return this.styles['color'];
    }
    /**
     * Set background color CSS style attribute value
     * @param {?} bgColor Color string value to set. Should be hexadecimal or valid CSS color string.
     * @return {?}
     */
    setBgColor(bgColor) {
        this.bgColor = bgColor;
        this.styles["background"] = bgColor;
        this.markForCheck();
    }
    /**
     * Sets font-weight style property to bold
     * @param {?} boo Switch for turning bold style on/off
     * @return {?}
     */
    setFontBold(boo) {
        this.fontBold = boo;
        if (boo === true || boo === "true") {
            this.styles["font-weight"] = "bold";
        }
        else {
            delete this.styles["font-weight"];
        }
        this.markForCheck();
    }
    /**
     * Sets CSS style attribute font-style to italic
     * @param {?} boo Switch for turning italic style on/off
     * @return {?}
     */
    setFontItalic(boo) {
        this.fontItalic = boo;
        if (boo === true || boo === "true") {
            this.styles["font-style"] = "italic";
        }
        else {
            delete this.styles["font-style"];
        }
    }
    /**
     * Sets CSS style attribute font-size
     * @param {?} size Number of pixels for font-size
     * @return {?}
     */
    setFontSize(size) {
        this.fontSize = size;
        this.styles["font-size"] = size + "px";
    }
    /**
     * Add/remove CSS style attribute text-decoration to underline
     * @param {?} underline Switch for turning underline style on/off for text
     * @return {?}
     */
    setFontUnderline(underline) {
        this.fontUnderline = underline;
        if (this.fontUnderline === "true" || this.fontUnderline === true) {
            this.styles["text-decoration"] = "underline";
        }
        else {
            delete this.styles["text-decoration"];
        }
    }
    /**
     * Event handler that registers focus event
     * @param {?} event
     * @return {?}
     */
    handleFocus(event) {
        this.registerClientEvent(event);
    }
    /**
     * Event handler that registers click event
     * @param {?} event
     * @return {?}
     */
    handleClick(event) {
        this.registerClientEvent(event);
    }
    /**
     * Event handler that registers keydown event
     * @param {?} event
     * @return {?}
     */
    handleKeyDown(event) {
        this.registerClientEvent(event);
    }
    /**
     * Event handler that registers keyup event
     * @param {?} event
     * @return {?}
     */
    handleKeyUp(event) {
        this.registerClientEvent(event);
    }
    /**
     * Event handler that registers mousedown event
     * @param {?} event
     * @return {?}
     */
    handleMouseDown(event) {
        this.registerClientEvent(event);
    }
    /**
     * Gets custom attribute by name if it exists
     * @param {?} attributeName Name of custom attribute
     * @return {?} Custom attribute if it exists, otherwise undefined
     */
    getCustomAttribute(attributeName) {
        if (this.customAttributes != null) {
            return this.customAttributes[attributeName];
        }
        return undefined;
    }
    /**
     * Set attribute on customAttribute object using name as key
     * @param {?} name key name of attribute
     * @param {?} value value to set for key/name
     * @return {?}
     */
    setCustomAttribute(name, value) {
        if (this.customAttributes == null) {
            this.customAttributes = {};
        }
        if (value != null) {
            this.customAttributes[name] = value + '';
        }
    }
    /**
     * Check if custom attribute exists
     * @param {?} id Key name of attribute
     * @return {?} True if custom attribute with name/key exists
     */
    hasCustomAttribute(id) {
        return this.customAttributes != null && this.customAttributes[id] != null;
    }
    /**
     * Get child component by index
     * @param {?} idx Index of child component
     * @return {?} Child [[BaseComponent]]
     */
    getChildAt(idx) {
        if (this._childrenIndex !== null) {
            if (this._childrenIndex.length > idx) {
                return this.getChild(this._childrenIndex[idx]);
            }
        }
        return null;
    }
    /**
     * Get the number of child components
     * @return {?} Number of children
     */
    getChildCount() {
        if (this._children !== null) {
            return this._children.size;
        }
        else {
            return 0;
        }
    }
    /**
     * Get index of child component if it exists
     * @param {?} child Child component
     * @return {?}
     */
    indexOfChild(child) {
        //TODO
        console.error("indexOfChild is not implemented");
        return -1;
    }
    /**
     * Insert child component to children array at location of index
     * @param {?} idx Index of insert location
     * @param {?} row
     * @return {?}
     */
    insertChildAt(idx, row) {
        //TODO
        console.error("insertChildAt is not implemented");
    }
    /**
     * TODO: Add documentation for emitInternalCommand
     * @return {?}
     */
    emitInternalOnCommand() {
        if (typeof this._internalOnCommand === 'function') {
            this._internalOnCommand(this);
            return true;
        }
        else if (typeof this._internalOnCommand === "string") {
            this.invokeMcoAction(this._internalOnCommand);
        }
        return false;
    }
    /**
     * Registers event handler for client event
     * @param {?} event Event to register
     * @return {?}
     */
    registerClientEvent(event) {
        /** @type {?} */
        const clientEvent = new ClientEvent(this, event);
        if (AppUtils.customizeClientEvent != null) {
            AppUtils.customizeClientEvent(this, clientEvent);
        }
        this.getSession().getEventHandler().setClientEvent(clientEvent);
    }
    /**
     * Get the native HTML element tag name
     * @return {?} Name of HTML element tag
     */
    getTagName() {
        return this.elementRef != null ? this.elementRef.nativeElement.tagName : '';
    }
    /**
     * Get component tag name without vivify core prefix (i.e. "vt-")
     * @return {?} Tag name
     */
    getLocalName() {
        return this.getTagName().toLowerCase().replace("vt-", "");
    }
    /**
     * Get the parent component if it exists
     * @return {?} Component or null if there is no parent
     */
    getParent() {
        return this.parent;
    }
    /**
     * Get value property if it exists, otherwise return 'null'
     * @return {?} Value or 'null'
     */
    getValue() {
        if (this["value"]) {
            return this["value"];
        }
        return null;
    }
    /**
     * Removes attribute name name
     * @param {?} attribute Attribute to remove
     * @return {?}
     */
    removeAttribute(attribute) {
        if (typeof attribute === 'string') {
            /** @type {?} */
            const attributeLower = attribute.toLowerCase();
            if (attributeLower === 'visible') {
                this.removeAttribute(AttributesEnum.VISIBLE);
            }
            else if (attributeLower === 'enabled') {
                this.removeAttribute(AttributesEnum.ENABLED);
            }
            else if (attributeLower === 'disabled') {
                this.removeAttribute(AttributesEnum.DISABLED);
            }
            else if (attributeLower === 'text') {
                this.removeAttribute(AttributesEnum.TEXT);
            }
            else if (attributeLower === 'color') {
                this.removeAttribute(AttributesEnum.COLOR);
            }
            else if (attributeLower === 'pattern') {
                this.removeAttribute(AttributesEnum.PATTERN);
            }
            else if (attributeLower === 'max') {
                this.removeAttribute(AttributesEnum.MAX);
            }
            else if (attributeLower === 'maxlength' || attributeLower === 'max_length') {
                this.removeAttribute(AttributesEnum.MAX_LENGTH);
            }
            else if (attributeLower === 'min') {
                this.removeAttribute(AttributesEnum.MIN);
            }
            else if (attributeLower === 'class') {
                this.removeAttribute(AttributesEnum.CLASS);
            }
            else if (attributeLower === 'oncommand' || attributeLower === 'on_command') {
                this.removeAttribute(AttributesEnum.ON_COMMAND);
            }
            else if (attributeLower === 'require') {
                this.removeAttribute(AttributesEnum.REQUIRE);
            }
            else if (attributeLower === 'title') {
                this.removeAttribute(AttributesEnum.TITLE);
            }
            else if (attributeLower === 'fontbold' || attributeLower === 'font_bold') {
                this.removeAttribute(AttributesEnum.FONT_BOLD);
            }
            else if (attributeLower === 'selected') {
                this.removeAttribute(AttributesEnum.SELECTED);
            }
            else if (attributeLower === 'bgColor') {
                this.removeAttribute(AttributesEnum.BG_COLOR);
            }
            else if (attributeLower === 'value') {
                this.removeAttribute(AttributesEnum.VALUE);
            }
            else if (this.customAttributes != null) {
                delete this.customAttributes[attribute];
                Logger.warn(`Unknown attribute: ${attribute}, setting as custom attribute`);
            }
            this.fireRenoveAttributeEvent(attribute);
        }
        else if (attribute === AttributesEnum.VISIBLE) {
            this.setVisible(true);
        }
        else if (attribute === AttributesEnum.DISABLED) {
            this.setDisabled(false);
        }
        else if (attribute === AttributesEnum.ENABLED) {
            this.setEnabled(true);
        }
        else if (attribute === AttributesEnum.TEXT) {
            delete this.text;
            this.markForCheck();
        }
        else if (attribute === AttributesEnum.COLOR) {
            this.setColor("");
        }
        else if (attribute === AttributesEnum.ON_COMMAND) {
            delete this._internalOnCommand;
        }
        else if (attribute === AttributesEnum.PATTERN) {
            this.setPattern(undefined);
        }
        else if (attribute === AttributesEnum.MAX) {
            this.setMax(undefined);
        }
        else if (attribute === AttributesEnum.MAX_LENGTH) {
            this.setMaxLength(undefined);
        }
        else if (attribute === AttributesEnum.MIN) {
            this.setMin(undefined);
        }
        else {
            Logger.warn('Unable to set attribute, unknown attribute id: ' + attribute);
        }
    }
    /**
     * Alias of [[setRequired]]
     * @param {?} boo
     * @return {?}
     */
    setRequire(boo) {
        this.setRequired(boo);
    }
    /**
     * Set [[required]] to true or false
     * @param {?} boo
     * @return {?}
     */
    setRequired(boo) {
        if (boo === 'true' || boo === true) {
            this.required = true;
        }
        else {
            this.required = false;
        }
        this.markForCheck();
    }
    /**
     * Set [[pattern]] value
     * @param {?} pattern
     * @return {?}
     */
    setPattern(pattern) {
        this.pattern = pattern;
        this.markForCheck();
    }
    /**
     * Set [[min]] value
     * @param {?} val
     * @return {?}
     */
    setMin(val) {
        this.min = val;
        this.markForCheck();
    }
    /**
     * Set [[max]] value
     * @param {?} val
     * @return {?}
     */
    setMax(val) {
        this.max = val;
        this.markForCheck();
    }
    /**
     * Get [[pattern]] value
     * @return {?} [[pattern]]
     */
    getPattern() {
        return this.pattern;
    }
    /**
     * Get [[min]] value
     * @return {?} [[min]]
     */
    getMin() {
        return this.min;
    }
    /**
     * Get [[max]] value
     * @return {?} [[max]]
     */
    getMax() {
        return this.max;
    }
    /**
     * Get [[inputLocale]] value
     * @return {?} [[inputLocale]]
     */
    getInputLocale() {
        return this.inputLocale;
    }
    /**
     * Set [[inputLocale]] value
     * @param {?} locale
     * @return {?}
     */
    setInputLocale(locale) {
        this.inputLocale = locale;
        this.markForCheck();
    }
    /**
     * Get [[inputCharsets]] value
     * @return {?} [[inputCharsets]]
     */
    getInputCharsets() {
        return this.inputCharsets;
    }
    /**
     * Set [[inputCharests]] value
     * @param {?} inputCharSets
     * @return {?}
     */
    setInputCharsets(inputCharSets) {
        this.inputCharsets = inputCharSets;
        this.markForCheck();
    }
    /**
     * Get [[id]] value
     * @return {?} [[id]]
     */
    getId() {
        return this.id;
    }
    /**
     * Set [[id]] value
     * @param {?} id
     * @return {?}
     */
    setId(id) {
        if (this.parent != null && this.parent.children.has(this.id)) {
            this.parent.children.delete(KeyUtils.toMapKey(this.id));
            this.parent.children.set(KeyUtils.toMapKey(id), this);
            if (this._childrenIndex !== null) {
                /** @type {?} */
                const idx = findIndex(this.parent._childrenIndex, (item) => item === this.id);
                if (idx >= 0) {
                    this.parent._childrenIndex[idx] = id;
                }
                else {
                    this.parent._childrenIndex.push(id);
                }
                this.parent._childrenIndex = uniq(this.parent._childrenIndex);
            }
        }
        this.id = id;
    }
    /**
     * Abstract method. Implemented by sub class components
     * @param {?} title
     * @return {?}
     */
    setTitle(title) {
        //impl. by sub class
    }
    /**
     * Set [[cssClass]] of component.
     * @param {?} css Class (CSS) name to set on component. For multiple CSS classes, join with DOT (.)
     * ```
     * .class1.class2.class3
     * ```
     * @param {?=} skipAttributeOverride
     * @return {?}
     */
    setCssClass(css, skipAttributeOverride = false) {
        if (css != null && css.indexOf(".") >= 0) {
            /** @type {?} */
            const temp = css.split("\.");
            this.cssClass = temp.join("-");
            if (temp[0] === "") {
                this.cssClass = this.cssClass.substring(1);
            }
        }
        this.cssClass = css;
        this.checkNxStyling(skipAttributeOverride);
        this.markForCheck();
    }
    /**
     * Adds a css class name to the internal [[_cssClass]] property
     * @param {?} css CSS class name to add
     * @return {?}
     */
    addCssClass(css) {
        if (this._cssClass == null || this._cssClass === "") {
            this._cssClass = css;
        }
        else if (this._cssClass.indexOf(css) == -1) {
            this._cssClass = `${this._cssClass} ${css}`;
        }
        this.checkNxStyling();
        this.markForCheck();
    }
    /**
     * Removes css class name from internal [[_cssClass]] property
     * @param {?} css CSS class name to remove
     * @return {?}
     */
    removeCssClass(css) {
        if (this._cssClass != null)
            this._cssClass = this._cssClass.replace(css, '');
        this.checkNxStyling();
        this.markForCheck();
    }
    /**
     * Get the [[require]] property value
     * @return {?} Value of [[require]]
     */
    getRequired() {
        return this.require;
    }
    /**
     * Remove all references to the component and invokes Angulars [[ngOnDestroy]] method
     * @return {?}
     */
    destroyComponent() {
        if (this.compRef != null) {
            this.compRef.destroy();
        }
        else if (this.elementRef != null) {
            (/** @type {?} */ (this.elementRef.nativeElement)).remove();
            this.ngOnDestroy();
            Logger.warn("Memory leak! Please use ngIf if you want to remove component!");
        }
    }
    /**
     * Gets JSON representation of the component
     * @return {?} JSON object
     */
    toJson() {
        /** @type {?} */
        const retVal = {};
        //get custom attributes binded to our tag
        if (this.elementRef != null && this.elementRef.nativeElement != null) {
            /** @type {?} */
            const el = this.elementRef.nativeElement;
            /** @type {?} */
            let attributes = null;
            if (typeof el.getAttributeNames === "function") {
                attributes = el.getAttributeNames();
            }
            else if (el.attributes) {
                attributes = [];
                for (let i = 0; i < el.attributes.length; i++) {
                    attributes.push(el.attributes[i].name);
                }
            }
            if (attributes != null) {
                forEach(attributes, (attributeName) => {
                    if (typeof AppUtils.validateAttribute === "function" && AppUtils.validateAttribute(attributeName)) {
                        this.setJson(retVal, attributeName, el.getAttribute(attributeName));
                    }
                });
            }
            else if (typeof AppUtils.setCustomAttribute === "function") {
                AppUtils.setCustomAttribute(retVal, el);
            }
        }
        this.setJson(retVal, "nxTagName", this.getNxTagName());
        this.setJson(retVal, "tagName", this.getTagName());
        this.setJson(retVal, "id", this.id);
        this.setJson(retVal, "disabled", this.getDisabled());
        this.setJson(retVal, "enabled", this.getEnabled());
        this.setJson(retVal, "visible", this.getVisible());
        this.setJson(retVal, "text", this.getText());
        this.setJson(retVal, "cssClass", this.cssClass);
        this.setJson(retVal, "customAttributes", this.customAttributesToJson());
        if (this.getValue() != null) {
            this.setJson(retVal, "value", this.getValue());
        }
        if (this._children !== null) {
            if (this._children.size > 0) {
                //need to return children in proper order
                retVal["children"] = [];
                if (this._childrenIndex !== null) {
                    for (let id of this._childrenIndex) {
                        /** @type {?} */
                        const c = this.getChild(id);
                        //getChild can return null?
                        if (c != null) {
                            /** @type {?} */
                            const childJson = this.childToJson(c);
                            if (childJson != null) {
                                retVal["children"].push(childJson);
                            }
                        }
                    }
                }
            }
        }
        return retVal;
    }
    /**
     * Convert child to JSON
     * @param {?} child child to be converted to JSON
     * @return {?}
     */
    childToJson(child) {
        return child.toJson();
    }
    /**
     * Gets JSON representation of [[customAttributes]]
     * @return {?} JSON Object
     */
    customAttributesToJson() {
        return BaseComponent.mapToJson(this.customAttributes);
    }
    /**
     * @param {?} map
     * @return {?}
     */
    static mapToJson(map$$1) {
        /** @type {?} */
        const customAttributes = {};
        if (map$$1) {
            /** @type {?} */
            const keys$$1 = keys(map$$1);
            for (let key of keys$$1) {
                /** @type {?} */
                let value = map$$1[key];
                if (typeof value !== "string" && value != null) {
                    value = value + "";
                }
                customAttributes[key] = value;
            }
        }
        return customAttributes;
    }
    /**
     * Should be implemented by sub class otherwise returns default value of "none"
     * @return {?} NxTagName as string
     */
    getNxTagName() {
        return "none";
    }
    /**
     * Sets JSON values. Mutates JSON object that is passed in
     * @param {?} json Object to add key to
     * @param {?} key Key to set
     * @param {?} value Value to set for key param
     * @return {?}
     */
    setJson(json, key, value) {
        if (key != null) {
            json[key] = this.toJsonValue(value);
        }
    }
    /**
     * Converts value to a valid JSON property string
     * @param {?} value Value to convert to string
     * @return {?} Value as a valid JSON property string
     */
    toJsonValue(value) {
        if (typeof value === 'string') {
            return value;
        }
        else if (typeof value === 'number' || typeof value === 'boolean') {
            return value + '';
        }
        else {
            return value;
        }
    }
    /**
     * Sets [[id]] property to a unique string ID generated by [[_uniqueId]]
     * @return {?}
     */
    resetId() {
        this.id = this._uniqueId;
    }
    /**
     * Get value of checked property. Should be implemented in sub class components that have checked state
     * @return {?} Value of [[checked]] property
     */
    getChecked() {
        return false;
    }
    /**
     * Abstract method. Should be implemented by sub class components that have checked state
     * @param {?} boo Toggle [[checked]] on/off
     * @return {?}
     */
    setChecked(boo) {
        // NO-OP
    }
    /**
     * Abstract method. Should be implemented by sub class components that have selected state
     * @param {?} boo Toggle [[checked]] on/off
     * @return {?}
     */
    setSelected(boo) {
        // NO-OP
    }
    /**
     * Get [[maxLength]] property. Returns -1 if it is null
     * @return {?} Value of maxLength as integer if it's set, otherwise returns null
     */
    getMaxLength() {
        return this.maxLength == null ? -1 : JavaUtils.intValue(this.maxLength);
    }
    /**
     * Get [[minLength]] property. Returns -1 if it is null
     * @return {?} Value of minLength as integer if it's set, otherwise returns null
     */
    getMinLength() {
        return this.minLength == null ? -1 : JavaUtils.intValue(this.minLength);
    }
    /**
     * Get a list of child components
     * @return {?} Child components
     */
    getChildren() {
        /** @type {?} */
        const children = new Vector();
        if (this._childrenIndex !== null) {
            for (let id of this._childrenIndex) {
                /** @type {?} */
                const c = this.getChild(id);
                if (c != null) {
                    children.add(c);
                }
            }
        }
        return children;
    }
    /**
     * Remove child component from list of children and remove children of child
     * @param {?} child Child component to remove
     * @return {?}
     */
    removeChild(child) {
        //if somehow send it as string (via type any)
        if (typeof child === "string") {
            child = /** @type {?} */ (this.getElementById(child));
        }
        if (child != null) {
            //first hide it
            if (child.setVisible) {
                child.setVisible(false);
            }
            if (this.children) {
                this.children.delete(KeyUtils.toMapKey(child.id));
                if (this._childrenIndex !== null) {
                    this._childrenIndex = uniq(filter(this._childrenIndex, (item) => item !== child.id));
                }
            }
            /** @type {?} */
            const parentView = this.getParentView();
            //remove ourself from the view children map
            if (parentView != null && parentView._viewChildrenMap != null) {
                parentView._viewChildrenMap.delete(KeyUtils.toMapKey(child.getId()));
            }
            //move children of children
            if (child.removeAllChildren) {
                child.removeAllChildren();
            }
        }
    }
    /**
     * Removes child component by ID
     * @param {?} id Child [[id]]
     * @return {?}
     */
    removeChildById(id) {
        /** @type {?} */
        const child = this.getElementById(id);
        if (child != null) {
            this.removeChild(child);
        }
    }
    /**
     * Remove all child components
     * @return {?}
     */
    removeAllChildren() {
        if (this.children != null) {
            /** @type {?} */
            const cit = this.children.values();
            /** @type {?} */
            let cr = cit.next();
            while (cr.done !== true) {
                this.removeChild(cr.value);
                cr = cit.next();
            }
        }
        if (this.tabChildrenIds != null) {
            this.tabChildrenIds.forEach(cid => {
                this.removeChildById(cid);
            });
        }
    }
    /**
     * Finds the child component by ID. Deep search
     * @param {?} id Child component [[id]]
     * @return {?}
     */
    getElementById(id) {
        return this.findElementById(id);
    }
    /**
     * Check if a child component with id exists
     * @param {?} id Child component [id]
     * @return {?}
     */
    hasChild(id) {
        return this.findElementById(id) != null;
    }
    /**
     * Set validate attribute for input component. Implement on sub class component
     * @param {?} attr
     * @return {?}
     */
    setValidate(attr) {
        //TODO
        console.error("setValidate is not implemented");
    }
    /**
     * Set type attribute for input component. Implement on sub class component
     * @param {?} type
     * @return {?}
     */
    setType(type) {
        //TODO
        console.error("setType is not implemented");
    }
    /**
     * Set format attribute for input component. Implement on sub class component
     * @param {?} format
     * @return {?}
     */
    setFormat(format) {
        //TODO
        console.error("setFormat is not implemented");
    }
    /**
     * Set [[maxLength]] for input component
     * @param {?} maxLength Input max length property. Should be numeric string
     * @return {?}
     */
    setMaxLength(maxLength) {
        this.maxLength = maxLength;
        this.markForCheck();
    }
    /**
     * Set [[minLength]] for input component
     * @param {?} minLength Input max length property. Should be numeric string
     * @return {?}
     */
    setMinLength(minLength) {
        this.minLength = minLength;
        this.markForCheck();
    }
    /**
     * Set [[maxLength]] as byte length for input component
     * @param {?} bl Should be numeric string
     * @return {?}
     */
    setMaxByteLen(bl) {
        this.setMaxLength(bl);
    }
    /**
     * Abstract method. Set value of input component
     * @param {?} val Value to set
     * @return {?}
     */
    setValue(val) {
    }
    /**
     * Set focusable property value for component. Implement on sub class
     * @param {?} focusable Toggle focusable on/off
     * @return {?}
     */
    setFocusable(focusable) {
        //TODO
    }
    /**
     * Abstract. Select parent component tab. Implement on sub class
     * @return {?}
     */
    selectParentTab() {
        /**
         * @param {?} item
         * @return {?}
         */
        function findTabBelong(item) {
            if (item != null) {
                /** @type {?} */
                const parent = item.getParent();
                if (parent != null && parent.getLocalName() !== 'tab')
                    return findTabBelong(parent);
                return parent;
            }
        }
        /** @type {?} */
        const tab = /** @type {?} */ (findTabBelong(this.getElementById(this.id)));
        /**
         * @param {?} tab
         * @return {?}
         */
        function findTabPaneBelong(tab) {
            if (tab != null) {
                /** @type {?} */
                const parent = tab.getParent();
                if (parent != null && parent.getLocalName() !== 'tab-pane')
                    return findTabPaneBelong(parent);
                return parent;
            }
        }
        /** @type {?} */
        const tabPane = /** @type {?} */ (findTabPaneBelong(this.getElementById(this.id)));
        if (tab != null) {
            tabPane.setSelectedTab(tab.id);
        }
    }
    /**
     * Perform a deep search (that is, looks up descendants)
     * @param {?} id element id to search
     * @return {?}
     */
    findElementById(id) {
        /** @type {?} */
        const mappedChildId = KeyUtils.toMapKey(id);
        /** @type {?} */
        let comp = null;
        //first check for cache
        // let comp: BaseComponent = UiDocument.getFromCache(mappedChildId);
        if (comp == null) {
            /** @type {?} */
            const radioGroup = this.getRadioButtonGroupComponent(id);
            if (radioGroup != null) {
                comp = radioGroup;
            }
            if (comp == null) {
                //get all children from View
                // const allChildren = this.getParentView().reduceChildrenIterative();
                // const editorId = `#{id}`;
                // for (let child of allChildren) {
                //   if (
                //     KeyUtils.toMapKey(child.getId()) === mappedChildId ||
                //     //by editor id (e.g. editor="#editorId")
                //     child.editor === editorId
                //   ) {
                //     comp = child;
                //     break;
                //   }
                // }
                if (this._viewChildrenMap != null) {
                    comp = this._viewChildrenMap.get(mappedChildId);
                }
                if (comp == null && this.isView() !== true) {
                    /** @type {?} */
                    const parentView = this.getParentView();
                    if (parentView != null) {
                        comp = parentView.findElementById(mappedChildId);
                    }
                }
            }
            //if we find component, add to cache
            // if (comp != null) {
            //   UiDocument.addToCache(mappedChildId, comp);
            // }
        }
        if (comp === undefined) {
            comp = null;
        }
        return comp;
    }
    /**
     * Get radio button group component by id
     * @param {?} id Radio button group ID
     * @return {?}
     */
    getRadioButtonGroupComponent(id) {
        if (id === (/** @type {?} */ (this)).group) {
            //radio button group
            return this;
        }
        else {
            /** @type {?} */
            const radioGroup = this.getRadioButtonGroup(id);
            if (radioGroup != null) {
                /** @type {?} */
                let retVal = radioGroup[0];
                for (let radio of radioGroup) {
                    if (radio.getChecked() === true) {
                        retVal = radio;
                        break;
                    }
                }
                return retVal;
            }
        }
        return null;
    }
    /**
     * Add change listener on attributes
     * @param {?} listener
     * @return {?}
     */
    addAttributeChangeListener(listener) {
        if (this.attributeChangeListeners == null) {
            this.attributeChangeListeners = [];
        }
        listener._internalId = BaseComponent.generateUniqueId('listener');
        this.attributeChangeListeners.push(listener);
    }
    /**
     * Remove change listener on attributes
     * @param {?} listener
     * @return {?}
     */
    removeAttributeChangeListener(listener) {
        if (this.attributeChangeListeners != null) {
            this.attributeChangeListeners = filter(this.attributeChangeListeners, (item) => item._internalId !== listener._internalId);
        }
    }
    /**
     * Set attribute and emit change event
     * \@event AttributeChangeEvent
     * @param {?} attributeName
     * @param {?} newValue
     * @return {?}
     */
    fireSetAttributeEvent(attributeName, newValue) {
        if (this.attributeChangeListeners && this.attributeChangeListeners.length > 0) {
            /** @type {?} */
            const event = new AttributeChangeEvent(attributeName, this.getAttribute(attributeName), newValue, this);
            forEach(this.attributeChangeListeners, (listener) => {
                listener.onAttributeSet(event);
            });
        }
    }
    /**
     * Remove attribute and emit change event
     * \@event AttributeChangeEvent
     * @param {?} attributeName
     * @return {?}
     */
    fireRenoveAttributeEvent(attributeName) {
        if (this.attributeChangeListeners && this.attributeChangeListeners.length > 0) {
            /** @type {?} */
            const event = new AttributeChangeEvent(attributeName, this.getAttribute(attributeName), null, this);
            forEach(this.attributeChangeListeners, (listener) => {
                listener.onAttributeRemoved(event);
            });
        }
    }
    /**
     * Alias for static [[cleanCss]] method
     * @param {?} css
     * @return {?}
     */
    cleanCss(css) {
        return BaseComponent.cleanCss(css);
    }
    /**
     * Format css selectors. Remove dot
     * @param {?} css
     * @return {?} New CSS selector string
     */
    static cleanCss(css) {
        if (css != null && css.indexOf(".") >= 0) {
            //more than one style?
            if (css.indexOf(" ") > 0) {
                return map(css.split(" "), (item) => this.cleanCss(item)).join(" ");
            }
            else {
                //only one style
                return css.replace(/\./g, '-').replace(/^\-/, '');
            }
        }
        return css;
    }
    /**
     * Abstract method gets the instance's [[ChangeDetectorRef]]. Should be implemented in sub class
     * @return {?}
     */
    getChangeDetector() {
        //sub-class override
        return null;
    }
    /**
     * Mark component for change detection
     * @return {?}
     */
    markForCheck() {
        if (this._tempFreezeCd !== true && this._isDying !== true) {
            if (this.getChangeDetector() != null) {
                this.getChangeDetector().markForCheck();
            }
        }
    }
    /**
     * Invoke change detection on component
     * @return {?}
     */
    detectChanges() {
        if (this._tempFreezeCd !== true && this._isDying !== true) {
            if (this.getChangeDetector() != null) {
                this.getChangeDetector().detectChanges();
            }
        }
    }
    /**
     * Set CSS height and width style value. Either 'height/width' or 'max-height/max-width'
     * @param {?=} heightStyleName
     * @param {?=} widthStyleName
     * @return {?}
     */
    initWidthHeightStyle(heightStyleName = 'height', widthStyleName = 'max-width') {
        if (this.controlHeight != null && this.controlHeight != "" && parseInt(this.controlHeight) > 0) {
            this.styles["height"] = parseInt(this.controlHeight) + "px";
        }
        if (this.controlWidth != null && this.controlWidth != "" && parseInt(this.controlWidth) > 0) {
            this.styles[widthStyleName] = parseInt(this.controlWidth) + "px";
        }
    }
    /**
     * Add a radio button component to this component
     * @param {?} radio
     * @return {?}
     */
    addRadioButtonGroup(radio) {
        //radio group need to be at ViewComponent level
        if (this.isView() !== true && this.getParent() != null) {
            return this.getParent().addRadioButtonGroup(radio);
        }
        if (this.radioButtonGroups == null) {
            this.radioButtonGroups = new Map();
        }
        /** @type {?} */
        let groupId = (/** @type {?} */ (radio)).group;
        if (this.radioButtonGroups.get(groupId) == null) {
            this.radioButtonGroups.set(groupId, [radio]);
        }
        else {
            this.radioButtonGroups.get(groupId).push(radio);
        }
        return;
    }
    /**
     * Get radio button group by group ID
     * @param {?} groupId
     * @return {?} Radio button group component
     */
    getRadioButtonGroup(groupId) {
        /** @type {?} */
        let view = this.getParentView();
        return view != null && view.radioButtonGroups != null ? view.radioButtonGroups.get(groupId) : null;
    }
    /**
     * Sets [[controlWidth]] property
     * @param {?} width Should be numeric value
     * @return {?}
     */
    setControlWidth(width) {
        this.controlWidth = width;
        this.initWidthHeightStyle();
        this.markForCheck();
    }
    /**
     * Sets [[controlHeight]] property
     * @param {?} height Should be numeric value
     * @return {?}
     */
    setControlHeight(height) {
        this.controlHeight = height;
        this.initWidthHeightStyle();
        this.markForCheck();
    }
    /**
     * Alias for [[setControlWidth]] method
     * @param {?} width Should be a numeric value
     * @return {?}
     */
    setWidth(width) {
        this.setControlWidth(width);
    }
    /**
     * Get [[controlWidth]] property
     * @return {?} Value of [[controlWidth]]
     */
    getWidth() {
        return this.controlWidth;
    }
    /**
     * Alias for [[setControlHeight]] method
     * @param {?} height Should be a numeric value
     * @return {?}
     */
    setHeight(height) {
        this.setControlHeight(height);
    }
    /**
     * Get [[controlHeight]] property
     * @return {?} Value of [[controlHeight]]
     */
    getHeight() {
        return this.controlHeight;
    }
    /**
     * Sets value of [[x]] property for horizontal position.
     * Sets CSS "left" property to [[x]] px.
     * @param {?} x Horizontal coordinate position
     * @return {?}
     */
    setX(x) {
        this.x = x;
        this.styles["left"] = x + "px";
        this.markForCheck();
    }
    /**
     * Get [[x]] property
     * @return {?} Value of [[x]]
     */
    getX() {
        return this.x;
    }
    /**
     * Sets value of [[y]] property for vertical position.
     * Sets CSS "top" property to [[y]] px.
     * @param {?} y Vertical coordinate position
     * @return {?}
     */
    setY(y) {
        this.y = y;
        this.styles["top"] = y + "px";
        this.markForCheck();
    }
    /**
     * Get [[y]] property
     * @return {?} Value of [[y]]
     */
    getY() {
        return this.y;
    }
    /**
     * Set [[borderWidth]] property value
     * @param {?} borderWidth Should be numeric
     * @return {?}
     */
    setBorderWidth(borderWidth) {
        this.borderWidth = borderWidth;
        this.markForCheck();
    }
    /**
     * Check if component is view component.
     * Implement in sub class
     * @return {?}
     */
    isView() {
        return false;
    }
    /**
     * Check if there are active views.
     * Implement in sub class
     * @return {?}
     */
    isNoneActiveView() {
        return false;
    }
    /**
     * Check if this component is an instance of [[DialogComponent]]
     * @return {?}
     */
    isDialog() {
        return false;
    }
    /**
     * Check if this component is a dynamic view
     * @return {?}
     */
    isDynamicView() {
        return false;
    }
    /**
     * Get the parent view of this component
     * @return {?} Parent view component
     */
    getParentView() {
        if (this.isView()) {
            return this;
        }
        /** @type {?} */
        let parentView = null;
        if (this.parent != null) {
            /** @type {?} */
            let stack = [this.parent];
            while (stack.length > 0) {
                /** @type {?} */
                const temp = stack.pop();
                if (temp.isView() === true) {
                    parentView = temp;
                    break;
                }
                if (temp.parent != null) {
                    stack.push(temp.parent);
                }
            }
        }
        return parentView;
    }
    /**
     * @return {?}
     */
    getParentScrollView() {
        if (this.isScrollView()) {
            return this;
        }
        /** @type {?} */
        let parentView = null;
        if (this.parent != null) {
            /** @type {?} */
            let stack = [this.parent];
            while (stack.length > 0) {
                /** @type {?} */
                const temp = stack.pop();
                if (temp.isScrollView() === true) {
                    parentView = temp;
                    break;
                }
                if (temp.parent != null) {
                    stack.push(temp.parent);
                }
            }
        }
        return parentView;
    }
    /**
     * @return {?}
     */
    isScrollView() {
        return false;
    }
    /**
     * Return the parent container component (for subview), not the actual parent view. This is the parent
     * ViewComponent where canBeActiveView is false
     * @return {?}
     */
    _getNoneActiveViewParent() {
        if (this.isNoneActiveView()) {
            return this;
        }
        /** @type {?} */
        let parentView = null;
        if (this.parent != null) {
            /** @type {?} */
            let stack = [this.parent];
            while (stack.length > 0) {
                /** @type {?} */
                const temp = stack.pop();
                if (temp.isNoneActiveView() === true) {
                    parentView = temp;
                    break;
                }
                if (temp.parent != null) {
                    stack.push(temp.parent);
                }
            }
        }
        return parentView;
    }
    /**
     * Event handler for context menu click (right click).
     * Delegates to [[SessionService]] to display popup.
     * @param {?} event Click event
     * @param {?=} force always emit
     * @return {?}
     */
    handleOnContextMenu(event, force = false) {
        //allow component to skip emit event and let parent (i.e. table cell to emit it)
        if (force === true || this.skipEmitContextMenuEvent !== true) {
            if (this.getSession() != null) {
                this.getSession().setMousePosition(event);
            }
            /** @type {?} */
            const parentView = this.getParentView();
            /** @type {?} */
            let popupMenuId = null;
            if (parentView != null) {
                popupMenuId = (/** @type {?} */ (parentView)).getFirstPopupMenuId();
            }
            this.onContextMenu.emit(event);
            if (this.popup != null && this.popup !== "") {
                if (this.popup.indexOf("#") === 0) {
                    this.popup = this.popup.substring(1);
                }
                popupMenuId = this.popup;
                this.getSession()._currentPopupMenuId = this.popup;
            }
            if (popupMenuId != null) {
                event.stopPropagation();
                event.preventDefault();
                /** @type {?} */
                const tm = setTimeout(() => {
                    clearTimeout(tm);
                    if (this.getSession()._currentPopupMenuId != null) {
                        popupMenuId = this.getSession()._currentPopupMenuId;
                    }
                    this.getSession().showContextMenu(popupMenuId);
                    this.getSession()._currentPopupMenuId = null;
                });
            }
        }
    }
    /**
     * Emits focus lost event for components that require validation
     * \@event BeforeActiveLost
     * @param {?} event
     * @return {?}
     */
    validateField(event) {
        if (AppUtils.validateField != null && AppUtils.validateField(this) !== true) {
            event.preventDefault();
            event.stopPropagation();
        }
        this.onBeforeActiveLost.emit();
        this.focusLost();
    }
    /**
     * Get children of a table component.
     * @return {?} Array of table children
     */
    getTableChildren() {
        return [];
    }
    /**
     * Get [[bgColor]] property
     * @return {?} Value of [[bgColor]]
     */
    getBgColor() {
        return this.bgColor;
    }
    /**
     * @return {?}
     */
    setAttributeFromDef() {
        /** @type {?} */
        const compDef = this.getSession().getDef(this.id);
        if (compDef != null && compDef.attribute != null) {
            if (compDef.attribute instanceof Map ||
                compDef.attribute instanceof Hashtable ||
                compDef.attribute instanceof HashMap) {
                /** @type {?} */
                const keys$$1 = compDef.attribute.keys();
                /** @type {?} */
                let key = keys$$1.next();
                while (key.done !== true) {
                    this.setAttribute(key.value, compDef.attribute.get(key));
                    key = keys$$1.next();
                }
            }
            else {
                /** @type {?} */
                const keys$$1 = keys(compDef.attribute);
                for (let key of keys$$1) {
                    this.setAttribute(key, compDef.attribute[key]);
                }
            }
        }
    }
    /**
     * Perform an xpath lookup on the element. This will be evaluated against the actual HTMLElement.
     *
     * \@warning PLEASE ENSURE TO FREE UP THE THE RESULT SO WE DON'T HAVE ANY DANGLING HTML ELEMENT
     *
     * @param {?} xpathExpression
     * @return {?}
     */
    evaluateXPath(xpathExpression) {
        return null;
    }
    /**
     * Set color of hightlighted text background
     * @param {?} color Should be a valid CSS color value (e.g. "#FF0000" or "red")
     * @return {?}
     */
    setHighlightBgColor(color) {
        this.highlightBgColor = color;
    }
    /**
     * Set color of highlighted text foreground
     * @param {?} color Should be a valid CSS color value (e.g. "#FF0000" or "red")
     * @return {?}
     */
    setHighlightFontColor(color) {
        this.highlightFontColor = color;
    }
    /**
     * Get [[hightlightBgColor]] property
     * @return {?} Color string
     */
    getHighlightBgColor() {
        return this.highlightBgColor;
    }
    /**
     * Get [[highlightFontColor]] property
     * @return {?} Color string
     */
    getHighlightFontColor() {
        return this.highlightFontColor;
    }
    /**
     * Get [[parentTableRow]] property
     * @return {?}
     */
    getParentTableRow() {
        return this.parentTableRow;
    }
    /**
     * Check if change detection is frozen
     * @return {?} Boolean If component change detection is frozen
     */
    isChangeDetectionFrozen() {
        return false;
    }
    /**
     * Check if component is a faux element
     * @return {?} Boolean If component is faux element
     */
    isFauxElement() {
        return false;
    }
    /**
     * Get internal [[_viewChildrenMap]] member
     * @return {?} Value of [[_viewChildrenMap]]
     */
    getViewChildrenMap() {
        return this._viewChildrenMap;
    }
    /**
     * Removes view child with id from [[_viewChildrenMap]]
     * @param {?} id ID of child to remove
     * @return {?}
     */
    removeViewChildFromMap(id) {
        if (this._viewChildrenMap != null) {
            this._viewChildrenMap.delete(KeyUtils.toMapKey(id));
        }
    }
    /**
     * Adds a component to [[_viewChildrenMap]]
     * @param {?} obj Child to add to [[_viewChildrenMap]]
     * @return {?}
     */
    addViewChildToMap(obj) {
        if (this._viewChildrenMap != null) {
            this._viewChildrenMap.set(KeyUtils.toMapKey(obj.getId()), /** @type {?} */ (obj));
        }
    }
    /**
     * Invoke an MCO method by name. If a function is passed as argument, it will be called with
     * this component as an argument.
     * @param {?} action Name of action method to invoke or a function to invoke
     * @return {?}
     */
    invokeMcoAction(action) {
        if (typeof action === "function") {
            action(this);
        }
        else if (action.indexOf("mco://") === 0) {
            /** @type {?} */
            const mcoName = action.substring(6, action.indexOf("."));
            /** @type {?} */
            const methodName = action.substring(action.indexOf(".") + 1, action.indexOf("("));
            /** @type {?} */
            const arg = action.substring(action.indexOf("(") + 1, action.indexOf(")"));
            if (arg != null && arg.length > 0) {
                /** @type {?} */
                const mco = this.sessionService.getMcoContainer().getMco(mcoName);
                if (mco != null) {
                    if (arg === "this") {
                        mco[methodName].apply(mco, [this]);
                    }
                    else {
                        mco[methodName].apply(mco, [arg]);
                    }
                }
                else {
                    console.error("Unable to execute MCO action, mco not found: " + mcoName);
                }
            }
            else {
                /** @type {?} */
                const mco = this.sessionService.getMcoContainer().getMco(mcoName);
                if (mco != null) {
                    mco[methodName].apply(mco);
                }
                else {
                    console.error("Unable to execute MCO action, mco not found: " + mcoName);
                }
            }
        }
    }
    /**
     * @return {?}
     */
    _notifyInternalChangeCb() {
        if (typeof this._internalChangeCb === "function") {
            this._internalChangeCb(this);
        }
    }
    /**
     * @return {?}
     */
    emptyChildren() {
        if (this._viewChildrenMap != null) {
            /** @type {?} */
            const cit = this._viewChildrenMap.values();
            /** @type {?} */
            let val = cit.next();
            while (val.done !== true) {
                //some children are not actual BaseComponent
                if (typeof val.value.emptyChildren === "function") {
                    val.value.emptyChildren();
                    val.value._isDying = true;
                }
                val = cit.next();
            }
        }
        if (this.children != null) {
            this.children.clear();
        }
        if (this._viewChildrenMap != null) {
            this._viewChildrenMap.clear();
            delete this._viewChildrenMap;
        }
        // this._viewChildrenMap = null;
    }
    /**
     * Check to see if this is a ScrollPaneComponent
     * @return {?}
     */
    isScrollPane() {
        return false;
    }
    /**
     * Reset the scroll position to the previous captured
     * @return {?}
     */
    resetScrollTopToPreviousPosition() {
        //implement by scrollpane
    }
    /**
     * Reset all scrollpane pos
     * @return {?}
     */
    resetAllScrollPanesPositionToPrevious() {
        if (this.scrollPanes != null) {
            this.scrollPanes.forEach((scrollPane) => scrollPane.resetScrollTopToPreviousPosition());
        }
    }
    /**
     * @return {?}
     */
    resetScrollTopPosition() {
    }
    /**
     * @return {?}
     */
    resetAllScrollPanesPositionToTop() {
        if (this.scrollPanes != null) {
            this.scrollPanes.forEach((scrollPane) => scrollPane.resetScrollTopPosition());
        }
    }
    /**
     * Notify parent view that there is a validation error on this, this should only be applicabled to disabled element
     * @return {?}
     */
    notifyParentOfError() {
        if (this.getDisabled() === true) {
            /** @type {?} */
            const parentView = this.getParentView();
            if (parentView != null && parentView["dialog"] != null) {
                if (parentView["dialog"]._disabledErrorElementId == null) {
                    parentView["dialog"]._disabledErrorElementId = [];
                }
                if (parentView["dialog"]._disabledErrorElementId.indexOf(this.getId()) < 0) {
                    parentView["dialog"]._disabledErrorElementId.push(this.getId());
                }
            }
        }
    }
    /**
     * Focus the parent tab
     * @return {?}
     */
    focusParentTab() {
        /** @type {?} */
        const parentView = this._getNoneActiveViewParent() || this.getParentView();
        if (parentView != null) {
            /** @type {?} */
            const tabPane = parentView.getParent();
            //check to see if the parent is a Tab
            if (tabPane != null && tabPane.getNxTagName() === "tab") {
                tabPane.setFocus();
            }
        }
    }
    /**
     * Register scrollpane
     *
     * @param {?} scrollPane scrollPane to register
     * @return {?}
     */
    registerScrollPane(scrollPane) {
        if (typeof scrollPane.isScrollPane === "function" && scrollPane.isScrollPane() === true) {
            if (this.scrollPanes == null) {
                this.scrollPanes = [];
            }
            this.scrollPanes.push(scrollPane);
        }
    }
}
BaseComponent.decorators = [
    { type: Component, args: [{
                selector: 'vt-base',
                template: 'nothing here'
            }] }
];
/** @nocollapse */
BaseComponent.ctorParameters = () => [
    { type: BaseComponent, decorators: [{ type: Optional }, { type: SkipSelf }] },
    { type: SessionService },
    { type: ElementRef },
    { type: Renderer2 }
];
BaseComponent.propDecorators = {
    autoWrap: [{ type: Input }],
    borderPosition: [{ type: Input }],
    id: [{ type: Input }],
    disabled: [{ type: Input }],
    sort: [{ type: Input }],
    visible: [{ type: Input }],
    text: [{ type: Input }],
    cssClass: [{ type: Input }],
    controlWidth: [{ type: Input }],
    controlHeight: [{ type: Input }],
    maxHeight: [{ type: Input }],
    lineHeight: [{ type: Input }],
    marginRight: [{ type: Input }],
    marginLeft: [{ type: Input }],
    marginTop: [{ type: Input }],
    marginBottom: [{ type: Input }],
    controlMargin: [{ type: Input }],
    controlPadding: [{ type: Input }],
    controlOverflow: [{ type: Input }],
    panelWidth: [{ type: Input }],
    panelMinWidth: [{ type: Input }],
    panelMinHeight: [{ type: Input }],
    controlFloat: [{ type: Input }],
    required: [{ type: Input }],
    pattern: [{ type: Input }],
    min: [{ type: Input }],
    max: [{ type: Input }],
    minLength: [{ type: Input }],
    maxLength: [{ type: Input }],
    inputLocale: [{ type: Input }],
    inputCharsets: [{ type: Input }],
    focusOnActivation: [{ type: Input }],
    focused: [{ type: Input }],
    orderIndex: [{ type: Input }],
    x: [{ type: Input }],
    y: [{ type: Input }],
    require: [{ type: Input }],
    controlWidthComboBox: [{ type: Input }],
    class: [{ type: Input }],
    hGrabSpace: [{ type: Input }],
    vGrabSpace: [{ type: Input }],
    bgColor: [{ type: Input }],
    editor: [{ type: Input }],
    popup: [{ type: Input }],
    alignHorizontal: [{ type: Input }],
    enabled: [{ type: Input }],
    sortValue: [{ type: Input }],
    customAttributes: [{ type: Input }],
    fontBold: [{ type: Input }],
    fontColor: [{ type: Input }],
    fontItalic: [{ type: Input }],
    fontSize: [{ type: Input }],
    fontUnderline: [{ type: Input }],
    fontColorDisabled: [{ type: Input }],
    opacity: [{ type: Input }],
    borderColor: [{ type: Input }],
    borderWidth: [{ type: Input }],
    borderStyle: [{ type: Input }],
    borderHeight: [{ type: Input }],
    skipEmitContextMenuEvent: [{ type: Input }],
    onContextMenu: [{ type: Output }],
    onActiveLost: [{ type: Output }],
    onBeforeActiveLost: [{ type: Output }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class McoContainerModule {
}
McoContainerModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule
                ],
                declarations: [],
                providers: [
                    McoContainerService
                ]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class EventHandlerModule {
}
EventHandlerModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    McoContainerModule
                ],
                declarations: [],
                providers: [
                    EventHandlerService
                ]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class SessionModule {
}
SessionModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    McoContainerModule,
                    EventHandlerModule
                ],
                declarations: [],
                providers: [
                    SessionService
                ]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class JavaModule {
}
JavaModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule
                ],
                declarations: []
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class OnCreateDirective {
    /**
     * @param {?} elementRef
     * @param {?} zone
     */
    constructor(elementRef, zone) {
        this.elementRef = elementRef;
        this.zone = zone;
        this.vtOnCreate = new EventEmitter();
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        if (this.runOutsideZone === true) {
            this.zone.runOutsideAngular(() => {
                this.vtOnCreate.emit({
                    element: this.elementRef
                });
            });
        }
        else {
            this.vtOnCreate.emit({
                element: this.elementRef
            });
        }
    }
}
OnCreateDirective.decorators = [
    { type: Directive, args: [{
                selector: '[vtOnCreate]'
            },] }
];
/** @nocollapse */
OnCreateDirective.ctorParameters = () => [
    { type: ElementRef },
    { type: NgZone }
];
OnCreateDirective.propDecorators = {
    runOutsideZone: [{ type: Input }],
    vtOnCreate: [{ type: Output }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class BaseModule {
}
BaseModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    SessionModule,
                    JavaModule,
                    EventHandlerModule
                ],
                declarations: [BaseComponent, OnCreateDirective],
                exports: [BaseComponent, OnCreateDirective]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @enum {number} */
const ComponentType = {
    LABEL: 0,
    BUTTON: 1,
    TEXT_FIELD: 2,
    COMBOBOX: 3,
    CHECKBOX: 4,
    RADIO: 5,
    TEXTAREA: 6,
};
ComponentType[ComponentType.LABEL] = 'LABEL';
ComponentType[ComponentType.BUTTON] = 'BUTTON';
ComponentType[ComponentType.TEXT_FIELD] = 'TEXT_FIELD';
ComponentType[ComponentType.COMBOBOX] = 'COMBOBOX';
ComponentType[ComponentType.CHECKBOX] = 'CHECKBOX';
ComponentType[ComponentType.RADIO] = 'RADIO';
ComponentType[ComponentType.TEXTAREA] = 'TEXTAREA';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Button component class. Inherits from [[BaseComponent]]
 */
class ButtonComponent extends BaseComponent {
    /**
     * @param {?} parent
     * @param {?} sessionService
     * @param {?} elementRef
     * @param {?} cd
     * @param {?} renderer
     */
    constructor(parent, sessionService, elementRef, cd, renderer) {
        super(parent, sessionService, elementRef, renderer);
        this.cd = cd;
        this.focused = true;
        this.onCommand = new EventEmitter();
    }
    /**
     * Init lifecycle. Must call parent ngOnInit
     * @return {?}
     */
    ngOnInit() {
        super.ngOnInit();
        if (this.marginTop != null) {
            this.marginTop = this.marginTop + 'px';
        }
        if (this.marginRight != null) {
            this.marginRight = this.marginRight + 'px';
        }
        if (this.marginLeft != null) {
            this.marginLeft = this.marginLeft + 'px';
        }
    }
    /**
     * After view init lifecycle. Must call parent ngAfterViewInit
     * @return {?}
     */
    ngAfterViewInit() {
        super.ngAfterViewInit();
        this.initWidthHeightStyle("height", "width");
        this.setAttributeFromDef();
        this.cd.detectChanges();
    }
    /**
     * Event handler for click event
     * \@event OnCommand
     * @param {?} event
     * @return {?}
     */
    onClick(event) {
        event.stopPropagation();
        //register client event for mco
        this.handleClick(event);
        this.onCommand.emit();
        //it looks like you can change onCommand binding at runtime and since we are code
        //we add another fn to do it (we may removed this later once we have a better of usage)
        this.emitInternalOnCommand();
    }
    /**
     * Event handler for mousedown event
     * @param {?} e
     * @return {?}
     */
    onMouseDown(e) {
        /** @type {?} */
        let currentTarget = e.currentTarget['id'];
        if (currentTarget != null && currentTarget.indexOf("BtnClose") > 0) {
            AppUtils.isCloseBtn = true;
        }
        else {
            AppUtils.isCloseBtn = false;
        }
        this.handleMouseDown(e);
    }
    /**
     * @return {?}
     */
    handleOnBlur() {
        AppUtils.isCloseBtn = false;
    }
    /**
     * Get change detector reference for the button instance
     * @return {?} [[cd]] property (Change detector)
     */
    getChangeDetector() {
        return this.cd;
    }
    /**
     * Get Nexaweb tag name
     * @return {?} String
     */
    getNxTagName() {
        return "button";
    }
    /**
     * Get JSON representation of the button component
     * @return {?} Json object
     */
    toJson() {
        /** @type {?} */
        const json = super.toJson();
        this.setJson(json, "focused", this.focused);
        return json;
    }
}
ButtonComponent.decorators = [
    { type: Component, args: [{
                selector: 'vt-button',
                template: "<button [disabled]=\"disabled || !enabled\"\n        [ngClass]=\"{'hidden': visible != true}\"\n\t\t\t\t[style.color]=\"fontColor\"\n\t\t\t\t[id]=\"id\"\n\t\t\t\ttype=\"button\" class=\"btn btn-default {{cssClass}}\"\n\t\t\t\t(mousedown)=\"onMouseDown($event)\"\n\t\t\t\t(click)=\"onClick($event)\"\n        (contextmenu)=\"handleOnContextMenu($event)\"\n        (blur)=\"handleOnBlur()\"\n        [ngStyle]=\"styles\"\n        [style.padding]=\"controlPadding\"\n        [style.margin-top]=\"marginTop\"\n        [style.margin-left]=\"marginLeft\"\n        [style.margin-right]=\"marginRight\"\n        [style.margin-bottom]=\"marginBottom\"\n        [style.line-height]=\"lineHeight\">\n\t{{ text }}\n\t<!-- allow children (in case user want to display html) -->\n\t<ng-content></ng-content>\n</button>\n",
                changeDetection: ChangeDetectionStrategy.OnPush,
                providers: [
                    {
                        provide: BaseComponent,
                        useExisting: forwardRef(() => ButtonComponent)
                    }
                ],
                styles: [""]
            }] }
];
/** @nocollapse */
ButtonComponent.ctorParameters = () => [
    { type: BaseComponent, decorators: [{ type: Optional }, { type: SkipSelf }] },
    { type: SessionService },
    { type: ElementRef },
    { type: ChangeDetectorRef },
    { type: Renderer2 }
];
ButtonComponent.propDecorators = {
    focused: [{ type: Input }],
    onCommand: [{ type: Output }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class ButtonModule {
}
ButtonModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    BaseModule
                ],
                declarations: [ButtonComponent],
                exports: [ButtonComponent],
                entryComponents: [
                    ButtonComponent
                ]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Check box component class
 */
class CheckboxComponent extends BaseComponent {
    /**
     * @param {?} parent
     * @param {?} sessionService
     * @param {?} elementRef
     * @param {?} cd
     * @param {?} renderer
     */
    constructor(parent, sessionService, elementRef, cd, renderer) {
        super(parent, sessionService, elementRef, renderer);
        this.cd = cd;
        this.checked = false;
        this.onCommand = new EventEmitter();
        this.onStateChange = new EventEmitter();
        this.onSelect = new EventEmitter();
    }
    /**
     * @param {?} boo
     * @return {?}
     */
    set isChecked(boo) {
        this.checked = boo;
    }
    /**
     * @return {?}
     */
    get isChecked() {
        return this.checked;
    }
    /**
     * Init lifecycle. Must call parent class ngOnInit
     * @return {?}
     */
    ngOnInit() {
        super.ngOnInit();
    }
    /**
     * After view init lifecycle. Must call parent class ngAfterViewInit
     * @return {?}
     */
    ngAfterViewInit() {
        super.ngAfterViewInit();
        this.setAttributeFromDef();
        this.cd.detectChanges();
    }
    /**
     * Event handler for click event
     * \@event OnCommand
     * @param {?} event
     * @return {?}
     */
    onClick(event) {
        //consume the event, do not propagate any further
        event.stopPropagation();
        this.handleClick(event);
        this.onCommand.emit();
    }
    /**
     * Event handler for mousedown event
     * @param {?} event
     * @return {?}
     */
    onMouseDown(event) {
        //consume the event, do not propagate any further
        event.stopPropagation();
        this.handleMouseDown(event);
    }
    /**
     * Event handler for state change (check/uncheck)
     * \@event OnStateChange
     * \@event OnSelect If the checkbox is set to selected state
     * @return {?}
     */
    handleStateChange() {
        this.onStateChange.emit();
        if (this.checked === true) {
            this.onSelect.emit();
        }
        //notify internal changes (for internal use only)
        this._notifyInternalChangeCb();
    }
    /**
     * Get component name
     * @return {?} Name of component
     */
    getLocalName() {
        return "checkBox";
    }
    /**
     * Get [[checked]] property
     * @return {?} Value of [[checked]]
     */
    getChecked() {
        return this.checked;
    }
    /**
     * Set [[checked]] property value
     * @param {?} shouldChecked Value should be true/false or "true"/"false" to set [[checked]]
     * @param {?=} skipInternalChange
     * @return {?}
     */
    setChecked(shouldChecked, skipInternalChange = false) {
        this.checked = shouldChecked === true || shouldChecked === 'true';
        this.markForCheck();
        //notify internal changes (for internal use only)
        if (skipInternalChange !== true) {
            this._notifyInternalChangeCb();
        }
    }
    /**
     * Alias for [[setChecked]] method
     * @param {?} boo Toggle [[checked]]
     * @return {?}
     */
    setSelected(boo) {
        this.setChecked(boo);
    }
    /**
     * Get [[value]] property
     * @return {?} Value of [[value]]
     */
    getValue() {
        return this.value;
    }
    /**
     * Get JSON representation of component state
     * @return {?} Object Json object
     */
    toJson() {
        /** @type {?} */
        const json = super.toJson();
        if (this.getChecked() === true) {
            json["selected"] = "true";
        }
        else {
            json["selected"] = "false";
        }
        if (this.value != null) {
            json["value"] = this.value + '';
        }
        return json;
    }
    /**
     * Get Nexaweb tag name
     * @return {?} String Tag name
     */
    getNxTagName() {
        return "checkBox";
    }
    /**
     * Get [[cd]] (Change detector) property
     * @return {?} The component's change detector reference
     */
    getChangeDetector() {
        return this.cd;
    }
    /**
     * Set background-color
     * @param {?} color
     * @return {?}
     */
    setBgColor(color) {
        this['elementRef'].nativeElement.children[0]['style']['background-color'] = color;
    }
    /**
     * @return {?}
     */
    getBgColor() {
        return this['elementRef'].nativeElement.children[0]['style']['background-color'];
    }
}
CheckboxComponent.decorators = [
    { type: Component, args: [{
                selector: 'vt-check-box',
                template: "<div class=\"checkbox {{cssClass}} {{(disabled ===true) ? 'disabled':''}}\" [ngClass]=\"{'hidden': visible != true}\" (contextmenu)=\"handleOnContextMenu($event)\">\n  <label>\n    <input class=\"input-checkbox\" [disabled]=\"disabled\" [id]=\"id\" type=\"checkbox\" value=\"\" (click)=\"onClick($event)\" (mousedown)=\"onMouseDown($event)\" (change)=\"handleStateChange()\" [(ngModel)]=\"checked\" [required]=\"required\">\n    <span [style.margin-left.px]=\"marginLeft\" [style.margin-right.px]=\"marginRight\">{{text}}</span>\n  </label>\n</div>\n",
                changeDetection: ChangeDetectionStrategy.OnPush,
                providers: [
                    {
                        provide: BaseComponent,
                        useExisting: forwardRef(() => CheckboxComponent)
                    }
                ],
                styles: ["div>label>input{position:static;vertical-align:middle}"]
            }] }
];
/** @nocollapse */
CheckboxComponent.ctorParameters = () => [
    { type: BaseComponent, decorators: [{ type: Optional }, { type: SkipSelf }] },
    { type: SessionService },
    { type: ElementRef },
    { type: ChangeDetectorRef },
    { type: Renderer2 }
];
CheckboxComponent.propDecorators = {
    value: [{ type: Input }],
    checked: [{ type: Input }],
    isChecked: [{ type: Input }],
    onCommand: [{ type: Output }],
    onStateChange: [{ type: Output }],
    onSelect: [{ type: Output }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class CheckboxModule {
}
CheckboxModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    FormsModule,
                    ReactiveFormsModule,
                ],
                declarations: [CheckboxComponent],
                exports: [
                    CheckboxComponent,
                    FormsModule,
                    ReactiveFormsModule,
                ],
                entryComponents: [
                    CheckboxComponent
                ]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class ListItemDirective {
    constructor() { }
}
ListItemDirective.decorators = [
    { type: Directive, args: [{
                selector: 'vt-list-item'
            },] }
];
/** @nocollapse */
ListItemDirective.ctorParameters = () => [];
ListItemDirective.propDecorators = {
    value: [{ type: Input }],
    text: [{ type: Input }],
    selected: [{ type: Input }],
    isChecked: [{ type: Input }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class ListBoxDirective {
    constructor() { }
}
ListBoxDirective.decorators = [
    { type: Directive, args: [{
                selector: 'vt-list-box'
            },] }
];
/** @nocollapse */
ListBoxDirective.ctorParameters = () => [];
ListBoxDirective.propDecorators = {
    listItems: [{ type: ContentChildren, args: [ListItemDirective,] }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class FauxComboElement {
    /**
     * @param {?} comboBox
     * @param {?} valuePair
     */
    constructor(comboBox, valuePair) {
        this.comboBox = comboBox;
        this.valuePair = valuePair;
    }
    /**
     * @param {?} name
     * @param {?} value
     * @return {?}
     */
    setAttribute(name, value) {
        if (name === AttributesEnum.SELECTED || name === "selected") {
            if (value == true || value == "true") {
                this.comboBox.setSelectItem(this.valuePair, true);
            }
            else {
                this.comboBox.setSelectItem(null, true);
            }
            this.valuePair.selected = value == true || value == "true";
            this.comboBox.detectChanges();
        }
        else if (name === AttributesEnum.VISIBLE || name === "visible") {
            this.valuePair.visible = value;
        }
        else if (name === AttributesEnum.TEXT || name === "text") {
            this.valuePair.text = value;
        }
        else if (name === AttributesEnum.VALUE || name === "value") {
            this.valuePair.value = value;
        }
        else {
            console.error("FauxComboElement: Unknown attribute: " + name);
        }
    }
    /**
     * @return {?}
     */
    getLocalName() {
        return FauxComboElement.LOCAL_NAME;
    }
    /**
     * @param {?} name
     * @return {?}
     */
    getAttribute(name) {
        if (name === "value" || name === AttributesEnum.VALUE) {
            return this.valuePair.value;
        }
        if (name === "text" || name === AttributesEnum.TEXT) {
            return this.valuePair.text;
        }
        if (name === "selected" || name === AttributesEnum.SELECTED) {
            return this.valuePair.selected == true ? "true" : "false";
        }
    }
    /**
     * @return {?}
     */
    getValue() {
        return this.getAttribute("value");
    }
    /**
     * @return {?}
     */
    getText() {
        return this.getAttribute("text");
    }
    /**
     * @return {?}
     */
    isSelected() {
        return this.getAttribute("selected");
    }
    /**
     * @param {?} boo
     * @return {?}
     */
    setChecked(boo) {
        this.setAttribute("selected", boo);
    }
}
FauxComboElement.LOCAL_NAME = "listItem";

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Class for combo box component
 */
class ComboBoxComponent extends BaseComponent {
    /**
     *
     * @param {?} parent see [[BaseComponent]]
     * @param {?} sessionService see [[BaseComponent]]
     * @param {?} elementRef see [[BaseComponent]]
     * @param {?} cd ChangeDetector reference provided by Angular to control change detection
     * @param {?} renderer see [[BaseComponent]]
     * @param {?} ngZone
     */
    constructor(parent, sessionService, elementRef, cd, renderer, ngZone) {
        super(parent, sessionService, elementRef, renderer);
        this.cd = cd;
        this.ngZone = ngZone;
        this.onCommand = new EventEmitter();
        this.hoveredStyle = {
            'color': '#0000cd',
            'background-color': '#ff9c00'
        };
        this.defaultStyle = {
            'color': '#333333',
            'background-color': '#ffffff'
        };
        this.dropdownElementId = `dropdown-${this.id}`;
        this.isDropup = false;
        this.isDropdownOpen = false;
        /* istanbul ignore next */
        this.dropdownMenuStyle = {};
        /* istanbul ignore next */
        this.hasInputFocus = false;
        this.isFirstKeyDown = true;
        this.parentScrollHanlder = () => {
            /* istanbul ignore else */
            if (this.dropdown != null) {
                this.dropdown.hide();
            }
        };
    }
    /**
     * @param {?} items
     * @return {?}
     */
    set listItems(items) {
        this._listItems = items;
        if (this._listItems != null) {
            /** @type {?} */
            const selectedItem = find(this._listItems, (item) => item.selected === true);
            if (selectedItem != null) {
                this.setSelectItem(selectedItem);
            }
        }
    }
    /**
     * Accessor method for [[_listItems]] property
     * @return {?}
     */
    get listItems() {
        return this._listItems;
    }
    /**
     * Accessor method for [[selectedItem.text]] property
     * @return {?}
     */
    get selectedItemText() {
        return this.selectedItem ? this.selectedItem.text : '';
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        if (this.parentScrollHanlder != null && this.parentScroller != null) {
            this.ngZone.runOutsideAngular(() => {
                this.parentScroller.removeEventListener("scroll", this.parentScrollHanlder);
            });
        }
        this.parentScrollHanlder = null;
        this.parentScroller = null;
        if (this.dropdown && this.dropdown.isOpen) {
            this.dropdown.hide();
        }
        this.dropdown = null;
        super.ngOnDestroy();
    }
    /**
     * Initialize component and set css stye attribute for dropdown element
     * @return {?}
     */
    ngOnInit() {
        super.ngOnInit();
        this.dropdownElementId = `dropdown-${this.id}`;
        // Ensure controlWidth is exists and is a number
        if (parseInt(this.controlWidth, 10)) {
            this.dropdownMenuStyle['min-width'] = this.controlWidth + 'px !important';
        }
        if (this.alignHorizontal) {
            this.alignHorizontal = this.alignHorizontal;
        }
    }
    /**
     * Set up list items and set value/text on them. Sets selected item
     * @return {?}
     */
    ngAfterViewInit() {
        super.ngAfterViewInit();
        if (this.listBox != null && this.listBox.listItems != null) {
            this._listItems = [];
            this.listBox.listItems.forEach((item) => {
                /** @type {?} */
                let text = item.text || '';
                /** @type {?} */
                let value = item.value || '';
                this._listItems.push({
                    text: text ? text : value,
                    value: value ? value : text,
                    selected: item.selected === true || item.selected === "true" || item.isChecked === true || item.isChecked === "true"
                });
            });
            /** @type {?} */
            const selectedItem = find(this._listItems, (item) => item.selected === true);
            if (selectedItem != null) {
                this.setSelectItem(selectedItem);
            }
        }
        this.loadDataFromDef();
        this.cd.detectChanges();
        this.subscribeToParentScroller();
    }
    /**
     * Sets combobox list using array of values
     * @param {?} values Array of [[ValuePairs]] to set combobox options.
     * @return {?}
     */
    initializeComboboxValues(values) {
        if (values != null) {
            this._listItems = map(values, (item) => {
                item.text = item.text || '';
                return {
                    text: item.text,
                    value: item.value,
                    selected: item.selected
                };
            });
            /** @type {?} */
            const selectedItem = find(this._listItems, (item) => item.selected === true);
            if (selectedItem != null) {
                this.setSelectItem(selectedItem);
            }
            else {
                this.setSelectItem(this._listItems[0]);
            }
        }
        else {
            this._listItems = [];
        }
        this.cd.markForCheck();
    }
    /**
     * Focuses and selects item that is clicked
     * \@event onCommand
     * @param {?} item Item to focus and select
     * @param {?} event Mouse click event on item
     * @return {?}
     */
    selectItem(item, event) {
        this.inputElement.nativeElement.focus();
        this.setSelectItem(item);
        if (this.emitInternalOnCommand() === false) {
            this.onCommand.emit();
        }
    }
    /**
     * Sets selected item that matches item [[ValuePair]] parameter
     * @param {?} item Item to set as selected
     * @param {?=} forceCd Force change detection
     * @return {?}
     */
    setSelectItem(item, forceCd = false) {
        this.selectedItem = item;
        if (forceCd === true) {
            this.cd.markForCheck();
        }
        //notify internal changes (for internal use only)
        this._notifyInternalChangeCb();
    }
    /**
     * Sets selected item based on value
     * @param {?} value Value to set
     * @return {?}
     */
    setSelectValue(value) {
        if (this._listItems != null) {
            /** @type {?} */
            const temp = find(this._listItems, (item) => item.value == value || (value != null && value !== "" && value === item.text));
            if (temp != null) {
                this.setSelectItem(temp);
                this.cd.markForCheck();
            }
        }
    }
    /**
     * Event handler for mouse click on input
     * @param {?} event Mouse click event on input element.
     * @param {?} dropdown
     * @return {?}
     */
    onInputClick(event, dropdown) {
        event.stopPropagation();
        this.hoveredStyle = {
            'color': '#0000cd',
            'background-color': '#ff9c00'
        };
        dropdown.toggle(true);
        if (parseInt(this.controlWidthComboBox, 10)) {
            this.dropdownMenuStyle['width'] = (parseInt(this.controlWidthComboBox)) + 'px';
        }
        else {
            this.dropdownMenuStyle['width'] = (parseInt(this.elementRef.nativeElement.children[0].children[0].children[0].clientWidth) + 20) + 'px';
        }
    }
    /**
     * @param {?} e
     * @param {?} dropdown
     * @return {?}
     */
    onKeyDown(e, dropdown) {
        if (!this.isDropdownOpen && (e.keyCode === 38 || e.keyCode === 40)) { // 38 = UP arrow, 40 = DOWN arrow
            // 38 = UP arrow, 40 = DOWN arrow
            this.hoveredStyle = this.defaultStyle;
            e.preventDefault();
            dropdown.toggle(true);
            /** @type {?} */
            let idx = 0;
            // トグルが閉じられている状態でキーボードのUP、DOWNが押下された場合
            if (e.keyCode === 38) {
                // UPの場合、プルダウンの最終に移動してしまうため、最後の要素を設定とする
                idx = this._listItems.length - 1;
            }
            else {
                // DOWNの場合、最初の要素を設定とする
                idx = 0;
            }
            // :hover状態のインデックスを更新
            this.hoveredItem = idx;
            // プルダウンを設定
            this.selectItem(this._listItems[idx], null);
            // フラグを更新
            this.isFirstKeyDown = false;
        }
        else if (this.isDropdownOpen && (e.keyCode === 38 || e.keyCode === 40)) { // 38 = UP arrow, 40 = DOWN arrow
            // 38 = UP arrow, 40 = DOWN arrow
            // トグルが開いている状態かつキーボードのUP、DOWNが押下された場合
            this.hoveredStyle = this.defaultStyle;
            e.preventDefault();
            /** @type {?} */
            let idx = 0;
            if (e.keyCode === 38) { // 38 = UP arrow
                // 38 = UP arrow
                if (this.isFirstKeyDown || this.hoveredItem === 0) {
                    // トグルが開かれた状態で、初めてキーが押下された場合
                    // :hover状態のプルダウン要素が一番上の場合
                    // UPは最後の要素を設定する
                    idx = this._listItems.length - 1;
                }
                else {
                    // 上記以外
                    // :hover状態の要素の１つ上を設定
                    idx = this.hoveredItem - 1;
                }
            }
            else { // 40 = DOWN arrow
                // 40 = DOWN arrow
                if (this.isFirstKeyDown || this.hoveredItem === (this._listItems.length - 1)) {
                    // トグルが開かれた状態で、初めてキーが押下された場合
                    // :hover状態のプルダウン要素が一番下の場合
                    // 初めの要素を設定
                    idx = 0;
                }
                else {
                    // 上記以外
                    // :hover状態の要素の１つ下を設定
                    idx = this.hoveredItem + 1;
                }
            }
            // :hover状態のインデックスを更新
            this.hoveredItem = idx;
            // プルダウンを設定
            this.selectItem(this._listItems[idx], null);
            // フラグを更新
            this.isFirstKeyDown = false;
        }
        this.cd.markForCheck();
        // V3R1-UT-NSD-643 修正 END
    }
    /**
     * @return {?}
     */
    adjustPulldownWidth() {
        this.hoveredStyle = {
            'color': '#0000cd',
            'background-color': '#ff9c00'
        };
        if (parseInt(this.controlWidthComboBox, 10)) {
            this.dropdownMenuStyle['width'] = (parseInt(this.controlWidthComboBox)) + 'px';
        }
        else {
            this.dropdownMenuStyle['width'] = (parseInt(this.elementRef.nativeElement.children[0].children[0].children[0].clientWidth) + 20) + 'px';
        }
    }
    /**
     * @return {?}
     */
    toggleStatus() {
        if (!this.isDropdownOpen) {
            /** @type {?} */
            let id = get(this.getParentScrollView(), "id");
            /** @type {?} */
            let _this = this;
            $(`#${id}`).on('scroll mousewheel', function (e) {
                if (_this.dropdown != null) {
                    _this.dropdown.hide();
                }
                // return false;
            });
            /** @type {?} */
            const parentView = /** @type {?} */ (this.getParentView());
            if (parentView != null && parentView.dialog != null && parentView.dialog.modalContent && parentView.dialog.modalContent != null) {
                /** @type {?} */
                let parentPanel = parentView.dialog && parentView.dialog.modalContent.nativeElement;
                /** @type {?} */
                let comboBox = this.inputElement.nativeElement.parentElement;
                /** @type {?} */
                let parentPos = parentPanel.getBoundingClientRect();
                /** @type {?} */
                let childrenPos = comboBox.getBoundingClientRect();
                /** @type {?} */
                let distanceToBottom = parentPos.bottom - childrenPos.bottom;
                /** @type {?} */
                let distanceToTop = childrenPos.top - parentPos.top;
                /** @type {?} */
                let heightOfBox = this._listItems ? Math.min(18 * this._listItems.length, 200) : 200;
                if (distanceToBottom < 200) {
                    if (distanceToTop > 200) {
                        $(".dropdown-menu").parent().attr("class", "dropup");
                    }
                    else if (distanceToTop > distanceToBottom) {
                        $(".dropdown-menu").parent().attr("class", "dropup");
                    }
                    else {
                        $(".dropdown-menu").parent().attr("class", "dropdown");
                    }
                }
                else {
                    $(".dropdown-menu").parent().attr("class", "dropdown");
                }
            }
            else if (parentView != null) {
                /** @type {?} */
                let dialog = $(`#${parentView["mainScreenId"]}`);
                if (dialog != null && dialog.children() && dialog.children()[0] && dialog.children()[0] != null) {
                    /** @type {?} */
                    let comboBox = this.inputElement.nativeElement.parentElement;
                    /** @type {?} */
                    let parentPos = dialog.children()[0].getBoundingClientRect();
                    /** @type {?} */
                    let childrenPos = comboBox.getBoundingClientRect();
                    /** @type {?} */
                    let distanceToBottom = parentPos.bottom - childrenPos.bottom;
                    /** @type {?} */
                    let distanceToTop = childrenPos.top - parentPos.top;
                    /** @type {?} */
                    let heightOfBox = this._listItems ? Math.min(18 * this._listItems.length, 200) : 200;
                    if (distanceToBottom < 200) {
                        if (distanceToTop > 200) {
                            $(".dropdown-menu").parent().attr("class", "dropup");
                        }
                        else if (distanceToTop > distanceToBottom) {
                            $(".dropdown-menu").parent().attr("class", "dropup");
                        }
                        else {
                            $(".dropdown-menu").parent().attr("class", "dropdown");
                        }
                    }
                    else {
                        $(".dropdown-menu").parent().attr("class", "dropdown");
                    }
                }
            }
        }
        else {
            /** @type {?} */
            let id = get(this.getParentScrollView(), "id");
            $(`#${id}`).off('scroll mousewheel');
            // V3R1-UT-NSD-643 修正 START
            // トグルが閉じられたタイミングでフラグを戻す
            this.isFirstKeyDown = true;
            // V3R1-UT-NSD-643 修正 END
            this.dropdown.hide();
        }
        this.isDropdownOpen = !this.isDropdownOpen;
    }
    /**
     * Sets the selected combobox option to 'val' parameter.
     * @param {?} val Value to set.
     * @return {?}
     */
    setValue(val) {
        this.setSelectValue(val);
        this.cd.markForCheck();
    }
    /**
     * Sets the selected combobox option that matches 'text' parameter.
     * @param {?} text Text of option to mark as selected.
     * @return {?}
     */
    setText(text) {
        if (text == null) {
            this.setSelectItem(null);
            this.cd.markForCheck();
        }
        else if (this._listItems != null) {
            /** @type {?} */
            const temp = find(this._listItems, (item) => item.text == text);
            if (temp != null) {
                this.setSelectItem(temp);
                this.cd.markForCheck();
            }
        }
    }
    /**
     * Returns the selected item value.
     * @return {?} Value of the selected item in the combobox.
     */
    getValue() {
        return this.selectedItem ? this.selectedItem.value : null;
    }
    /**
     * Returns the text of the selected item.
     * @return {?} String value of selected item text.
     */
    getText() {
        return this.selectedItem ? this.selectedItem.text : "";
    }
    /**
     * Focuses the native input element
     * @return {?}
     */
    setFocus() {
        this.inputElement.nativeElement.focus();
    }
    /**
     * Set the background color of the input element.
     * @param {?} bgColor A CSS color string value. Should be hexadecimal or valid color name.
     * @return {?}
     */
    setBgColor(bgColor) {
        this.inputElement.nativeElement.style.backgroundColor = bgColor;
    }
    /**
     * Finds a list item by text.
     * @param {?} text Item text to search for
     * @return {?} [[ValuePair]] in [[_listItems]] that matches text
     */
    findItemByText(text) {
        return find(this._listItems, (item) => item.text == text);
    }
    /**
     * Gets all list items that are children of the combobox component.
     * @return {?} Collection of list items.
     */
    getChildren() {
        /** @type {?} */
        const result = new Vector();
        if (this._listItems != null) {
            forEach(this._listItems, (item) => {
                result.add(new FauxComboElement(this, item));
            });
        }
        return result;
    }
    /**
     * Outputs JSON object that describes component
     * @return {?} Object
     */
    toJson() {
        /** @type {?} */
        const json = super.toJson();
        json.value = this.getValue();
        return json;
    }
    /**
     * Returns string name of the component
     * @return {?} String
     */
    getLocalName() {
        return "comboBox";
    }
    /**
     * Returns string tag name of component
     * @return {?}
     */
    getNxTagName() {
        return "comboBox";
    }
    /**
     * @return {?} [[ChangeDetector]] for the component
     */
    getChangeDetector() {
        return this.cd;
    }
    /**
     * Sets combobox values based on definition map
     * @return {?}
     */
    loadDataFromDef() {
        /** @type {?} */
        let defId = this.getId();
        if (this.editor != null && this.editor.length > 0) {
            defId = this.editor.substring(1);
        }
        /** @type {?} */
        const def = this.getSession().getDef(defId);
        if (def != null && def.valueList != null) {
            /** @type {?} */
            const attribute = def.attribute;
            this.initializeComboboxValues(map(def.valueList, (item) => {
                return {
                    value: item["value"],
                    text: item["name"],
                    selected: item["selectFlg"] === "true" || item["selectFlg"] === true
                };
            }));
            this.setAttributeFromDef();
        }
    }
    /**
     * Removes focus from input element and sets unfocus background
     * \@event OnBeforeActiveLost
     * @return {?}
     */
    inputFocusOut() {
        if (!this.hasInputFocus)
            return; //On the IE, prevent to fire focusout event without focusin event.(this occurs when error-dialog is showed.)issue#1433NG(2)
        if (this.inputElement.nativeElement.ownerDocument.activeElement === this.inputElement.nativeElement)
            return; //prevent focuslost whenever active process is changed.
        this.setBgColor('');
        this.onBeforeActiveLost.emit();
        this.hasInputFocus = false;
        setTimeout(() => {
            /** @type {?} */
            let $active = $(":focus");
            if ($active.length > 0 && !$active.is("body") && $active.closest(".vt-combo-box,[vt-arrow-navigatable-container]").length == 0) {
                if (this.dropdown && this.dropdown.isOpen) {
                    this.dropdown.hide();
                }
            }
        }, 10);
    }
    /**
     * if the interval between focusin and focusout event is less than 200ms, don't fire focusin.
     * @return {?}
     */
    inputFocusIn() {
        this.hasInputFocus = true;
    }
    /**
     * Delegate method wrapper for native browser preventDefault
     * @param {?} event Event object
     * @return {?}
     */
    preventDefault(event) {
        event.preventDefault();
        event.stopPropagation();
        this.inputElement.nativeElement.focus();
    }
    /**
     * @return {?}
     */
    subscribeToParentScroller() {
        /** @type {?} */
        const scrollParent = $(this.elementRef.nativeElement).scrollParent();
        if (scrollParent != null && scrollParent[0] instanceof HTMLElement) {
            this.parentScroller = scrollParent[0];
            this.ngZone.runOutsideAngular(() => {
                this.parentScroller.addEventListener("scroll", this.parentScrollHanlder);
            });
        }
    }
}
ComboBoxComponent.decorators = [
    { type: Component, args: [{
                selector: 'vt-combo-box',
                template: "<div [id]=\"id\" class=\"btn-group dropdown vt-combo-box {{cssClass}} {{!disabled}}select\"\n  [style.height]=\"controlHeight\"\n  [style.width.px]=\"controlWidth\"\n  [style.margin]=\"controlMargin\"\n  [ngClass]=\"{'hidden': visible != true}\"\n  (contextmenu)=\"handleOnContextMenu($event)\"\n  #dropdown=\"bs-dropdown\"\n  (onShown)=\"toggleStatus()\"\n  (onHidden)=\"toggleStatus()\"\n  dropdown [isDisabled]=\"disabled === true\" container=\"body\" [dropup]=\"isDropup\">\n  <div class=\"input-group\">\n    <input #input class=\"form-control combobox-input-box\" type=\"text\" [value]=\"selectedItemText\" [style.text-align]=\"alignHorizontal\"\n      (focusin)=\"inputFocusIn()\" (focusout)=\"inputFocusOut()\" (click)=\"onInputClick($event, dropdown)\" [readonly]=\"disabled !== true\" [disabled]=\"disabled\" (keydown)=\"onKeyDown($event,dropdown)\"/>\n    <span class=\"input-group-btn\">\n      <button id=\"button\" (mousedown)=\"preventDefault($event)\" (click)=\"adjustPulldownWidth()\" dropdownToggle type=\"button\" class=\"btn combo-btn dropdown-toggle\" style=\"width: 20px\" tabindex=\"-1\">\n        <span class=\"caret\"></span>\n      </button>\n    </span>\n  </div>\n  <ul\n    *dropdownMenu\n    [id]=\"dropdownElementId\"\n    class=\"dropdown-menu combobox-dropdown\"\n    role=\"menu\"\n    [ngStyle]=\"dropdownMenuStyle\"\n    vt-arrow-navigatable-container\n    [activeParent]=\"input\"\n    (onTab)=\"dropdown.hide()\"\n  >\n    <li *ngFor=\"let item of listItems; index as i\">\n      <ng-template [ngIf]=\"item.visible !== false && item.visible !== 'false'\">\n        <a *ngIf=\"item.text != null && item.text !== ''\"\n          class=\"dropdown-item menuItem\"\n          (mousedown)=\"preventDefault($event)\"\n          (click)=\"selectItem(item, $event)\"\n          [ngStyle]=\"hoveredItem == i ? hoveredStyle : defaultStyle\"\n          (mouseover)=\"hoveredItem = i\"\n          (keydown)=\"hoveredItem = i; onKeyDown($event,dropdown)\"\n          vt-arrow-navigatable-item>{{item.text}}</a>\n        <a *ngIf=\"item.text == null || item.text === ''\"\n          class=\"dropdown-item\"\n          (mousedown)=\"preventDefault($event)\"\n          [ngStyle]=\"hoveredItem == i ? hoveredStyle : defaultStyle\"\n          (mouseover)=\"hoveredItem = i\"\n          vt-arrow-navigatable-item\n          (keydown)=\"hoveredItem = i; onKeyDown($event,dropdown)\"\n          (click)=\"selectItem(item, $event)\">\n          &nbsp;\n        </a>\n      </ng-template>\n    </li>\n  </ul>\n</div>\n",
                changeDetection: ChangeDetectionStrategy.OnPush,
                encapsulation: ViewEncapsulation.None,
                providers: [
                    {
                        provide: BaseComponent,
                        useExisting: forwardRef(() => ComboBoxComponent)
                    }
                ],
                styles: ["bs-dropdown-container ul.dropdown-menu.combobox-dropdown{max-height:225px;margin-top:-3px!important;overflow:auto;overflow-x:hidden}.combobox-dropdown>li>a{padding:3px 10px 3px 5px;font-size:9px!important;margin-bottom:0!important}.combobox-dropdown>li>a:hover{color:#0000cd;background-color:#ff9c00}.vt-combo-box .form-control[readonly]{background:#fff;cursor:default;margin-bottom:3px}bs-dropdown-container{z-index:10000}.combo-btn,.combo-btn:hover{color:#000;background-color:#fff;border-color:#ccc;margin-bottom:3px}.combo-btn[disabled]{color:grey;background-color:#ccc;border-color:#ccc;margin-bottom:3px}.falseselect div.input-group .form-control{color:grey;background-color:#eee}.mouse-hover{background:#ff9c00!important}.dropup .dropdown-menu{margin-bottom:26px}"]
            }] }
];
/** @nocollapse */
ComboBoxComponent.ctorParameters = () => [
    { type: BaseComponent, decorators: [{ type: Optional }, { type: SkipSelf }] },
    { type: SessionService },
    { type: ElementRef },
    { type: ChangeDetectorRef },
    { type: Renderer2 },
    { type: NgZone }
];
ComboBoxComponent.propDecorators = {
    onCommand: [{ type: Output }],
    listBox: [{ type: ContentChild, args: [ListBoxDirective,] }],
    inputElement: [{ type: ViewChild, args: ['input',] }],
    dropdown: [{ type: ViewChild, args: ["dropdown", { read: BsDropdownDirective },] }],
    listItems: [{ type: Input }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class ArrowNavigatableItemDirective {
    /**
     * @param {?} element
     * @param {?} zone
     * @param {?} renderer
     */
    constructor(element, zone, renderer) {
        this.element = element;
        this.zone = zone;
        this.renderer = renderer;
        this.vtArrowOnMouseEnter = new EventEmitter();
        this.vtArrowOnMouseLeave = new EventEmitter();
        this.jq = $(this.element.nativeElement);
        this.renderer.setAttribute(this.element.nativeElement, "tabindex", "-1");
    }
    /**
     * @return {?}
     */
    handleOnBlur() {
        this.blur();
    }
    /**
     * @return {?}
     */
    handleOnFocus() {
        if (this.parent != null) {
            this.parent.activeItem = this;
        }
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this.jq = null;
        this.element = null;
        this.zone = null;
    }
    /**
     * @return {?}
     */
    focus() {
        this.zone.run(() => {
            this.jq.mouseover();
            this.jq.focus();
            this.renderer.addClass(this.element.nativeElement, "mouse-hover");
        });
    }
    /**
     * @return {?}
     */
    blur() {
        this.zone.run(() => {
            this.jq.mouseout();
            this.jq.blur();
            this.renderer.removeClass(this.element.nativeElement, "mouse-hover");
        });
    }
    /**
     * @return {?}
     */
    select() {
        (/** @type {?} */ (this.element.nativeElement)).click();
    }
    /**
     * @return {?}
     */
    hover() {
        this.zone.run(() => {
            //(this.element.nativeElement as HTMLElement).dispatchEvent(new Event("mouseenter"));
            this.vtArrowOnMouseEnter.emit();
        });
    }
    /**
     * @return {?}
     */
    leave() {
        this.zone.run(() => {
            this.vtArrowOnMouseLeave.emit();
        });
    }
}
ArrowNavigatableItemDirective.decorators = [
    { type: Directive, args: [{
                selector: '[vt-arrow-navigatable-item]',
            },] }
];
/** @nocollapse */
ArrowNavigatableItemDirective.ctorParameters = () => [
    { type: ElementRef },
    { type: NgZone },
    { type: Renderer2 }
];
ArrowNavigatableItemDirective.propDecorators = {
    vtArrowOnMouseEnter: [{ type: Output }],
    vtArrowOnMouseLeave: [{ type: Output }],
    handleOnBlur: [{ type: HostListener, args: ["blur",] }],
    handleOnFocus: [{ type: HostListener, args: ["focus",] }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Usage.
 * <ul vt-arrow-navigatable-container ...>
 *  <li vt-arrow-navigatable-item ...>
 *  <li vt-arrow-navigatable-item ...>
 * </ul>
 */
class ArrowNavigatableContainerDirective {
    /**
     * @param {?} zone
     * @param {?} element
     */
    constructor(zone, element) {
        this.zone = zone;
        this.element = element;
        this.onItemHover = new EventEmitter();
        this.onTab = new EventEmitter();
        this.keydownHandler = (event) => this.handleKeydown(event);
        this.zone.runOutsideAngular(() => {
            (document).addEventListener("keydown", this.keydownHandler);
        });
    }
    /**
     * @param {?} items
     * @return {?}
     */
    set navigatableItemsQuery(items) {
        if (items == null) {
            this.navigatableItems = null;
        }
        else {
            this.navigatableItems = items.toArray();
        }
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this.navigatableItems = null;
        this.zone.runOutsideAngular(() => {
            (document).removeEventListener("keydown", this.keydownHandler);
        });
        this.element = null;
        this.keydownHandler = null;
        this.navigatableItems = null;
        this.activeItem = null;
    }
    /**
     * @param {?} event
     * @return {?}
     */
    handleKeydown(event) {
        if (document.activeElement === this.element.nativeElement || document.activeElement === this.activeParent || this.isActiveElementDirectChildren()) {
            //check for arrow key and do stuff
            if (event.keyCode === 38 || event.key === "ArrowUp") {
                this.moveUp();
            }
            else if (event.keyCode === 40 || event.key === "ArrowDow") {
                this.moveDown();
            }
            else if (event.keyCode === 13 || event.key === "Enter" ||
                event.keyCode === 32 || event.key === "Space") {
                this.select();
            }
            else if (event.keyCode === 39 || event.key === "ArrowRight") {
                if (this.activeItem != null) {
                    this.activeItem.hover();
                }
            }
            else if (event.keyCode === 37 || event.key === "ArrowLeft") {
                if (this.activeItem != null) {
                    this.activeItem.leave();
                }
            }
            else if (event.keyCode === 9 || event.key === "Tab") {
                this.onTab.emit();
            }
        }
    }
    /**
     * @return {?}
     */
    moveUp() {
        //can only go up if there are any items above
        if (this.hasItems()) {
            /** @type {?} */
            let idx = 0;
            if (this.activeItem != null) {
                this.activeItem.blur();
                idx = findIndex(this.navigatableItems, (item) => item === this.activeItem);
            }
            else if (this.isActiveElementDirectChildren()) {
                idx = findIndex(this.navigatableItems, (item) => item.element.nativeElement === document.activeElement);
                if (idx >= 0) {
                    this.navigatableItems[idx].blur();
                }
            }
            if (idx < this.navigatableItems.length && idx > 0) {
                this.activeItem = this.navigatableItems[idx - 1];
                this.activeItem.focus();
                this.onItemHover.emit(this.activeItem);
            }
            else if (idx === 0) {
                this.activeItem = this.navigatableItems[this.navigatableItems.length - 1];
                this.activeItem.focus();
                this.onItemHover.emit(this.activeItem);
            }
        }
    }
    /**
     * @return {?}
     */
    moveDown() {
        if (this.hasItems()) {
            /** @type {?} */
            let idx = -1;
            if (this.activeItem != null) {
                idx = findIndex(this.navigatableItems, (item) => item === this.activeItem);
                this.activeItem.blur();
            }
            else if (this.isActiveElementDirectChildren()) {
                idx = findIndex(this.navigatableItems, (item) => item.element.nativeElement === document.activeElement);
            }
            if (idx < this.navigatableItems.length - 1) {
                this.activeItem = this.navigatableItems[idx + 1];
                this.activeItem.focus();
                this.onItemHover.emit(this.activeItem);
            }
            else if (idx == this.navigatableItems.length - 1) {
                this.activeItem = this.navigatableItems[0];
                this.activeItem.focus();
                this.onItemHover.emit(this.activeItem);
            }
        }
    }
    /**
     * @return {?}
     */
    select() {
        if (this.activeItem != null) {
            this.activeItem.select();
        }
    }
    /**
     * @return {?}
     */
    hasItems() {
        return this.navigatableItems != null && this.navigatableItems.length > 0;
    }
    /**
     * @return {?}
     */
    isActiveElementDirectChildren() {
        /** @type {?} */
        let retVal = false;
        if (document.activeElement != null && this.navigatableItems != null && this.navigatableItems.length > 0) {
            retVal = findIndex(this.navigatableItems, (item) => item.element.nativeElement === document.activeElement) >= 0;
        }
        return retVal;
    }
}
ArrowNavigatableContainerDirective.decorators = [
    { type: Directive, args: [{
                selector: '[vt-arrow-navigatable-container]'
            },] }
];
/** @nocollapse */
ArrowNavigatableContainerDirective.ctorParameters = () => [
    { type: NgZone },
    { type: ElementRef }
];
ArrowNavigatableContainerDirective.propDecorators = {
    activeParent: [{ type: Input }],
    onItemHover: [{ type: Output }],
    onTab: [{ type: Output }],
    navigatableItemsQuery: [{ type: ContentChildren, args: [ArrowNavigatableItemDirective,] }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class KeyboardModule {
}
KeyboardModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule
                ],
                declarations: [
                    ArrowNavigatableItemDirective,
                    ArrowNavigatableContainerDirective
                ],
                exports: [
                    ArrowNavigatableItemDirective,
                    ArrowNavigatableContainerDirective
                ]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class ComboBoxModule {
}
ComboBoxModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    BsDropdownModule.forRoot(),
                    KeyboardModule
                ],
                declarations: [ComboBoxComponent, ListBoxDirective, ListItemDirective],
                exports: [
                    ComboBoxComponent,
                    ListBoxDirective,
                    ListItemDirective,
                    BsDropdownModule,
                    KeyboardModule
                ],
                entryComponents: [
                    ComboBoxComponent
                ]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class DraggableDirective {
    /**
     * @param {?} renderer
     * @param {?} ngZone
     * @param {?} sessionService
     */
    constructor(renderer, ngZone, sessionService) {
        this.renderer = renderer;
        this.ngZone = ngZone;
        this.sessionService = sessionService;
        this.positionAttrValues = ['absolute', 'fixed', 'relative'];
        this.isView = true;
        /**
         * \@Input
         */
        this.canDrag = true;
        this.canTrackMouseMove = false;
        this.mousePosition = {
            x: 0,
            y: 0
        };
        this.mouseDownHandler = (event) => this.onMouseDownHandler(event);
        this.mouseMoveHandler = throttle((event) => this.onMouseMoveHandler(event), 75);
        this.mouseUpHandler = (event) => this.onMouseUpHandler(event);
    }
    /**
     * @return {?}
     */
    addDragListeners() {
        /** @type {?} */
        let dragElement = this.getDragElement();
        if (dragElement) {
            this.ngZone.runOutsideAngular(() => {
                dragElement.addEventListener('mousedown', this.mouseDownHandler, true);
                document.addEventListener('mouseup', this.mouseUpHandler, true);
                dragElement = null;
            });
        }
    }
    /**
     * @return {?}
     */
    removeDragListeners() {
        /** @type {?} */
        let dragElement = this.getDragElement();
        if (dragElement) {
            dragElement.removeEventListener('mousedown', this.mouseDownHandler, true);
            document.removeEventListener('mousemove', this.mouseMoveHandler, true); // 念のため置いておく
            document.removeEventListener('mouseup', this.mouseUpHandler, true);
            dragElement = null;
        }
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        this.addDragListeners();
        if (this.isView) {
            this.parentElement = this.parentPanel.nativeElement;
        }
        else {
            this.parentElement = this.parentPanel.nativeElement.parentElement.parentElement.parentElement; //get div('modal-dialog')
        }
        if (this.canDrag && this.parentElement != null) ;
        else {
            this.canDrag = false;
        }
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this.removeDragListeners();
        delete this.renderer;
        delete this.ngZone;
        delete this.draggablePanel;
        delete this.mouseDownHandler;
        delete this.mouseMoveHandler;
        delete this.mouseUpHandler;
        delete this.parentPanel;
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onMouseDownHandler(event) {
        /** @type {?} */
        let dragElement = this.getDragElement();
        if (dragElement) {
            this.ngZone.runOutsideAngular(() => {
                document.addEventListener('mousemove', this.mouseMoveHandler, true);
                dragElement = null;
            });
        }
        this.mousePosition = {
            x: event.pageX,
            y: event.pageY
        };
        if (this.canDrag) {
            if (this.isView) { //for main dialog
                /** @type {?} */
                const bound = this.getBound(this.parentElement);
                this.renderer.setStyle(this.parentElement, "position", "absolute");
                this.renderer.setStyle(this.parentElement, "margin", "0");
                this.applyTranslate(bound.x, bound.y);
                this.moveWindowToTop();
                this.canTrackMouseMove = true;
            }
            else { //for error/info dialog
                /** @type {?} */
                const bound = this.getBound(this.parentElement);
                /** @type {?} */
                const height = this.parentElement.offsetHeight + 'px';
                /** @type {?} */
                const width = this.parentElement.offsetWidth + 'px';
                this.renderer.setStyle(this.parentElement, "position", "absolute");
                this.renderer.setStyle(this.parentElement, "margin", "0");
                this.renderer.setStyle(this.parentElement, 'height', height);
                this.renderer.setStyle(this.parentElement, 'width', width);
                this.applyTranslate(bound.x, bound.y);
                this.canTrackMouseMove = true;
            }
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onMouseMoveHandler(event) {
        if (this.canDrag && this.canTrackMouseMove) {
            /** @type {?} */
            const currentMousePosition = {
                x: event.pageX,
                y: event.pageY
            };
            /** @type {?} */
            const diffX = currentMousePosition.x - this.mousePosition.x;
            /** @type {?} */
            const diffY = currentMousePosition.y - this.mousePosition.y;
            /** @type {?} */
            const parentBound = this.getBound(this.parentElement);
            /** @type {?} */
            const newX = parentBound.x + diffX;
            /** @type {?} */
            const newY = parentBound.y + diffY;
            this.applyTranslate(newX, newY);
            this.mousePosition = currentMousePosition;
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onMouseUpHandler(event) {
        /** @type {?} */
        let dragElement = this.getDragElement();
        if (dragElement) {
            document.removeEventListener('mousemove', this.mouseMoveHandler, true);
            dragElement = null;
        }
        if (this.canDrag && this.canTrackMouseMove) {
            this.canTrackMouseMove = false;
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onClick(event) {
        if (this.canDrag) {
            if (this.isView)
                this.moveWindowToTop();
        }
    }
    /**
     * @param {?} x
     * @param {?} y
     * @return {?}
     */
    applyTranslate(x, y) {
        if (y > 0) {
            this.ngZone.runOutsideAngular(() => {
                /** @type {?} */
                let top = 0;
                /** @type {?} */
                let topMax = 82;
                if (this.isView) {
                    top = Math.max(y, topMax);
                }
                else {
                    top = Math.max(y, 0);
                }
                if (this.sessionService.dialogMaxTopPosition > 0 && top > this.sessionService.dialogMaxTopPosition) {
                    top = this.sessionService.dialogMaxTopPosition;
                }
                //#1587: in the as-is, there is no limit to where you can drag the window to the left/right
                //left = Math.max(x, 0);
                this.renderer.setStyle(this.parentElement, 'top', top + 'px');
                this.renderer.setStyle(this.parentElement, 'left', x + 'px');
            });
        }
    }
    /**
     * @return {?}
     */
    moveWindowToTop() {
        this.sessionService.getMcoContainer().reStackView(this.viewId, this.screenIndex);
    }
    /**
     * @param {?} id
     * @return {?}
     */
    setViewId(id) {
        if (id != null) {
            this.viewId = id;
        }
    }
    /**
     * @param {?} id
     * @return {?}
     */
    setTableId(id) {
        if (id != null) {
            this.tableId = id;
        }
    }
    /**
     * @return {?}
     */
    getDragElement() {
        if (this.vtDraggable === true && this.draggablePanel) {
            return this.draggablePanel.nativeElement;
        }
        return null;
    }
    /**
     * @param {?} el
     * @return {?}
     */
    getBound(el) {
        /** @type {?} */
        const bound = /** @type {?} */ (el.getBoundingClientRect());
        return {
            x: bound.x || bound.left,
            y: bound.y || bound.top
        };
    }
}
DraggableDirective.decorators = [
    { type: Directive, args: [{
                selector: '[vtDraggable]',
                host: {
                    // '(dragstart)': 'onDragStart($event)',
                    // '(dragend)': 'onDragEnd($event)',
                    // '(drag)': 'onDrag($event)',
                    '(click)': 'onClick($event)'
                }
            },] }
];
/** @nocollapse */
DraggableDirective.ctorParameters = () => [
    { type: Renderer2 },
    { type: NgZone },
    { type: SessionService }
];
DraggableDirective.propDecorators = {
    vtDraggable: [{ type: Input }],
    modal: [{ type: Input, args: ["modal",] }],
    isView: [{ type: Input }],
    title: [{ type: Input }],
    canDrag: [{ type: Input }],
    draggablePanel: [{ type: ContentChild, args: ['draggablePanel', { read: ElementRef },] }],
    parentPanel: [{ type: ContentChild, args: ['myModal', { read: ElementRef },] }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Class for managing dynamic views
 */
class DynamicPagesService {
    /**
     *
     * @param {?} viewFactory
     * @param {?} sessionService
     */
    constructor(viewFactory, sessionService) {
        this.viewFactory = viewFactory;
        this.sessionService = sessionService;
        this.dynamicViewsMap = [];
    }
    /**
     * Set the [[viewContainer]] property to reference a [[ViewContainer]]
     * @param {?} viewContainer
     * @return {?}
     */
    registerViewContainer(viewContainer) {
        this.viewContainer = viewContainer;
    }
    /**
     * Create a new [[ViewComponent]] instance
     * @param {?} viewType
     * @param {?=} routeId
     * @return {?}
     */
    createDynamicView(viewType, routeId = null) {
        // For suppress warning (Circular dependency), it is not able to call ViewComponent's method directly here.
        if (DynamicPagesService.onCreateViewCloser) {
            DynamicPagesService.onCreateViewCloser(this.sessionService, viewType, routeId);
        }
        if (this.sessionService.getMessagingService() != null) {
            this.sessionService.getMessagingService().setFreezePushService(true);
        }
        /** @type {?} */
        const view = this.viewContainer.createComponent(this.viewFactory.resolveComponentFactory(viewType));
        this.dynamicViewsMap.push(view);
        view.instance.isDynamicPage = true;
        view.changeDetectorRef.detectChanges();
        return new Promise((r, j) => {
            //has route id?
            if (routeId != null && routeId !== "") {
                view.instance["routeId"] = routeId;
            }
            if (view.instance.viewIsInitialized === true) {
                if (this.sessionService.getMessagingService() != null) {
                    this.sessionService.getMessagingService().setFreezePushService(false);
                }
                r(view.instance);
            }
            else {
                /** @type {?} */
                const sub = view.instance.viewInitialized.subscribe(() => {
                    sub.unsubscribe();
                    if (this.sessionService.getMessagingService() != null) {
                        this.sessionService.getMessagingService().setFreezePushService(false);
                    }
                    r(view.instance);
                });
            }
        });
    }
    /**
     * Destroy [[ViewComponent]] instance reference
     * @param {?} viewToRemove
     * @param {?} immediate
     * @return {?}
     */
    removeView(viewToRemove, immediate) {
        /** @type {?} */
        const deadView = find(this.dynamicViewsMap, (view) => {
            return view.instance.uniqueId == viewToRemove.uniqueId;
        });
        this.dynamicViewsMap = filter(this.dynamicViewsMap, (view) => {
            return view.instance.uniqueId != viewToRemove.uniqueId;
        });
        if (viewToRemove.isDestroyed !== true && deadView != null) {
            if (immediate) {
                deadView.destroy();
            }
            else {
                setTimeout(() => {
                    deadView.destroy();
                }, 1);
            }
        }
    }
}
DynamicPagesService.onCreateViewCloser = null;
DynamicPagesService.decorators = [
    { type: Injectable, args: [{
                providedIn: 'root'
            },] }
];
/** @nocollapse */
DynamicPagesService.ctorParameters = () => [
    { type: ComponentFactoryResolver },
    { type: SessionService }
];
/** @nocollapse */ DynamicPagesService.ngInjectableDef = defineInjectable({ factory: function DynamicPagesService_Factory() { return new DynamicPagesService(inject(ComponentFactoryResolver), inject(SessionService)); }, token: DynamicPagesService, providedIn: "root" });

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Document object class to access virtual DOM
 */
class UiDocument {
    /**
     * Get [[MenuItemComponent]] by id key in [[menuItemElementMap]]
     * @param {?} id
     * @return {?}
     */
    static getMenuComponent(id) {
        if (this.menuItemElementMap == null) {
            return null;
        }
        return this.menuItemElementMap.get(id);
    }
    /**
     * Alias for [[findElementById]]
     * @param {?} id
     * @return {?}
     */
    static getElementById(id) {
        return UiDocument.findElementById(id);
    }
    /**
     * Search for and return a component by id
     * @param {?} id ViewComponent id
     * @return {?}
     */
    static findElementById(id) {
        if (id == null)
            return null;
        /** @type {?} */
        let comp = null;
        if (!appInjector())
            return;
        /** @type {?} */
        const mcoContainer = appInjector().get(McoContainerService);
        if (mcoContainer != null) {
            comp = mcoContainer.getViewById(id);
            if (comp == null && mcoContainer.activeView() != null) {
                comp = mcoContainer.activeView().findElementById(id);
            }
            if (comp == null) {
                comp = this.getMenuComponent(id);
            }
            if (comp == null) {
                /** @type {?} */
                const views = mcoContainer.getViews();
                for (let view of views) {
                    if (view.id === id) {
                        comp = view;
                    }
                    else {
                        comp = view.findElementById(id);
                    }
                    if (comp != null) {
                        break;
                    }
                }
            }
            //our component is in a subview?
            if (comp == null && mcoContainer.getActionForwardHandlerMap() != null) {
                /** @type {?} */
                const actionForwardIt = mcoContainer.getActionForwardHandlerMap().values();
                /** @type {?} */
                let forwardItResult = actionForwardIt.next();
                while (forwardItResult.done !== true) {
                    comp = forwardItResult.value.findElementById(id);
                    if (comp != null) {
                        break;
                    }
                    forwardItResult = actionForwardIt.next();
                }
            }
        }
        else {
            comp = this.getMenuComponent(id);
        }
        //MenuItem???? for special case where right click event of inner comp of table column
        //is trigger before row context menu is trigger (row context menu display popup menu)
        //this special component is MenuItemBuilder so it only support setAttribute
        if (comp == null) {
            /** @type {?} */
            const mcoContainer = appInjector().get(McoContainerService);
            if (mcoContainer != null) {
                /** @type {?} */
                const activeView = mcoContainer.activeView();
                if (activeView != null && activeView.hasPopupMenu()) {
                    /** @type {?} */
                    const contextMenuService = appInjector().get(ContextMenuService);
                    if (contextMenuService != null) {
                        /** @type {?} */
                        const popupMenuItems = contextMenuService.getContextMenuItems(activeView.getFirstPopupMenuId());
                        if (popupMenuItems != null) {
                            /** @type {?} */
                            const menuItem = popupMenuItems.find(item => {
                                return item.id === id;
                            });
                            if (menuItem != null) {
                                //fake component, specifically for menu
                                comp = /** @type {?} */ (MenuItemBuilder.fromMenuItem(menuItem));
                                contextMenuService._trackMenuItemBuilderForMemRelease(/** @type {?} */ (comp));
                            }
                        }
                    }
                }
            }
        }
        return comp;
    }
    /**
     * Get JSON representation of component
     * @return {?} Object JSON metadata for this component
     */
    static toJson() {
        /** @type {?} */
        const views = appInjector().get(McoContainerService).getViews();
        /** @type {?} */
        const json = {};
        for (let view of views) {
            json[view.getId()] = view.toJson();
        }
        return json;
    }
    /**
     * Set attribute with value on component by id
     * @param {?} id Component id
     * @param {?} attributeName Name of attribute to set
     * @param {?} value Value of attribute to set
     * @return {?}
     */
    static setElementAttribute(id, attributeName, value) {
        /** @type {?} */
        const element = this.getElementById(id);
        if (element != null) {
            element.setAttribute(attributeName, value);
        }
        else {
            Logger.warn(`Unable to set attribute to element id: ${id}, doesn't exists`);
        }
    }
    /**
     * Get the value of an attribute if it exists, otherwise return null
     * @param {?} id Component id
     * @param {?} attributeName Name of attribute value to get
     * @return {?}
     */
    static getElementAttribute(id, attributeName) {
        /** @type {?} */
        const element = this.getElementById(id);
        if (element != null) {
            return element.getAttribute(attributeName);
        }
        else {
            Logger.warn(`Unable to get attribute to element id: ${id}, doesn't exists`);
        }
        return null;
    }
    /**
     * Add a [[MenuItemComponent]] to internal [[menuItemElementMap]]
     * @param {?} id Key to use in map for menu item being added
     * @param {?} menuItemElement Component to add to map
     * @return {?}
     */
    static registerMenuItemElement(id, menuItemElement) {
        if (this.menuItemElementMap == null) {
            this.menuItemElementMap = new Map();
        }
        this.menuItemElementMap.set(id, menuItemElement);
        //track menu item for sending to server
        if (menuItemElement.item != null && menuItemElement.item.parentScreenId != null) {
            /** @type {?} */
            const mcoContainer = appInjector().get(McoContainerService);
            if (mcoContainer != null) {
                /** @type {?} */
                const activeView = mcoContainer.getViewById(menuItemElement.item.parentScreenId);
                if (activeView != null) {
                    activeView.trackInactiveMenuItem(menuItemElement);
                }
            }
        }
    }
    /**
     * Remove [[MenuItemComponent]] from internal [[menuItemElementMap]]
     * @param {?} id Key of menu item to remove from map
     * @return {?}
     */
    static unregisterMenuItemElement(id) {
        if (this.menuItemElementMap != null) {
            this.menuItemElementMap.delete(id);
        }
    }
    /**
     * Sets [[ComboboxComponent]] values
     * @param {?} id Combobox component id
     * @param {?} values Initial values to set on combobox component
     * @return {?}
     */
    static initializeComboBoxValues(id, values) {
        /** @type {?} */
        const comp = /** @type {?} */ (this.findElementById(id));
        if (comp != null) {
            comp.initializeComboboxValues(values);
        }
        else {
            console.warn("Unable to initialie combo: " + id);
        }
    }
    /**
     * Focus the parent tab of this [[elementId]]
     * @param {?} elementId the element id where we want its parent tab to be focused
     * @return {?}
     */
    static focusParentTab(elementId) {
        if (elementId != null) {
            /** @type {?} */
            const comp = this.findElementById(elementId);
            if (comp != null && typeof comp["focusParentTab"] === "function") {
                comp["focusParentTab"]();
            }
            if (comp != null) {
                appInjector().get(NgZone).runOutsideAngular(() => {
                    setTimeout(() => {
                        comp.setFocus();
                    }, 100);
                });
            }
        }
    }
}
UiDocument.menuItemElementMap = null;

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
const tabbable = tabbableFRollup;
/**
 * Class for dialog component
 */
class DialogComponent extends BaseComponent {
    /**
     *
     * @param {?} parent see [[BaseComponent]] constructor
     * @param {?} sessionService see [[BaseComponent]] constructor
     * @param {?} elementRef see [[BaseComponent]] constructor
     * @param {?} cd [[ChangeDetectorRef]] to inject
     * @param {?} renderer see [[BaseComponent]]
     * @param {?} dynamicPageService [[DynamicPageService]] instance to inject
     * @param {?} zone Angular zone
     */
    constructor(parent, sessionService, elementRef, cd, renderer, dynamicPageService, zone) {
        super(parent, sessionService, elementRef, renderer);
        this.cd = cd;
        this.dynamicPageService = dynamicPageService;
        this.zone = zone;
        this.draggable = true;
        this._modal = "false";
        this._center = false;
        this.modalSize = 'large';
        this.resizeable = false;
        this.onClosing = new EventEmitter();
        this.modalWidth = '100%';
        this.modalHeight = '100%';
        this.modalBodyHeight = '100%';
        this.isMaximize = false;
        this.isUnMaximize = false;
        // 画面リサイズ対応 Start
        this.resizeDialog = false;
        this.modalBodyMinHeight = null;
        this.modalBodyDivHeight = null;
        this.modalBodyDivWidth = null;
        this.modalBodyPercentHeight = null;
        // 画面リサイズ対応 End
        this.resizeFlg = false;
        this.modalOriginalLeft = 0;
        this.modalOriginalTop = 0;
        /* istanbul ignore next */
        this.bsModalClass = ["vt-dialog", "modal", "fade", "in"];
        this.viewRouteUrl = '';
        this.docClickHandler = (event) => {
            this.handleDocClickEvent(event);
        };
        this.modalFocusOutHandler = (event) => {
            this.checkFocusOut(event);
        };
        this.keydownHandler = (event) => {
            this.checkKey(event);
        };
    }
    /**
     * @param {?} modal
     * @return {?}
     */
    set modal(modal) {
        this._modal = modal;
        this.updateModalDialogStyle();
    }
    /**
     * @return {?}
     */
    get modal() {
        return this._modal;
    }
    /**
     * @param {?} boo
     * @return {?}
     */
    set centered(boo) {
        if (typeof boo === 'string') {
            this._center = boo === 'true' ? true : false;
        }
        else {
            this._center = boo;
        }
    }
    /**
     * @param {?} title
     * @return {?}
     */
    set windowTitle(title) {
        this.title = title;
    }
    /**
     * Set [[viewRouteUrl]] property
     * @param {?} viewRouteUrl
     * @return {?}
     */
    setViewRouteUrl(viewRouteUrl) {
        this.viewRouteUrl = viewRouteUrl;
    }
    /**
     * Set draggable directive id and [[id]]
     * @return {?}
     */
    resetId() {
        this.updateDraggableDirectiveId();
        super.resetId();
        this.cd.detectChanges();
    }
    /**
     * 一覧画面をテンプレートを表示している画面で横スクロールがでてしまう事象を回避するためのメソッド
     * 初回リサイズする
     * @return {?}
     */
    dialogResize() {
        /* istanbul ignore else */
        if (this.resizeFlg === false) {
            //this.resizeExecute();
            this.resizeFlg = true;
            this.setDisabledDialogWidth();
        }
    }
    /**
     * 一覧画面をテンプレートを表示している画面で横スクロールがでてしまう事象を回避するためのメソッド
     * リサイズを行う
     * @return {?}
     */
    resizeExecute() {
        /** @type {?} */
        const bound = /** @type {?} */ ((/** @type {?} */ (this.modalElement.nativeElement.firstChild.lastElementChild)).getBoundingClientRect());
        /** @type {?} */
        const newX = bound.right - bound.left + 20;
        this.zone.runOutsideAngular(() => {
            this.renderer.setStyle(this.modalElement.nativeElement.firstChild.lastElementChild, 'width', newX + 'px');
        });
        this.cd.detectChanges();
    }
    /**
     * Init lifecycle. Sets [[viewId]]
     * @return {?}
     */
    ngOnInit() {
        super.ngOnInit();
        this.viewId = this.id;
    }
    /**
     * Destroy lifecycle. Cleans up references
     * @return {?}
     */
    ngOnDestroy() {
        super.ngOnDestroy();
        this.modalDialog = null;
        this.modalContent = null;
        if (this.viewContainer != null) {
            this.viewContainer.clear();
            this.viewContainer = null;
        }
        if (this.draggablePanel != null) {
            this.draggablePanel.clear();
            this.draggablePanel = null;
        }
        if (this.docClickHandler != null) {
            document.removeEventListener("mousedown", this.docClickHandler);
        }
        if (this.modalFocusOutHandler != null) {
            (/** @type {?} */ (this.modalElement.nativeElement)).removeEventListener("focusout", this.modalFocusOutHandler, true);
        }
        if (this.keydownHandler) {
            (/** @type {?} */ (this.modalElement.nativeElement)).removeEventListener("keydown", this.keydownHandler, true);
        }
        this.docClickHandler = null;
        this.modalFocusOutHandler = null;
        this.keydownHandler = null;
        this.draggableDirective = null;
        this.modalElement = null;
        this._tabbables = null;
    }
    /**
     * After view init lifecycle. Sets initial dialog height/width and positioning
     * @return {?}
     */
    ngAfterViewInit() {
        super.ngAfterViewInit();
        //add 80px for grid padding
        this.modalWidth = parseInt(this.controlWidth) + 80;
        this.modalHeight = parseInt(this.controlHeight) + 80;
        // 画面リサイズ対応 Start
        if (this.resizeDialog) {
            this.modalBodyPercentHeight = "calc(100% - 25px)"; //modal-header分を削って設定
            this.modalBodyDivHeight = "100%";
            this.modalBodyDivWidth = "100%";
            this.modalBodyMinHeight = "auto";
        }
        else {
            this.modalBodyHeight = parseInt(this.controlHeight) - 25; //modal-header分を削って設定
        }
        // 画面リサイズ対応 End
        this.cd.detectChanges();
        if (this.modal !== "true" && this.modal !== true) {
            this.setModalLessPosition();
            this.bsModalClass.push("modaless");
            this.cd.detectChanges();
        }
        else {
            //disable buttons
            $(".header").addClass("header-disabled");
            $(".footer").addClass("footer-disabled");
        }
        this.setInitialPosition(this.initialPosition);
        this.updateDraggableDirectiveId();
        this.setDisabledDialogWidth();
        // if(this.resizeDialog){ 一時的にコメントアウト
        $(this.modalElement.nativeElement).resizable({
            handles: 'n, e, s, w, ne, se, sw, nw',
            minWidth: 150,
            minHeight: 20,
            resize: (event, ui) => {
                //top場所制限設定
                if (ui.position.top <= 82) {
                    ui.position.top = 82;
                    return;
                }
                ui.element.css("min-height", "");
                ui.element.css("min-width", "");
                $(this.modalDialog.nativeElement).css("height", ui.size.height);
                $(this.modalDialog.nativeElement).css("width", ui.size.width);
                $(this.modalContent.nativeElement).css("height", ui.size.height);
                $(this.modalContent.nativeElement).css("width", ui.size.width);
                $(this.body.nativeElement).css("min-height", "calc(100% - 25px)");
                if (this.tableId != null) {
                    /** @type {?} */
                    const table = /** @type {?} */ (UiDocument.getElementById(this.tableId));
                    if (table != null) {
                        table.tableResize();
                    }
                }
            }
        });
        $(this.modalElement.nativeElement).on("resizestop", () => {
            this.setDisabledDialogWidth();
        });
        // }
        this._tabbables = tabbable(this.body.nativeElement);
        this.zone.runOutsideAngular(() => {
            document.addEventListener("mousedown", this.docClickHandler);
            (/** @type {?} */ (this.modalElement.nativeElement)).addEventListener("focusout", this.modalFocusOutHandler, true);
            (/** @type {?} */ (this.modalElement.nativeElement)).addEventListener("keydown", this.keydownHandler, true);
        });
    }
    /**
     * Set the width of disabled-dialog with the width of the modal-content
     * @return {?}
     */
    setDisabledDialogWidth() {
        /** @type {?} */
        const element = this.modalElement.nativeElement;
        this.renderer.setStyle(element.querySelector('.disabled-dialog'), 'width', element.querySelector('.modal-content').offsetWidth + 'px');
        this.renderer.setStyle(element.querySelector('.disabled-dialog'), 'height', element.querySelector('.modal-content').offsetHeight + 'px');
    }
    /**
     * Sets the [[draggableDirective]] view id to the dialog instance [[id]]
     * @return {?}
     */
    updateDraggableDirectiveId() {
        if (this.draggableDirective != null) {
            this.draggableDirective.setViewId(this.id);
            this.draggableDirective.setTableId(this.tableId);
            this.draggableDirective.screenIndex = this.screenIndex;
        }
    }
    /**
     * Set position of window component
     * @return {?}
     */
    setModalLessPosition() {
        /** @type {?} */
        const bound = /** @type {?} */ ((/** @type {?} */ (this.modalElement.nativeElement.firstChild)).getBoundingClientRect());
        /** @type {?} */
        const left = (bound.x || bound.left) + "px";
        /** @type {?} */
        const top = (Math.max(bound.y || bound.top, 120)) + "px";
        this.renderer.setStyle(this.modalElement.nativeElement, "left", left);
        this.renderer.setStyle(this.modalElement.nativeElement, "top", top);
    }
    /**
     * Get the native HTML element of this dialog
     * @return {?} DOM element
     */
    getElement() {
        return this.elementRef.nativeElement;
    }
    /**
     * Event handler for click on close button. Closes the window
     * @param {?=} event
     * @param {?=} immediate
     * @return {?}
     */
    close(event = null, immediate = false) {
        // this.bsModalClass = ["vt-dialog", "modal", "fade", "out"];
        //this.cd.detectChanges();
        if (event != null) {
            event.stopPropagation();
        }
        if (this.modal === "true" || this.modal === true) {
            $(".header").removeClass("header-disabled");
            $(".footer").removeClass("footer-disabled");
        }
        if (this.getParent() != null && this.getParent().isView() && this.getParent().isDynamicView()) {
            this.dynamicPageService.removeView(/** @type {?} */ (this.getParent()), immediate);
        }
        else {
            if (this.getSession() != null && this.getSession().getRouteNavigatorService() != null) {
                this.getSession().getRouteNavigatorService().destroyRoute(this.viewRouteUrl);
            }
            else {
                console.error("Unable to change route, session or route navigation service is not defined");
            }
        }
    }
    /**
     * Set [[disabled]] property value
     * @param {?} boo Value for disabled property
     * @return {?}
     */
    setDisabled(boo) {
        this.disabled = boo;
        $(this.modalElement.nativeElement).resizable("option", "disabled", boo); //Don't remove this. This makes disabled-dialog not to be resizable.
        $(this.modalElement.nativeElement.querySelector('.modal-content')).disabled = boo; //I am not sure why this is needed.
    }
    /**
     * Sets the dialogs 'z-index' CSS property
     * @param {?} newZIndex
     * @return {?}
     */
    updateZIndex(newZIndex) {
        if (this.modalElement != null && this.renderer != null) {
            this.renderer.setStyle(this.modalElement.nativeElement, "z-index", newZIndex);
        }
        this.setInactiveDialogStyle();
    }
    /**
     * Set inactive window style if this dialog is not the current active dialog
     * @return {?}
     */
    setInactiveDialogStyle() {
        /** @type {?} */
        const inactiveDialogClass = 'inactive-dialog';
        // Apply inactive dialog class when other window is focused
        if (this.getSession().getMcoContainer().activeView() == null ||
            this.getSession().getMcoContainer().activeView().id != this.viewId) {
            this.bsModalClass.push(inactiveDialogClass);
        }
        else {
            this.bsModalClass = filter(this.bsModalClass, (c) => {
                return c !== inactiveDialogClass;
            });
        }
        //we used OnPush and change detector only know that it needs to do something if
        //our style array is immutable, so we need to tell it that changes happen.
        this.cd.markForCheck();
    }
    /**
     * Set position of this dialog when it is first opened
     * @param {?} position Window position
     * @return {?}
     */
    setInitialPosition(position) {
        if (position != null) {
            if (position.left >= 0) {
                this.renderer.setStyle(this.modalElement.nativeElement, "left", position.left + "px");
            }
            else {
                this.renderer.setStyle(this.modalElement.nativeElement, "left", "auto");
            }
            if (position.right >= 0) {
                this.renderer.setStyle(this.modalElement.nativeElement, "right", position.right + "px");
            }
            if (position.top >= 0) {
                this.renderer.setStyle(this.modalElement.nativeElement, "top", position.top + "px");
            }
            else {
                this.renderer.setStyle(this.modalElement.nativeElement, "top", "auto");
            }
            if (position.bottom >= 0) {
                this.renderer.setStyle(this.modalElement.nativeElement, "bottom", position.bottom + "px");
            }
            else {
                this.renderer.setStyle(this.modalElement.nativeElement, "bottom", "auto");
            }
        }
        /** @type {?} */
        const appHeader = $(".header")[0];
        /* istanbul ignore if */
        //appHeader can be null (in unit test, etc)
        if (appHeader) {
            /** @type {?} */
            let headerH = appHeader.clientHeight + appHeader.offsetTop;
            // init position
            this.renderer.setStyle(this.modalElement.nativeElement, "top", headerH + "px");
            if ((position != null)) {
                if (!(position.left > 0)) {
                    this.renderer.setStyle(this.modalElement.nativeElement, "left", "0");
                }
            }
            else {
                this.renderer.setStyle(this.modalElement.nativeElement, "left", "0");
            }
            // If 'centered' input is true, override initialPosition and modalLessPosition
            if (this._center) {
                /** @type {?} */
                let modelH = $(this.modalElement.nativeElement).height();
                /** @type {?} */
                let footerH = $(".footer")[0].clientHeight;
                this.renderer.setStyle(this.modalElement.nativeElement, "top", `calc(((100vh - ${headerH}px - ${footerH}px - ${modelH}px) / 2) + ${headerH}px)`);
                this.renderer.setStyle(this.modalElement.nativeElement, "left", "calc((100vw / 2) - " + ($(this.modalElement.nativeElement).width() / 2) + "px");
            }
        }
    }
    /**
     * Event handler for close event
     * \@event OnClosing
     * @return {?}
     */
    handleOnClosing() {
        this.onClosing.emit();
    }
    /**
     * Get the Nexaweb tag name of this component
     * @return {?}
     */
    getNxTagName() {
        return "dialog";
    }
    /**
     * Get JSON representation of dialog state
     * @return {?}
     */
    toJson() {
        /** @type {?} */
        const json = super.toJson();
        this.setJson(json, "title", this.title);
        this.setJson(json, "modal", this.modal);
        this.setJson(json, "centered", this._center);
        return json;
    }
    /**
     * Check whether or not this dialog is a container
     * @return {?} Boolean
     */
    isContainer() {
        return true;
    }
    /**
     * Check whether or not this is a dialog. Implementation of BaseComponent method
     * @return {?} Boolean
     */
    isDialog() {
        return true;
    }
    /**
     * Get the [[cd]] (ChangeDetectorRef) property
     * @return {?} ChangeDetectorRef
     */
    getChangeDetector() {
        return this.cd;
    }
    /**
     * Event handler for minimize button click. Minimizes dialog
     * @param {?} event
     * @return {?}
     */
    minimize(event) {
        if (event != null) {
            event.stopPropagation();
        }
        if ((JavaUtils.parseBoolean(this.modal))) {
            if (!this.isUnMaximize) {
                /** @type {?} */
                let minHeightLoc = DialogComponent.UNMAXIMIZE_HEGHT;
                this.isUnMaximize = true;
                if (this.isMaximize) {
                    $(this.modalElement.nativeElement).css("top", `${this.modalOriginalTop}px`);
                    $(this.modalElement.nativeElement).css("left", `${this.modalOriginalLeft}px`);
                    this.isMaximize = false;
                }
                $(this.body.nativeElement).css("min-height", "");
                $(this.body.nativeElement).css("height", minHeightLoc);
                $(this.modalElement.nativeElement).css("min-height", "");
                $(this.modalElement.nativeElement).css("height", minHeightLoc);
                $(this.modalElement.nativeElement.querySelector('.modal-content')).css("height", minHeightLoc);
                this.bsModalClass = ["vt-dialog", "modal", "fade", "in", "unmaximize"];
            }
            else {
                this.isUnMaximize = false;
                /** @type {?} */
                let minHeightLoc = $(this.modalElement.nativeElement.querySelector('.modal-dialog')).css("height");
                $(this.body.nativeElement).css("min-height", "calc(100% - 25px");
                $(this.body.nativeElement).css("height", "auto");
                $(this.modalElement.nativeElement).css("min-height", minHeightLoc);
                $(this.modalElement.nativeElement).css("height", minHeightLoc);
                $(this.modalElement.nativeElement.querySelector('.modal-content')).css("height", minHeightLoc);
                this.bsModalClass = ["vt-dialog", "modal", "fade", "in", "unmaximize"];
            }
        }
        else {
            this.isUnMaximize = false;
            this.bsModalClass = ["vt-dialog", "modal", "fade", "out", "minimize"];
            this.getSession().getMcoContainer().minimizeView(this.viewId);
        }
        this.cd.detectChanges();
    }
    /**
     * Event handler for maximize button click. Maximizes dialog
     * @param {?} event
     * @return {?}
     */
    maximize(event) {
        if (event != null) {
            event.stopPropagation();
        }
        if (this.isMaximize) {
            this.bsModalClass = ["vt-dialog", "modal", "fade", "in"];
            $(this.modalElement.nativeElement).css("top", `${this.modalOriginalTop}px`);
            $(this.modalElement.nativeElement).css("left", `${this.modalOriginalLeft}px`);
            this.isMaximize = false;
            if (JavaUtils.parseBoolean(this.modal) && $(this.modalElement.nativeElement.querySelector('.modal-content'))[0].style.height === DialogComponent.UNMAXIMIZE_HEGHT) {
                this.bsModalClass = ["vt-dialog", "modal", "fade", "in", "unmaximize"];
                this.isUnMaximize = true;
            }
            else {
                this.isUnMaximize = false;
            }
            this.cd.detectChanges();
        }
        else {
            $(this.body.nativeElement).css("min-height", "calc(100% - 25px)");
            $(this.modalElement.nativeElement).css("height", "auto");
            this.modalOriginalLeft = (/** @type {?} */ (this.modalElement.nativeElement)).getBoundingClientRect().left;
            this.modalOriginalTop = (/** @type {?} */ (this.modalElement.nativeElement)).getBoundingClientRect().top;
            $(this.modalElement.nativeElement).css("left", `${this.modalOriginalLeft}px`);
            $(this.modalElement.nativeElement).css("top", `${this.modalOriginalTop}px`);
            this.bsModalClass = ["vt-dialog", "modal", "fade", "in", "maximize"];
            this.isMaximize = true;
            this.isUnMaximize = false;
            this.cd.detectChanges();
        }
        // istanbul ignore if */
        if (this.tableId != null) {
            /** @type {?} */
            const table = /** @type {?} */ (UiDocument.getElementById(this.tableId));
            if (table != null) {
                table.tableResize();
            }
        }
        this.getSession().getMcoContainer().showView(this.viewId);
    }
    /**
     * Show the view after it has been hidden via minimized
     * @return {?}
     */
    showView() {
        if (this.disabled)
            return;
        if (this.isMaximize) {
            this.bsModalClass = ["vt-dialog", "modal", "fade", "in", "maximize"];
        }
        else {
            this.bsModalClass = ["vt-dialog", "modal", "fade", "in"];
        }
        this.cd.detectChanges();
        this.getSession().getMcoContainer().showView(this.viewId, this.screenIndex);
    }
    /**
     * Event handler for mousedown event. Resets dialog view stack
     * @return {?}
     */
    handleMouseDown() {
        //make this screen top most.
        this.getSession().getMcoContainer().reStackView(this.viewId, this.screenIndex);
    }
    /**
     * Stop propagation on disabled dialog
     * @param {?} event
     * @return {?}
     */
    onClickDisableContent(event) {
        if (this.disabled)
            event.stopPropagation();
    }
    /**
     * Stop propagation on modal dialog
     * @param {?} event
     * @return {?}
     */
    onClickBackdrop(event) {
        if (this.modal == true || this.modal == 'true')
            event.stopPropagation();
    }
    /**
     * @return {?}
     */
    updateModalDialogStyle() {
        if (this.renderer != null && this.elementRef != null) {
            if (this.modal === true || this.modal === "true") {
                this.renderer.addClass(this.elementRef.nativeElement, "modal");
                this.renderer.setStyle(this.elementRef.nativeElement, "display", "inline-block");
            }
            else {
                this.renderer.removeClass(this.elementRef.nativeElement, "modal");
                this.renderer.removeStyle(this.elementRef.nativeElement, "display");
            }
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    checkFocusOut(event) {
        if ((/** @type {?} */ (this.elementRef.nativeElement)).contains(/** @type {?} */ (event.relatedTarget))) {
            this.getSession()._windowLostFocus = false;
        }
        if (this.getSession()._windowLostFocus !== true &&
            this._tabbables &&
            this._tabbables.length > 0 &&
            this.wasClickOutside !== true &&
            !((/** @type {?} */ (this.elementRef.nativeElement)).contains(/** @type {?} */ (event.relatedTarget)))
            && this.disabled !== true) {
            if (event.relatedTarget == null ||
                (!(/** @type {?} */ (event.relatedTarget)).classList.contains("dropdown-item") &&
                    !(/** @type {?} */ (event.relatedTarget)).classList.contains("menuItem"))) {
                event.stopPropagation();
                this._tabbables[0].focus();
            }
        }
        this.getSession()._windowLostFocus = false;
    }
    /**
     * @param {?} event
     * @return {?}
     */
    handleDocClickEvent(event) {
        this.wasClickOutside = false;
        if (!((/** @type {?} */ (this.elementRef.nativeElement)).contains(/** @type {?} */ (event.target)))) {
            this.wasClickOutside = true;
        }
        /** @type {?} */
        let _leftDisabledErroElementId = [];
        //if disabled element
        if (this._canTrackFocusLostOnErrorDisabled === true) {
            if (this._disabledErrorElementId != null &&
                this._disabledErrorElementId.length > 0) {
                for (let elId of this._disabledErrorElementId) {
                    /** @type {?} */
                    const disabledEl = UiDocument.getElementById(elId);
                    /** @type {?} */
                    const inputElement = disabledEl.getElement().querySelector('input');
                    if (disabledEl != null) {
                        if (event.target != inputElement)
                            disabledEl.setBgColor("");
                        else
                            _leftDisabledErroElementId.push(elId);
                    }
                }
            }
            if (_leftDisabledErroElementId.length == 0) {
                this._disabledErrorElementId = null;
                this._canTrackFocusLostOnErrorDisabled = false;
            }
            else {
                this._disabledErrorElementId = _leftDisabledErroElementId;
            }
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    checkKey(event) {
        if (this.disabled === true) {
            event.preventDefault();
            event.stopPropagation();
        }
    }
    /**
     * @return {?}
     */
    trackFocusLostOnErrorDisabled() {
        this._canTrackFocusLostOnErrorDisabled = true;
    }
}
DialogComponent.UNMAXIMIZE_HEGHT = "20px";
DialogComponent.decorators = [
    { type: Component, args: [{
                selector: 'vt-dialog',
                template: "<div #myModal [vtDraggable]=\"draggable\" [modal]=\"modal\" [id]=\"id\" [ngClass]=\"bsModalClass\" tabindex=\"-1\" role=\"dialog\" title=\"\"\n[style.minWidth.px]=\"controlWidth\"\n[style.minHeight.px]=\"controlHeight\"\n>\n<div\n  #modalDialog\n  [style.height.px]=\"controlHeight\"\n  [style.width.px]=\"controlWidth\"\n  class=\"modal-dialog\"\n  [ngClass]=\"cssClass\"\n  role=\"document\">\n  <div class=\"disabled-dialog\" [ngStyle]=\"{'display': disabled ? 'block' : 'none'}\" (click)=\"onClickDisableContent($event)\"></div>\n  <div #modalContent class=\"modal-content\" [style.height.px]=\"controlHeight\">\n    <div class=\"modal-header\" #draggablePanel>\n      <button type=\"button\" *ngIf=\"!isMaximize\" class=\"close\"\n        data-dismiss=\"modal\"\n        aria-label=\"maximize\"\n        (click)=\"maximize($event)\"\n        tabindex=\"-1\">\n        <span aria-hidden=\"true\"><div class=\"icon-maximize\"></div></span>\n      </button>\n      <button type=\"button\" *ngIf=\"isMaximize\" class=\"close\"\n        data-dismiss=\"modal\"\n        aria-label=\"maximize\"\n        (click)=\"maximize($event)\"\n        tabindex=\"-1\">\n        <span aria-hidden=\"true\"><div class=\"icon-unmaximize\"></div></span>\n      </button>\n      <button type=\"button\"  *ngIf=\"isUnMaximize\" class=\"close\"\n        data-dismiss=\"modal\"\n        aria-label=\"unmaximize\"\n        (click)=\"minimize($event)\"\n        tabindex=\"-1\">\n        <span aria-hidden=\"true\"><div class=\"icon-unmaximize\"></div></span>\n      </button>\n      <button type=\"button\" *ngIf=\"!isUnMaximize\" class=\"close\"\n        data-dismiss=\"modal\"\n        aria-label=\"minimize\"\n        (click)=\"minimize($event)\"\n        tabindex=\"-1\">\n        <span aria-hidden=\"true\"><div class=\"icon-minimize\"></div></span>\n      </button>\n      <!-- <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" (mousedown)=\"handleOnClosing()\" (click)=\"close($event)\"><span aria-hidden=\"true\">&times;</span></button> -->\n      <h4 class=\"modal-title\" onselectstart=\"return false\" (dblclick)=\"maximize($event)\">{{ title }}</h4>\n    </div>\n    <div #modalBody class=\"modal-body\" [style.height.px]=\"modalBodyHeight\" [style.height]=\"modalBodyPercentHeight\" [style.minHeight]=\"modalBodyMinHeight\">\n      <div [style.width.percent]=\"100\" [style.width]=\"modalBodyDivWidth\" [style.height]=\"modalBodyDivHeight\" #viewContainer (mousedown)=\"handleMouseDown()\">\n        <ng-content></ng-content>\n      </div>\n    </div>\n  </div><!-- /.modal-content -->\n</div><!-- /.modal-dialog -->\n</div><!-- /.modal -->\n<div *ngIf= \" modal == true || modal == 'true'\" class=\"backdrop\" (click)=\"onClickBackdrop($event)\">\n</div>\n",
                changeDetection: ChangeDetectionStrategy.OnPush,
                styles: [".dialog-centered{position:fixed;top:50%;left:50%}@media (min-width:768px){.modal-xl{width:90%;max-width:1200px}}.modal.modaless{position:fixed;right:auto;bottom:auto}.modal.modaless .modal-dialog{margin:0}vt-dialog .modal-header{padding:5px 15px}.vt-dialog.modal{display:inline-block;right:auto;bottom:auto;overflow:visible}.minimize{display:none!important}.maximize{left:0!important;width:100%!important;bottom:34px!important;top:100px!important}.maximize .modal-dialog{width:100%!important;max-width:100%!important;height:100%!important}.maximize .modal-content{width:100%!important;height:100%!important}.maximize .modal-content.ui-resizable{left:0!important}@media (min-width:768px){.modal-dialog{margin:0;display:inline-block}}.modal-content{overflow:hidden}.modal-header .close{padding:3px;margin-left:3px;border:1px ridge;border-radius:4px}.icon-minimize{width:14px;height:10px;background-image:url(minimize.png);background-repeat:no-repeat;background-size:14px}.icon-maximize{width:14px;height:10px;background-image:url(maximize.png);background-repeat:no-repeat;background-size:14px}.icon-unmaximize{width:14px;height:10px;background-image:url(restore.png);background-repeat:no-repeat;background-size:14px}.disabled-dialog{position:absolute;z-index:10;background-color:rgba(0,0,0,.1)}.backdrop{width:100vw;height:100vh;opacity:0;background-color:#000}"]
            }] }
];
/** @nocollapse */
DialogComponent.ctorParameters = () => [
    { type: BaseComponent, decorators: [{ type: Optional }, { type: SkipSelf }] },
    { type: SessionService },
    { type: ElementRef },
    { type: ChangeDetectorRef },
    { type: Renderer2 },
    { type: DynamicPagesService },
    { type: NgZone }
];
DialogComponent.propDecorators = {
    body: [{ type: ViewChild, args: ['modalBody',] }],
    modalDialog: [{ type: ViewChild, args: ["modalDialog",] }],
    modalContent: [{ type: ViewChild, args: ["modalContent",] }],
    title: [{ type: Input }],
    draggable: [{ type: Input }],
    initialPosition: [{ type: Input }],
    modal: [{ type: Input }],
    centered: [{ type: Input }],
    windowTitle: [{ type: Input }],
    modalSize: [{ type: Input }],
    resizeable: [{ type: Input }],
    onClosing: [{ type: Output }],
    modalElement: [{ type: ViewChild, args: ['myModal', { read: ElementRef },] }],
    viewContainer: [{ type: ViewChild, args: ['viewContainer', { read: ViewContainerRef },] }],
    draggablePanel: [{ type: ViewChild, args: ['draggablePanel', { read: ViewContainerRef },] }],
    draggableDirective: [{ type: ViewChild, args: [DraggableDirective,] }],
    resizeDialog: [{ type: Input }],
    tableId: [{ type: Input }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class DialogModule {
}
DialogModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    ModalModule.forRoot()
                ],
                declarations: [
                    DialogComponent,
                    DraggableDirective
                ],
                exports: [
                    DialogComponent,
                    DraggableDirective,
                    ModalModule
                ]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class GridColumnDirective {
    /**
     * @param {?} el
     */
    constructor(el) {
        this.el = el;
    }
    /**
     * Init lifecycle. Set grid column css class
     * @return {?}
     */
    ngOnInit() {
        /** @type {?} */
        let cssClass = this.vtGridColumn ? `col-sm-${this.vtGridColumn}` : 'col-sm';
        this.el.nativeElement.classList.add(cssClass);
    }
}
GridColumnDirective.decorators = [
    { type: Directive, args: [{
                selector: '[vtGridColumn]'
            },] }
];
/** @nocollapse */
GridColumnDirective.ctorParameters = () => [
    { type: ElementRef }
];
GridColumnDirective.propDecorators = {
    vtGridColumn: [{ type: Input }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Class for Horizontal line (HR) component
 */
class HorizontalSeparatorComponent extends BaseComponent {
    /**
     *
     * @param {?} parent see [[BaseComponent]]
     * @param {?} sessionService see [[BaseComponent]]
     * @param {?} elementRef see [[BaseComponent]]
     * @param {?} renderer see [[BaseComponent]]
     */
    constructor(parent, sessionService, elementRef, renderer) {
        super(parent, sessionService, elementRef, renderer);
    }
    /**
     * Init lifecycle method
     * @return {?}
     */
    ngOnInit() {
    }
    /**
     * Get JSON representation for this component
     * @return {?}
     */
    toJson() {
        /** @type {?} */
        const json = super.toJson();
        this.setJson(json, "borderColor", this.borderColor);
        return json;
    }
}
HorizontalSeparatorComponent.decorators = [
    { type: Component, args: [{
                selector: 'vt-horizontal-separator',
                template: "<hr [id]=\"id\" [style.backgroundColor]=\"borderColor\" [style.height]=\"controlHeight\" [style.maxWidth]=\"controlWidth\" />\n",
                providers: [
                    {
                        provide: BaseComponent,
                        useExisting: forwardRef(() => HorizontalSeparatorComponent)
                    }
                ],
                styles: ["hr{margin-top:3px;margin-bottom:3px;border-color:#5c5c5c;box-shadow:0 1px 0 #fff}"]
            }] }
];
/** @nocollapse */
HorizontalSeparatorComponent.ctorParameters = () => [
    { type: BaseComponent, decorators: [{ type: Optional }, { type: SkipSelf }] },
    { type: SessionService },
    { type: ElementRef },
    { type: Renderer2 }
];
HorizontalSeparatorComponent.propDecorators = {
    borderColor: [{ type: Input }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class HorizontalSeparatorModule {
}
HorizontalSeparatorModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule
                ],
                declarations: [HorizontalSeparatorComponent],
                exports: [HorizontalSeparatorComponent]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class Integer {
    /**
     * @param {?} num
     * @return {?}
     */
    static toString(num) {
        return num + '';
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
const moment$1 = moment;
/**
 * Java DateFormat
 */
class DateFormat {
    /**
     * @param {?=} formatPattern
     */
    constructor(formatPattern = null) {
        this.formatPattern = formatPattern;
        this.isLenient = true;
    }
    /**
     * @param {?} pattern
     * @return {?}
     */
    static getDateInstance(pattern) {
        return new DateFormat(pattern);
    }
    /**
     * @param {?} fm
     * @return {?}
     */
    static javaToMomentDateFormat(fm) {
        /** @type {?} */
        const s = fm.replace(/y/g, 'Y');
        return s.replace(/d/g, 'D');
        //the above is needed b/c ng-packagr is being a b***
        //it doesn't like return fm.replace(/y/g, 'Y').replace(/d/g, 'D');
    }
    /**
     * @return {?}
     */
    static now() {
        return moment$1();
    }
    /**
     * @param {?} date
     * @return {?}
     */
    format(date) {
        if (date === null)
            return null;
        if (date === undefined)
            return undefined;
        return this.formatPattern == null ? moment$1(date).format() : moment$1(date).format(this.formatPattern);
    }
    /**
     * @param {?} dateString
     * @return {?}
     */
    parse(dateString) {
        /** @type {?} */
        let momentDate = this.formatPattern ? moment$1(dateString, this.formatPattern) : moment$1(dateString);
        if (this.isLenient === false && momentDate.isValid() === false) {
            throw new Error(`Unable to parse date string: ${dateString}, using format: ${this.formatPattern}`);
        }
        this.calendar = momentDate;
        return momentDate;
    }
    /**
     * @param {?} lenient
     * @return {?}
     */
    setLenient(lenient) {
        this.isLenient = lenient;
    }
    /**
     * @param {?} date
     * @return {?}
     */
    setCalendar(date) {
        this.calendar = moment$1(date);
    }
    /**
     * @return {?}
     */
    getCalendar() {
        return this.calendar;
    }
}
DateFormat.SHORT = 'M/D/YY';
DateFormat.MEDIUM = 'MMM D, YYYY';
DateFormat.LONG = 'MMMM D, YYYY';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Class for label component. Renders text
 */
class LabelComponent extends BaseComponent {
    /**
     *
     * @param {?} parent See [[BaseComponent]]
     * @param {?} sessionService see [[BaseComponent]]
     * @param {?} elementRef see [[BaseComponent]]
     * @param {?} cd Change detector ref
     * @param {?} renderer see [[BaseComponent]]
     */
    constructor(parent, sessionService, elementRef, cd, renderer) {
        super(parent, sessionService, elementRef, renderer);
        this.cd = cd;
        this._tooltip = '';
        this.onCommand = new EventEmitter();
    }
    /**
     * @param {?} tooltip
     * @return {?}
     */
    set tooltip(tooltip) {
        if (tooltip == null || tooltip === "undefined") {
            this._tooltip = "";
        }
        else {
            this._tooltip = tooltip;
        }
    }
    /**
     * Accessor method for internal [[_tootip]] property
     * @return {?}
     */
    get tooltip() {
        return this._tooltip;
    }
    /**
     * Init lifecycle method. Runs when component is created
     * @return {?}
     */
    ngOnInit() {
        super.ngOnInit();
        if (this.controlWidth) {
            this.controlWidth = this.controlWidth + 'px';
        }
        if (this.marginRight) {
            this.marginRight = this.marginRight + 'px';
        }
        if (this.marginLeft) {
            this.marginLeft = this.marginLeft + 'px';
        }
    }
    /**
     * After view init lifecycle method. Runs after component view is created
     * @return {?}
     */
    ngAfterViewInit() {
        super.ngAfterViewInit();
        if (this.controlHeight != null && this.controlHeight !== "") {
            this.styles["height"] = this.controlHeight + "px";
        }
        this.setAttributeFromDef();
        //fix expression has changed blah blah blah
        this.cd.detectChanges();
    }
    /**
     * Get JSON representation of component
     * @return {?}
     */
    toJson() {
        /** @type {?} */
        const json = super.toJson();
        this.setJson(json, "alignHorizontal", this.alignHorizontal);
        return json;
    }
    /**
     * Set value of [[tooltip]] property
     * @param {?} tooltip
     * @return {?}
     */
    setTooltip(tooltip) {
        this.tooltip = tooltip;
        this.cd.markForCheck();
    }
    /**
     * Event handler for mousedown event. Call parent class [[handleMouseDown]]
     * @param {?} e Mouse click event
     * @return {?}
     */
    onMouseDown(e) {
        this.handleMouseDown(e);
    }
    /**
     * Event handler for click event.
     * \@event OnCommand
     * @return {?}
     */
    handleOnClick() {
        if (this.emitInternalOnCommand() === false) {
            this.onCommand.emit();
        }
    }
    /**
     * Get value of [[cd]] (ChangeDetectorRef) property
     * @return {?} The component's change detector
     */
    getChangeDetector() {
        return this.cd;
    }
    /**
     * Get NexaWeb tag name
     * @return {?} Name of tag
     */
    getNxTagName() {
        return "label";
    }
    /**
     * Check if the text is all space characters
     * @return {?} If text is just space characters TRUE, otherwise FALSE
     */
    get spaceText() {
        return this.text && this.text.length > 0 && this.text.trim().length === 0;
    }
    /**
     * Set [[visible]] property value
     * @override
     * @param {?} value Toggle visibility
     * @return {?}
     */
    setVisible(value) {
        this.visible = value;
        if (this.visible) {
            this.removeCssClass('hidden');
            this.getElement().removeAttribute('hidden');
        }
        else {
            this.addCssClass('hidden');
            this.getElement().setAttribute('hidden', '');
        }
    }
}
LabelComponent.decorators = [
    { type: Component, args: [{
                selector: 'vt-label,vt-cell',
                template: "<span\n  [id]=\"id\"\n  [title]=\"tooltip\"\n  [ngClass]=\"{'hidden': visible != true}\"\n  class=\"vt-label {{cssClass}} {{(disabled ===true) ? 'disabled':''}}\"\n  [style.textAlign]=\"alignHorizontal\"\n  [style.maxWidth]=\"controlWidth\"\n  [style.padding]=\"controlPadding\"\n  [style.border-style]=\"borderStyle\"\n  [style.margin-left]=\"marginLeft\"\n  [style.margin-right]=\"marginRight\"\n  [style.color]=\"fontColor\"\n  [ngStyle]=\"styles\"\n  (click)=\"handleOnClick()\"\n  (contextmenu)=\"handleOnContextMenu($event)\"\n  (mousedown)=\"onMouseDown($event)\">\n  <ng-template [ngIf]=\"spaceText === false\">{{ text }}</ng-template>\n  <ng-template [ngIf]=\"spaceText === true\">&nbsp;</ng-template>\n  <!-- has children?-->\n  <ng-content></ng-content>\n</span>\n",
                changeDetection: ChangeDetectionStrategy.OnPush,
                providers: [
                    {
                        provide: BaseComponent,
                        useExisting: LabelComponent
                    }
                ],
                styles: [""]
            }] }
];
/** @nocollapse */
LabelComponent.ctorParameters = () => [
    { type: BaseComponent, decorators: [{ type: Optional }, { type: SkipSelf }] },
    { type: SessionService },
    { type: ElementRef },
    { type: ChangeDetectorRef },
    { type: Renderer2 }
];
LabelComponent.propDecorators = {
    alignHorizontal: [{ type: Input }],
    tooltip: [{ type: Input }],
    onCommand: [{ type: Output }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class LabelModule {
}
LabelModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    BaseModule
                ],
                declarations: [LabelComponent],
                exports: [LabelComponent],
                entryComponents: [
                    LabelComponent
                ]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class PanelComponent extends BaseComponent {
    /**
     * @param {?} parent
     * @param {?} sessionService
     * @param {?} elementRef
     * @param {?} cd
     * @param {?} renderer
     */
    constructor(parent, sessionService, elementRef, cd, renderer) {
        super(parent, sessionService, elementRef, renderer);
        this.cd = cd;
        /**
         * For escaping unneeded row & fluid container. This is a trikcy option.
         * Almost case, fluid container is not needed. it's too late...
         * \@property {boolean}
         */
        this.noGutter = false;
        /**
         * For escaping fluid container. This is a trikcy option.
         * should be validated by `(layout !== 'grid')` . it's too late...
         * \@property {boolean}
         */
        this.noGrid = false;
        this.panelClasses = ['vt-panel'];
        this.panelStyles = {};
        // 画面リサイズ対応 Start
        this.resizeComponent = false;
        this.resizeMarginTop = null;
        this.resizeHeight = null;
        this.divHeight = null;
        // 画面リサイズ対応 End
        // 画面のレイアウト固定化対応 Start
        this.contentDisplayWidth = null;
    }
    /**
     * @param {?} children
     * @return {?}
     */
    set childrenList(children) {
        this.resetChildIndexes(children.filter(child => child !== this));
    }
    /**
     * Init lifecycle. Set dimensions and css styles
     * @return {?}
     */
    ngOnInit() {
        super.ngOnInit();
        if (this.cssClass != null) {
            this.cssClass.split(' ').forEach(css => this.panelClasses.push(css));
        }
        if (this.containerLayout === true && !this.noGrid && !this.noGutter) {
            this.panelClasses.push('container-fluid');
        }
        /*if (!this.borderColor) {
              this.borderColor = 'transparent';
            }*/
        if (this.borderWidth) {
            this.borderWidth = this.borderWidth + 'px';
            this.borderStyle = 'solid';
            if (this.borderColor == null) {
                this.borderColor = '#ffffff';
            }
        }
        if (this.controlHeight == null) {
            this.controlHeight = '100%';
        }
        this.setVisible(this.visible);
        // 画面リサイズ対応 Start
        if (this.resizeComponent) {
            this.resizeHeight = "calc(100% - " + this.resizeMarginTop + "px)";
            this.divHeight = "100%";
        }
        if (this.marginLeft) {
            this.marginLeft = this.marginLeft + 'px';
        }
    }
    /**
     * After view init lifecycle. Set dimensions and trigger change detection
     * @return {?}
     */
    ngAfterViewInit() {
        super.ngAfterViewInit();
        this.initWidthHeightStyle();
        this.cd.detectChanges();
    }
    /**
     *
     * @param {?} childrenList Update list of children ids
     * @return {?}
     */
    resetChildIndexes(childrenList) {
        if (childrenList != null && childrenList.length > 0) {
            if (this._childrenIndex !== null) {
                this._childrenIndex = uniq(concat(childrenList.map(child => child.getId()), this._childrenIndex));
            }
        }
    }
    /**
     * Set dimensions of panel based on [[controlHeight]] and [[controlWidth]] properties
     * @param {?=} heightStyleName
     * @param {?=} widthStyleName
     * @return {?}
     */
    initWidthHeightStyle(heightStyleName = 'height', widthStyleName = 'max-width') {
        if (this.controlHeight != null && this.controlHeight != "" && parseInt(this.controlHeight) > 0) {
            this.panelStyles["height"] = parseInt(this.controlHeight) + "px";
        }
        if (this.controlWidth != null && this.controlWidth != "" && parseInt(this.controlWidth) > 0) {
            this.panelStyles[widthStyleName] = parseInt(this.controlWidth) + "px";
        }
    }
    /**
     * Set [[disabled]] property value
     * @param {?} boo Toggle disabled
     * @return {?}
     */
    setDisabled(boo) {
        this.disabled = boo;
        this.getChildren().toArray().forEach(item => {
            item.setAttribute(AttributesEnum.DISABLED, boo);
        });
    }
    /**
     * Set [[visible]] property value
     * @param {?} boo Toggle visibility
     * @return {?}
     */
    setVisible(boo) {
        this.visible = boo;
        if (this.visible) {
            this.removeCssClass('hidden');
            this.getElement().removeAttribute('hidden');
        }
        else {
            this.addCssClass('hidden');
            this.getElement().setAttribute('hidden', '');
        }
    }
    /**
     * Check if [[caption]] property exists and is set
     * @return {?} True if caption exists and has content, otherwise false
     */
    get hasCaption() {
        return this.caption != null && this.caption.length > 0;
    }
    /**
     * Check if [[layout]] property exists
     * @return {?} True if layout exists, otherwise false
     */
    get containerLayout() {
        return this.layout != null;
    }
    /**
     * Get the [[cd]] (ChangeDetectorRef) property
     * @return {?} Change detector for this panel
     */
    getChangeDetector() {
        return this.cd;
    }
    /**
     * Check whether or not this component is a container
     * @return {?} True since panels are always containers
     */
    isContainer() {
        return true;
    }
    /**
     * @return {?}
     */
    getNxTagName() {
        return "panel";
    }
}
PanelComponent.decorators = [
    { type: Component, args: [{
                selector: 'vt-panel',
                template: "<div [id]=\"id\"\n  [style.color]=\"fontColor\"\n  [style.borderColor]=\"borderColor\"\n  [style.borderWidth]=\"borderWidth\"\n  [style.borderStyle]=\"borderStyle\"\n  [style.height]=\"resizeHeight\"\n  [style.overflow]=\"controlOverflow\"\n  [style.width.px]=\"panelWidth\"\n  [style.min-width.px]=\"panelMinWidth\"\n  [style.min-height]=\"panelMinHeight\"\n  [style.float]=\"controlFloat\"\n  [style.margin-left]=\"marginLeft\"\n  [ngClass]=\"panelClasses\">\n  <h1 *ngIf=\"hasCaption === true\" class=\"panel-caption\">{{caption}}</h1>\n  <div class=\"{{noGrid ?'':'row'}} {{noGutter ?'row-no-gutters':''}}\" [style.height]=\"divHeight\" [style.width.px]=\"contentDisplayWidth\" [style.padding]=\"controlPadding\">\n    <ng-content></ng-content>\n  </div>\n</div>\n",
                changeDetection: ChangeDetectionStrategy.OnPush,
                providers: [
                    {
                        provide: BaseComponent,
                        useExisting: forwardRef(() => PanelComponent)
                    }
                ],
                styles: [""]
            }] }
];
/** @nocollapse */
PanelComponent.ctorParameters = () => [
    { type: BaseComponent, decorators: [{ type: Optional }, { type: SkipSelf }] },
    { type: SessionService },
    { type: ElementRef },
    { type: ChangeDetectorRef },
    { type: Renderer2 }
];
PanelComponent.propDecorators = {
    layout: [{ type: Input }],
    caption: [{ type: Input }],
    evenlySpace: [{ type: Input }],
    noGutter: [{ type: Input }],
    noGrid: [{ type: Input }],
    childrenList: [{ type: ContentChildren, args: [BaseComponent,] }],
    resizeComponent: [{ type: Input }],
    resizeMarginTop: [{ type: Input }],
    contentDisplayWidth: [{ type: Input }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class LayoutModule {
}
LayoutModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule
                ],
                declarations: [
                    GridColumnDirective,
                    PanelComponent
                ],
                exports: [
                    GridColumnDirective,
                    PanelComponent
                ]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Class for a link component
 */
class LinkComponent extends BaseComponent {
    /**
     *
     * @param {?} parent see [[BaseComponent]] constructor
     * @param {?} sessionService see [[BaseComponent]] constructor
     * @param {?} elementRef see [[BaseComponent]] constructor
     * @param {?} cd Change detector reference for this component
     * @param {?} renderer see [[BaseComponent]] constructor
     */
    constructor(parent, sessionService, elementRef, cd, renderer) {
        super(parent, sessionService, elementRef, renderer);
        this.cd = cd;
        this.onCommand = new EventEmitter();
    }
    /**
     * @return {?}
     */
    get disabled() { return this._disabled; }
    /**
     * @param {?} value
     * @return {?}
     */
    set disabled(value) {
        this.opacity = value ? '0.3' : '1.0';
        this._disabled = value;
    }
    /**
     * Init lifecycle. Calls parent init method
     * @return {?}
     */
    ngOnInit() {
        super.ngOnInit();
    }
    /**
     * Event handler for click event. Does not emit event if the panel is disabled
     * \@event OnCommand
     * @return {?}
     */
    onClick() {
        if (!this.disabled)
            this.onCommand.emit();
    }
    /**
     * Event handler for keydown event. Execute click handler if it's the enter key
     * @param {?} e Keyboard Event
     * @return {?}
     */
    onKeyUp(e) {
        // if ENTER key
        if (e.keyCode === 13) {
            this.onClick();
        }
    }
    /**
     * Get the JSON representation for panel
     * @return {?}
     */
    toJson() {
        /** @type {?} */
        const json = super.toJson();
        if (json["customAttributes"] == null) {
            json["customAttributes"] = {};
        }
        this.setJson(json["customAttributes"], "idName", this.idName);
        return json;
    }
    /**
     * Get the [[cd]] (ChangeDetector) property
     * @return {?} Value of [[cd]] property
     */
    getChangeDetector() {
        return this.cd;
    }
}
LinkComponent.decorators = [
    { type: Component, args: [{
                selector: 'vt-link',
                template: "<span [id]=\"id\" class=\"vt-link {{ cssClass }}\" (click)=\"onClick()\"\n  (keyup)=\"onKeyUp($event)\"\n  [style.color]=\"fontColor\"\n  [ngClass]=\"{'hidden': visible != true}\"\n  tabindex=\"0\"\n  [style.maxWidth]=\"controlWidth\"\n  [style.opacity]=\"opacity\">\n  {{ text }}\n  <div *ngIf=\"innerhtml && innerhtml.length > 0\" [innerHTML]=\"innerhtml\"></div>\n</span>\n",
                changeDetection: ChangeDetectionStrategy.OnPush,
                providers: [
                    {
                        provide: BaseComponent,
                        useExisting: forwardRef(() => LinkComponent)
                    }
                ],
                styles: [".vt-link{text-decoration:underline;cursor:pointer}"]
            }] }
];
/** @nocollapse */
LinkComponent.ctorParameters = () => [
    { type: BaseComponent, decorators: [{ type: Optional }, { type: SkipSelf }] },
    { type: SessionService },
    { type: ElementRef },
    { type: ChangeDetectorRef },
    { type: Renderer2 }
];
LinkComponent.propDecorators = {
    idName: [{ type: Input }],
    onCommand: [{ type: Output }],
    disabled: [{ type: Input, args: ['disabled',] }],
    innerhtml: [{ type: Input, args: ['innerhtml',] }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class LinkModule {
}
LinkModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule
                ],
                declarations: [LinkComponent],
                exports: [LinkComponent]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class Long {
    /**
     * @param {?} num
     * @return {?}
     */
    static toString(num) {
        return num + '';
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
const moment$2 = momentImported;
/**
 * Simple util to parse moment into proper zone (if needed)
 */
class MomentUtils {
    /**
     * @param {?} dateString
     * @param {?=} format
     * @return {?}
     */
    static moment(dateString, format) {
        if (format != null && format != '') {
            if (MomentUtils.timeZone != null && MomentUtils.timeZone != '') {
                return moment$2.tz(dateString, format, MomentUtils.timeZone);
            }
            return moment$2(dateString, format);
        }
        else {
            if (MomentUtils.timeZone != null && MomentUtils.timeZone != '') {
                return moment$2.tz(dateString, MomentUtils.timeZone);
            }
            return moment$2(dateString);
        }
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * DynamicComponent class. Renders components at runtime by definition
 */
class DynamicComponent {
    /**
     * @param {?} cd
     */
    constructor(cd) {
        this.cd = cd;
    }
    /**
     * After init lifecycle.
     * @return {?}
     */
    ngAfterViewInit() {
        this.cleanClass();
        this.cd.detectChanges();
    }
    /**
     * Check if element is visible
     * @return {?} Value of [[DynamicElement]] visible property.
     */
    isVisible() {
        return this.elementDef.visible !== false;
    }
    /**
     * Get component ID if it exists, otherwise generate a unique id
     * @return {?} Component's id value
     */
    getId() {
        return this.elementDef.id == null ? BaseComponent.generateUniqueId() : this.elementDef.id;
    }
    /**
     * Event handler for OnCommand event. Call runtime component's onCommand handler
     * @return {?}
     */
    handleOnCommand() {
        if (typeof this.elementDef.onCommand === "function") {
            this.elementDef.onCommand(this.myComponent);
        }
    }
    /**
     * Event handler for OnContextMenu (i.e. right click, ctrl click) event. Call runtime component's onContextMenu Handler
     * @return {?}
     */
    handleOnContextMenu() {
        if (typeof this.elementDef.onContextMenu === "function") {
            this.elementDef.onContextMenu(this.myComponent);
        }
    }
    /**
     * Set runtime component's 'enabled' property value based on cssClass and call parent class cleanCss method
     * @return {?}
     */
    cleanClass() {
        if (this.elementDef.cssClass != null && this.elementDef.cssClass !== "") {
            if (typeof AppUtils.attributeOverrideClass === "function") {
                /** @type {?} */
                const attrs = AppUtils.attributeOverrideClass(this.elementDef.cssClass);
                if (attrs != null) {
                    forEach(attrs, (val) => {
                        if (val != null && val.attributeName === AttributesEnum.ENABLED) {
                            this.elementDef.enabled = val.value;
                        }
                    });
                }
            }
            this.elementDef.cssClass = BaseComponent.cleanCss(this.elementDef.cssClass);
        }
    }
}
DynamicComponent.decorators = [
    { type: Component, args: [{
                selector: "vt-dynamic-component",
                template: "<!-- panel -->\n<vt-panel #myComponent\n    *ngIf=\"elementDef.type === 'panel'\"\n    [ngStyle]=\"elementDef.styles\"\n    [ngClass]=\"elementDef.cssClass\"\n    id=\"{{getId()}}\"\n    [visible]=\"isVisible()\"\n    (onContextMenu)=\"handleOnContextMenu()\"\n    [customAttributes]=\"elementDef.customAttributes\">\n    <ng-template [ngIf]=\"elementDef.children != null && elementDef.children.length > 0\">\n        <vt-dynamic-component *ngFor=\"let compDef of elementDef.children\" [elementDef]=\"compDef\"></vt-dynamic-component>\n    </ng-template>\n</vt-panel>\n<!-- label -->\n<vt-label #myComponent\n    *ngIf=\"elementDef.type === 'label'\"\n    [text]=\"elementDef.text\"\n    [ngStyle]=\"elementDef.styles\"\n    [ngClass]=\"elementDef.cssClass\"\n    id=\"{{getId()}}\"\n    [visible]=\"isVisible()\"\n    [tooltip]=\"elementDef.tooltip\"\n    (onContextMenu)=\"handleOnContextMenu()\"\n    [customAttributes]=\"elementDef.customAttributes\">\n</vt-label>\n<!-- textField -->\n<vt-text-field #myComponent\n    *ngIf=\"elementDef.type === 'textField'\"\n    [text]=\"elementDef.text\"\n    [value]=\"elementDef.value\"\n    [ngStyle]=\"elementDef.styles\"\n    [ngClass]=\"elementDef.cssClass\"\n    id=\"{{getId()}}\"\n    [visible]=\"isVisible()\"\n    [enabled]=\"elementDef.enabled !== false\"\n    (onContextMenu)=\"handleOnContextMenu()\"\n    [customAttributes]=\"elementDef.customAttributes\">\n</vt-text-field>\n<!-- button -->\n<vt-button #myComponent\n    *ngIf=\"elementDef.type === 'button'\"\n    [text]=\"elementDef.text\"\n    [ngStyle]=\"elementDef.styles\"\n    [ngClass]=\"elementDef.cssClass\"\n    id=\"{{getId()}}\"\n    [visible]=\"isVisible()\"\n    [customAttributes]=\"elementDef.customAttributes\"\n    [enabled]=\"elementDef.enabled !== false\"\n    (onCommand)=\"handleOnCommand()\">\n</vt-button>\n<!-- horizontal -->\n<vt-horizontal-separator #myComponent\n    *ngIf=\"elementDef.type === 'horizontalSeparator'\"\n    [ngStyle]=\"elementDef.styles\">\n</vt-horizontal-separator>\n<!-- just a div -->\n<div *ngIf=\"elementDef.type === 'div'\" [ngClass]=\"elementDef.cssClass\"></div>",
                changeDetection: ChangeDetectionStrategy.OnPush
            }] }
];
/** @nocollapse */
DynamicComponent.ctorParameters = () => [
    { type: ChangeDetectorRef }
];
DynamicComponent.propDecorators = {
    elementDef: [{ type: Input }],
    myComponent: [{ type: ViewChild, args: ["myComponent", { read: BaseComponent },] }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Class for text field component
 */
class TextFieldComponent extends BaseComponent {
    /**
     *
     * @param {?} parent see [[BaseComponent]] constructor
     * @param {?} sessionService see [[BaseComponent]] constructor
     * @param {?} elementRef see [[BaseComponent]] constructor
     * @param {?} cd Change detector for this component
     * @param {?} renderer see [[BaseComponent]] constructor
     */
    constructor(parent, sessionService, elementRef, cd, renderer) {
        super(parent, sessionService, elementRef, renderer);
        this.cd = cd;
        /**
         * Whether or not text field is editable
         */
        this.editable = true;
        /**
         * HTML input element type attribute. Defaults to 'text'
         */
        this.type = 'text';
        this.onTextChange = new EventEmitter();
        this.onEdit = new EventEmitter();
        this.onMouseUp = new EventEmitter();
        this._maxLength = TextFieldComponent.MAX_LENGTH;
        this.styleVar = {};
    }
    /**
     * Max input allowed for characters
     * @param {?} max
     * @return {?}
     */
    set maxLength(max) {
        this._maxLength = max;
    }
    /**
     * @return {?}
     */
    get maxLength() {
        return this._maxLength > 0 ? this._maxLength : TextFieldComponent.MAX_LENGTH;
    }
    /**
     * Init lifecycle. Set dimensions and style properties
     * @return {?}
     */
    ngOnInit() {
        super.ngOnInit();
        if (this.disabled && this.fontColorDisabled) {
            this.styleVar["color"] = this.fontColorDisabled;
        }
        else {
            this.styleVar["color"] = this.fontColor || 'inherit';
        }
        // this.styleVar["margin-left"] = "1px";
        this.styleVar["margin-right"] = "5px";
        // this.styles["margin-left"] = "1px";
        this.styles["margin-right"] = "5px";
        if (this.controlWidth) {
            this.controlWidth = this.controlWidth + 'px';
        }
        if (this.controlHeight) {
            this.controlHeight = this.controlHeight + 'px';
        }
        if (this.marginLeft) {
            this.marginLeft = this.marginLeft + 'px';
        }
        if (this.marginTop) {
            this.marginTop = this.marginTop + 'px';
        }
    }
    /**
     * After view init lifecycle. Set dimensions, focus text field
     * @return {?}
     */
    ngAfterViewInit() {
        super.ngAfterViewInit();
        this.initWidthHeightStyle();
        this.setAttributeFromDef();
        this.cd.detectChanges();
        if (this.focusOnActivation) {
            this.input.nativeElement.focus();
        }
        if (this.type === 'date') {
            // Remove native datepicker controls applied by Chrome
            this.renderer.setProperty(this.input.nativeElement, 'type', 'text');
        }
    }
    /**
     * Event handler for blur (unfocus) event
     * @param {?} e Input blur event
     * @param {?} value
     * @return {?}
     */
    onBlur(e, value) {
        if (!document.hasFocus() && $(":focus").length > 0) {
            return;
        }
        this.text = value; //when the last char is Zenkaku and the user doesn't press 'Enter', this is needed.
        if (this.text != this._textBeforeFocusIn)
            this.onEdit.emit();
        // Checks for numeric date entry without slashes: e.g 20190104
        // If the user enters numbers without slashes auto format as date
        if (this.type === 'date' && /^\d{8}$/m.test(this.text)) {
            /** @type {?} */
            let formattedDateString = [this.text.substr(0, 4), this.text.substr(4, 2), this.text.substr(6, 2)].join('/');
            this.text = formattedDateString;
        }
        this.validateField(e);
    }
    /**
     * Event handler for focus event
     * @param {?} e Input focus event
     * @return {?}
     */
    onFocus(e) {
        this.input.nativeElement.selectionStart = this.text.length;
        this.input.nativeElement.selectionEnd = this.text.length;
        if (!this.customAttributes)
            return;
        /** @type {?} */
        let formatName = this.customAttributes['format'];
        if (formatName && formatName.indexOf("add_comma") >= 0) {
            /** @type {?} */
            let txtMount = this.text.replace(/,/g, "");
            this.text = txtMount;
        }
        this._textBeforeFocusIn = this.text;
        this._textPreviousKeyInput = this.text;
    }
    /**
     * Event handler for text input
     * Emit onTextChange b/c user keep typing (input still has focus)
     * \@event onTextChange
     * @param {?} event
     * @param {?} value
     * @return {?}
     */
    onInput(event, value) {
        if (event.keyCode == 8 || event.keyCode == 46) //Backspace || Delete
         {
            /** @type {?} */
            let pos = this.input.nativeElement.selectionStart;
            this.text = value;
            setTimeout(() => {
                this.input.nativeElement.selectionStart = pos;
                this.input.nativeElement.selectionEnd = pos;
            });
        }
        if (this._textPreviousKeyInput != this.text)
            this.onTextChange.emit();
        this._textPreviousKeyInput = this.text;
    }
    /**
     * Focus the input element
     * @return {?}
     */
    setFocus() {
        this.input.nativeElement.focus();
    }
    /**
     * Set background color CSS for the text input
     * @param {?} bgColor CSS color string value for background
     * @return {?}
     */
    setBgColor(bgColor) {
        this.input.nativeElement.style.backgroundColor = bgColor;
    }
    /**
     * Get [[_maxLength]] property value
     * @return {?}
     */
    getMaxLength() {
        return this._maxLength;
    }
    /**
     * Set [[_maxLength]] property value
     * @param {?} max Maximum length of character input
     * @return {?}
     */
    setMaxLength(max) {
        if (typeof max === "number") {
            this._maxLength = max;
        }
        else {
            this._maxLength = parseInt(max);
        }
        this.cd.markForCheck();
    }
    /**
     * Get JSON representation for this text-field
     * @return {?}
     */
    toJson() {
        /** @type {?} */
        const json = super.toJson();
        this.setJson(json, "editable", this.editable);
        if (this.value != null) {
            this.setJson(json, "value", this.value);
        }
        return json;
    }
    /**
     * Get component name
     * @return {?}
     */
    getLocalName() {
        return "textField";
    }
    /**
     * Get the text content value of the input element
     * @return {?}
     */
    getValue() {
        return this.getText();
    }
    /**
     * Event handler for mouseup
     * \@event OnMouseUp
     * @return {?}
     */
    handleMouseUp() {
        this.onMouseUp.emit();
    }
    /**
     * @return {?} String Tag name
     */
    getNxTagName() {
        return "textField";
    }
    /**
     * Get the [[cd]] (ChangeDetector) property
     * @return {?} Change detector
     */
    getChangeDetector() {
        return this.cd;
    }
    /**
     * @return {?}
     */
    _notifyInternalChangeCb() {
        super._notifyInternalChangeCb();
    }
    /**
     * Select all text
     * @return {?}
     */
    selectText() {
        this.input.nativeElement.select();
    }
    /**
     * Set [[visible]] property value
     * @override
     * @param {?} value Toggle visibility
     * @return {?}
     */
    setVisible(value) {
        this.visible = value;
        if (this.visible) {
            this.removeCssClass('hidden');
            this.getElement().removeAttribute('hidden');
        }
        else {
            this.addCssClass('hidden');
            this.getElement().setAttribute('hidden', '');
        }
    }
}
TextFieldComponent.MAX_LENGTH = 9999;
TextFieldComponent.decorators = [
    { type: Component, args: [{
                selector: 'vt-text-field',
                template: "<div\n  class=\"{{cssClass}}\"\n  [ngStyle]=\"styles\"\n  (contextmenu)=\"handleOnContextMenu($event)\"\n  [ngClass]=\"{'vt-text-field': true, 'hidden': visible != true}\">\n\n  <input [type]=\"type\" [id]=\"id\" #input\n    [ngClass]=\"{'input-date': type === 'date'}\"\n    class=\"form-control\"\n    [readonly]=\"editable !== true && editable !== 'true'\"\n    [attr.tabindex]=\"editable !== true && editable !== 'true' ? -1 : null\"\n    [disabled]=\"disabled\"\n    [(ngModel)]=\"text\"\n    [ngStyle]=\"styleVar\"\n    [maxLength]=\"maxLength\"\n    [style.width]=\"controlWidth\"\n    [style.height]=\"controlHeight\"\n    [style.textAlign]=\"alignHorizontal\"\n    [style.border-color]=\"borderColor\"\n    [style.margin-top]=\"marginTop\"\n    [style.margin-left]=\"marginLeft\"\n    [style.padding]=\"controlPadding\"\n    (focusout)=\"onBlur($event, input.value)\"\n    (focusin)=\"onFocus($event)\"\n    (change)=\"_notifyInternalChangeCb()\"\n    (mouseup)=\"handleMouseUp()\"\n    (keyup)=\"onInput($event, input.value)\"\n    [required]=\"required\"\n    [min]=\"min\"\n    [max]=\"max\"/>\n</div>\n",
                changeDetection: ChangeDetectionStrategy.OnPush,
                providers: [
                    {
                        provide: BaseComponent,
                        useExisting: forwardRef(() => TextFieldComponent)
                    }
                ],
                styles: [".vt-text-field{display:inline-block}.vt-text-field input.form-control{width:100%}.vt-text-field>input{margin-bottom:3px}"]
            }] }
];
/** @nocollapse */
TextFieldComponent.ctorParameters = () => [
    { type: BaseComponent, decorators: [{ type: Optional }, { type: SkipSelf }] },
    { type: SessionService },
    { type: ElementRef },
    { type: ChangeDetectorRef },
    { type: Renderer2 }
];
TextFieldComponent.propDecorators = {
    value: [{ type: Input }],
    editable: [{ type: Input }],
    maxLength: [{ type: Input }],
    type: [{ type: Input }],
    onTextChange: [{ type: Output }],
    onEdit: [{ type: Output }],
    onMouseUp: [{ type: Output }],
    input: [{ type: ViewChild, args: ['input',] }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class TextFieldModule {
}
TextFieldModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    FormsModule,
                    ReactiveFormsModule,
                ],
                declarations: [TextFieldComponent],
                exports: [
                    TextFieldComponent,
                    FormsModule,
                    ReactiveFormsModule,
                ],
                entryComponents: [
                    TextFieldComponent
                ]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class DynamicModule {
}
DynamicModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    ButtonModule,
                    LabelModule,
                    TextFieldModule,
                    LayoutModule,
                    HorizontalSeparatorModule
                ],
                declarations: [
                    DynamicComponent
                ],
                exports: [
                    DynamicComponent,
                    ButtonModule,
                    LabelModule,
                    TextFieldModule,
                    LayoutModule,
                    HorizontalSeparatorModule
                ]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class DynamicElementBuilder {
    /**
     * @param {?=} whiteSpaceWrap
     * @param {?=} padding
     * @return {?}
     */
    static createLabelElement(whiteSpaceWrap = false, padding = null) {
        /** @type {?} */
        const el = new DynamicElementBuilder();
        el.dynamicElement = {
            type: "label"
        };
        el.initStyle();
        if (whiteSpaceWrap === true) {
            el.dynamicElement.styles["white-space"] = "nowrap";
        }
        if (padding != null && padding !== '') {
            el.dynamicElement.styles["padding"] = padding;
        }
        return el;
    }
    /**
     * @return {?}
     */
    toDynamicElement() {
        return this.dynamicElement;
    }
    /**
     * @param {?} id
     * @return {?}
     */
    setId(id) {
        this.dynamicElement.id = id;
    }
    /**
     * @param {?} text
     * @return {?}
     */
    setText(text) {
        this.dynamicElement.text = text;
    }
    /**
     * @param {?} text
     * @return {?}
     */
    setText2(text) {
        //not sure what this is, for now, custom attribute
        this.setAttribute("text2", text);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    setValue(value) {
        this.dynamicElement.value = value;
    }
    /**
     * @param {?} tooltip
     * @return {?}
     */
    setTooltip(tooltip) {
        this.dynamicElement.tooltip = tooltip;
    }
    /**
     * @param {?} visible
     * @return {?}
     */
    setVisible(visible) {
        this.dynamicElement.visible = visible;
    }
    /**
     * @param {?} enabled
     * @return {?}
     */
    setEnabled(enabled) {
        this.dynamicElement.enabled = enabled;
    }
    /**
     * @param {?} popupMenuId
     * @return {?}
     */
    setPopup(popupMenuId) {
        this.dynamicElement.popupMenuId = popupMenuId;
    }
    /**
     * @param {?} bgColor
     * @return {?}
     */
    setBgColor(bgColor) {
        this.initStyle();
        this.dynamicElement.styles["background-color"] = this.checkCustomColor(bgColor);
    }
    /**
     * @param {?} cssClass
     * @return {?}
     */
    addCssClass(cssClass) {
        this.initStyle();
        if (this.dynamicElement.cssClass == undefined) {
            this.dynamicElement.cssClass = cssClass;
        }
        else {
            this.dynamicElement.cssClass = this.dynamicElement.cssClass + " " + cssClass;
        }
    }
    /**
     * @param {?} borderColor
     * @return {?}
     */
    setBorderColor(borderColor) {
        this.initStyle();
        this.dynamicElement.styles["border-color"] = this.checkCustomColor(borderColor);
        this.initBorderStyle();
    }
    /**
     * @param {?} borderWidth
     * @return {?}
     */
    setBorderWidth(borderWidth) {
        this.initStyle();
        this.dynamicElement.styles["border-width"] = this.convertStyleUnit(borderWidth);
        this.initBorderStyle();
    }
    /**
     * @param {?} borderStyle
     * @return {?}
     */
    setBorderStyle(borderStyle) {
        this.initStyle();
        this.dynamicElement.styles["border-style"] = borderStyle;
    }
    /**
     * @param {?} height
     * @return {?}
     */
    setHeight(height) {
        this.initStyle();
        this.dynamicElement.styles["height"] = height + "px";
    }
    /**
     * @param {?} width
     * @return {?}
     */
    setWidth(width) {
        this.initStyle();
        this.dynamicElement.styles["width"] = width + "px";
    }
    /**
     * @param {?} x
     * @return {?}
     */
    setX(x) {
        this.initStyle();
        this.dynamicElement.styles["position"] = "absolute";
        this.dynamicElement.styles["left"] = x + "px";
    }
    /**
     * @param {?} y
     * @return {?}
     */
    setY(y) {
        this.initStyle();
        this.dynamicElement.styles["position"] = "absolute";
        this.dynamicElement.styles["top"] = y + "px";
    }
    /**
     * @param {?} z
     * @return {?}
     */
    setZ(z) {
        this.initStyle();
        this.dynamicElement.styles["z-index"] = z;
    }
    /**
     * @param {?} boo
     * @return {?}
     */
    setFontBold(boo) {
        this.initStyle();
        if (boo === "true" || boo === true) {
            this.dynamicElement.styles["font-weight"] = "bold";
        }
        else {
            this.dynamicElement.styles["font-weight"] = "normal";
        }
    }
    /**
     * @param {?} size
     * @return {?}
     */
    setFontSize(size) {
        this.initStyle();
        this.dynamicElement.styles["font-size"] = size + "px";
    }
    /**
     * @param {?} color
     * @return {?}
     */
    setFontColor(color) {
        this.initStyle();
        this.dynamicElement.styles["color"] = this.checkCustomColor(color);
    }
    /**
     * @param {?} margin
     * @return {?}
     */
    setMargin(margin) {
        this.initStyle();
        this.dynamicElement.styles["margin"] = this.convertStyleUnit(margin);
    }
    /**
     * @param {?} align
     * @return {?}
     */
    setAlignVertical(align) {
        this.initStyle();
        if (align === "center") {
            align = "middle";
        }
        this.dynamicElement.styles["vertical-align"] = align;
    }
    /**
     * @param {?} align
     * @return {?}
     */
    setAlignHorizontal(align) {
        this.initStyle();
        this.dynamicElement.styles["text-align"] = align;
    }
    /**
     * @param {?} borderCorner
     * @return {?}
     */
    setBorderCorner(borderCorner) {
        this.initStyle();
        this.dynamicElement.styles["border-radius"] = this.convertStyleUnit(borderCorner);
    }
    /**
     * @param {?} dropShadowColor
     * @return {?}
     */
    setDropShadowColor(dropShadowColor) {
        this.dropShadowColor = this.checkCustomColor(dropShadowColor);
        this.setBoxShadow();
    }
    /**
     * @param {?} dropShadowOffset
     * @return {?}
     */
    setDropShadowOffset(dropShadowOffset) {
        this.dropShadowOffset = dropShadowOffset;
        this.setBoxShadow();
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    setOnContextMenu(fn) {
        this.dynamicElement.onContextMenu = fn;
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    setOnCommand(fn) {
        this.dynamicElement.onCommand = fn;
    }
    /**
     * @param {?} name
     * @param {?} value
     * @return {?}
     */
    setAttribute(name, value) {
        if (this.dynamicElement.customAttributes == null) {
            this.dynamicElement.customAttributes = {};
        }
        this.dynamicElement.customAttributes[name] = value;
    }
    /**
     * @param {?} str
     * @return {?}
     */
    setRichText(str) {
        this.dynamicElement.richText = str === true || str === "true";
    }
    /**
     * @param {?} child
     * @return {?}
     */
    appendChild(child) {
        if (this.dynamicElement.children == null) {
            this.dynamicElement.children = [child.dynamicElement];
        }
        else {
            this.dynamicElement.children.push(child.dynamicElement);
        }
    }
    /**
     * @return {?}
     */
    initStyle() {
        if (this.dynamicElement.styles == null) {
            this.dynamicElement.styles = {};
        }
    }
    /**
     * @return {?}
     */
    initBorderStyle() {
        if (this.dynamicElement.styles["border-style"] == null || this.dynamicElement.styles["border-style"] == "") {
            this.dynamicElement.styles["border-style"] = "solid";
        }
    }
    /**
     * @param {?} unit
     * @return {?}
     */
    convertStyleUnit(unit) {
        if (unit != null && unit.indexOf(",") > 0) {
            unit = unit.split(",").map(m => m + "px").join(" ");
        }
        else if (unit != null && unit !== "") {
            unit = unit + "px";
        }
        return unit;
    }
    /**
     * @return {?}
     */
    setBoxShadow() {
        if (this.dropShadowColor != null && this.dropShadowOffset != null) {
            this.initStyle();
            this.dynamicElement.styles["box-shadow"] = `${this.dropShadowOffset}px ${this.dropShadowOffset}px ${this.dropShadowOffset}px ${this.dropShadowColor}`;
        }
    }
    /**
     * @param {?} color
     * @return {?}
     */
    checkCustomColor(color) {
        if (color != null && color.indexOf("#") === 0 && color.length > 7) {
            color = "var(" + color.replace("#", "--") + ")";
        }
        return color;
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Class for radio button input control
 */
class RadioButtonComponent extends BaseComponent {
    /**
     *
     * @param {?} parent see [[BaseComponent]] constructor
     * @param {?} sessionService see [[BaseComponent]] constructor
     * @param {?} elementRef see [[BaseComponent]] constructor
     * @param {?} cd Change detector for this panel
     * @param {?} renderer see [[BaseComponent]] constructor
     */
    constructor(parent, sessionService, elementRef, cd, renderer) {
        super(parent, sessionService, elementRef, renderer);
        this.cd = cd;
        this.checked = false;
        this.onCommand = new EventEmitter();
    }
    /**
     * @param {?} boo
     * @return {?}
     */
    set isChecked(boo) {
        this.checked = boo;
    }
    /**
     * Init lifecycle. Call parent init method.
     * @return {?}
     */
    ngOnInit() {
        super.ngOnInit();
        if (this.idName != null) {
            this.setCustomAttribute('idName', this.idName);
        }
    }
    /**
     * After view init lifecycle. Set the radiobutton group and attributes.
     * Calls parent ngAfterViewInti method
     * @return {?}
     */
    ngAfterViewInit() {
        super.ngAfterViewInit();
        if (this.getParent() != null) {
            this.getParent().addRadioButtonGroup(this);
        }
        this.setAttributeFromDef();
        this.cd.detectChanges();
        this._internalChangeTracking = this.checked;
    }
    /**
     * Event handler for change event
     * \@event OnCommand
     * @return {?}
     */
    onChange() {
        this.onCommand.emit();
    }
    /**
     * Event handler for click event. Updates radio button state
     * @param {?} event Mouse click event
     * @return {?}
     */
    onClick(event) {
        event.stopPropagation();
        /** @type {?} */
        const tempCheck = this.checked;
        this.resetGroupRadios();
        //reset current value back for onChange
        this._internalChangeTracking = tempCheck;
        //register click for mco
        this.checked = true;
        this.handleClick(event);
        if (this._internalChangeTracking !== this.checked) {
            this.onChange();
            this._internalChangeTracking = this.checked;
        }
    }
    /**
     * Event handler for mousedown event
     * @param {?} e MouseDown event
     * @return {?}
     */
    onMouseDown(e) {
        this.handleMouseDown(e);
    }
    /**
     * Get the component name
     * @return {?}
     */
    getLocalName() {
        return "radioButton";
    }
    /**
     * Get the [[value]] property
     * @return {?}
     */
    getValue() {
        return this.value;
    }
    /**
     * Get the [[checked]] property
     * @return {?}
     */
    getChecked() {
        return this.checked;
    }
    /**
     * Sets the value for [[checked]] property and updated [[_internalChangeTracking]] value
     * @param {?} shouldChecked Toggle checked
     * @param {?=} skipInternalChange
     * @return {?}
     */
    setChecked(shouldChecked, skipInternalChange = false) {
        if (shouldChecked === true) {
            this.resetGroupRadios();
        }
        this.checked = shouldChecked === true || shouldChecked === 'true';
        this._internalChangeTracking = this.checked;
        this.markForCheck();
        //notify internal changes (for internal use only)
        if (skipInternalChange !== true) {
            this._notifyInternalChangeCb();
        }
    }
    /**
     * Check the radio button of the parent group that matches [[value]]
     * @param {?} value
     * @return {?}
     */
    setSelected(value) {
        if (value === true || value === "true") {
            this.setChecked(true);
        }
        else if (value == this.value) {
            this.setChecked(true);
        }
        else if (this.getParent() != null) {
            /** @type {?} */
            const group = this.getParent().getRadioButtonGroup(this.group);
            if (group != null) {
                for (let radio of group) {
                    if (radio.getValue() == value) {
                        radio.setChecked(true);
                        break;
                    }
                }
            }
        }
    }
    /**
     * Get JSON representation for the radiobutton component
     * @return {?} JSON
     */
    toJson() {
        /** @type {?} */
        const json = super.toJson();
        json["group"] = this.group;
        json["selected"] = this.checked === true ? "true" : "false";
        return json;
    }
    /**
     * Get the NexaWeb tag name
     * @return {?} Tag name
     */
    getNxTagName() {
        return "radioButton";
    }
    /**
     * Uncheck all radio buttons in the radio button's group
     * @return {?}
     */
    resetGroupRadios() {
        /** @type {?} */
        const group = this.getParent().getRadioButtonGroup(this.group);
        if (group != null) {
            for (let radio of group) {
                radio.setChecked(false);
            }
        }
    }
    /**
     * Get [[cd]] (ChangeDetector) of this component
     * @return {?}
     */
    getChangeDetector() {
        return this.cd;
    }
    /**
     * Check if this component is a radiobutton
     * @return {?} True
     */
    isRadioButton() {
        return true;
    }
}
RadioButtonComponent.decorators = [
    { type: Component, args: [{
                selector: 'vt-radio-button',
                template: "<div class=\"radio {{cssClass}} {{cssClass}} {{(disabled ===true) ? 'disabled':''}}\" [ngClass]=\"{'hidden': visible != true}\" (contextmenu)=\"handleOnContextMenu($event)\">\n  <label>\n    <input class=\"input-radio\" type=\"radio\" [name]=\"group\" [id]=\"id\" [value]=\"value\" [checked]=\"checked\"\n      [disabled]=\"disabled\"\n      (click)=\"onClick($event)\"\n      (mousedown)=\"onMouseDown($event)\"\n      [required]=\"required\">\n    <span [style.margin-left.px]=\"marginLeft\" [style.margin-right.px]=\"marginRight\">{{text}}</span>\n  </label>\n</div>\n",
                changeDetection: ChangeDetectionStrategy.OnPush,
                providers: [
                    {
                        provide: BaseComponent,
                        useExisting: forwardRef(() => RadioButtonComponent)
                    }
                ],
                styles: ["div>label>span{vertical-align:top!important}"]
            }] }
];
/** @nocollapse */
RadioButtonComponent.ctorParameters = () => [
    { type: BaseComponent, decorators: [{ type: Optional }, { type: SkipSelf }] },
    { type: SessionService },
    { type: ElementRef },
    { type: ChangeDetectorRef },
    { type: Renderer2 }
];
RadioButtonComponent.propDecorators = {
    group: [{ type: Input }],
    idName: [{ type: Input }],
    value: [{ type: Input }],
    isChecked: [{ type: Input }],
    checked: [{ type: Input }],
    onCommand: [{ type: Output }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class RadioButtonModule {
}
RadioButtonModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    FormsModule,
                    ReactiveFormsModule,
                ],
                declarations: [RadioButtonComponent],
                exports: [
                    RadioButtonComponent,
                    FormsModule,
                    ReactiveFormsModule,
                ],
                entryComponents: [
                    RadioButtonComponent
                ]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Class for scroll pane component
 */
class ScrollPaneComponent extends BaseComponent {
    /**
     *
     * @param {?} parent see [[BaseComponent]] constructor
     * @param {?} sessionService see [[BaseComponent]] constructor
     * @param {?} elementRef see [[BaseComponent]] constructor
     * @param {?} renderer see [[BaseComponent]] constructor
     * @param {?} cd Change detector for this component instance
     * @param {?} zone
     */
    constructor(parent, sessionService, elementRef, renderer, cd, zone) {
        super(parent, sessionService, elementRef, renderer);
        this.cd = cd;
        this.zone = zone;
        this._scrollVerticalPos = 0;
        this._scrollerHandler = (event) => {
            this.handleOnScroll(event);
        };
    }
    /**
     * Get [[cd]] (Change detector) property value
     * @return {?} Change detector reference
     */
    getChangeDetector() {
        return this.cd;
    }
    /**
     * After view init lifecycle. Set dimensions and trigger change detection
     * @return {?}
     */
    ngAfterViewInit() {
        super.ngAfterViewInit();
        if (this.controlHeight == null) {
            this.controlHeight = '100%';
        }
        if (this.controlHeight != null && this.controlHeight !== "") {
            this.styles["height"] = this.controlHeight + "px";
        }
        if (this.controlWidth != null && this.controlWidth !== "") {
            this.styles["max-width"] = this.controlWidth + "px";
        }
        if (this.maxHeight != null && this.maxHeight !== "") {
            this.styles["max-height"] = this.maxHeight + "px";
        }
        if (this.resizeHeight != null && this.resizeHeight !== "") {
            this.styles["height"] = "calc(100% - " + this.resizeHeight + "px)";
        }
        this.zone.runOutsideAngular(() => {
            //for https://github.com/weaveio/ngnsophia/issues/1392, track position of scroll pane
            //so it can be reset back when user switching tabs
            if (this.skipScrollAdjustment !== true) {
                (/** @type {?} */ (this.scrollDivElement.nativeElement)).addEventListener("scroll", this._scrollerHandler, true);
            }
        });
        this.cd.detectChanges();
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        super.ngOnDestroy();
        (/** @type {?} */ (this.scrollDivElement.nativeElement)).removeEventListener("scroll", this._scrollerHandler, true);
        this._scrollerHandler = null;
    }
    /**
     * Scroll event of div
     * @param {?} event
     * @return {?}
     */
    handleOnScroll(event) {
        this._scrollVerticalPos = event.srcElement.scrollTop;
    }
    /**
     * @return {?}
     */
    resetScrollTopToPreviousPosition() {
        this.zone.runOutsideAngular(() => {
            setTimeout(() => {
                if (this.scrollDivElement.nativeElement.scrollTop != this._scrollVerticalPos) {
                    this.scrollDivElement.nativeElement.scrollTop = this._scrollVerticalPos;
                }
            }, 300);
        });
    }
    /**
     * @return {?}
     */
    resetScrollTopPosition() {
        this.zone.runOutsideAngular(() => {
            setTimeout(() => {
                this._scrollVerticalPos = 0;
                this.scrollDivElement.nativeElement.scrollTop = this._scrollVerticalPos;
            }, 300);
        });
    }
    /**
     * @return {?}
     */
    isScrollView() {
        return true;
    }
    /**
     * @return {?}
     */
    isScrollPane() {
        return true;
    }
}
ScrollPaneComponent.decorators = [
    { type: Component, args: [{
                selector: 'vt-scroll-pane',
                template: "<div #scrollDiv [id]=\"id\" class=\"vt-scroll-pane {{cssClass}}\"\n  [ngClass]=\"{'hidden': visible != true}\"\n  [ngStyle]=\"styles\"\n  (contextmenu)=\"handleOnContextMenu($event)\">\n  <ng-content></ng-content>\n</div>\n",
                changeDetection: ChangeDetectionStrategy.OnPush,
                providers: [
                    {
                        provide: BaseComponent,
                        useExisting: forwardRef(() => ScrollPaneComponent)
                    }
                ],
                styles: [".vt-scroll-pane{overflow:auto}.noscroll{overflow:hidden!important;overflow-y:hidden!important;overflow-x:hidden!important}"]
            }] }
];
/** @nocollapse */
ScrollPaneComponent.ctorParameters = () => [
    { type: BaseComponent, decorators: [{ type: Optional }, { type: SkipSelf }] },
    { type: SessionService },
    { type: ElementRef },
    { type: Renderer2 },
    { type: ChangeDetectorRef },
    { type: NgZone }
];
ScrollPaneComponent.propDecorators = {
    resizeHeight: [{ type: Input }],
    skipScrollAdjustment: [{ type: Input }],
    scrollDivElement: [{ type: ViewChild, args: ['scrollDiv',] }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class ScrollPaneModule {
}
ScrollPaneModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule
                ],
                declarations: [ScrollPaneComponent],
                exports: [
                    ScrollPaneComponent
                ]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class StringBuilder {
    /**
     * @param {?=} initial
     */
    constructor(initial) {
        this._internalString = "";
        if (initial != null) {
            this.append(initial);
        }
    }
    /**
     * @param {?} str
     * @return {?}
     */
    append(str) {
        if (str instanceof StringBuilder) {
            this._internalString = this._internalString + str.toString();
        }
        else {
            this._internalString = this._internalString + str;
        }
        return this;
    }
    /**
     * @return {?}
     */
    toString() {
        return this._internalString;
    }
    /**
     * @return {?}
     */
    clear() {
        this._internalString = "";
        return this;
    }
    /**
     * @return {?}
     */
    destroy() {
        this.clear();
    }
    /**
     * @param {?} str
     * @return {?}
     */
    indexOf(str) {
        return this._internalString.indexOf(str);
    }
    /**
     * @param {?} startIdx
     * @param {?=} endIdx
     * @return {?}
     */
    substring(startIdx, endIdx) {
        if (endIdx != null) {
            return this._internalString.substring(startIdx, endIdx);
        }
        return this._internalString.substring(startIdx);
    }
    /**
     * @param {?} startIdx
     * @param {?} endIdex
     * @param {?} replaceStr
     * @return {?}
     */
    replace(startIdx, endIdex, replaceStr) {
        /** @type {?} */
        const b = this._internalString.substring(0, startIdx);
        /** @type {?} */
        const e = this._internalString.substring(endIdex);
        this._internalString = b + replaceStr + e;
        return this;
    }
    /**
     * @return {?}
     */
    length() {
        return this._internalString.length;
    }
    /**
     * @param {?} i
     * @return {?}
     */
    charAt(i) {
        if (i < this._internalString.length) {
            return this._internalString.charAt(i);
        }
        return null;
    }
    /**
     * @param {?} idx
     * @param {?} val
     * @return {?}
     */
    setCharAt(idx, val) {
        if (typeof val === "number") {
            this.insert(idx, String.fromCharCode(val));
        }
        else {
            this.insert(idx, val);
        }
    }
    /**
     * @param {?} i
     * @return {?}
     */
    deleteCharAt(i) {
        this.replace(i, i, '');
        return this;
    }
    /**
     * @param {?} index
     * @param {?} str
     * @return {?}
     */
    insert(index, str) {
        if (index <= this._internalString.length) {
            this._internalString = this._internalString.substring(0, index - 1) + str + this._internalString.substring(index);
        }
        return this;
    }
    /**
     * @param {?} chr
     * @return {?}
     */
    lastIndexOf(chr) {
        if (this._internalString != null) {
            return lastIndexOf(this._internalString, chr);
        }
        return -1;
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * This directive serve as a template for rendering table cell.
 */
class TableCellDirective {
    /**
     *
     * @param {?} template Template on how to render the cell, we will forward row, column, etc to the template
     */
    constructor(template) {
        this.template = template;
    }
}
TableCellDirective.decorators = [
    { type: Directive, args: [{
                selector: '[vt-table-cell]'
            },] }
];
/** @nocollapse */
TableCellDirective.ctorParameters = () => [
    { type: TemplateRef }
];
TableCellDirective.propDecorators = {
    onContextMenuCb: [{ type: Input }],
    alignHorizontal: [{ type: Input }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * This template is used to render header if a customer rendering is needed, by default, header can be passed in
 * to the TableColumnDirective as a string
 */
class TableHeaderDirective {
    /**
     *
     * @param {?} template Template on how to render the header, we will forward row, column, etc to the template
     */
    constructor(template) {
        this.template = template;
    }
}
TableHeaderDirective.decorators = [
    { type: Directive, args: [{
                selector: '[vt-table-header]'
            },] }
];
/** @nocollapse */
TableHeaderDirective.ctorParameters = () => [
    { type: TemplateRef }
];
TableHeaderDirective.propDecorators = {
    id: [{ type: Input }],
    autoWrap: [{ type: Input }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class HeaderDirective {
    constructor() { }
    /**
     * @return {?}
     */
    ngOnInit() {
        if (this.id == null) {
            this.id = BaseComponent.generateUniqueId("header");
        }
    }
}
HeaderDirective.decorators = [
    { type: Directive, args: [{
                selector: 'vt-header'
            },] }
];
/** @nocollapse */
HeaderDirective.ctorParameters = () => [];
HeaderDirective.propDecorators = {
    text: [{ type: Input }],
    cssClass: [{ type: Input }],
    controlHeight: [{ type: Input }],
    controlWidth: [{ type: Input }],
    headerHeight: [{ type: Input }],
    autoWrap: [{ type: Input }],
    id: [{ type: Input }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class TableColumnDirective {
    constructor() {
        //TODO
        this.locked = false;
        //TODO
        this.enabled = true;
        this.sortable = true;
        this.isChecked = false;
        this._visible = true;
    }
    /**
     * @param {?} header
     * @return {?}
     */
    set header(header) {
        this._header = header;
    }
    /**
     * @return {?}
     */
    get header() {
        return this.headerDirective ? this.headerDirective.text : this._header;
    }
    /**
     * @param {?} vis
     * @return {?}
     */
    set visible(vis) {
        this._visible = vis;
        if (this._visible === true) {
            if (this.styles) {
                delete this.styles["display"];
            }
        }
        else {
            if (this.styles) {
                this.styles["display"] = "none";
            }
            else {
                this.styles = {
                    "display": "none"
                };
            }
        }
    }
    /**
     * @return {?}
     */
    get visible() {
        return this._visible;
    }
    /**
     * @return {?}
     */
    get isHeaderTemplate() {
        return this.headerTemplate === null || this.headerTemplate === undefined ? false : true;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        if (this.headerDirective != null) {
            this.header = this.headerDirective.text;
            if (this.autoWrap == null) {
                this.autoWrap = this.headerDirective.autoWrap === true || this.headerDirective.autoWrap === "true";
            }
        }
        if (this.id == null) {
            this.id = BaseComponent.generateUniqueId("column");
        }
        if (this.headerHeight != null) {
            this.headerHeight = this.headerHeight;
        }
    }
    /**
     * @param {?} name
     * @param {?} value
     * @return {?}
     */
    setAttribute(name, value) {
        if (typeof name === "number" && name === AttributesEnum.VISIBLE) {
            this.visible = JavaUtils.parseBoolean(value);
        }
        else {
            if (this.customAttributes == null) {
                this.customAttributes = {};
            }
            this.customAttributes[name] = value;
        }
    }
    /**
     * @param {?} name
     * @return {?}
     */
    getAttribute(name) {
        if (typeof name === "number" && name === AttributesEnum.VISIBLE)
            return /** @type {?} */ (this.visible);
        if (typeof name === "number" && name === AttributesEnum.ID)
            return this.id;
        /** @type {?} */
        let retVal = this.customAttributes != null ? this.customAttributes[name] : null;
        if (typeof retVal !== "string") {
            retVal = retVal + "";
        }
        return retVal;
    }
    /**
     * @param {?} vis
     * @return {?}
     */
    setVisible(vis) {
        this.visible = vis;
    }
}
TableColumnDirective.decorators = [
    { type: Directive, args: [{
                selector: 'vt-table-column'
            },] }
];
TableColumnDirective.propDecorators = {
    locked: [{ type: Input }],
    enabled: [{ type: Input }],
    sortable: [{ type: Input }],
    isChecked: [{ type: Input }],
    alignHorizontal: [{ type: Input }],
    id: [{ type: Input }],
    cellTemplate: [{ type: ContentChild, args: [TableCellDirective, { read: TableCellDirective },] }],
    headerTemplate: [{ type: ContentChild, args: [TableHeaderDirective, { read: TemplateRef },] }],
    headerDirective: [{ type: ContentChild, args: [HeaderDirective,] }],
    header: [{ type: Input }],
    autoWrap: [{ type: Input }],
    controlWidth: [{ type: Input }],
    controlHeight: [{ type: Input }],
    cellHeight: [{ type: Input }],
    headerHeight: [{ type: Input }],
    visible: [{ type: Input }],
    customAttributes: [{ type: Input }],
    skipTracking: [{ type: Input }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class TableSelectionEvent {
    /**
     * @param {?} rows
     */
    constructor(rows) {
        this.rows = rows;
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class HTMLElementWrapper {
    /**
     * @param {?} renderer
     * @param {?} type
     * @param {?} sessionService
     * @param {?=} virtual
     * @param {?=} docFragment
     */
    constructor(renderer, type, sessionService, virtual = false, docFragment = null) {
        this.renderer = renderer;
        this.sessionService = sessionService;
        //for none dynamic stuf
        this.childNodes = [];
        this.customAttributes = null;
        this._uniqueId = BaseComponent.generateUniqueId(type);
        this.localName = type;
        if (type === "row" && virtual !== true) {
            this.htmlElement = this.renderer.createElement("tr");
            this._dynamicComponent = true;
        }
        else if (type === "cell" && virtual !== true) {
            this.htmlElement = this.renderer.createElement("td");
            this._dynamicComponent = true;
        }
        else if (type === "label" || type === "menuItem" || virtual === true) {
            this.fauxElementAttributes = new Map();
            this.setAttribute("id", this._uniqueId);
        }
        if (this._dynamicComponent === true) {
            if (this.htmlElement instanceof HTMLTableRowElement) {
                this.htmlElement.setAttribute("data-tt-id", this._uniqueId);
            }
            this.onContextHandler = (event) => {
                /** @type {?} */
                const clientEvent = new ClientEvent(this, event);
                if (AppUtils.customizeClientEvent != null) {
                    AppUtils.customizeClientEvent(this, clientEvent);
                }
                if (this.parentScreenId != null) {
                    clientEvent.setParameter("screenId", this.parentScreenId);
                }
                this.sessionService.getEventHandler().setClientEvent(clientEvent);
                if (typeof this.contextMenuAction === "string") {
                    this.invokeMcoAction(this.contextMenuAction);
                }
                else if (typeof this.contextMenuAction === "function") {
                    this.contextMenuAction.apply(this, [this]);
                }
                this.showPopupMenu(event);
            };
            this.htmlElement.addEventListener("mousedown", (event) => this.onMouseDownHandler(event), true);
            this.htmlElement.addEventListener("dblclick", (event) => this.onDoubleClickHandler(event), true);
            this.onMouseDownHandler = (event) => {
                this.handleOnMouseDown(event);
            };
            this.onDoubleClickHandler = (event) => {
                this.handleDoubleClick(event);
            };
        }
    }
    /**
     * @return {?}
     */
    get id() {
        return this.getId();
    }
    /**
     * @param {?} type
     * @return {?}
     */
    static createVirtualElement(type) {
        return new HTMLElementWrapper(null, type, null, true);
    }
    /**
     * @param {?=} skipDestroyChild
     * @return {?}
     */
    destroy(skipDestroyChild = false) {
        if (this._dynamicComponent === true && this.htmlElement != null) {
            this.htmlElement.removeEventListener("contextmenu", this.onContextHandler, true);
            this.htmlElement.removeEventListener("mousedown", this.onMouseDownHandler, true);
            this.htmlElement.removeEventListener("dblclick", this.onDoubleClickHandler, true);
        }
        if (this.childNodes != null && skipDestroyChild !== true) {
            /** @type {?} */
            let stack = this.childNodes;
            while (stack.length > 0) {
                /** @type {?} */
                const node = stack.pop();
                if (node.childNodes != null) {
                    stack = stack.concat(node.childNodes);
                }
                node.destroy(true);
            }
        }
        if (this.dynamicChildNodes != null && skipDestroyChild !== true) {
            /** @type {?} */
            let stack = this.dynamicChildNodes;
            while (stack.length > 0) {
                /** @type {?} */
                const node = stack.pop();
                if (node.dynamicChildNodes != null) {
                    stack = stack.concat(node.dynamicChildNodes);
                }
                node.destroy(true);
            }
        }
        if (this.childRows != null && skipDestroyChild !== true) {
            /** @type {?} */
            let stack = this.childRows;
            while (stack.length > 0) {
                /** @type {?} */
                const node = stack.pop();
                if (node.childRows != null) {
                    stack = stack.concat(node.childRows);
                }
                node.destroy(true);
            }
        }
        if (this.component != null) {
            this.component.removeAttributeChangeListener(this);
        }
        this.htmlElement = null;
        this.parent = null;
        this._uniqueId = null;
        this.component = null;
        this.childNodes = null;
        this.attributesName = null;
        this.fauxElementAttributes = null;
        this.childRows = null;
    }
    /**
     * @param {?} text
     * @return {?}
     */
    setText(text) {
        if (this._dynamicComponent === true) {
            this.renderer.setProperty(this.htmlElement, "innerHTML", text);
        }
        else if (this.component != null) {
            this.component.setText(text);
        }
        else if (this.fauxElementAttributes != null) {
            this.fauxElementAttributes.set("text", text);
        }
    }
    /**
     * @param {?} size
     * @return {?}
     */
    setFontSize(size) {
        if (this._dynamicComponent === true) {
            this.renderer.setStyle(this.htmlElement, "font-size", size + "px");
        }
        else if (this.component != null) {
            this.component.setFontSize(size);
        }
        else if (this.fauxElementAttributes != null) {
            this.fauxElementAttributes.set("fontSize", size);
        }
    }
    /**
     * @param {?} bold
     * @return {?}
     */
    setFontBold(bold) {
        if (this._dynamicComponent === true) {
            if (bold === "true" || bold === true) {
                this.renderer.setStyle(this.htmlElement, "font-weight", "bold");
            }
            else {
                this.renderer.setStyle(this.htmlElement, "font-weight", "normal");
            }
        }
        else if (this.component != null) {
            this.component.setFontBold(bold);
        }
        else if (this.fauxElementAttributes != null) {
            this.fauxElementAttributes.set("fontBold", bold);
        }
    }
    /**
     * @param {?} css
     * @return {?}
     */
    setClass(css) {
        if (css != null && css.indexOf(".") >= 0) {
            /** @type {?} */
            const temp = css.split("\.");
            /** @type {?} */
            let cssClass = temp.join("-");
            if (temp[0] === "") {
                css = cssClass.substring(1);
            }
        }
        if (this.htmlElement != null) {
            this.renderer.setAttribute(this.htmlElement, "class", css);
        }
        else if (this.component != null) {
            this.component.addCssClass(css);
        }
        else if (this.fauxElementAttributes != null) {
            this.setAttribute("class", css);
        }
    }
    /**
     * Insert a child row at specific location
     * @param {?} idx
     * @param {?} child
     * @return {?}
     */
    insertChildRowAt(idx, child) {
        if (child.htmlElement instanceof HTMLTableRowElement !== true && this._dynamicComponent === true) {
            throw new Error("Invalid insertion, only HTMLTableRowElement is allowed");
        }
        if (idx > 0 && (this.childRows == null || this.childRows.length <= idx)) {
            throw new Error("Unable to insert child row at this specific location (index overflow)");
        }
        else if (idx >= 0 && (this.childRows != null && this.childRows.length > idx)) {
            //track child rows so we can used insertChildRowAt
            if (this.childRows == null) {
                this.childRows = [];
            }
            if (this.parentTable.useDocFragment === true) {
                (/** @type {?} */ (this.parentTable._bodyFragment)).insertBefore(child.htmlElement, this.childRows[idx].htmlElement);
            }
            else {
                this.renderer.insertBefore(this.parentTable.tableBody.nativeElement, child.htmlElement, this.childRows[idx].htmlElement);
            }
            this.childRows.splice(idx, 0, child);
        }
        this.renderer.setAttribute(child.htmlElement, "data-tt-parent-id", this._uniqueId);
        child.parent = this;
    }
    /**
     * Append a child to this element. If this is a row and we append a row, set {\@ appendToTable} to true
     * will also append the actual table row (tr) to the table.
     *
     * @param {?} child child to be appended
     * @param {?=} appendToTableIfRow
     * @return {?}
     */
    appendChild(child, appendToTableIfRow = false) {
        if (this._dynamicComponent === true) {
            if (child.htmlElement instanceof HTMLTableRowElement) {
                this.renderer.setAttribute(child.htmlElement, "data-tt-parent-id", this._uniqueId);
                if (appendToTableIfRow === true) {
                    if (this.parentTable.useDocFragment === true) {
                        (/** @type {?} */ (this.parentTable._bodyFragment)).appendChild(child.htmlElement);
                    }
                    else {
                        this.renderer.appendChild(this.parentTable.tableBody.nativeElement, child.htmlElement);
                    }
                }
                //track child rows so we can used insertChildRowAt
                if (this.childRows == null) {
                    this.childRows = [];
                }
                this.childRows.push(child);
            }
            else if (child.htmlElement instanceof HTMLTableCellElement) {
                this.renderer.appendChild(this.htmlElement, child.htmlElement);
                if (this.dynamicChildNodes == null) {
                    this.dynamicChildNodes = [];
                }
                this.dynamicChildNodes.push(child);
            }
        }
        else {
            this.childNodes.push(child);
        }
        child.parent = this;
    }
    /**
     * @param {?} cust
     * @return {?}
     */
    appendCustomAttributes(cust) {
        if (cust != null) {
            /** @type {?} */
            const keys$$1 = keys(cust);
            for (let key of keys$$1) {
                this.setAttribute(key, cust[key]);
            }
        }
    }
    /**
     * @param {?} name
     * @param {?} value
     * @return {?}
     */
    setAttribute(name, value) {
        if (name === 'selected' && this.localName == 'row') {
            if (this.parentTable != null) {
                if (value == 'true')
                    this.parentTable.selectRow(this, true);
                else
                    this.parentTable.selectRow(this, false);
                this.parentTable.markForCheck();
            }
        }
        if (name === "expanded") {
            this.expandNode(value);
        }
        else if (this.component != null) {
            this.component.setAttribute(name, value);
            this.trackAttributeName(name);
        }
        else if (this.htmlElement != null) {
            if (name === "isLockedColumn") {
                if (this.fauxElementAttributes == null) {
                    this.fauxElementAttributes = new Map();
                }
                this.fauxElementAttributes.set(name, value);
            }
            else {
                this.renderer.setAttribute(this.htmlElement, name, value);
            }
            this.trackAttributeName(name);
        }
        else if (this.fauxElementAttributes != null) {
            this.fauxElementAttributes.set(name, value);
            this.trackAttributeName(name);
        }
    }
    /**
     * @param {?} name
     * @param {?=} skipQueryDOMIfNotExists
     * @return {?}
     */
    getAttribute(name, skipQueryDOMIfNotExists = false) {
        if (name === "expanded") {
            return this.expanded === "true" ? "true" : "false";
        }
        if (this.component != null) {
            return this.component.getAttribute(name, skipQueryDOMIfNotExists);
        }
        else if (this.htmlElement != null && skipQueryDOMIfNotExists !== true) {
            if (name === "text") {
                /** @type {?} */
                let text = this.htmlElement.getAttribute(name);
                if (text == null) {
                    text = this.htmlElement.innerText;
                }
                if (text == null || text === "") {
                    text = (/** @type {?} */ (this.htmlElement)).textContent;
                }
                if (typeof text === "string") {
                    text = text.trim();
                }
                return text;
            }
            else if (name === "isLockedColumn" && this.fauxElementAttributes != null) {
                return this.fauxElementAttributes.get(name);
            }
            else if (name === "isLockedColumn") {
                return "false";
            }
            return this.htmlElement.getAttribute(name);
        }
        else if (this.fauxElementAttributes != null) {
            return this.fauxElementAttributes.get(name);
        }
    }
    /**
     * @return {?}
     */
    getText() {
        return this.getAttribute("text");
    }
    /**
     * @return {?}
     */
    getId() {
        return this.getAttribute("id");
    }
    /**
     * @param {?} draggable
     * @return {?}
     */
    setDraggable(draggable) {
        this.setAttribute("draggable", draggable);
        if (draggable == "true") {
            this.applyDraggable();
        }
    }
    /**
     * @return {?}
     */
    getExpanded() {
        return this.getAttribute("expanded");
    }
    /**
     * @param {?} str
     * @return {?}
     */
    setExpanded(str) {
        this.setAttribute("expanded", str);
    }
    /**
     * @param {?} action
     * @return {?}
     */
    setOnContextMenu(action) {
        if (this.htmlElement != null) {
            this.contextMenuAction = action;
            this.htmlElement.addEventListener("contextmenu", (event) => this.onContextHandler(event), true);
        }
    }
    /**
     * @param {?} action
     * @return {?}
     */
    setOnMouseDown(action) {
        this.mouseDownAction = action;
    }
    /**
     * @param {?} action
     * @return {?}
     */
    setOnDoubleClick(action) {
        this.doubleClickAction = action;
    }
    /**
     * @param {?} popupName
     * @return {?}
     */
    setPopup(popupName) {
        this.popupName = popupName.replace("#", "");
    }
    /**
     * @return {?}
     */
    getParent() {
        return this.parent;
    }
    /**
     * @return {?}
     */
    getLocalName() {
        return this.localName;
    }
    /**
     * @param {?} localName
     * @return {?}
     */
    setLocaleName(localName) {
        this.localName = localName;
    }
    /**
     * @return {?}
     */
    getChildren() {
        /** @type {?} */
        let children = this.childNodes;
        if ((children == null || children.length === 0) && (this.dynamicChildNodes != null)) {
            children = this.dynamicChildNodes;
        }
        if (this.getLocalName() === "row" &&
            children != null &&
            this.parentTable != null &&
            this.parentTable.getLocalName() === "table" &&
            this.parentTable.columnsHasBeenSwapped === true) {
            children = /** @type {?} */ (orderBy(children, (child) => {
                return child["originalColumnIndex"];
            }));
        }
        return children;
    }
    /**
     * @return {?}
     */
    getChildCount() {
        return this.childNodes != null ? this.childNodes.length : 0;
    }
    /**
     * @param {?} idx
     * @return {?}
     */
    getChildAt(idx) {
        return this.getChildCount() > idx ? this.childNodes[idx] : null;
    }
    /**
     * @param {?} component
     * @param {?=} fromVirtualTable
     * @return {?}
     */
    setComponent(component, fromVirtualTable = false) {
        this.component = component;
        this.component.parentTableRow = this.parent;
        if (component != null && fromVirtualTable === true) {
            component.addAttributeChangeListener(this);
        }
    }
    /**
     * @param {?} action
     * @return {?}
     */
    invokeMcoAction(action) {
        if (typeof action === "function") {
            action();
        }
        else if (action.indexOf("mco://") === 0) {
            /** @type {?} */
            const mcoName = action.substring(6, action.indexOf("."));
            /** @type {?} */
            const methodName = action.substring(action.indexOf(".") + 1, action.indexOf("("));
            /** @type {?} */
            const arg = action.substring(action.indexOf("(") + 1, action.indexOf(")"));
            if (arg != null && arg.length > 0) {
                /** @type {?} */
                const mco = this.sessionService.getMcoContainer().getMco(mcoName);
                if (mco != null) {
                    if (arg === "this") {
                        mco[methodName].apply(mco, [this]);
                    }
                    else {
                        mco[methodName].apply(mco, [arg]);
                    }
                }
                else {
                    console.error("Unable to execute MCO action, mco not found: " + mcoName);
                }
            }
            else {
                /** @type {?} */
                const mco = this.sessionService.getMcoContainer().getMco(mcoName);
                if (mco != null) {
                    mco[methodName].apply(mco);
                }
                else {
                    console.error("Unable to execute MCO action, mco not found: " + mcoName);
                }
            }
        }
    }
    /**
     * @return {?}
     */
    getComponent() {
        return this.component;
    }
    /**
     * @param {?} event
     * @return {?}
     */
    showPopupMenu(event) {
        this.sessionService.setMousePosition(event);
        if (this.popupName != null) {
            /** @type {?} */
            const contextMenu = this.sessionService.showContextMenu(this.popupName);
            if (contextMenu === true) {
                event.preventDefault();
                event.stopPropagation();
                // contextMenu.show(this.htmlElement);
            }
        }
        /** @type {?} */
        const clientEvent = new ClientEvent(this, event);
        if (AppUtils.customizeClientEvent != null) {
            AppUtils.customizeClientEvent(this, clientEvent);
        }
        clientEvent.setParameter("screenId", this.parentScreenId);
        this.sessionService.getEventHandler().setClientEvent(clientEvent);
    }
    /**
     * @param {?} event
     * @return {?}
     */
    handleOnMouseDown(event) {
        if (this.parentTable != null) {
            /** @type {?} */
            let table = this.parentTable.elementRef.nativeElement;
            /** @type {?} */
            let tds = table.querySelectorAll('td');
            for (let i = 0; i < tds.length; i++) {
                (/** @type {?} */ (tds[i])).style.color = '';
            }
            tds = this.htmlElement.querySelectorAll('td');
            for (let i = 0; i < tds.length; i++) {
                (/** @type {?} */ (tds[i])).style.color = 'blue';
            }
        }
        if (this.mouseDownAction != null) {
            /** @type {?} */
            const clientEvent = new ClientEvent(this, event);
            if (AppUtils.customizeClientEvent != null) {
                AppUtils.customizeClientEvent(this, clientEvent);
            }
            if (this.parentScreenId != null) {
                clientEvent.setParameter("screenId", this.parentScreenId);
            }
            this.sessionService.getEventHandler().setClientEvent(clientEvent);
            this.invokeMcoAction(this.mouseDownAction);
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    handleDoubleClick(event) {
        /** @type {?} */
        const clientEvent = new ClientEvent(this, event);
        if (AppUtils.customizeClientEvent != null) {
            AppUtils.customizeClientEvent(this, clientEvent);
        }
        if (this.parentScreenId != null) {
            clientEvent.setParameter("screenId", this.parentScreenId);
        }
        this.sessionService.getEventHandler().setClientEvent(clientEvent);
        if (this.doubleClickAction != null) {
            this.invokeMcoAction(this.doubleClickAction);
        }
    }
    /**
     * @param {?} isExpanded
     * @param {?=} justUpdateAttribute
     * @return {?}
     */
    expandNode(isExpanded, justUpdateAttribute = false) {
        this.expanded = typeof isExpanded === "string" ? isExpanded : isExpanded + '';
        if (justUpdateAttribute !== true && this.parentTableId != null && this.parentTableId !== "") {
            /** @type {?} */
            const jq = jQuery(`#${this.parentTableId} .jq-tree-table`);
            if (jq != null) {
                /** @type {?} */
                let nodeId = this.getAttribute("data-tt-id");
                if (nodeId != null) {
                    try {
                        if (isExpanded === "true" || isExpanded === true) {
                            jq.treetable("expandNode", nodeId);
                        }
                        else {
                            jq.treetable("collapseNode", nodeId);
                        }
                    }
                    catch (e) {
                        console.error("Unable to expand node due to error");
                    }
                }
            }
            else {
                console.error("Unable to expand node, tree table is null");
            }
        }
    }
    /**
     * @param {?} name
     * @return {?}
     */
    trackAttributeName(name) {
        if (this.attributesName == null) {
            this.attributesName = [];
        }
        this.attributesName.push(name);
    }
    /**
     * @return {?}
     */
    toJson() {
        /** @type {?} */
        let retVal = {};
        if (this.component != null) {
            retVal = this.component.toJson();
            if (this.component instanceof LabelComponent) {
                retVal["nxTagName"] = this.getLocalName();
                retVal["tagName"] = this.getLocalName();
            }
        }
        else {
            retVal["nxTagName"] = this.getLocalName();
            retVal["tagName"] = this.getLocalName();
        }
        if (this.component == null) {
            retVal["id"] = this.getId() || this._uniqueId;
            retVal["text"] = this.getText();
        }
        if (this.attributesName != null) {
            this.attributesName.forEach(name => {
                retVal[name] = this.getAttribute(name);
            });
        }
        /** @type {?} */
        let children;
        if (this.childNodes != null && this.childNodes.length > 0) {
            children = this.childNodes;
        }
        else if (this.dynamicChildNodes != null && this.dynamicChildNodes.length > 0) {
            children = this.dynamicChildNodes;
        }
        if (children != null) {
            if (this.getLocalName() === "row" &&
                this.parentTable != null &&
                this.parentTable.getLocalName() === "table" &&
                this.parentTable.columnsHasBeenSwapped === true) {
                children = /** @type {?} */ (orderBy(children, (child) => {
                    return child["originalColumnIndex"];
                }));
            }
            retVal["children"] = children.map(child => child.toJson());
        }
        if (this.customAttributes)
            retVal['customAttributes'] = this.customAttributes;
        return retVal;
    }
    /**
     * @return {?}
     */
    isView() {
        return false;
    }
    /**
     * @return {?}
     */
    isDialog() {
        return false;
    }
    /**
     * @return {?}
     */
    isDynamicView() {
        return false;
    }
    /**
     * @return {?}
     */
    isFauxElement() {
        return true;
    }
    /**
     * @param {?} chk
     * @return {?}
     */
    setChecked(chk) {
        if (typeof chk === "boolean") {
            chk = chk + "";
        }
        this.setAttribute("checked", chk);
    }
    /**
     * Search for child using the provided function
     *
     * @param {?} fn function to execute while iterating child lookup
     * @return {?}
     */
    findChildByFn(fn) {
        /** @type {?} */
        let retVal;
        /** @type {?} */
        let children = this.concatNode(/** @type {?} */ ([]), this);
        while (children.length > 0) {
            /** @type {?} */
            const child = children.pop();
            if (child != null) {
                if (fn(child) === true) {
                    retVal = child;
                    break;
                }
                else {
                    children = this.concatNode(children, child);
                }
            }
        }
        return retVal;
    }
    /**
     * Concate {fromNode} to {toNode}
     *
     * @param {?} toNode array of nodes to be concated to
     * @param {?} fromNode node to be concated from
     * @return {?} the concated node
     */
    concatNode(toNode, fromNode) {
        /** @type {?} */
        let retVal = toNode;
        if (fromNode != null) {
            if (fromNode.childNodes != null) {
                retVal = retVal.concat(fromNode.childNodes);
            }
            if (fromNode.childRows != null) {
                retVal = retVal.concat(fromNode.childRows);
            }
            if (fromNode.dynamicChildNodes != null) {
                retVal = retVal.concat(fromNode.dynamicChildNodes);
            }
        }
        return retVal;
    }
    /**
     * @param {?} evt
     * @return {?}
     */
    beforeAttributeRemoved(evt) {
    }
    /**
     * @param {?} evt
     * @return {?}
     */
    beforeAttributeSet(evt) {
    }
    /**
     * @param {?} evt
     * @return {?}
     */
    onAttributeRemoved(evt) {
    }
    /**
     * @param {?} evt
     * @return {?}
     */
    onAttributeSet(evt) {
        if (evt.getName() === "sortValue" && this.htmlElement != null) {
            this.updateSortValue(evt.getNewValue());
        }
    }
    /**
     * @param {?} value
     * @return {?}
     */
    updateSortValue(value) {
        if (this.renderer != null) {
            this.renderer.setAttribute(this.htmlElement, "data-text", value);
            if (this.component != null && this.component.getParent() != null && typeof (/** @type {?} */ (this.component.getParent())).refreshTableSorterCache === "function") {
                (/** @type {?} */ (this.component.getParent())).refreshTableSorterCache();
            }
        }
    }
    /**
     * @return {?}
     */
    isDraggable() {
        return this.getAttribute("draggable") === "true";
    }
    /**
     * @return {?}
     */
    applyDraggable() {
        if (this.isDraggable() && this.draggableApplied !== true && this.htmlElement != null) {
            jQuery(this.htmlElement).draggable({
                appendTo: "body",
                addClasses: false,
                helper: () => {
                    /** @type {?} */
                    const helper = document.createElement("div");
                    helper.classList.add("draggable-row-helper");
                    helper.id = "draggableRowHelperInternal";
                    // if (this.parentTable != null && this.parentTable.selectedRows != null && this.parentTable.selectedRows.length > 1) {
                    //   helper.classList.add("drag-row-helper-container");
                    //   const c = this.parentTable.selectedRows.length;
                    //   const frag = document.createDocumentFragment();
                    //   for (let i = 0; i < c; i++) {
                    //     const row = document.createElement("div");
                    //     row.classList.add("drag-row-helper-row");
                    //     frag.appendChild(row);
                    //   }
                    //   helper.appendChild(frag);
                    // }
                    return helper;
                },
                start: () => {
                    /** @type {?} */
                    const clientEvent = new ClientEvent(this, event);
                    clientEvent.setParameter("dragId", this.parentTableId);
                    if (AppUtils.customizeClientEvent != null) {
                        AppUtils.customizeClientEvent(this, clientEvent);
                    }
                    if (this.parentScreenId != null) {
                        clientEvent.setParameter("screenId", this.parentScreenId);
                    }
                    this.sessionService.getEventHandler().setClientEvent(clientEvent);
                }
            });
        }
        this.draggableApplied = true;
    }
    /**
     * @return {?}
     */
    isDraggableApplied() {
        return this.draggableApplied;
    }
    /**
     * rowなどBaseComponentとして存在しないwrapperにcustomAttributesを設定します。
     * @param {?} name
     * @param {?} value
     * @return {?}
     */
    setCustomAttribute(name, value) {
        if (!this.customAttributes)
            this.customAttributes = {};
        this.customAttributes[name] = value;
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class TableRowDefDirective {
    constructor() { }
}
TableRowDefDirective.decorators = [
    { type: Directive, args: [{
                selector: 'vt-table-row-def'
            },] }
];
/** @nocollapse */
TableRowDefDirective.ctorParameters = () => [];
TableRowDefDirective.propDecorators = {
    customAttributes: [{ type: Input }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class FooterRowDirective {
}
FooterRowDirective.decorators = [
    { type: Directive, args: [{
                selector: 'vt-footer-row'
            },] }
];
FooterRowDirective.propDecorators = {
    cellTemplates: [{ type: ContentChildren, args: [TableCellDirective, { read: TableCellDirective },] }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class RowDirective {
}
RowDirective.decorators = [
    { type: Directive, args: [{
                selector: 'vt-row'
            },] }
];
RowDirective.propDecorators = {
    customAttributes: [{ type: Input }],
    id: [{ type: Input }],
    cssClass: [{ type: Input }],
    cellTemplates: [{ type: ContentChildren, args: [TableCellDirective, { read: TableCellDirective },] }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Clipboard service that use the modern implementation of cliboard. For older browser, a polyfill
 * is used instead.
 */
class ClipboardService {
    /**
     * Copy the {txt} text into the clipboard
     *
     * @param {?} txt text to be copied into the clipboard
     * @return {?}
     */
    copy(txt) {
        return writeText(txt);
    }
}
ClipboardService.decorators = [
    { type: Injectable, args: [{
                providedIn: 'root'
            },] }
];
/** @nocollapse */ ClipboardService.ngInjectableDef = defineInjectable({ factory: function ClipboardService_Factory() { return new ClipboardService(); }, token: ClipboardService, providedIn: "root" });

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * @return {?}
 */
function isIE() {
    /** @type {?} */
    var nav = navigator.userAgent.toLowerCase();
    return nav.indexOf("msie") !== -1 ? parseInt(nav.split("msie")[1]) : false;
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Class for table component
 */
class TableComponent extends BaseComponent {
    /**
     *
     * @param {?} parent see [[BaseComponent]] constructor
     * @param {?} sessionService see [[BaseComponent]] constructor
     * @param {?} el see [[BaseComponent]] constructor
     * @param {?} changeDetectorRef Inject ChangeDetector
     * @param {?} renderer see [[BaseComponent]] constructor
     * @param {?} zone Inject NgZone
     * @param {?} differs Inject InterableDiffers
     * @param {?} clipboardService Inject [[ClipboardService]]
     */
    constructor(parent, sessionService, el, changeDetectorRef, renderer, zone, differs, clipboardService) {
        super(parent, sessionService, el, renderer);
        this.el = el;
        this.changeDetectorRef = changeDetectorRef;
        this.zone = zone;
        this.clipboardService = clipboardService;
        this.selectionMode = "singleRow";
        //use for virtual scrolling
        this.rowHeight = 24;
        this.scrollTimeout = 200;
        /* istanbul ignore next */
        this.onChange = new EventEmitter();
        this.onStateChange = new EventEmitter();
        this.onDoubleClick = new EventEmitter();
        this.onDragDrop = new EventEmitter();
        //custom sort function for virtual scroll
        this.forceFixWidth = true;
        this.isHeaderPadding = false;
        this.isHeaderAuto = false;
        //table-layout default fixed
        this.tableLayout = "fixed";
        //track dynamic rows so we can query for child later
        this.nodes = [];
        this.selectedRows = [];
        this._prevSelectedRows = [];
        this.scrollHandler = null;
        this.previousRowIndex = null;
        this.scrollSubject = new Subject();
        this.prevScrollTop = 0;
        this.prevScrollTopForHiddenHeader = 0;
        this.sortDirection = "";
        this.sortColumnId = 0;
        this.theadHeight = 0;
        this.scrollLeft = 0;
        this.adjustedRows = 0;
        this.preMouseEvent = null;
        this.dataSourceDiffer = differs.find([]).create();
        this.columnsDiffer = differs.find([]).create();
        this.customRowDiffer = differs.find([]).create();
        this.isIE9 = isIE() == 9;
        //for virtual scroll
        this.virtualScrollDataSourceDiffer = differs.find([]).create();
        this.keyupHandler = (evt) => this.handleKeyUp(evt);
        this.scrollHandler = (event) => {
            if (this._disabledScrolling === true) {
                event.preventDefault();
                event.stopPropagation();
                return;
            }
            if (this.prevScrollTopForHiddenHeader !== event.srcElement.scrollTop) {
                if (!this.skipGhostHeader) {
                    this.renderer.setStyle(this.ghostHeader.nativeElement, "display", "inline-block");
                    if (this.controlWidth === "100%") {
                        this.renderer.setStyle(this.ghostHeader.nativeElement, "width", "100%");
                    }
                    this.renderer.setStyle(this.tableHead.nativeElement, "visibility", "hidden");
                }
                //   if(this.forceFixWidth){
                //     this.renderer.setStyle(this.fakeTable.nativeElement, "table-layout", "fixed");
                //   }
                if (this.tableFoot != null) {
                    this.renderer.setStyle(this.tableFoot.nativeElement, "visibility", "hidden");
                }
                //   this.appendHeaderToFakeTable();
                if (this.virtualScroll === true) {
                    if (this.animationFrameId != null) {
                        cancelAnimationFrame(this.animationFrameId);
                    }
                    this.adjustTableHead(event, false, true);
                }
            }
            this.prevScrollTopForHiddenHeader = event.srcElement.scrollTop;
            //disabled for IE11/IE9 (too slow)
            // else {
            //     if (this.animationFrameId != null) {
            //         cancelAnimationFrame(this.animationFrameId);
            //    }
            //     this.animationFrameId = requestAnimationFrame(()=>this.adjustTableHead(event, true));
            // }
            this.scrollSubject.next(event);
        };
    }
    /**
     * @param {?} ds
     * @return {?}
     */
    set dataSource(ds) {
        //data has changes, we need to do some clean up.
        this.cleanUpChildNodes();
        this.resetTableColumns();
        this._dataSource = this.buildRowIdentity(ds);
        this.checkShowBlankRow();
        this.previousRowIndex = null;
        this.modifiedVirtualRows = null;
        this.modifiedVirtualRowsJson = null;
        this.selectedRows = [];
        this.calcVirtualScrollHeight();
        this.calcVirtualScrollViewPort();
    }
    /**
     * @return {?}
     */
    get dataSource() {
        return this.virtualScroll === true ? this._virtualViewPort : this._dataSource;
    }
    /**
     * @param {?} columns
     * @return {?}
     */
    set tableColumns(columns) {
        this.clearHeaderNodes();
        this.columns = this.toColumns(columns);
        if (this._isViewInit === true) {
            this.initPlugins();
        }
    }
    /**
     * @param {?} rows
     * @return {?}
     */
    set tableRowQuery(rows) {
        this.cleanUpChildNodes();
        this._tableRow = [];
        this.detectChanges();
        this._tableRow = rows.toArray();
    }
    /**
     * @return {?}
     */
    get tableRow() {
        return this._tableRow;
    }
    /**
     * @return {?}
     */
    get ROW_INDEX_KEY() {
        return '$$$$rowIndex$$$$';
    }
    /**
     * 画面がリサイズされた際に動かすイベント
     * @return {?}
     */
    tableResize() {
        this.adjustTableFooter();
    }
    /**
     * Do check lifecycle
     * @return {?}
     */
    ngDoCheck() {
        if (this.dataSourceDiffer.diff(this._dataSource)) {
            if (this.virtualScroll === true) {
                this.calcVirtualScrollHeight();
                this.calcVirtualScrollViewPort(this.prevScrollTop);
            }
            this.checkShowBlankRow();
            this.markForCheck();
            this.refreshTableSorter();
        }
        else if (this.virtualScroll === true && this.virtualScrollDataSourceDiffer.diff(this._virtualViewPort)) {
            this.checkShowBlankRow();
            this.markForCheck();
        }
        else {
            this.checkCustomRowsForChanged();
            this.checkColumnsForChanged();
        }
    }
    /**
     * Init lifecycle. Call parent class ngOnInit
     * @return {?}
     */
    ngOnInit() {
        super.ngOnInit();
    }
    /**
     * After view init lifecycle. Apply jQuery plugin and event listeners
     * @return {?}
     */
    ngAfterViewInit() {
        super.ngAfterViewInit();
        /** @type {?} */
        const view = this._getNoneActiveViewParent() || this.getParentView();
        if (view != null && this.columns != null) {
            this.columns.filter(col => col.id != null && col.id !== "").forEach(col => {
                if (view["_tableColumnsMap"] == null) {
                    view["_tableColumnsMap"] = new Map();
                }
                view["_tableColumnsMap"].set(KeyUtils.toMapKey(col.id), /** @type {?} */ (col));
            });
        }
        //droppable?
        if (this.droppable === true || this.droppable === "true") {
            $(this.tableContainer.nativeElement).droppable({
                classes: {
                    "ui-droppable-hover": "ui-state-hover"
                },
                hoverClass: "ui-state-hover",
                accept: "tr",
                drop: (event, ui) => {
                    this.onDragDrop.emit();
                },
                tolerance: "pointer"
            });
        }
        this.scrollSubcription = this.scrollSubject.pipe(debounce(() => timer(this.scrollTimeout))).subscribe((event) => {
            this.renderer.removeAttribute(this.ghostHeader.nativeElement, "display");
            /* istanbul ignore next */
            if (this.virtualScroll === true) {
                this.recalculateVirtualScrollData(event);
            }
            else {
                this.adjustTableHead(event);
            }
        });
        this.scrollContainerStyles = {
            "overflow-y": "auto",
            "overflow-x": "visible",
            "position": "relative"
        };
        /* istanbul ignore next */
        if (this.virtualScroll === true) {
            try {
                if (this.controlHeight == null || this.controlHeight == "100%")
                    this.clientHeightVirtualScroll = (/** @type {?} */ (this.tableContainer.nativeElement)).clientHeight;
                else
                    this.clientHeightVirtualScroll = parseInt(this.controlHeight);
                if (isNaN(this.clientHeightVirtualScroll) === false) {
                    this.recCalcNoVirtualRow();
                    this._isViewInit = true;
                }
            }
            catch (e) {
            }
            this.tableStyles = {
                "top": "0px",
                "left": "0px",
                "position": "absolute",
                "width": "100%",
                "height": "calc(100% - 17px)",
                "max-width": "100vw",
                "max-height": "100vh"
            };
            this.virtualScrollProgressStyles = {
                "top": "0px",
                "display": "none",
                "position": "absolute"
            };
            this.calcVirtualTablePosition(0);
        }
        /* istanbul ignore next */
        //fix expression has changed blah blah blah
        this.detectChanges();
        if (this.virtualScroll === true) {
            this.calcVirtualScrollHeight();
            this.calcVirtualScrollViewPort(0);
        }
        this.zone.runOutsideAngular(() => {
            this._isViewInit = true;
            this.initPlugins();
            this.zone.runOutsideAngular(() => {
                this.el.nativeElement.addEventListener('scroll', this.scrollHandler, true);
                // this.el.nativeElement.addEventListener("mouseup", this.mouseUpHandler, true);
                this.el.nativeElement.addEventListener("keyup", this.keyupHandler, true);
            });
        });
    }
    /**
     * @return {?}
     */
    initPlugins() {
        if (this.$dragableColumns) {
            this.$dragableColumns.destroy();
        }
        if (this.initTm != null) {
            clearTimeout(this.initTm);
        }
        // if (this.table) {
        this.renderer.setStyle(this.table.nativeElement, "visibility", "hidden");
        this.initTm = setTimeout(() => {
            if (this.table) {
                this.renderer.setStyle(this.table.nativeElement, "visibility", "hidden");
                // 再表示時にスクロールバーの位置を戻す
                this.tableContainer.nativeElement.scrollLeft = 0;
                /** @type {?} */
                const jQueryTable = jQuery(this.table.nativeElement);
                if (this.enableColumnDragging == null || this.enableColumnDragging === true) {
                    this.$dragableColumns = jQueryTable.dragableColumns({
                        dropCallback: (fromIndex, toIndex) => this.swapColumns(fromIndex, toIndex),
                        dragEndCallback: () => {
                            this.skipGhostHeader = false;
                            this.scrollContainerStyles["overflow-y"] = "auto";
                            this.detectChanges();
                            this._disabledScrolling = false;
                        },
                        dragStartCallback: (colIdx) => {
                            this.skipGhostHeader = true;
                            /** @type {?} */
                            let canDrag = this.canDragColumn(colIdx);
                            if (canDrag) {
                                this.scrollContainerStyles["overflow-y"] = "hidden";
                                this.detectChanges();
                                this._disabledScrolling = true;
                            }
                            return canDrag;
                        },
                        dragEnterCallback: (colIdx) => {
                            return this.canDragColumn(colIdx);
                        }
                    });
                }
                if ((this.enableSort == null || this.enableSort === true) && this.$tablesorter == null) {
                    if (this.virtualScroll !== true) {
                        this.$tablesorter = jQueryTable.tablesorter({
                            widgets: ['zebra', 'columns'],
                            usNumberFormat: false,
                            tabIndex: false,
                            sortReset: false,
                            sortRestart: true,
                            sortStable: true,
                            delayInit: true // move the initial performance hit to first sort so the table would load faster
                        });
                    }
                }
                else if (this.virtualScroll !== true && this.$tablesorter != null) {
                    this.$tablesorter.trigger("updateHeaders");
                }
                this.setHeaderWidthHeight();
                if (this.enableColumnResize == null || this.enableColumnResize === true) {
                    /** @type {?} */
                    let target_columns = new Array();
                    /** @type {?} */
                    let original_columnWidths = new Array();
                    for (let i = 0; i < this.columns.length; i++) {
                        /** @type {?} */
                        let column = this.columns.find((item, idx) => idx === i);
                        if (column != null) {
                            /** @type {?} */
                            const headChildren = this.tableHead.nativeElement.querySelector('th:nth-child(' + (i + 1) + ')');
                            target_columns.push(headChildren);
                            original_columnWidths.push(headChildren.style.width);
                        }
                    }
                    //reset
                    this._cleanupColResize();
                    this.$colResizable = jQueryTable.colResizable({
                        liveDrag: false,
                        //turning this on will incurred a severe performance penalty on IE so leave it off
                        resizeMode: 'overflow',
                        partialRefresh: true,
                        //After closing the window and opening again, columnResizer can't work. To fix that, this value is needed.,
                        headerOnly: true //allow dragging using header only
                    });
                    for (let i = 0; i < target_columns.length; i++) {
                        /** @type {?} */
                        const targetColumn = target_columns[i];
                        /** @type {?} */
                        const headChildren_width = this.toWholeNumber(targetColumn.style.width.slice(0, -2));
                        /** @type {?} */
                        const originalChildren_width = this.toWholeNumber(original_columnWidths[i]);
                        // if(headChildren_width < originalChildren_width){
                        this.renderer.setStyle(targetColumn, "width", original_columnWidths[i]);
                        // }
                    }
                    target_columns = null;
                    original_columnWidths = null;
                }
                this.adjustTableFooter();
                this.renderer.setStyle(this.table.nativeElement, "table-layout", this.tableLayout);
            }
            if (this.table != null) {
                this.renderer.removeStyle(this.table.nativeElement, "visibility");
            }
        }, 200);
        //}
    }
    /**
     * Destroy lifecycle. Remove event listeners
     * @return {?}
     */
    ngOnDestroy() {
        super.ngOnDestroy();
        this.cleanUpChildNodes(true);
        this.clearHeaderNodes(true);
        /** @type {?} */
        const view = this._getNoneActiveViewParent() || this.getParentView();
        if (view != null && view["_tableColumnsMap"] != null) {
            view["_tableColumnsMap"].clear();
            view["_tableColumnsMap"] = null;
        }
        if (this._children != null) {
            this._children.clear();
        }
        this._children = null;
        if (this._viewChildrenMap != null) {
            this._viewChildrenMap.clear();
        }
        this._viewChildrenMap = null;
        if (this.scrollSubcription != null) {
            this.scrollSubcription.unsubscribe();
        }
        this.modifiedVirtualRows = null;
        this.modifiedVirtualRowsJson = null;
        this.scrollSubject = null;
        this.scrollSubcription = null;
        if (this.scrollHandler) {
            this.el.nativeElement.removeEventListener('scroll', this.scrollHandler, true);
            this.scrollHandler = null;
        }
        // if (this.mouseUpHandler) {
        //     this.el.nativeElement.removeEventListener("mouseup", this.mouseUpHandler, true);
        //     this.mouseUpHandler = null;
        // }
        if (this.keyupHandler) {
            this.table.nativeElement.removeEventListener("keyup", this.keyupHandler, true);
            this.keyupHandler = null;
        }
        if (this.$dragableColumns != null) {
            this.$dragableColumns.destroy();
        }
        // if (this.columnsChangeSubscription != null) {
        //     this.columnsChangeSubscription.unsubscribe();
        // }
        // this.columnsChangeSubscription = null;
        this.dataSourceDiffer = null;
        this.columnsDiffer = null;
        this.customRowDiffer = null;
        this.virtualScrollDataSourceDiffer = null;
        this.selectedRows = null;
        this.tableHead = null;
        this.tableWrapper = null;
        this.tableContainer = null;
        this.table = null;
        this.preMouseEvent = null;
        this.scrollContainerStyles = null;
    }
    /**
     * Check to see if columns have changes
     * @return {?}
     */
    checkColumnsForChanged() {
        if (this.columns != null && this.columnsDiffer.diff(this.columns.map(item => {
            return {
                visible: item.visible,
                header: item.header,
                controlWidth: item.controlWidth,
                locked: item.locked,
                enabled: item.enabled,
                sortable: item.sortable
            };
            // PK: DO NOT REMOVED
            // Comment this out for now and revert to previous, will bring this back
            // when we added a diff to check for changes in vt-row
            // return item.visible +
            //     item.header +
            //     item.controlWidth +
            //     item.locked +
            //     item.enabled +
            //     item.sortable;
        }))) {
            //this.cleanUpChildNodes();
            this.markForCheck();
            this.recCalcNoVirtualRow();
        }
    }
    /**
     * @return {?}
     */
    checkCustomRowsForChanged() {
        if (this._tableRow != null && this.customRowDiffer.diff(/** @type {?} */ (this._tableRow))) {
            this.checkShowBlankRow();
            this.markForCheck();
        }
    }
    /**
     * @param {?=} nullOutHeadNode
     * @return {?}
     */
    clearHeaderNodes(nullOutHeadNode = false) {
        if (this.headNode != null) {
            if (this.headNode.childNodes != null && this.headNode.childNodes.length > 0) {
                for (let node of this.headNode.childNodes) {
                    /** @type {?} */
                    const parentView = this.getParentView();
                    if (parentView != null) {
                        parentView.removeViewChildFromMap(node.getId());
                    }
                    node.destroy();
                }
            }
            this.headNode.childNodes = [];
        }
        if (nullOutHeadNode === true) {
            this.headNode = null;
        }
    }
    /**
     * Clean up our faux table children
     * @param {?=} skipTrackingVirtualRow
     * @return {?}
     */
    cleanUpChildNodes(skipTrackingVirtualRow = false) {
        if (this.nodes != null) {
            /** @type {?} */
            const parentView = this.getParentView();
            for (let node of this.nodes) {
                //cache modified data if virtual scroll
                if (skipTrackingVirtualRow !== true &&
                    node.getLocalName() === "row" &&
                    this.virtualScroll === true &&
                    this.modifiedVirtualRows != null &&
                    this.modifiedVirtualRows[node[TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX]] != null) {
                    this._checkInitModifiedVirtualRowsJson();
                    this.modifiedVirtualRowsJson[node[TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX]] = node.toJson();
                }
                //removed ourself from parent cache
                if (parentView != null) {
                    parentView.removeViewChildFromMap(node.getId());
                }
                node.destroy();
            }
        }
        this.nodes = [];
        if (this.virtualScroll !== true) {
            this.selectedRows = [];
        }
        this._prevSelectedRows = [];
        this.lastSelectedRowIndex = null;
    }
    /**
     * Get the datasource row count
     * @return {?} Number of rows in [[dataSource]]
     */
    getRowCount() {
        return this._dataSource ? this._dataSource.length : 0;
    }
    /**
     * Add/remove row to list of selected rows
     * @param {?} row
     * @param {?} isSelected If true, row will be added, otherwise row will be removed from selected rows collection
     * @return {?}
     */
    selectRow(row, isSelected) {
        /** @type {?} */
        let rowIndex = -1;
        if (this.virtualScroll === true) {
            /** @type {?} */
            const tempNode = find(this.nodes, (node) => {
                return node === row;
            });
            if (tempNode != null) {
                rowIndex = tempNode[TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX];
            }
        }
        else {
            rowIndex = findIndex(this.nodes, (node) => {
                return node === row;
            });
        }
        if (rowIndex >= 0 && rowIndex < this._dataSource.length) {
            /** @type {?} */
            let idx = findIndex(this.selectedRows, (row) => {
                return row === rowIndex;
            });
            if (isSelected) {
                //if it wasn't selected, add it in selectedRows.
                if (idx < 0) {
                    this.selectedRows.push(rowIndex);
                }
            }
            else {
                //if it was selected before, remove it from selectedRows.
                if (idx >= 0) {
                    this.selectedRows.splice(idx, 1);
                }
            }
        }
    }
    /**
     * Event handler for click on row
     * \@event onStateChange
     * @param {?} event Mouse click event
     * @param {?} rowIndex Index of the row that was clicked
     * @return {?}
     */
    onRowClick(event, rowIndex) {
        /** @type {?} */
        const parentView = this.getParentView();
        /* istanbul ignore if */
        if (parentView != null) {
            parentView.addViewChildToMap(this.nodes[rowIndex]);
            if (this.previousRowIndex != null && this.nodes[this.previousRowIndex] != null) {
                parentView.removeViewChildFromMap(this.nodes[this.previousRowIndex].getId());
            }
        }
        this.previousRowIndex = rowIndex;
        this.triggerStateChange();
    }
    /**
     * @return {?}
     */
    triggerStateChange() {
        /** @type {?} */
        const clientEvent = new ClientEvent(this, event);
        if (AppUtils.customizeClientEvent != null) {
            AppUtils.customizeClientEvent(this, clientEvent);
        }
        if (this.getParentView() != null) {
            clientEvent.setParameter("screenId", this.getParentView().getId());
        }
        clientEvent.setParameter("id", this.getId());
        /** @type {?} */
        let rowId = this.selectedRows.map(idx => this.getChildByOriginalRowIndex(idx).getId()).join(",");
        clientEvent.setParameter("rowId", rowId);
        this.getSession().getEventHandler().setClientEvent(clientEvent);
        this.onStateChange.emit();
    }
    /**
     * @param {?} index
     * @return {?}
     */
    getChildByOriginalRowIndex(index) {
        /** @type {?} */
        let node = this.nodes[index];
        if (this.virtualScroll === true) {
            node = find(this.nodes, (el) => {
                return el[TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX] === index;
            });
        }
        return node;
    }
    /**
     * @param {?} event
     * @param {?} rowIndex
     * @param {?} row
     * @return {?}
     */
    handleMouseUp(event, rowIndex, row) {
        //for draggale rows, we need to double check row selection again
        if (this.draggableRows === true && this.shouldHandleMouseUp === true) {
            this.toggleRowSelection(event, rowIndex, row, true);
        }
        this.shouldHandleMouseUp = false;
    }
    /**
     * Set row as selected/unselected
     * @param {?} event
     * @param {?} rowIndex Index of row to toggle on/off
     * @param {?} row
     * @param {?=} isMouseUp
     * @return {?}
     */
    toggleRowSelection(event, rowIndex, row, isMouseUp = false) {
        /** @type {?} */
        const targetEl = /** @type {?} */ (event.target);
        if (targetEl.tagName.toLowerCase() == 'input' && targetEl.getAttribute('type') != null) {
            if (targetEl.getAttribute('type').toLowerCase() == 'radio') {
                return;
            }
        }
        if (targetEl.tagName.toLowerCase() == 'button') {
            return;
        }
        /** @type {?} */
        let actualRowIndex = rowIndex;
        //prevent text selection when shiftKey is pressed
        if (event.shiftKey === true && event.preventDefault) {
            event.preventDefault();
        }
        if (this.selectionMode !== "none") {
            if (this.virtualScroll === true && row[TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX] != null) {
                actualRowIndex = row[TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX];
            }
            //if user is not pressing shift key, clear all previous selection
            if (event.shiftKey !== true && event.ctrlKey !== true && event.buttons !== 2) {
                /** @type {?} */
                let clearSelection = true;
                if (this.draggableRows === true && isMouseUp !== true && this.selectedRows.indexOf(actualRowIndex) >= 0) {
                    clearSelection = false;
                    this.shouldHandleMouseUp = true;
                }
                if (clearSelection) {
                    this.selectedRows.splice(0, this.selectedRows.length);
                }
            }
            /** @type {?} */
            let idx = findIndex(this.selectedRows, (row) => {
                return row === actualRowIndex;
            });
            if (idx < 0) {
                //if multi row and user is pressing shift/ctrl key, allow multi row selection
                if (this.selectionMode === "multiRow" && (event.shiftKey || event.ctrlKey)) {
                    if (event.ctrlKey) {
                        this.selectedRows.push(actualRowIndex);
                    }
                    else if (event.shiftKey) {
                        if (this.lastSelectedRowIndex >= 0) {
                            if (this.lastSelectedRowIndex > rowIndex) {
                                for (let i = rowIndex; i < this.lastSelectedRowIndex; i++) {
                                    this.selectedRows.push(this.getOriginalIndex(i));
                                }
                            }
                            else if (this.lastSelectedRowIndex < rowIndex) {
                                for (let i = this.lastSelectedRowIndex + 1; i <= rowIndex; i++) {
                                    this.selectedRows.push(this.getOriginalIndex(i));
                                }
                            }
                            else {
                                this.selectedRows.push(actualRowIndex);
                            }
                        }
                        else {
                            this.selectedRows.push(actualRowIndex);
                        }
                    }
                }
                else {
                    this.selectedRows = [actualRowIndex];
                }
            }
            else if (event.ctrlKey === true && idx >= 0 && event.buttons !== 2) {
                //if control key is pressed (and not right click), remove the selected row
                this.selectedRows.splice(idx, 1);
            }
            this.detectChanges();
            this.lastSelectedRowIndex = rowIndex;
        }
        this.triggerStateChange();
    }
    /**
     * return the actual indexes base on datasource
     *
     * @param {?} index
     * @return {?}
     */
    getOriginalIndex(index) {
        if (this.virtualScroll === true && this.nodes[index] != null) {
            return this.nodes[index][TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX];
        }
        return index;
    }
    /**
     * Set [[disabled]] property value
     * @param {?} boo Toggle [[disabled]]
     * @return {?}
     */
    setDisabled(boo) {
        this.disabled = boo;
    }
    /**
     * Get [[disabled]] property value
     * @return {?}
     */
    getDisabled() {
        return this.disabled;
    }
    /**
     * Get a collection of all row elements that are selected
     * @return {?} The selected rows
     */
    getSelectedRows() {
        /** @type {?} */
        const selectedRowElements = [];
        /* istanbul ignore if */
        if (this.selectedRows.length > 0 && this.nodes != null && this.nodes.length > 0) {
            for (let rowIndex of this.selectedRows) {
                for (let node of this.nodes) {
                    if (node.getLocalName() === "row" && node.rowNumber === rowIndex) {
                        selectedRowElements.push(node);
                        break;
                    }
                }
            }
        }
        return selectedRowElements;
    }
    /**
     * Get collection of selected row indexes
     * @return {?}
     */
    getSelectedRowIndexes() {
        return this.selectedRows.map(row => {
            return row[this.ROW_INDEX_KEY];
        });
    }
    /**
     * Event handler for row select event
     * @param {?} event
     * @return {?}
     */
    handleRowSelection(event) {
        /* istanbul ignore next */
        if (!isEqual(event.selected, this._prevSelectedRows)) {
            this.onChange.emit(new TableSelectionEvent(event.selected));
        }
        this._prevSelectedRows = event.selected;
    }
    /**
     * Event handler for double click on cell
     * \@event onDoubleClick
     * @param {?} event
     * @return {?}
     */
    handleCellActivation(event) {
        if (event.type === 'dblclick') {
            this.onDoubleClick.emit(new TableSelectionEvent(event.row));
        }
    }
    /**
     * @param {?} row
     * @param {?} rowIndex
     * @return {?}
     */
    appendRowIndexToRow(row, rowIndex) {
        row[this.ROW_INDEX_KEY] = rowIndex;
    }
    /**
     * Trigger change detection and re-render the table
     * @param {?=} clearData Set to true to empty table data
     * @return {?}
     */
    refresh(clearData = false) {
        if (clearData == true) {
            this._dataSource = [];
        }
        this.detectChanges();
    }
    /**
     * Get [[changeDetectorRef]] property
     * @return {?} the ChangeDetector
     */
    getChangeDetector() {
        return this.changeDetectorRef;
    }
    /**
     * Get NexaWeb tag name
     * @return {?} Tag name
     */
    getNxTagName() {
        return "table";
    }
    /**
     * Conver the content of this screens to JSON object so it can be sent to the server.
     * @return {?}
     */
    toJson() {
        /** @type {?} */
        const json = super.toJson();
        // if (this.getSelectedRows() != null && this.getSelectedRows().length > 0) {
        //     this.setJson(json, "selectedRows", this.getSelectedRows().map(item=>item.toJson()));
        // }
        if (this.nodes != null &&
            this.nodes.length > 0) {
            /** @type {?} */
            let tempRows;
            if (this.virtualScroll === true) {
                tempRows = {};
            }
            json["rows"] = this.nodes.map((node, index) => {
                /** @type {?} */
                const rowJson = node.toJson();
                if (this.selectedRows != null && this.selectedRows.indexOf(index) >= 0) {
                    rowJson["selected"] = "true";
                    rowJson["index"] = index + "";
                }
                if (this.virtualScroll === true) {
                    tempRows[node[TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX]] = node[TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX];
                }
                return rowJson;
            });
            //virtual scroll data
            if (this.virtualScroll === true && this.modifiedVirtualRowsJson != null) {
                /** @type {?} */
                const keys$$1 = keys(this.modifiedVirtualRowsJson);
                for (const key of keys$$1) {
                    //make sure we not already converted them
                    if (tempRows[key] == null) {
                        json["rows"].push(this.modifiedVirtualRowsJson[key]);
                    }
                }
            }
        }
        if (this.columns != null && this.columns.length > 0) {
            /** @type {?} */
            let columns = this.columns;
            if (this.getLocalName() === "table" &&
                this.columnsHasBeenSwapped === true) {
                columns = /** @type {?} */ (orderBy(columns, (child) => {
                    return child.originalColumnIndex;
                }));
            }
            json["columnDefs"] = columns.map((column, index) => {
                /** @type {?} */
                const def = {
                    "visible": this.toJsonValue(column.visible),
                    "locked": this.toJsonValue(column.locked),
                    "enabled": this.toJsonValue(column.enabled),
                    "sortable": this.toJsonValue(column.sortable),
                    "isChecked": this.toJsonValue(column.isChecked),
                    "customAttributes": BaseComponent.mapToJson(column.customAttributes)
                };
                // make sure customAttributes has 'width' property
                if (def["customAttributes"]["width"] != null) {
                    /** @type {?} */
                    const node = this.headNode.getChildAt(index);
                    /** @type {?} */
                    const width = this.toWholeNumber(node.htmlElement.style.width.slice(0, -2)); //server expect whole number
                    def["customAttributes"]["width"] = this.toJsonValue(width);
                }
                if (column.id) {
                    def["id"] = this.toJsonValue(column.id);
                }
                else {
                    def["id"] = BaseComponent.generateUniqueId("column");
                }
                if (column.locked === true) {
                    def["tagName"] = "lockedColumn";
                    def["nxTagName"] = "lockedColumn";
                }
                else {
                    def["tagName"] = "column";
                    def["nxTagName"] = "column";
                }
                /** @type {?} */
                const header = {
                    "tagName": "header",
                    "nxTagName": "header",
                    "text": this.toJsonValue(column.header)
                };
                if (column.headerDirective && column.headerDirective.id) {
                    header["id"] = this.toJsonValue(column.headerDirective.id);
                }
                else {
                    header["id"] = BaseComponent.generateUniqueId("header");
                }
                def["children"] = [header];
                return def;
            });
        }
        return json;
    }
    /**
     * Convert child to JSON
     * @param {?} child child to be converted to JSON
     * @return {?}
     */
    childToJson(child) {
        return child.getTagName() === "headrow" || child.getTagName() === "headcell" ? child.toJson() : null;
    }
    /**
     * Add element to internal list of row, cell, or header cell
     * @param {?} type 'row' | 'cell' | 'headcell'
     * @param {?} event Create event
     * @param {?} rowOrColumnIndex
     * @param {?} rowDataOrColumnDef
     * @return {?}
     */
    registerFauxElement(type, event, rowOrColumnIndex, rowDataOrColumnDef) {
        this._isHeaderCell = false;
        if (rowDataOrColumnDef === null ||
            (rowDataOrColumnDef !== undefined &&
                rowDataOrColumnDef !== null &&
                rowDataOrColumnDef.skipTracking !== true)) {
            if (type === "row") {
                this.trackRow(event, rowOrColumnIndex, rowDataOrColumnDef);
            }
            else if (type === "cell") {
                this.trackCell(event, rowOrColumnIndex, rowDataOrColumnDef);
            }
            else if (type === "headcell") {
                this._isHeaderCell = true;
                this.trackHeadCell(event, rowDataOrColumnDef);
                if (rowOrColumnIndex === this.columns.length - 1) {
                    this.initPlugins();
                }
            }
        }
    }
    /**
     * Get [[nodes]] property
     * @return {?} Node list
     */
    getTableChildren() {
        return this.nodes;
    }
    /**
     * Get number of nodes
     * @return {?} Number of nodes
     */
    getChildCount() {
        return this.nodes != null ? this.nodes.length : 0;
    }
    /**
     * Get all children of this table
     * @return {?} List of children
     */
    getChildren() {
        /** @type {?} */
        const children = new Vector();
        forEach(this.getTableChildren(), (child) => children.add(child));
        return children;
    }
    /**
     *
     * @param {?} xpathExpression Get query result from an xpath expression string
     * @return {?}
     */
    evaluateXPath(xpathExpression) {
        /** @type {?} */
        const result = new Vector();
        /** @type {?} */
        const xpathResult = document.evaluate(xpathExpression.replace("cell[", "td[").replace("row[", "tr["), this.elementRef.nativeElement, null, XPathResult.ANY_TYPE, null);
        if (xpathResult != null) {
            /** @type {?} */
            let node = xpathResult.iterateNext();
            while (node) {
                result.add(node);
                node = xpathResult.iterateNext();
            }
        }
        return result;
    }
    /**
     *
     * @param {?} childOrArrayOrStringWtf
     * @param {?=} rowNumber
     * @return {?}
     */
    appendChild(childOrArrayOrStringWtf, rowNumber = -1) {
        //TODO need to append child to certain row? dpending on childOrArrayOrStringWtf
    }
    /**
     * Check if the row has been selected
     * @param {?} rowIndex Index of row to check
     * @param {?} row
     * @return {?} True if row is a selected row
     */
    isSelectedRow(rowIndex, row) {
        if (this.virtualScroll === true && row[TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX] != null) {
            rowIndex = row[TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX];
        }
        return this.selectedRows != null && this.selectedRows.indexOf(rowIndex) >= 0;
    }
    /**
     * Get custom attributes of row if it has any, otherwise return null
     * @param {?} row
     * @param {?} rowOrColumnIndex
     * @return {?}
     */
    getRowCustomAttributes(row, rowOrColumnIndex) {
        if (typeof this.rowCustomAttributeBuilder === "function") {
            return this.rowCustomAttributeBuilder(row, rowOrColumnIndex, /** @type {?} */ ((this._getNoneActiveViewParent() || this.getParentView())));
        }
        if (row != null && row.customAttributes) {
            return row.customAttributes;
        }
        return null;
    }
    /**
     * Check if column is visible. Either by index or column
     * @param {?} index
     * @param {?=} column
     * @return {?} True if column is visible
     */
    isColumnVisible(index, column = null) {
        if (column != null) {
            return column.visible;
        }
        return this.columns.find((item, idx) => idx === index).visible;
    }
    /**
     * Add a child component to the table
     * @param {?} child Component to add
     * @return {?}
     */
    addChild(child) {
        super.addChild(child);
        /** @type {?} */
        const row = this.nodes[this.nodes.length - 1];
        if (this._isHeaderCell !== true && row) {
            child.tableRowNo = row.rowNumber;
            row.parentTableId = this.id;
            row.parentTable = this;
            //when we get here row.childNodes[currentLength] should be the cell parent row
            //append child component to cell (for dynamic)
            if (row.childNodes[row.childNodes.length - 1] == null) {
                console.error("TableComponent: Unable to register element to cell of current row (cell is null)");
            }
            else {
                child.setAttribute("isLockedColumn", row.childNodes[row.childNodes.length - 1].getAttribute("isLockedColumn", true));
                row.childNodes[row.childNodes.length - 1].setComponent(child, true);
                //sophia #1728: restricted right click
                if (this.restrictCellPopup === true) {
                    child.skipEmitContextMenuEvent = true;
                }
                if (this.virtualScroll !== true) {
                    /** @type {?} */
                    const sortValue = child.getAttribute("sortValue", true);
                    if (sortValue != null) {
                        this.renderer.setAttribute(row.childNodes[row.childNodes.length - 1].htmlElement, "data-text", sortValue);
                    }
                }
                //track change if virtual scroll
                /* istanbul ignore if */
                if (this.virtualScroll === true &&
                    (child instanceof CheckboxComponent ||
                        child instanceof RadioButtonComponent ||
                        child instanceof TextFieldComponent ||
                        child instanceof ComboBoxComponent)) {
                    /** @type {?} */
                    const columnIdx = row.childNodes.length - 1;
                    //has cached data?
                    if (this.modifiedVirtualRows != null &&
                        this.modifiedVirtualRows[row[TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX]] != null &&
                        this.modifiedVirtualRows[row[TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX]][row.childNodes[columnIdx]["originalColumnIndex"]] != null) {
                        /** @type {?} */
                        const temp = this.modifiedVirtualRows[row[TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX]][row.childNodes[columnIdx]["originalColumnIndex"]];
                        if (temp.text !== undefined) {
                            (/** @type {?} */ (child)).setText(temp.text);
                        }
                        (/** @type {?} */ (child)).setChecked(temp.checked, true);
                    }
                    child._internalChangeCb = (comp) => {
                        this._checkInitModifiedVirtualRows();
                        if (this.modifiedVirtualRows[row[TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX]] == null) {
                            this.modifiedVirtualRows[row[TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX]] = {};
                        }
                        this.modifiedVirtualRows[row[TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX]][row.childNodes[columnIdx]["originalColumnIndex"]] = {
                            text: comp.getText(),
                            checked: comp.getChecked()
                        };
                    };
                }
            }
        }
        else if (this.headNode != null) {
            //skip emiting event so we can emit ourself.
            child.skipEmitContextMenuEvent = true;
            child.tableRowNo = -1;
            this.headNode.parentTableId = this.id;
            this.headNode.parentTable = this;
            this.headNode.childNodes[this.headNode.childNodes.length - 1].setComponent(child);
        }
    }
    /**
     * 選択中の行を削除する
     * @return {?}
     */
    removeSelectedRow() {
        if (this.selectedRows.length > 0) {
            /** @type {?} */
            let selected = this.selectedRows.concat().sort(function (v1, v2) { return v2 - v1; });
            for (let idx of selected) {
                /** @type {?} */
                let child = this.nodes[idx];
                for (let target of child.childNodes) {
                    this.removeChild(target.getComponent());
                }
                child.destroy();
                this.nodes.splice(idx, 1);
                this.dataSource.splice(idx, 1);
            }
            /** @type {?} */
            let rowNumber = 0;
            for (let row of this.nodes) {
                row.rowNumber = rowNumber++;
            }
            this.selectedRows = [];
        }
    }
    /**
     * Check if this is a container component
     * @return {?} True
     */
    isContainer() {
        return true;
    }
    /**
     * Add row to list of nodes
     * @param {?} event
     * @param {?} rowOrColumnIndex
     * @param {?} rowData
     * @return {?}
     */
    trackRow(event, rowOrColumnIndex, rowData) {
        /** @type {?} */
        const row = new HTMLElementWrapper(this.renderer, "", this.getSession());
        row.rowNumber = rowOrColumnIndex;
        row.htmlElement = /** @type {?} */ (event.element.nativeElement);
        this.setParentScreenId(row);
        row.setLocaleName("row");
        /** @type {?} */
        const customAttributes = this.getRowCustomAttributes(rowData, rowOrColumnIndex);
        if (customAttributes != null && customAttributes !== "") {
            row.appendCustomAttributes(customAttributes);
        }
        if (rowData != null && rowData.id != null) {
            row.setAttribute("id", rowData.id);
        }
        if (this.virtualScroll === true && rowData != null) {
            row[TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX] = rowData[TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX];
        }
        this.trackNode(row);
        //draggable row
        if (row.isDraggable()) {
            row.applyDraggable();
            this.draggableRows = true;
        }
    }
    /**
     * @param {?} rowIndex
     * @param {?} rowData
     * @return {?}
     */
    toRowIndex(rowIndex, rowData) {
        return this.virtualScroll === true && rowData != null ? rowData[TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX] : rowIndex;
    }
    /**
     * Add cell to list of nodes
     * @param {?} event
     * @param {?} columnIndex
     * @param {?} columnDef
     * @return {?}
     */
    trackCell(event, columnIndex, columnDef) {
        /** @type {?} */
        const cell = new HTMLElementWrapper(this.renderer, "", this.getSession());
        cell.htmlElement = /** @type {?} */ (event.element.nativeElement);
        cell.setLocaleName("cell");
        if (columnDef.customAttributes !== undefined) {
            if (!cell.getAttribute("class")) {
                cell.setAttribute("class", columnDef.customAttributes["class"]);
            }
            else {
                /** @type {?} */
                let orgClass = cell.getAttribute("class");
                cell.setAttribute("class", orgClass + " " + columnDef.customAttributes["class"]);
            }
        }
        cell.setAttribute("isLockedColumn", columnDef.locked + "");
        this.setParentScreenId(cell);
        //track original column index for sorting
        if (columnDef.originalColumnIndex == null) {
            columnDef.originalColumnIndex = columnIndex;
        }
        cell["originalColumnIndex"] = columnDef.originalColumnIndex;
        //add cell to current row
        if (this.nodes[this.nodes.length - 1] !== undefined && this.nodes[this.nodes.length - 1] !== null) {
            this.nodes[this.nodes.length - 1].appendChild(cell, false);
        }
    }
    /**
     * @param {?} event
     * @param {?} columnDef
     * @return {?}
     */
    trackHeadCell(event, columnDef) {
        if (this.headNode == null) {
            this.headNode = new HTMLElementWrapper(this.renderer, "", this.getSession());
            this.headNode.rowNumber = -1;
            this.setParentScreenId(this.headNode);
            this.headNode.setLocaleName("headrow");
        }
        /** @type {?} */
        const cell = new HTMLElementWrapper(this.renderer, "", this.getSession());
        cell.htmlElement = /** @type {?} */ (event.element.nativeElement);
        cell.setLocaleName("headcell");
        cell.setAttribute("isLockedColumn", columnDef.locked + "");
        cell.customData = columnDef;
        this.setParentScreenId(cell);
        this.headNode.appendChild(cell);
    }
    /**
     * Add element to internal [[nodes]] list to keep track of
     * @param {?} node Element to add to internal node list
     * @return {?}
     */
    trackNode(node) {
        if (this.nodes == null) {
            this.nodes = [];
        }
        this.nodes.push(node);
    }
    /**
     * Set the parent screen id on an element
     * @param {?} el
     * @return {?}
     */
    setParentScreenId(el) {
        if (this.getParentView() != null) {
            el.parentScreenId = this.getParentView().getId();
        }
    }
    /**
     * Get invoke [[rowStyleFn]] on a row and get it's style
     * @param {?} row
     * @return {?} Style attributes
     */
    rowStyleClass(row) {
        if (typeof this.rowStyleFn === "function") {
            return this.rowStyleFn(row);
        }
        return "";
    }
    /**
     * Find the child node by id
     * @param {?} id Child's id
     * @return {?}
     */
    getChildNodeById(id) {
        return this.nodes != null ? this.nodes.find(child => child.id === id) : null;
    }
    /**
     * Handle cell onContextMenu if component inside the cell has not already handle it
     *
     * @param {?} column
     * @param {?} rowNumber
     * @param {?} columnIndex
     * @param {?} event
     * @return {?}
     */
    handleColumnOnContextMenu(column, rowNumber, columnIndex, event) {
        if (this.nodes != null && this.nodes[rowNumber] != null) {
            /** @type {?} */
            const childColumn = this.nodes[rowNumber].getChildAt(columnIndex);
            if (childColumn != null && childColumn.component != null) {
                //sophia #1728
                if (this.restrictCellPopup !== true) {
                    childColumn.component.handleOnContextMenu(event);
                }
                else if (this.restrictCellPopup === true) {
                    if (childColumn.component.popup != null && childColumn.component.popup !== "") {
                        childColumn.component.handleOnContextMenu(event, true);
                    }
                    else {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                }
            }
            else if (column != null) {
                if (this.getSession() != null) {
                    this.getSession().setMousePosition(event);
                }
                /** @type {?} */
                const parentView = this.getParentView();
                /** @type {?} */
                let popupMenuId = null;
                if (parentView != null) {
                    popupMenuId = (/** @type {?} */ (parentView)).getFirstPopupMenuId();
                }
                if (typeof column.onContextMenuCb === "function") {
                    column.onContextMenuCb(this._getNoneActiveViewParent() || this.getParentView());
                }
                if (popupMenuId != null) {
                    event.stopPropagation();
                    event.preventDefault();
                    /** @type {?} */
                    const tm = setTimeout(() => {
                        clearTimeout(tm);
                        if (this.getSession()._currentPopupMenuId != null) {
                            popupMenuId = this.getSession()._currentPopupMenuId;
                        }
                        this.getSession().showContextMenu(popupMenuId);
                        this.getSession()._currentPopupMenuId = null;
                    });
                }
            }
        }
    }
    /**
     * Event handler for context click on the header
     * @param {?} columnIndex Index of column that was clicked
     * @param {?} event
     * @return {?}
     */
    handleHeaderOnContextMenu(columnIndex, event) {
        /* istanbul ignore if */
        if (this.headNode != null) {
            /** @type {?} */
            const childColumn = this.headNode.getChildAt(columnIndex);
            if (childColumn != null && childColumn.component != null) {
                /** @type {?} */
                const clientEvent = new ClientEvent(childColumn, event);
                if (AppUtils.customizeClientEvent != null) {
                    AppUtils.customizeClientEvent(childColumn, clientEvent);
                }
                if (this.getParentView() != null) {
                    clientEvent.setParameter("screenId", this.getParentView().getId());
                }
                clientEvent.setParameter("id", this.getId());
                this.getSession().getEventHandler().setClientEvent(clientEvent);
                childColumn.component.handleOnContextMenu(event, true);
            }
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    recalculateVirtualScrollData(event) {
        /* istanbul ignore if */
        if (this.virtualScroll === true) {
            /** @type {?} */
            let scrollTop = event.srcElement.scrollTop;
            //adjust only on IE9, otherwise, it will stuck in inf loop
            if (this.isIE9 === true) {
                scrollTop -= 0.5;
            }
            if (this.scrollLeft === event.srcElement.scrollLeft) {
                this.calcVirtualScrollViewPort(scrollTop);
                this.detectChanges();
            }
            this.adjustTableHead(event);
        }
    }
    /**
     * Event handler for table head change. Set style to properly display
     * @param {?} event
     * @param {?=} skipBodyAdjustment
     * @param {?=} skipHeader
     * @return {?}
     */
    adjustTableHead(event, skipBodyAdjustment = false, skipHeader = false) {
        if (this.table == null || event == null)
            return;
        this.preMouseEvent = event;
        /** @type {?} */
        let scrollTop = event.srcElement.scrollTop;
        //adjust only on IE9, otherwise, it will stuck in inf loop
        if (this.isIE9 === true) {
            scrollTop -= 0.5;
        }
        this.scrollLeft = event.srcElement.scrollLeft;
        if (this.virtualScroll === true) {
            // if (event.srcElement.scrollTop > this.maxScrollTop) {
            //     scrollTop = this.maxScrollTop;
            // }
            //this.calcVirtualScrollViewPort(scrollTop);
            if (this.prevScrollTopForHiddenHeader !== scrollTop && skipHeader === true) {
                scrollTop -= this.theadHeight;
            }
            this.prevScrollTopForHiddenHeader = scrollTop;
            this._disabledScrolling = true;
            this.calcVirtualTablePosition(scrollTop);
            setTimeout(() => {
                this._disabledScrolling = false;
            }, 100);
        }
        if (skipHeader !== true) {
            //   this.fakeTable.nativeElement.innerHTML = "";
            //   this.isHeaderAppendToFakeTable = false;
            this.renderer.removeStyle(this.tableHead.nativeElement, "visibility");
            if (this.tableFoot != null) {
                this.renderer.removeStyle(this.tableFoot.nativeElement, "visibility");
            }
            this.renderer.setStyle(this.ghostHeader.nativeElement, "display", "none");
            /** @type {?} */
            const table = this.table.nativeElement;
            /** @type {?} */
            const thead = table.querySelector('thead');
            /** @type {?} */
            const tbody = table.querySelector('tbody');
            for (let i = 0; i < this.columns.length; i++) {
                /** @type {?} */
                let column = this.columns.find((item, idx) => idx === i);
                if (column != null && column.visible && column.locked) {
                    /** @type {?} */
                    const headChildren = $(thead.querySelector('th:nth-child(' + (i + 1) + ')'));
                    /** @type {?} */
                    let trans = `translate(${this.scrollLeft}px, ${scrollTop}px)`;
                    if (this.virtualScroll === true) {
                        trans = `translateX(${this.scrollLeft}px)`;
                    }
                    headChildren.css("transform", trans);
                    headChildren.css("-ms-transform", trans);
                    if (skipBodyAdjustment !== true) {
                        /** @type {?} */
                        const bodyChildren = $(tbody.querySelectorAll('td:nth-child(' + (i + 1) + ')'));
                        bodyChildren.css("transform", `translate(${this.scrollLeft}px`);
                        bodyChildren.css("-ms-transform", `translate(${this.scrollLeft}px`);
                    }
                }
                else if (column != null && column.visible && this.virtualScroll !== true) {
                    /** @type {?} */
                    const headChildren = $(thead.querySelector('th:nth-child(' + (i + 1) + ')'));
                    /** @type {?} */
                    const trans = `translateY(${scrollTop}px)`;
                    headChildren.css("transform", trans);
                    headChildren.css("-ms-transform", trans);
                }
            }
            this.adjustTableFooter();
        }
    }
    /**
     * Set table footer styles for proper display
     * @return {?}
     */
    adjustTableFooter() {
        /* istanbul ignore if */
        if (this.table == null)
            return;
        /** @type {?} */
        const tfoot = this.table.nativeElement.querySelector("tfoot");
        /* istanbul ignore if */
        if (tfoot != null) {
            /** @type {?} */
            let tfootPos = 0;
            if ($(this.table.nativeElement).height() < $(this.tableContainer.nativeElement).height()) {
                tfootPos = $(this.tableContainer.nativeElement).height() - $(this.table.nativeElement).height();
            }
            else {
                tfootPos = ($(this.tableContainer.nativeElement).height() - $(this.table.nativeElement).height()) + this.tableContainer.nativeElement.scrollTop;
            }
            for (let i = 0; i < this.columns.length; i++) {
                /** @type {?} */
                let column = this.columns.find((item, idx) => idx === i);
                if (column != null) {
                    /** @type {?} */
                    const footChildren = $(tfoot.querySelector('td:nth-child(' + (i + 1) + ')'));
                    /** @type {?} */
                    const trans = `translateY(${tfootPos}px)`;
                    footChildren.css("transform", trans);
                    footChildren.css("-ms-transform", trans);
                    footChildren.css("position", "relative");
                    footChildren.css("z-index", "3");
                }
            }
        }
    }
    /**
     * Event handler for keyup. Copy keyboard shortcut support
     * @param {?} event Keyup event
     * @return {?}
     */
    handleKeyUp(event) {
        if (event.ctrlKey === true &&
            (event.code === "KeyC" ||
                event.keyCode === 67 ||
                event.keyCode === 99)) {
            // istanbul ignore next
            this.copySelectedRowAsText();
        }
    }
    /**
     * Check to see if we can send selected rows to clipboard
     * @return {?}
     */
    copySelectedRowAsText() {
        /* istanbul ignore if */
        if (this.selectedRows != null && this.selectedRows.length === 1) {
            /** @type {?} */
            let selectedRowText;
            /** @type {?} */
            const selectedRow = this.getSelectedRows()[0];
            /* istanbul ignore if */
            if (selectedRow.childNodes != null && selectedRow.childNodes.length > 0) {
                selectedRowText = selectedRow.childNodes.map(child => child.getText());
            }
            else if (selectedRow.dynamicChildNodes != null && selectedRow.dynamicChildNodes.length > 0) {
                selectedRowText = selectedRow.dynamicChildNodes.map(child => child.getText());
            }
            /* istanbul ignore if */
            if (selectedRowText != null && selectedRowText.length > 0) {
                this.clipboardService.copy(selectedRowText.join(String.fromCharCode(9)));
            }
        }
    }
    /**
     * Generate a row id based on row's [[id]] and index
     * @param {?} row
     * @param {?} rowIndex
     * @return {?}
     */
    buildRowId(row, rowIndex) {
        if (typeof this.rowIdBuilder === "function") {
            return this.rowIdBuilder(row, rowIndex);
        }
        return ['row', this.id, rowIndex].join('-');
    }
    /**
     * Sort the data (for virtual scroll)
     *
     * @param {?} column
     * @return {?}
     */
    handleSort(column) {
        //sorting is only allowed on a non locking column
        /* istanbul ignore if */
        if (this.virtualScroll === true && column.locked !== true) {
            //find previous sort direction for the column
            this.columns.forEach(col => {
                //using originalColumnIndex b/c use can drag column around and thus column index changed
                if (col.originalColumnIndex !== column.originalColumnIndex) {
                    col.sortDirection = null;
                }
            });
            if (column.sortDirection === "asc") {
                column.sortDirection = "desc";
            }
            else {
                column.sortDirection = "asc";
            }
            /** @type {?} */
            let sortColumnId = this.virtualScrollSortKeys[column.originalColumnIndex];
            //if custom sortn fn is provided, used to find proper column to sort
            if (typeof this.virtualScrollSortFn === "function") {
                sortColumnId = this.virtualScrollSortFn(this._getNoneActiveViewParent() || this.getParentView(), column.originalColumnIndex);
            }
            if (sortColumnId != null) {
                this._dataSource = orderBy(this._dataSource, [sortColumnId], /** @type {?} */ ([column.sortDirection]));
            }
            this.calcVirtualScrollViewPort(this.prevScrollTop);
            this.detectChanges();
        }
        else if (this.virtualScroll !== true && column.locked !== true) {
            // RXC Add
            if (this.sortDirection === "") {
                this.sortDirection = "asc";
            }
            else if (this.sortColumnId === column.originalColumnIndex) {
                if (this.sortDirection === "asc") {
                    this.sortDirection = "desc";
                }
                else {
                    this.sortDirection = "asc";
                }
            }
            else {
                this.sortDirection = "asc";
            }
            this.sortColumnId = column.originalColumnIndex;
        }
    }
    /**
     * Calculate the overall height so we can add scrollbar for virtual scroll. This is done
     * by multiplying the number of rows to the height of each row.
     *
     * @return {?}
     */
    calcVirtualScrollHeight() {
        // istanbul ignore if
        if (this.virtualScroll === true) {
            if (this._dataSource != null && this._dataSource.length > 0) {
                //scroll height = 10px * # rows (10px is the height of each row)
                this._virtualScrollDivHeight = (this.rowHeight * this._dataSource.length);
                this.maxScrollTop = this._virtualScrollDivHeight;
                this.virtualScrollSortKeys = keys(this._dataSource[0]);
                //track original index
                if (typeof this._dataSource[this._dataSource.length - 1][TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX] !== "number") {
                    forEach(this._dataSource, (item, index) => {
                        item[TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX] = index;
                    });
                }
            }
            else {
                this._virtualScrollDivHeight = 0;
            }
            this.markForCheck();
        }
    }
    /**
     * Adjust/move the position of the table container so that it displayed properly.
     *
     * @param {?} scrollTop
     * @return {?}
     */
    calcVirtualTablePosition(scrollTop) {
        if (this.virtualScroll === true) {
            //-ms-transform
            //transform
            // if (this.maxScrollTop > 0) {
            //     scrollTop = Math.min(scrollTop, this.maxScrollTop);
            // }
            this.renderer.setStyle(this.tableWrapper.nativeElement, "transform", `translateY(${scrollTop}px)`);
            this.renderer.setStyle(this.tableWrapper.nativeElement, "-ms-transform", `translateY(${scrollTop}px)`);
            // this.markForCheck();
        }
    }
    /**
     * Calculate the visible virtual rows to display to the user
     *
     * @param {?=} scrollTop
     * @return {?}
     */
    calcVirtualScrollViewPort(scrollTop = 0) {
        if (this._isViewInit === true && this._dataSource != null) {
            /** @type {?} */
            let startIdx = 0;
            //if scrollTop is greater than 0, need to figure the starting row
            if (scrollTop > 0) {
                //each row is 10px height, if scrollTop is 100px, then we start at row 10
                //scrollTop / 10px?
                startIdx = Math.floor(scrollTop / this.rowHeight);
                if (startIdx > this._dataSource.length - this._virtualScrollRowPerView) {
                    startIdx = this._dataSource.length - this._virtualScrollRowPerView;
                }
            }
            this._virtualViewPort = null;
            this.prevScrollTop = scrollTop;
            this.cleanUpChildNodes();
            this.detectChanges();
            this.zone.run(() => {
                this._virtualViewPort = this.buildRowIdentity(this._dataSource.slice(startIdx, startIdx + this._virtualScrollRowPerView + this.adjustedRows));
            });
        }
    }
    /**
     * @param {?} fromIndex
     * @param {?} toIndex
     * @return {?}
     */
    _swap(fromIndex, toIndex) {
        /** @type {?} */
        const tempToColumn = this.columns[toIndex];
        this.columns[toIndex] = this.columns[fromIndex];
        this.columns[fromIndex] = tempToColumn;
    }
    /**
     * Swap the columns after a column is being drag and rop
     *
     * @param {?} fromIndex column that is being dragged (moved)
     * @param {?} toIndex  column that is being droped into
     * @return {?}
     */
    swapColumns(fromIndex, toIndex) {
        //sophia 1856: need to properly swap columns
        if (fromIndex < toIndex) {
            for (let i = fromIndex; i < toIndex; i++) {
                this._swap(i, i + 1);
            }
        }
        else if (fromIndex > toIndex) {
            for (let i = fromIndex; i > toIndex; i--) {
                this._swap(i, i - 1);
            }
        }
        if (this.scrollContainerStyles != null) {
            this.scrollContainerStyles["overflow-y"] = "auto";
            this.detectChanges();
        }
        //sophia 1823: for server tracking
        forEach(this.columns, (col, idx) => {
            col.setAttribute("visualIndex", idx + "");
        });
        if (this.virtualScroll !== true) {
            this.detectChanges();
            setTimeout(() => {
                this.applyResizeColumns();
            }, 200);
        }
        this.columnsHasBeenSwapped = true;
    }
    /**
     * @return {?}
     */
    _cleanupColResize() {
        //reset
        this.$colResizable = $(this.table.nativeElement).colResizable({
            disable: true
        });
        $(`#${this.id} .JCLRgrips`).remove();
    }
    /**
     * @return {?}
     */
    applyResizeColumns() {
        if (this.table != null && (this.enableColumnResize == null || this.enableColumnResize === true)) {
            this._cleanupColResize();
            this.$colResizable = $(this.table.nativeElement).colResizable({
                liveDrag: false,
                //turning this on will incurred a severe performance penalty on IE so leave it off
                resizeMode: 'overflow',
                partialRefresh: true,
                //After closing the window and opening again, columnResizer can't work. To fix that, this value is needed.,
                headerOnly: true //allow dragging using header only
            });
        }
    }
    /**
     * Return whether or not the column at the particular index can be dragged/drop
     *
     * @param {?} colIdx
     * @return {?}
     */
    canDragColumn(colIdx) {
        /** @type {?} */
        let canDrag = true;
        for (let col of this.columns) {
            if (col.originalColumnIndex === colIdx && col.locked === true) {
                canDrag = false;
                break;
            }
        }
        return canDrag;
    }
    /**
     * Return the index of the suppplied row
     *
     * @param {?} child row to check fo rindex?
     * @return {?}
     */
    indexOfChild(child) {
        if (this.nodes != null && this.nodes.length > 0) {
            return findIndex(this.nodes, (node) => node === child);
        }
        //child does not exists
        return -1;
    }
    /**
     * @return {?}
     */
    _checkInitModifiedVirtualRows() {
        if (this.modifiedVirtualRows == null) {
            this.modifiedVirtualRows = {};
        }
    }
    /**
     * @return {?}
     */
    _checkInitModifiedVirtualRowsJson() {
        if (this.modifiedVirtualRowsJson == null) {
            this.modifiedVirtualRowsJson = {};
        }
    }
    /**
     * Refresh the table sorter
     * @return {?}
     */
    refreshTableSorter() {
        //data changes, need to update tableSorter
        if (this._tableSorterRefreshTm != null) {
            clearTimeout(this._tableSorterRefreshTm);
            this._tableSorterRefreshTm = null;
        }
        this.zone.runOutsideAngular(() => {
            this._tableSorterRefreshTm = setTimeout(() => {
                clearTimeout(this._tableSorterRefreshTm);
                this._tableSorterRefreshTm = null;
                if (this.$tablesorter != null) {
                    this.$tablesorter.trigger("update");
                }
                this.adjustTableHead(this.preMouseEvent);
            }, 200);
        });
    }
    /**
     * Refresh cache data (sort value, etc)
     * @return {?}
     */
    refreshTableSorterCache() {
        //data changes, need to update tableSorter
        if (this._tableSorterCacheRefreshTm != null) {
            clearTimeout(this._tableSorterCacheRefreshTm);
            this._tableSorterCacheRefreshTm = null;
        }
        this.zone.runOutsideAngular(() => {
            this._tableSorterCacheRefreshTm = setTimeout(() => {
                clearTimeout(this._tableSorterCacheRefreshTm);
                this._tableSorterCacheRefreshTm = null;
                if (this.$tablesorter != null) {
                    this.$tablesorter.trigger("updateCache");
                }
            }, 200);
        });
    }
    /**
     * @param {?} shouldSelected
     * @return {?}
     */
    setSelectAllVirtualRows(shouldSelected) {
        if (shouldSelected !== true) {
            this.modifiedVirtualRows = {};
            this.modifiedVirtualRowsJson = {};
            this.selectedRows = [];
        }
        else {
            this._checkInitModifiedVirtualRows();
            this._checkInitModifiedVirtualRowsJson();
            /** @type {?} */
            const checkBoxeColumnIdxs = [];
            if (this.nodes != null && this.nodes.length > 0) {
                //find all checkboxes columns
                for (let i = 0; i < this.nodes[0].childNodes.length; i++) {
                    if (this.nodes[0].childNodes[i].component instanceof CheckboxComponent) {
                        checkBoxeColumnIdxs.push(i);
                    }
                }
            }
            //if there are checkboxes, check them
            this.lastSelectedRowIndex = 0;
            if (checkBoxeColumnIdxs.length > 0) {
                for (let row of this._dataSource) {
                    //make sure row is not visible
                    if (findIndex(this.nodes, (node) => {
                        return node[TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX] === row[TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX];
                    }) < 0) {
                        if (this.modifiedVirtualRows[row[TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX]] == null) {
                            this.modifiedVirtualRows[row[TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX]] = {};
                        }
                        for (let colIdx of checkBoxeColumnIdxs) {
                            this.modifiedVirtualRows[row[TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX]][colIdx] = {
                                checked: true,
                                text: undefined
                            };
                        }
                        //this.modifiedVirtualRowsJson []
                        if (typeof this.virtualScrollInvisibleRowBuilder === "function") {
                            /** @type {?} */
                            const rowElement = this.virtualScrollInvisibleRowBuilder(this._getNoneActiveViewParent() || this.getParentView(), row);
                            rowElement.setAttribute("selected", "true");
                            this.modifiedVirtualRowsJson[row[TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX]] = rowElement.toJson();
                        }
                        //selected the row
                        if (this.selectedRows == null) {
                            this.selectedRows = [];
                        }
                        this.selectedRows.push(row[TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX]);
                    }
                }
            }
        }
    }
    /**
     * @return {?}
     */
    recCalcNoVirtualRow() {
        if (this.virtualScroll === true) {
            /** @type {?} */
            let height = $(this.tableContainer.nativeElement).height();
            if (this.tableHead != null) {
                this.theadHeight = $(this.tableHead.nativeElement).height();
                height = height - this.theadHeight;
                if (this.skipRowsAdjustment !== true) {
                    this.adjustedRows = Math.round(this.theadHeight / this.rowHeight) + 2;
                }
            }
            this._virtualScrollRowPerView = Math.round(height / this.rowHeight);
        }
    }
    /**
     * @return {?}
     */
    setHeaderWidthHeight() {
        /** @type {?} */
        const table = this.table.nativeElement;
        /** @type {?} */
        const thead = table.querySelector('thead');
        /** @type {?} */
        let headerMaxHeight = 0;
        /** @type {?} */
        var id = table.id;
        if (this.columns != null) {
            if (this.forceFixWidth) {
                //please do not removed our code
                //this.renderer.setStyle(this.table.nativeElement, "table-layout", "fixed");
                for (let i = 0; i < this.columns.length; i++) {
                    /** @type {?} */
                    let column = this.columns.find((item, idx) => idx === i);
                    if (column != null) {
                        /** @type {?} */
                        const headChildren = thead.querySelector('th:nth-child(' + (i + 1) + ')');
                        this.renderer.setStyle(headChildren, "width", `${column.controlWidth}px`);
                        if (column.controlHeight !== undefined) {
                            this.isHeaderAuto = true;
                            if (headerMaxHeight < column.controlHeight) {
                                headerMaxHeight = Number(column.controlHeight);
                            }
                        }
                    }
                }
                if (this.isHeaderAuto) {
                    $("#" + id + ">div>div>table").removeClass("header-fixed");
                }
            }
            /*else{
                            for(let i = 0; i < this.columns.length; i++){
                                let column = this.columns.find((item, idx)=>idx === i);
                                if(column != null)
                                {
                                    const headChildren = thead.querySelector('th:nth-child(' + (i+1) + ')');
                                    this.renderer.setStyle(headChildren, "min-width", `${column.controlWidth}px`);
                                }
                            }
                        }*/
        }
        if (this.ghostHeader != null) {
            if (headerMaxHeight == 0) {
                headerMaxHeight = 30;
            }
            this.renderer.setStyle(this.ghostHeader.nativeElement, "height", headerMaxHeight + "px");
        }
    }
    /**
     * Reset table column (in case it has been swapped)
     * @return {?}
     */
    resetTableColumns() {
        if (this.forceResetColumns === true &&
            this._isDying !== true &&
            this.columns != null &&
            this.columnsHasBeenSwapped === true) {
            this.columnsHasBeenSwapped = false;
            /** @type {?} */
            const temp = clone(this.columns);
            this.columns = [];
            this.detectChanges();
            if (this.headNode != null) {
                this.headNode.childNodes = [];
            }
            this.columns = sortBy(temp, (col, idx) => {
                col.setAttribute("visualIndex", idx + "");
                return col.originalColumnIndex;
            });
            this.detectChanges();
            this.initPlugins();
        }
    }
    /**
     * @param {?} rows
     * @return {?}
     */
    buildRowIdentity(rows) {
        // if (rows == null) return rows;
        // for (let rowIndex = 0; rowIndex < rows.length; rowIndex++) {
        //     rows[rowIndex][TableComponent.INTERNAL_ROW_DIFFER_ID] = BaseComponent.generateUniqueId("row_differ");
        //     rows[rowIndex][TableComponent.INTERNAL_ROW_ID] = this.buildRowId(rows[rowIndex], rowIndex);
        // }
        return rows;
    }
    /**
     * @param {?} idx
     * @param {?} row
     * @return {?}
     */
    rowTrackByFn(idx, row) {
        return row[TableComponent.INTERNAL_ROW_DIFFER_ID];
    }
    /**
     * @param {?} idx
     * @param {?} column
     * @return {?}
     */
    columnHeaderTrackByFn(idx, column) {
        return column[TableComponent.INTERNAL_COLUMN_HEADER_ID];
    }
    /**
     * Removed vt-row by index. This will not works for rows that are created by dataSource
     * @param {?} index
     * @return {?}
     */
    removeTableRowByIndex(index) {
        if (this._tableRow != null && this._tableRow.length > index) {
            this._tableRow = filter(this._tableRow, (row, rowIndex) => {
                return rowIndex !== index;
            });
            this.cleanUpChildNodes();
            this.detectChanges();
        }
    }
    /**
     * Removed vt-row by id. This will not works for rows that are created by dataSource
     * @param {?} id
     * @return {?}
     */
    removeTableRowById(id) {
        if (this._tableRow != null && this._tableRow.length > 0) {
            this._tableRow = filter(this._tableRow, (row) => {
                return row.id !== id;
            });
            this.cleanUpChildNodes();
            this.detectChanges();
        }
    }
    /**
     * @param {?} columns
     * @return {?}
     */
    toColumns(columns) {
        return columns.map((col, idx) => {
            col[TableComponent.INTERNAL_COLUMN_HEADER_ID] = BaseComponent.generateUniqueId("hc");
            col.setAttribute("visualIndex", idx + '');
            return col;
        });
    }
    /**
     * @param {?} width
     * @return {?}
     */
    toWholeNumber(width) {
        return parseInt(width);
    }
    /**
     * @return {?}
     */
    checkShowBlankRow() {
        if (this.dataSource == null ||
            this.dataSource.length === 0 ||
            (/** @type {?} */ (this.tableContainer.nativeElement)).scrollHeight > (/** @type {?} */ (this.tableContainer.nativeElement)).clientHeight) {
            this.showBlankRow = false;
        }
        else {
            this.showBlankRow = true;
        }
    }
    /**
     * Remove row from tableRows by id. no detect change
     * @param {?} id row element id
     * @return {?}
     */
    removeFromTableRow(id) {
        /** @type {?} */
        const i = this.tableRow.findIndex(r => r.id === id);
        this.tableRow.splice(i, 1);
    }
}
TableComponent.INTERNAL_VIRTUAL_ORIGINAL_INDEX = "$$INTERNAL_VIRTUAL_ORIGINAL_INDEX$$";
TableComponent.INTERNAL_VIRTUAL_ROW_DATA = "$$INTERNAL_VIRTUAL_ROW_DATA$$";
TableComponent.INTERNAL_ROW_DIFFER_ID = "$$INTERNAL_VIRTUAL_ROW_DIFFER_ID$$";
TableComponent.INTERNAL_ROW_ID = "$$INTERNAL_VIRTUAL_ROW_ID$$";
TableComponent.INTERNAL_COLUMN_HEADER_ID = "$$INTERNAL_COLUMN_HEADER_ID$$";
TableComponent.decorators = [
    { type: Component, args: [{
                selector: 'vt-table',
                template: "<div #ghostHeader class=\"ghost-header\" [style.width.px]=\"controlWidth\" style=\"display: none; position: absolute; z-index: 1; overflow: hidden;\">\n  <!-- <table #fakeTable class=\"fake-table table\" style=\"z-index: 1;\"></table> -->\n</div>\n<div #tableContainer class=\"table-container\"\n  [ngClass]=\"cssClass\"\n  [style.maxWidth.px]=\"controlWidth\"\n  [style.height.px]=\"controlHeight\"\n  [style.color]=\"fontColor\"\n  [style.visibility]=\"visible ? 'visible' : 'hidden'\"\n  [ngStyle]=\"scrollContainerStyles\"\n>\n  <!-- Virtual scroll height -->\n  <div *ngIf=\"virtualScroll === true\" [style.height.px]=\"_virtualScrollDivHeight\" [style.width.px]=\"1\"></div>\n  <div #tableWrapper class=\"table-scroller\" [ngStyle]=\"tableStyles\">\n    <table class=\"table tablesorter header-fixed\" [id]=\"id\" #table>\n      <thead #tableHead>\n        <tr class=\"dnd-moved\">\n          <th *ngFor=\"let column of columns; index as columnIndex; trackBy: columnHeaderTrackByFn\"\n            [ngClass]=\"{'headerPadding': isHeaderPadding === true,'nonForceFixWidth': forceFixWidth === false, 'vt-locked-column': column.locked === true, 'sort-up': column.sortDirection === 'asc' && column.locked !== true, 'sort-down': column.sortDirection === 'desc' && column.locked !== true, 'internal-sort': virtualScroll === true && enableSort !== false, 'auto-wrap': column.autoWrap === true}\"\n            [style.height.px]=\"column.headerHeight\"\n            [runOutsideZone]=\"false\"\n            (vtOnCreate)=\"registerFauxElement('headcell', $event, columnIndex, column)\"\n            [ngStyle]=\"column.styles\"\n            (contextmenu)=\"handleHeaderOnContextMenu(columnIndex, $event)\"\n            (click)=\"handleSort(column)\"\n            [attr.data-sorter]=\"column.sortable\">\n            <!-- If column has header as text, render as text -->\n            <span *ngIf=\"column.isHeaderTemplate === false\">\n              {{column.header}}\n            </span>\n            <!-- otherwise, if it has custom rendering (i.e. they want to render checkbox, etc), we spit out the template to them -->\n            <ng-template [ngIf]=\"column.isHeaderTemplate === true\" [ngTemplateOutlet]=\"column.headerTemplate\" [ngTemplateOutletContext]=\"{columnIndex: columnIndex}\"></ng-template>\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        <!-- when there are data-->\n        <ng-template [ngIf]=\"dataSource != null && dataSource.length > 0\">\n          <tr class=\"dnd-moved\" *ngFor=\"let item of dataSource; index as rowIndex\" [id]=\"buildRowId(item, rowIndex)\" (vtOnCreate)=\"registerFauxElement('row', $event, rowIndex, item)\" [attr.rowNo]=\"rowIndex\" (mousedown)=\"toggleRowSelection($event, rowIndex, item)\" (mouseup)=\"handleMouseUp($event, rowIndex, item)\" (click)=\"onRowClick($event, rowIndex)\" [ngClass]=\"{'selected-row': isSelectedRow(rowIndex, item)}\" class=\"{{rowStyleClass(item)}}\">\n            <td *ngFor=\"let column of columns; index as columnIndex\" [ngClass]=\"{'vt-locked-column': column.locked === true}\" (vtOnCreate)=\"registerFauxElement('cell', $event, columnIndex, column)\" [attr.rowNo]=\"rowIndex\" [ngStyle]=\"column.styles\" [style.height.px]=\"column.cellHeight\" [style.textAlign]=\"column.alignHorizontal\" (contextmenu)=\"handleColumnOnContextMenu(column.cellTemplate, rowIndex, columnIndex, $event)\">\n                <!--\n                  the user of the library will choose how to render the data, i.e. as a checkbox, textfield, or whatever, we spit\n                  this out via columns cellTemplate (ColumnDirective lift this up via CellDirective which lift the content of the\n                  host of the directive)\n                -->\n                <ng-template [ngTemplateOutlet]=\"column.cellTemplate?.template\" [ngTemplateOutletContext]=\"{row: item, rowIndex: toRowIndex(rowIndex, item), columnIndex: columnIndex}\"></ng-template>\n            </td>\n          </tr>\n          <tr *ngIf=\"showBlankRow === true\"></tr>\n        </ng-template>\n        <!-- when there are no data-->\n        <ng-template [ngIf]=\"(dataSource == null || dataSource.length == 0) && (tableRow == null || tableRow.length === 0)\">\n          <tr class=\"dnd-moved\">\n            <td *ngFor=\"let column of columns; index as columnIndex\" [ngClass]=\"{'vt-locked-column': column.locked === true}\" [ngStyle]=\"column.styles\" >&nbsp;</td>\n          </tr>\n          <!-- <tr></tr> -->\n        </ng-template>\n        <!-- custom table row -->\n        <ng-template [ngIf]=\"tableRow != null && tableRow.length > 0\">\n          <tr *ngFor=\"let item of tableRow; index as rowIndex\" class=\"dnd-moved {{item.cssClass}}\" (vtOnCreate)=\"registerFauxElement('row', $event, rowIndex, item)\" [attr.rowNo]=\"rowIndex\" (mousedown)=\"toggleRowSelection($event, rowIndex, item)\" (mouseup)=\"handleMouseUp($event, rowIndex, item)\" [ngClass]=\"{'selected-row': isSelectedRow(rowIndex, item)}\" class=\"{{rowStyleClass(item)}}\">\n            <td *ngFor=\"let column of item.cellTemplates; index as columnIndex\" (vtOnCreate)=\"registerFauxElement('cell', $event, columnIndex, column)\" [attr.rowNo]=\"rowIndex\" (contextmenu)=\"handleColumnOnContextMenu(column, rowIndex, columnIndex, $event)\">\n              <ng-template [ngTemplateOutlet]=\"column.template\" [ngTemplateOutletContext]=\"{row: item, rowIndex: rowIndex, columnIndex: columnIndex}\"></ng-template>\n            </td>\n          </tr>\n        </ng-template>\n      </tbody>\n      <ng-template [ngIf]=\"footerRow != null && footerRow.cellTemplates != null && footerRow.cellTemplates.length > 0\">\n        <tfoot #tableFoot>\n          <tr class=\"dnd-moved\">\n            <td *ngFor=\"let column of footerRow.cellTemplates; index as columnIndex\" [style.display]=\"'table-cell'\" [style.textAlign]=\"column.alignHorizontal\">\n              <ng-template [ngTemplateOutlet]=\"column.template\" [ngTemplateOutletContext]=\"{columnIndex: columnIndex}\"></ng-template>\n            </td>\n          </tr>\n        </tfoot>\n      </ng-template>\n    </table>\n    <!-- <div *ngIf=\"virtualScroll === true\" [style.height.px]=\"controlHeight\" [style.width.px]=\"controlWidth\" [ngStyle]=\"virtualScrollProgressStyles\"></div> -->\n  </div>\n</div>\n",
                changeDetection: ChangeDetectionStrategy.OnPush,
                providers: [
                    {
                        provide: BaseComponent,
                        useExisting: forwardRef(() => TableComponent)
                    }
                ],
                styles: [".table-container{width:100%;height:100%;overflow:auto;border:1px solid #888}table{table-layout:auto;width:100%!important;background-color:#fff;border-collapse:separate}table>tbody>tr>td,table>thead>tr>th{min-width:1px;white-space:nowrap;text-align:center}table tr.selected-row>td{background-color:#cff!important;color:#1014ff!important}table>thead>tr>th{position:relative;vertical-align:middle;overflow:hidden}.vt-locked-column{position:relative}th.vt-locked-column{background-color:#44a!important;z-index:4}.ghost-header,.table>tfoot>tr>td,.table>thead>tr>th{border-bottom:1px solid #d8d8dc;border-right:1px solid #d8d8dc;background-color:#6a6aff;color:#fff;font-weight:400}.table>tbody>tr>td{border-bottom:1px solid #8080ff;border-right:1px solid #8080ff;padding-left:2px!important;padding-right:2px!important}.table>tfoot>tr>td{padding-left:2px!important;padding-right:2px!important;white-space:nowrap}.table>tbody>tr:nth-child(odd)>td{background:#fff}.table>tbody>tr:nth-child(even)>td{background:#e6e6e6}.table>tfoot>tr{height:10px}td{display:table-cell}table>thead>tr>th.auto-wrap{white-space:normal}.internal-sort{padding:4px 21px 4px 4px}.sort-up{background:url(data:image/gif;base64,R0lGODlhCwALAJEAAAAAAP///xUVFf///yH5BAEAAAMALAAAAAALAAsAAAIRnC2nKLnT4or00Puy3rx7VQAAOw==) center right no-repeat}.sort-down{background:url(data:image/gif;base64,R0lGODlhCwALAJEAAAAAAP///xUVFf///yH5BAEAAAMALAAAAAALAAsAAAIPnI+py+0/hJzz0IruwjsVADs=) center right no-repeat}table thead th.auto-wrap{white-space:normal!important;text-align:center}th.headerPadding{padding-right:14px;padding-left:14px}.fake-table>thead{visibility:visible!important}"]
            }] }
];
/** @nocollapse */
TableComponent.ctorParameters = () => [
    { type: BaseComponent, decorators: [{ type: Optional }, { type: SkipSelf }] },
    { type: SessionService },
    { type: ElementRef },
    { type: ChangeDetectorRef },
    { type: Renderer2 },
    { type: NgZone },
    { type: IterableDiffers },
    { type: ClipboardService }
];
TableComponent.propDecorators = {
    selectionMode: [{ type: Input }],
    rowCustomAttributeBuilder: [{ type: Input }],
    rowIdBuilder: [{ type: Input }],
    rowStyleFn: [{ type: Input }],
    virtualScroll: [{ type: Input }],
    virtualScrollSortFn: [{ type: Input }],
    virtualScrollInvisibleRowBuilder: [{ type: Input }],
    rowHeight: [{ type: Input }],
    scrollTimeout: [{ type: Input }],
    dataSource: [{ type: Input }],
    enableSort: [{ type: Input }],
    enableColumnDragging: [{ type: Input }],
    enableColumnResize: [{ type: Input }],
    droppable: [{ type: Input }],
    restrictCellPopup: [{ type: Input }],
    onChange: [{ type: Output }],
    onStateChange: [{ type: Output }],
    onDoubleClick: [{ type: Output }],
    onDragDrop: [{ type: Output }],
    table: [{ type: ViewChild, args: ['table',] }],
    tableContainer: [{ type: ViewChild, args: ["tableContainer", { read: ElementRef },] }],
    tableWrapper: [{ type: ViewChild, args: ["tableWrapper", { read: ElementRef },] }],
    tableHead: [{ type: ViewChild, args: ["tableHead", { read: ElementRef },] }],
    tableFoot: [{ type: ViewChild, args: ["tableFoot", { read: ElementRef },] }],
    ghostHeader: [{ type: ViewChild, args: ["ghostHeader", { read: ElementRef },] }],
    tableColumns: [{ type: ContentChildren, args: [TableColumnDirective,] }],
    tableRowDef: [{ type: ContentChild, args: [TableRowDefDirective,] }],
    footerRow: [{ type: ContentChild, args: [FooterRowDirective,] }],
    tableRowQuery: [{ type: ContentChildren, args: [RowDirective,] }],
    forceFixWidth: [{ type: Input }],
    isHeaderPadding: [{ type: Input }],
    isHeaderAuto: [{ type: Input }],
    skipRowsAdjustment: [{ type: Input }],
    forceResetColumns: [{ type: Input }],
    tableLayout: [{ type: Input }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Just aliasing vt-table-column for locked column
 */
class LockedColumnDirective extends TableColumnDirective {
    /**
     * @return {?}
     */
    ngOnInit() {
        super.ngOnInit();
        this.locked = true;
    }
}
LockedColumnDirective.decorators = [
    { type: Directive, args: [{
                selector: 'vt-locked-column',
                providers: [
                    {
                        provide: TableColumnDirective,
                        useExisting: forwardRef(() => LockedColumnDirective)
                    }
                ]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class ClipboardModule {
}
ClipboardModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule
                ],
                declarations: [],
                providers: [
                    ClipboardService
                ]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class TableModule {
}
TableModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    BaseModule,
                    ClipboardModule
                ],
                declarations: [
                    TableComponent,
                    TableCellDirective,
                    TableColumnDirective,
                    TableHeaderDirective,
                    HeaderDirective,
                    LockedColumnDirective,
                    TableRowDefDirective,
                    FooterRowDirective,
                    RowDirective
                ],
                exports: [
                    TableComponent,
                    TableCellDirective,
                    TableColumnDirective,
                    TableHeaderDirective,
                    HeaderDirective,
                    LockedColumnDirective,
                    TableRowDefDirective,
                    FooterRowDirective,
                    RowDirective
                ]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Class for tab component
 */
class TabComponent extends BaseComponent {
    /**
     *
     * @param {?} parent see [[BaseComponent]] constructor
     * @param {?} sessionService see [[BaseComponent]] constructor
     * @param {?} elementRef see [[BaseComponent]] constructor
     * @param {?} renderer see [[BaseComponent]] constructor
     */
    constructor(parent, sessionService, elementRef, renderer) {
        super(parent, sessionService, elementRef, renderer);
        this.onCommand = new EventEmitter();
    }
    /**
     *
     * @param {?} child Tab child component to add
     * @return {?}
     */
    addChild(child) {
        (/** @type {?} */ (this.parent)).addChild(child);
        if (this.tabChildrenIds == null) {
            this.tabChildrenIds = [];
        }
        this.tabChildrenIds.push(child.getId());
    }
    /**
     * After view init lifecycle
     * @return {?}
     */
    ngAfterViewInit() {
        super.ngAfterViewInit();
    }
    /**
     * Get JSON representation of this component
     * @return {?} Object JSON metadata about this component
     */
    toJson() {
        /** @type {?} */
        const json = super.toJson();
        this.setJson(json, "active", this.focused);
        return json;
    }
    /**
     * Get NexaWeb component tag name
     * @return {?}
     */
    getNxTagName() {
        return "tab";
    }
    /**
     * Event handler for click event
     * \@event onCommand
     * @return {?}
     */
    onClick() {
        this.onCommand.emit(this.id);
        this.active = true;
    }
    /**
     * Focus this tab
     * @return {?}
     */
    setFocus() {
        /** @type {?} */
        const parent = this.getParent();
        if (parent != null && typeof parent["setSelectedTab"] === "function") {
            parent["setSelectedTab"](this.id);
        }
        else {
            super.setFocus();
        }
    }
}
TabComponent.decorators = [
    { type: Component, args: [{
                selector: 'vt-tab',
                template: "<ng-template>\n  <ng-content></ng-content>\n</ng-template>",
                providers: [
                    {
                        provide: BaseComponent,
                        useExisting: forwardRef(() => TabComponent)
                    }
                ],
                styles: [""]
            }] }
];
/** @nocollapse */
TabComponent.ctorParameters = () => [
    { type: BaseComponent, decorators: [{ type: Optional }, { type: SkipSelf }] },
    { type: SessionService },
    { type: ElementRef },
    { type: Renderer2 }
];
TabComponent.propDecorators = {
    active: [{ type: Input }],
    id: [{ type: Input }],
    onCommand: [{ type: Output }],
    content: [{ type: ViewChild, args: [TemplateRef,] }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Class for tab pane container component
 */
class TabPaneComponent extends BaseComponent {
    /**
     *
     * @param {?} parent see [[BaseComponent]] constructor
     * @param {?} sessionService see [[BaseComponent]] constructor
     * @param {?} elementRef see [[BaseComponent]] constructor
     * @param {?} cd Inject change detector
     * @param {?} renderer see [[BaseComponent]] constructor
     */
    constructor(parent, sessionService, elementRef, cd, renderer) {
        super(parent, sessionService, elementRef, renderer);
        this.cd = cd;
        this.tabPlacement = "top";
        this.onClick = new EventEmitter();
        this.selectedTabIndex = 0;
        this.focusedTabIndex = 0;
        this.tabs = [];
    }
    /**
     * @param {?} tabList
     * @return {?}
     */
    set tabsList(tabList) {
        this.tabs = tabList.toArray();
    }
    /**
     * After view init lifecycle. Set up tabs and trigger change detector
     * @return {?}
     */
    ngAfterViewInit() {
        super.ngAfterViewInit();
        this.configureTabs();
        this.cd.detectChanges();
    }
    /**
     * Set the [[selectedTabIndex]] to index of active tab
     * @return {?}
     */
    configureTabs() {
        forEach(this.tabs, (tab, index) => {
            if (tab.active === true) {
                this.selectedTabIndex = index;
            }
        });
    }
    /**
     * Event handler for when tab is selected
     * \@event onCommand
     * @param {?} event
     * @param {?} index Index of tab to select
     * @param {?} tabId
     * @return {?}
     */
    handleSelectTab(event, index, tabId) {
        event.preventDefault();
        this.setFocusedTab(index);
        this.selectedTabIndex = index;
        // this.onClick.emit({
        //   tabId: tabId,
        //   tabIndex: index
        // });
        this.selectedTab.onCommand.emit(tabId);
        this.markForCheck();
        /** @type {?} */
        const parentView = this.getParentView();
        if (parentView != null) {
            parentView.resetAllScrollPanesPositionToPrevious();
        }
    }
    /**
     * Event handler for keydown event. Arrow keys used for navigation
     * @param {?} e Key event
     * @return {?}
     */
    handleKeydown(e) {
        if (!document.activeElement.className.includes("combobox-input-box") && !document.activeElement.className.includes("dropdown-item")) {
            /** @type {?} */
            const UP_KEY_CODE = 38;
            /** @type {?} */
            const DOWN_KEY_CODE = 40;
            /** @type {?} */
            const ENTER_KEY_CODE = 13;
            /** @type {?} */
            const keyPressed = e.which;
            /** @type {?} */
            const navigationKeys = [UP_KEY_CODE, DOWN_KEY_CODE, ENTER_KEY_CODE];
            if (navigationKeys.indexOf(keyPressed) === -1)
                return;
            e.stopPropagation();
            /** @type {?} */
            let newIndex;
            if (keyPressed === DOWN_KEY_CODE && this.focusedTabIndex < this.tabs.length - 1) {
                newIndex = this.focusedTabIndex + 1;
            }
            else if (keyPressed === UP_KEY_CODE && this.focusedTabIndex > 0) {
                newIndex = this.focusedTabIndex - 1;
            }
            else if (keyPressed === ENTER_KEY_CODE) {
                this.setSelectedTab(this.focusedTabIndex);
            }
            else {
                newIndex = this.focusedTabIndex;
            }
            this.setFocusedTab(newIndex);
        }
    }
    /**
     * Focus a tab by it's index position
     * @param {?} index Index of tab to focus
     * @return {?}
     */
    setFocusedTab(index) {
        this.focusedTabIndex = index;
        /** @type {?} */
        const tabItem = this.tabNavItems.find((item, i) => {
            return i === index;
        });
        if (tabItem) {
            setTimeout(() => {
                tabItem.nativeElement.focus();
            }, 0);
        }
    }
    /**
     * Set selected tab by index or id
     * @param {?} index Index or Id of [[TabComponent]] to select
     * @return {?}
     */
    setSelectedTab(index) {
        if (typeof index === "number") {
            this.selectedTabIndex = index;
        }
        else {
            /** @type {?} */
            const tempIndex = findIndex(this.tabs, (tab) => tab.id === index);
            if (tempIndex >= 0) {
                this.selectedTabIndex = tempIndex;
            }
        }
        this.markForCheck();
    }
    /**
     * Get the selected [[TabComponent]]
     * @return {?} Tab that is selected
     */
    get selectedTab() {
        return this.tabs.find((item, index) => index === this.selectedTabIndex);
    }
    /**
     * Get NexaWeb tag name
     * @return {?} Name of tag
     */
    getNxTagName() {
        return "tabPane";
    }
    /**
     * Get [[cd]] (ChangeDetector) member
     * @return {?}
     */
    getChangeDetector() {
        return this.cd;
    }
    /**
     * Remove a tab child from the pane
     * @param {?} child Tab to remove
     * @return {?}
     */
    removeChild(child) {
        super.removeChild(child);
        this.tabs = filter(this.tabs, (tab) => tab.id !== child.id);
        this.cd.markForCheck();
    }
    /**
     * Get JSON representation of this component
     * @return {?} Object JSON metadata
     */
    toJson() {
        /** @type {?} */
        const json = super.toJson();
        json["selectedTabIndex"] = this.selectedTabIndex;
        return json;
    }
    /**
     * Check if this is a container component
     * @return {?} True
     */
    isContainer() {
        return true;
    }
}
TabPaneComponent.decorators = [
    { type: Component, args: [{
                selector: 'vt-tab-pane',
                template: "<div\n  class=\"vt-tab-pane {{cssClass}}\"\n  [ngClass]=\"{'tabs-left': tabPlacement === 'left'}\"\n  [id]=\"id\" (contextmenu)=\"handleOnContextMenu($event)\"\n  (keydown)=\"handleKeydown($event)\"\n  [style.height]=\"controlHeight\"\n  >\n  <!-- Tab Navigation --->\n  <ul class=\"nav nav-tabs\" role=\"tablist\">\n    <li #tabNavItem *ngFor=\"let tab of tabs; let i=index\" [ngClass]=\"{'active': selectedTabIndex === i}\" role=\"presentation\" tabindex=\"-1\">\n      <a id=\"{{tab.id}}-title\" href=\"javascript:void(0)\" [ngClass]=\"{'active': tab.active, 'focused': focusedTabIndex === i}\" role=\"tab\" (click)=\"handleSelectTab($event, i, tab.id)\" tabindex=\"-1\">{{tab.text}}</a>\n    </li>\n  </ul>\n\n  <!-- Tab Content -->\n  <div class=\"tab-content\" [style.height]=\"controlHeight\">\n    <ng-template [ngIf]=\"selectedTab != null\">\n      <div role=\"tabpanel\" class=\"vt-tab tabpane {{selectedTab.cssClass}}\" [id]=\"selectedTab.id\" [style.height]=\"controlHeight\">\n          <ng-container *ngTemplateOutlet=\"selectedTab.content\"></ng-container>\n      </div>\n    </ng-template>\n  </div>\n\n</div>\n",
                changeDetection: ChangeDetectionStrategy.OnPush,
                providers: [
                    {
                        provide: BaseComponent,
                        useExisting: forwardRef(() => TabPaneComponent)
                    }
                ],
                styles: [".tabs-below>.nav-tabs,.tabs-left>.nav-tabs,.tabs-right>.nav-tabs{border-bottom:0}.pill-content>.pill-pane,.tab-content>.tab-pane{display:none}.pill-content>.active,.tab-content>.active{display:block}.tabs-below>.nav-tabs{border-top:1px solid #ddd}.tabs-below>.nav-tabs>li{margin-top:-1px;margin-bottom:0}.tabs-below>.nav-tabs>li>a{border-radius:0 0 4px 4px}.tabs-below>.nav-tabs>li>a:focus,.tabs-below>.nav-tabs>li>a:hover{border-top-color:#ddd;border-bottom-color:transparent}.tabs-below>.nav-tabs>.active>a,.tabs-below>.nav-tabs>.active>a:focus,.tabs-below>.nav-tabs>.active>a:hover{border-color:transparent #ddd #ddd}.tabs-left>.nav-tabs>li,.tabs-right>.nav-tabs>li{float:none}.tabs-left>.nav-tabs>li>a,.tabs-right>.nav-tabs>li>a{min-width:74px;margin-right:0;margin-bottom:3px}.tabs-left>.nav-tabs{float:left;margin-right:19px;border-right:1px solid #ddd}.tabs-left>.nav-tabs>li>a{margin-right:-1px;border-radius:4px 0 0 4px}.tabs-left>.nav-tabs>li>a:focus,.tabs-left>.nav-tabs>li>a:hover{border-color:#9abecb #aaa #9abecb #9abecb}.tabs-left>.nav-tabs .active>a,.tabs-left>.nav-tabs .active>a:focus,.tabs-left>.nav-tabs .active>a:hover{border-color:#aaa transparent #aaa #aaa}.tabs-right>.nav-tabs{float:right;margin-left:19px;border-left:1px solid #ddd}.tabs-right>.nav-tabs>li>a{margin-left:-1px;border-radius:0 4px 4px 0}.tabs-right>.nav-tabs>li>a:focus,.tabs-right>.nav-tabs>li>a:hover{border-color:#eee #eee #eee #ddd}.tabs-right>.nav-tabs .active>a,.tabs-right>.nav-tabs .active>a:focus,.tabs-right>.nav-tabs .active>a:hover{border-color:#ddd #ddd #ddd transparent}"]
            }] }
];
/** @nocollapse */
TabPaneComponent.ctorParameters = () => [
    { type: BaseComponent, decorators: [{ type: Optional }, { type: SkipSelf }] },
    { type: SessionService },
    { type: ElementRef },
    { type: ChangeDetectorRef },
    { type: Renderer2 }
];
TabPaneComponent.propDecorators = {
    tabPlacement: [{ type: Input }],
    tabsList: [{ type: ContentChildren, args: [TabComponent,] }],
    tabNavItems: [{ type: ViewChildren, args: ['tabNavItem',] }],
    onClick: [{ type: Output }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class TabHostDirective {
    /**
     * @param {?} viewContainerRef
     */
    constructor(viewContainerRef) {
        this.viewContainerRef = viewContainerRef;
    }
}
TabHostDirective.decorators = [
    { type: Directive, args: [{
                selector: '[vt-tab-host]'
            },] }
];
/** @nocollapse */
TabHostDirective.ctorParameters = () => [
    { type: ViewContainerRef }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class TabPaneModule {
}
TabPaneModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule
                ],
                declarations: [TabPaneComponent, TabComponent, TabHostDirective],
                exports: [TabComponent, TabPaneComponent, TabHostDirective]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Class for textarea component
 */
class TextAreaComponent extends BaseComponent {
    /**
     *
     * @param {?} parent see [[BaseComponent]] constructor
     * @param {?} sessionService see [[BaseComponent]] constructor
     * @param {?} elementRef see [[BaseComponent]] constructor
     * @param {?} cd ChangeDetector for this component
     * @param {?} renderer see [[BaseComponent]] constructor
     */
    constructor(parent, sessionService, elementRef, cd, renderer) {
        super(parent, sessionService, elementRef, renderer);
        this.cd = cd;
        this._maxLength = TextAreaComponent.MAX_LENGTH;
        this.onTextChange = new EventEmitter();
        this.onEdit = new EventEmitter();
        this._editable = true;
    }
    /**
     * @param {?} max
     * @return {?}
     */
    set maxLength(max) {
        this._maxLength = max;
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set editable(val) {
        this._editable = val;
    }
    /**
     * @return {?}
     */
    get editable() {
        return this._editable !== "false" && this._editable !== false;
    }
    /**
     * @return {?}
     */
    get maxLength() {
        return this._maxLength > 0 ? this._maxLength : TextAreaComponent.MAX_LENGTH;
    }
    /**
     * Init lifecycle. Call parent ngOnInit
     * @return {?}
     */
    ngOnInit() {
        super.ngOnInit();
        if (this.controlPadding) {
            this.controlPadding = this.controlPadding + 'px';
        }
    }
    /**
     * After view init lifecycle.
     * Focus the textarea and set dimensions
     * @return {?}
     */
    ngAfterViewInit() {
        super.ngAfterViewInit();
        if (this.focusOnActivation) {
            this.elementRef.nativeElement.focus();
        }
        this.initWidthHeightStyle("height", "width");
        this.setAttributeFromDef();
        this.cd.detectChanges();
    }
    /**
     * Get the name of the component
     * @return {?} Name of component
     */
    getLocalName() {
        return "textArea";
    }
    /**
     * Focus the textarea element
     * @return {?}
     */
    setFocus() {
        this.textarea.nativeElement.focus();
    }
    /**
     * Get the value of internal [[_maxLength]] property
     * @return {?}
     */
    getMaxLength() {
        return this._maxLength;
    }
    /**
     * Set [[_maxLength]] property value and mark for change detection
     * @param {?} max Length of text content
     * @return {?}
     */
    setMaxLength(max) {
        if (typeof max === "number") {
            this._maxLength = max;
        }
        else {
            this._maxLength = parseInt(max);
        }
        this.cd.markForCheck();
    }
    /**
     * Event handler for text input
     * Emit onTextChange b/c user keep typing (input still has focus)
     * \@event onTextChange
     * @param {?} event
     * @param {?} value
     * @return {?}
     */
    onInput(event, value) {
        /** @type {?} */
        let pos = this.textarea.nativeElement.selectionStart;
        if (event.keyCode == 8 || event.keyCode == 46) //Backspace || Delete
         {
            this.text = value;
            setTimeout(() => {
                this.textarea.nativeElement.selectionStart = pos;
                this.textarea.nativeElement.selectionEnd = pos;
            });
        }
        if (this.text != null && this._maxLength > 0 && this._maxLength < this.text.length) {
            this.text = this.text.substring(0, this._maxLength);
        }
        if (this._textPreviousKeyInput != this.text)
            this.onTextChange.emit();
        this._textPreviousKeyInput = this.text;
    }
    /**
     * Get the value of [[cd]] (ChangeDetector) property
     * @return {?} Change detector for this component
     */
    getChangeDetector() {
        return this.cd;
    }
    /**
     * Get Nexaweb tag name
     * @return {?} Tag name
     */
    getNxTagName() {
        return "textArea";
    }
    /**
     * Event handler for focus event
     * @param {?} e Input focus event
     * @return {?}
     */
    onFocus(e) {
        this._textBeforeFocusIn = this.text;
        this._textPreviousKeyInput = this.text;
    }
    /**
     * Event handler for blur (unfocus) event
     * @param {?} event
     * @param {?} value
     * @return {?}
     */
    onBlur(event, value) {
        if (this.textarea.nativeElement.ownerDocument.activeElement === this.textarea.nativeElement)
            return; //prevent focuslost whenever active process is changed.
        this.text = value; //when the last char is Zenkaku and the user doesn't press 'Enter', this is needed.
        if (this.text != null && this._maxLength > 0 && this._maxLength < this.text.length) {
            this.text = this.text.substring(0, this._maxLength);
        }
        if (this.text != this._textBeforeFocusIn)
            this.onEdit.emit();
        this.validateField(event);
    }
    /**
     * Set [[visible]] property value
     * @override
     * @param {?} value Toggle visibility
     * @return {?}
     */
    setVisible(value) {
        this.visible = value;
        if (this.visible) {
            this.removeCssClass('hidden');
            this.getElement().removeAttribute('hidden');
        }
        else {
            this.addCssClass('hidden');
            this.getElement().setAttribute('hidden', '');
        }
    }
}
TextAreaComponent.MAX_LENGTH = 9999;
TextAreaComponent.decorators = [
    { type: Component, args: [{
                selector: 'vt-text-area',
                template: "<textarea #textarea [id]=\"id\" class=\"vt-text-area form-control {{cssClass}}\"\n[attr.disabled]=\"enabled !== false ? null : true\"\n  [attr.readonly]=\"editable !== false ? null : true\"\n  [style.height]=\"controlHeight\"\n  [style.maxWidth]=\"controlWidth\"\n  [style.padding]=\"controlPadding\"\n  [style.line-height]=\"lineHeight\"\n  [ngClass]=\"{'hidden': visible != true}\"\n  (focusin)=\"onFocus($event)\"\n  (focusout)=\"onBlur($event, textarea.value)\"\n  (keyup)=\"onInput($event, textarea.value)\"\n  (contextmenu)=\"handleOnContextMenu($event)\"\n  [ngStyle]=\"styles\"\n  [required]=\"required\"\n  [maxLength]=\"maxLength\"\n  [(ngModel)]=\"text\"\n  [disabled]=\"disabled\"\n  >\n</textarea>\n",
                changeDetection: ChangeDetectionStrategy.OnPush,
                providers: [
                    {
                        provide: BaseComponent,
                        useExisting: forwardRef(() => TextAreaComponent)
                    }
                ],
                styles: [".form-control[disabled]{color:grey!important}"]
            }] }
];
/** @nocollapse */
TextAreaComponent.ctorParameters = () => [
    { type: BaseComponent, decorators: [{ type: Optional }, { type: SkipSelf }] },
    { type: SessionService },
    { type: ElementRef },
    { type: ChangeDetectorRef },
    { type: Renderer2 }
];
TextAreaComponent.propDecorators = {
    maxLength: [{ type: Input }],
    editable: [{ type: Input }],
    textarea: [{ type: ViewChild, args: ['textarea',] }],
    onTextChange: [{ type: Output }],
    onEdit: [{ type: Output }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class TextAreaModule {
}
TextAreaModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    FormsModule,
                    ReactiveFormsModule,
                ],
                declarations: [TextAreaComponent],
                exports: [
                    TextAreaComponent,
                    FormsModule,
                    ReactiveFormsModule,
                ],
                entryComponents: [
                    TextAreaComponent
                ]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Class for tree table component
 */
class TreeTableComponent extends BaseComponent {
    /**
     * @param {?} parent
     * @param {?} sessionService
     * @param {?} elementRef
     * @param {?} zone
     * @param {?} renderer
     * @param {?} cd
     */
    constructor(parent, sessionService, elementRef, zone, renderer, cd) {
        super(parent, sessionService, elementRef, renderer);
        this.zone = zone;
        this.cd = cd;
        this.nodes = [];
        this.selectedNodes = [];
        this.selectedRowElements = [];
    }
    /**
     * Init lifecycle. Must call parent ngOnInit
     * @return {?}
     */
    ngOnInit() {
        super.ngOnInit();
        // Width/Height is required otherwise grid will collapse to zero.
        // if (!this.controlHeight) this.controlHeight = '500px';
        // if (!this.controlWidth) this.controlWidth = '500px';
    }
    /**
     * After view init lifecycle. Set table columns and call parent ngAfterViewInit
     * @return {?}
     */
    ngAfterViewInit() {
        //make sure to call sure it can init thing
        super.ngAfterViewInit();
        this.createDocFragment();
        if (this.columns != null && this.columns.length > 0) {
            this.columnDefs = [];
            this.columns.forEach(column => {
                this.columnDefs.push({
                    headerName: column.header,
                    controlWidth: column.controlWidth
                });
            });
        }
        if (this.rowData && this.rowData.length > 0) {
            this.zone.runOutsideAngular(() => {
                jQuery(`#${this.id} .jq-tree-table`).treetable();
            });
        }
    }
    /**
     * Destroy lifecycle. Delete tree nodes to clear out references
     * @return {?}
     */
    ngOnDestroy() {
        this.tableBody = null;
        this._bodyFragment = null;
        if (this.nodes != null) {
            for (let node of this.nodes) {
                node.destroy();
            }
        }
        this.nodes = null;
    }
    /**
     * Remove all child rows from this table
     * @return {?}
     */
    clearRows() {
        // while(this.tableBody.nativeElement.firstChild) {
        //   this.renderer.removeChild(this.tableBody.nativeElement, this.tableBody.nativeElement.firstChild);
        // }
        (/** @type {?} */ (this.tableBody.nativeElement)).innerHTML = "";
        this.nodes = [];
        this.selectedNodes = [];
        this.selectedRowElements = [];
        this.createDocFragment();
    }
    /**
     * Create table row but DO NOT append to table
     * @return {?}
     */
    createRow() {
        /** @type {?} */
        const row = new HTMLElementWrapper(this.renderer, "row", this.getSession());
        row.setAttribute("id", BaseComponent.generateUniqueId("row"));
        row.parentTableId = this.id;
        row.parentTable = this;
        this.setParentScreenId(row);
        this.zone.runOutsideAngular(() => {
            row.htmlElement.addEventListener("mousedown", () => {
                if (this.selectedNodes != null) {
                    this.selectedNodes.forEach(idx => {
                        this._selectRow(idx, false);
                    });
                }
                this.selectedRowElements = [];
                this.selectRow(row, true);
            });
        });
        this.trackNode(row);
        return row;
    }
    /**
     * Create table row and append to table
     * @return {?}
     */
    addRow() {
        /** @type {?} */
        const row = this.createRow();
        if (this.useDocFragment === true) {
            this._bodyFragment.appendChild(row.htmlElement);
        }
        else {
            this.renderer.appendChild(this.tableBody.nativeElement, row.htmlElement);
        }
        row.htmlElement.style["background"] = "";
        return row;
    }
    /**
     * Set a row as selected and set selected style
     * @param {?} nodeIndex Index of node/row to select
     * @param {?} isSelected Toggle to set selected style
     * @return {?}
     */
    _selectRow(nodeIndex, isSelected) {
        /** @type {?} */
        let idx = findIndex(this.selectedNodes, (node) => {
            return node === nodeIndex;
        });
        /* istanbul ignore if */
        if (isSelected) {
            //if it wasn't selected, add it in selectedRows.
            if (idx < 0) {
                this.selectedNodes.push(nodeIndex);
                this.nodes[nodeIndex].htmlElement.querySelector('td').style.color = 'blue';
            }
        }
        else {
            //if it was selected before, remove it from selectedRows.
            if (idx >= 0) {
                this.selectedNodes.splice(idx, 1);
                this.nodes[nodeIndex].htmlElement.querySelector('td').style.color = "";
            }
        }
    }
    /**
     * This function is called by setAttribute(row, value);
     * @param {?} row Row to set as selected row
     * @param {?} isSelected Toggle selected state and style
     * @return {?}
     */
    selectRow(row, isSelected) {
        if (this.nodes == null)
            return;
        /** @type {?} */
        let nodeIndex = findIndex(this.nodes, (node) => {
            return node === row;
        });
        /** @type {?} */
        let tds = this.elementRef.nativeElement.querySelectorAll('td');
        for (let i = 0; i < tds.length; i++) {
            (/** @type {?} */ (tds[i])).style.color = '';
        }
        for (let i = 0; i < this.nodes.length; i++) {
            this._selectRow(i, false);
        }
        this._selectRow(nodeIndex, true);
        if (isSelected) {
            this.selectedRowElements.push(row);
        }
        else {
            this.selectedRowElements = this.selectedRowElements.filter(el => {
                return el._uniqueId !== row._internalId;
            });
        }
    }
    /**
     * @return {?}
     */
    getSelectedRows() {
        return this.selectedRowElements;
    }
    /**
     * Create table cell (will not append to anything)
     * @return {?} The table cell that is created
     */
    createCell() {
        /** @type {?} */
        const cell = new HTMLElementWrapper(this.renderer, "cell", this.getSession());
        cell.setAttribute("id", BaseComponent.generateUniqueId("cell"));
        this.setParentScreenId(cell);
        //for cell, we need to append it to the row
        this.trackNode(cell);
        return cell;
    }
    /**
     * @deprecated used createCell instead
     * @return {?}
     */
    addCell() {
        return this.createCell();
    }
    /**
     * Re-render tree table. Must call jQuery plugin's method on element to re-render.
     * @return {?}
     */
    redrawTree() {
        this.zone.runOutsideAngular(() => {
            /* istanbul ignore next */
            jQuery(`#${this.id} .jq-tree-table`).treetable({
                expandable: true
            }, true);
            this.cd.markForCheck();
        });
    }
    /**
     * Expand all nodes in the tree
     * @return {?}
     */
    expandAll() {
        /* istanbul ignore next */
        jQuery(`#${this.id} .jq-tree-table`).treetable("expandAll");
        this.setNodeExpandedStatus("true");
    }
    /**
     * Collapse all node in the tree
     * @return {?}
     */
    collapseAll() {
        jQuery(`#${this.id} .jq-tree-table`).treetable("collapseAll");
        this.setNodeExpandedStatus("false");
    }
    /**
     * Get child nodes of the table
     * @return {?} [[nodes]]
     */
    getTableChildren() {
        return this.nodes;
    }
    /**
     * Get number of child nodes for this tree
     * @return {?} Number of child nodes
     */
    getChildCount() {
        return this.nodes != null ? this.nodes.length : 0;
    }
    /**
     * Get child node by id
     * @param {?} id
     * @return {?}
     */
    getChildById(id) {
        if (this.nodes != null) {
            /** @type {?} */
            const temp = filter(this.nodes, (item) => item.getId() === id);
            if (temp.length > 0) {
                return temp[0];
            }
        }
        return null;
    }
    /**
     * Get list of nodes from XPath expression string
     * @param {?} xpathExpression
     * @return {?}
     */
    evaluateXPath(xpathExpression) {
        /** @type {?} */
        const result = new Vector();
        /** @type {?} */
        const xpathResult = document.evaluate(xpathExpression.replace("cell[", "td[").replace("row[", "tr["), this.elementRef.nativeElement, null, XPathResult.ANY_TYPE, null);
        if (xpathResult != null) {
            /** @type {?} */
            let node = xpathResult.iterateNext();
            while (node) {
                result.add(node);
                node = xpathResult.iterateNext();
            }
        }
        return result;
    }
    /**
     * Adds child node to the tree
     * @param {?} node Child to add
     * @return {?}
     */
    trackNode(node) {
        if (this.nodes == null) {
            this.nodes = [];
        }
        this.nodes.push(node);
    }
    /**
     * Get NexaWeb tag name
     * @return {?} Tagname
     */
    getNxTagName() {
        return "treeTable";
    }
    /**
     * Get [[cd]] (Change detector) property
     * @return {?} Change detector reference
     */
    getChangeDetector() {
        return this.cd;
    }
    /**
     * Set node expanded property value
     * @param {?} status Value for node's expanded property
     * @return {?}
     */
    setNodeExpandedStatus(status) {
        if (this.nodes != null) {
            forEach(this.nodes, (node) => {
                if (node.getLocalName() === "row") {
                    node.expanded = status;
                }
            });
        }
    }
    /**
     * Get JSON representation for this component
     * @return {?} Component metadata as JSON object
     */
    toJson() {
        /** @type {?} */
        const retVal = super.toJson();
        if (this.nodes != null) {
            /** @type {?} */
            const children = this.nodes.filter(node => node.getLocalName() === "row");
            if (children.length > 0) {
                retVal["children"] = children.map(child => child.toJson());
            }
        }
        return retVal;
    }
    /**
     * Set the elements parent ID
     * @param {?} el
     * @return {?}
     */
    setParentScreenId(el) {
        if (this.getParentView() != null) {
            el.parentScreenId = this.getParentView().getId();
        }
    }
    /**
     * @return {?}
     */
    getNodes() {
        return this.nodes;
    }
    /**
     * @return {?}
     */
    createDocFragment() {
        if (this.useDocFragment === true) {
            this._bodyFragment = document.createDocumentFragment();
        }
    }
    /**
     * @return {?}
     */
    appendFragment() {
        if (this._bodyFragment != null) {
            (/** @type {?} */ (this.tableBody.nativeElement)).appendChild(this._bodyFragment);
        }
    }
}
TreeTableComponent.decorators = [
    { type: Component, args: [{
                selector: 'vt-tree-table',
                template: "<div [id]=\"id\"\nclass=\"vt-tree-table {{cssClass}}\"\n[style.width]=\"controlWidth\"\n[style.height]=\"controlHeight\"\n[style.border-style]=\"borderStyle\">\n    <table\n        class=\"table jq-tree-table\" [style.border-width]=\"borderWidth\">\n        <thead #tableHeader>\n            <tr>\n                <th scope=\"col\" *ngFor=\"let col of columnDefs\" [style.width.px]=\"col.controlWidth\">\n                    {{col.headerName}}\n                </th>\n            </tr>\n        </thead>\n        <tbody #tableBody>\n            <tr *ngFor=\"let row of rowData; let i = index\">\n                <td *ngFor=\"let col of columnDefs\">\n                    {{row[col.field]}}\n                </td>\n            </tr>\n        </tbody>\n    </table>\n</div>\n",
                changeDetection: ChangeDetectionStrategy.OnPush,
                encapsulation: ViewEncapsulation.None,
                providers: [
                    {
                        provide: BaseComponent,
                        useExisting: forwardRef(() => TreeTableComponent)
                    }
                ],
                styles: ["table.treetable span.indenter{display:inline-block;margin:0;padding:0;text-align:right;-ms-user-select:none;user-select:none;-khtml-user-select:none;-moz-user-select:none;-o-user-select:none;-webkit-user-select:none;box-sizing:content-box;width:19px}table.treetable span.indenter a{background-position:left center;background-repeat:no-repeat;display:inline-block;text-decoration:none;width:19px}table.treetable{border:1px solid #888;border-collapse:collapse;font-size:.8em;line-height:1;width:100%}table.treetable caption{font-size:.9em;font-weight:700;margin-bottom:.2em}table.treetable thead{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAZCAYAAADwkER/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAD9JREFUeNpsxzEKgDAQAMHlQEhpYWuTF+RV+X+fmLU7ItgMDGoPYAXwJPOHkWxFbd9W1Dt7oZ4BTNSCeqDGOwDlRyvLRZQgvgAAAABJRU5ErkJggg==) top left repeat-x #aaa;font-size:.9em}table.treetable thead tr th{border:1px solid #888;font-weight:400;padding:.3em 1em .1em;text-align:left;height:6px}table.treetable tbody tr td{cursor:default;border-right:1px solid #8080ff}table.treetable span{background-position:center left;background-repeat:no-repeat;padding:.2em 0 .2em 1.5em}table.treetable span.file{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAADoSURBVBgZBcExblNBGAbA2ceegTRBuIKOgiihSZNTcC5LUHAihNJR0kGKCDcYJY6D3/77MdOinTvzAgCw8ysThIvn/VojIyMjIyPP+bS1sUQIV2s95pBDDvmbP/mdkft83tpYguZq5Jh/OeaYh+yzy8hTHvNlaxNNczm+la9OTlar1UdA/+C2A4trRCnD3jS8BB1obq2Gk6GU6QbQAS4BUaYSQAf4bhhKKTFdAzrAOwAxEUAH+KEM01SY3gM6wBsEAQB0gJ+maZoC3gI6iPYaAIBJsiRmHU0AALOeFC3aK2cWAACUXe7+AwO0lc9eTHYTAAAAAElFTkSuQmCC)}table.treetable span.folder{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAGrSURBVDjLxZO7ihRBFIa/6u0ZW7GHBUV0UQQTZzd3QdhMQxOfwMRXEANBMNQX0MzAzFAwEzHwARbNFDdwEd31Mj3X7a6uOr9BtzNjYjKBJ6nicP7v3KqcJFaxhBVtZUAK8OHlld2st7Xl3DJPVONP+zEUV4HqL5UDYHr5xvuQAjgl/Qs7TzvOOVAjxjlC+ePSwe6DfbVegLVuT4r14eTr6zvA8xSAoBLzx6pvj4l+DZIezuVkG9fY2H7YRQIMZIBwycmzH1/s3F8AapfIPNF3kQk7+kw9PWBy+IZOdg5Ug3mkAATy/t0usovzGeCUWTjCz0B+Sj0ekfdvkZ3abBv+U4GaCtJ1iEm6ANQJ6fEzrG/engcKw/wXQvEKxSEKQxRGKE7Izt+DSiwBJMUSm71rguMYhQKrBygOIRStf4TiFFRBvbRGKiQLWP29yRSHKBTtfdBmHs0BUpgvtgF4yRFR+NUKi0XZcYjCeCG2smkzLAHkbRBmP0/Uk26O5YnUActBp1GsAI+S5nRJJJal5K1aAMrq0d6Tm9uI6zjyf75dAe6tx/SsWeD//o2/Ab6IH3/h25pOAAAAAElFTkSuQmCC)}table.treetable tr.collapsed span.indenter a{background-image:url(data:image/png;base64,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)}table.treetable tr.expanded span.indenter a{background-image:url(data:image/png;base64,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)}table.treetable tr.branch{background-color:#f9f9f9}table.treetable tr.selected{background-color:#3875d7;color:#fff}table.treetable tr span.indenter a{outline:0}table.treetable tr.collapsed.selected span.indenter a{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAFpJREFUeNpi/P//PwMlgHHADWD4//8/NtyAQxwD45KAAQdKDfj//////fgMIsYAZIMw1DKREFwODAwM/4kNRKq64AADA4MjFDOQ6gKyY4HodMA49PMCxQYABgAVYHsjyZ1x7QAAAABJRU5ErkJggg==)}table.treetable tr.expanded.selected span.indenter a{background-image:url(data:image/png;base64,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)}table.treetable tr.accept{background-color:#a3bce4;color:#fff}table.treetable tr.collapsed.accept td span.indenter a{background-image:url(data:image/x-png;base64,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)}table.treetable tr.expanded.accept td span.indenter a{background-image:url(data:image/x-png;base64,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)}vt-tree-table{overflow:auto}table.treetable tr:nth-child(odd){background:0 0}table.treetable tr:nth-child(even){background:#e6e6e6}"]
            }] }
];
/** @nocollapse */
TreeTableComponent.ctorParameters = () => [
    { type: BaseComponent, decorators: [{ type: Optional }, { type: SkipSelf }] },
    { type: SessionService },
    { type: ElementRef },
    { type: NgZone },
    { type: Renderer2 },
    { type: ChangeDetectorRef }
];
TreeTableComponent.propDecorators = {
    rowData: [{ type: Input }],
    columnDefs: [{ type: Input }],
    useDocFragment: [{ type: Input }],
    columns: [{ type: ContentChildren, args: [TableColumnDirective,] }],
    tableBody: [{ type: ViewChild, args: ["tableBody", { read: ElementRef },] }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class TreeTableModule {
}
TreeTableModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule
                ],
                declarations: [TreeTableComponent],
                exports: [
                    TreeTableComponent
                ],
                entryComponents: [
                    TreeTableComponent
                ]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Base parent component class that all other screen components inherit from
 */
class ViewComponent extends BaseComponent {
    /**
     *
     * @param {?} parent see [[BaseComponent]] constructor
     * @param {?} sessionService see [[BaseComponent]] constructor
     * @param {?} elementRef see [[BaseComponent]] constructor
     */
    constructor(parent, sessionService, elementRef) {
        super(parent, sessionService, elementRef, null);
        this.mcos = new Set();
        this.canBeActiveView = true;
        this._viewInitializedSubject = new Subject();
        this.viewInitialized = this._viewInitializedSubject.asObservable();
        this.defIds = [];
        this.screenIndex = null;
        this.actionForwardName = this.getId();
    }
    /**
     * Set [[routeUrl]] property value. If [[dialog]] exists, set it's route URL
     * @param {?} url
     * @return {?}
     */
    setRouteUrl(url) {
        this.routeUrl = url;
        if (this.dialog != null) {
            this.dialog.setViewRouteUrl(url);
        }
    }
    /**
     * Get [[routeUrl]] property value
     * @return {?} Route URL
     */
    getRouteUrl() {
        return this.routeUrl;
    }
    /**
     * Check if route is deactivated.
     * @return {?} True if route is deactivated
     */
    isRouteDeactivated() {
        return this.routeDeactivated === true;
    }
    /**
     * After view init lifecycle
     * @return {?}
     */
    ngAfterViewInit() {
        if (this.canBeActiveView !== false) {
            this.parent = null;
        }
        //add view to stack
        this.getSession().getMcoContainer().registerView(this);
        super.ngAfterViewInit();
        this.afterDialogInit();
        if (this.popupMenus != null) {
            forEach(this.popupMenus, (popupMenu) => popupMenu.convertSubMenuItems(this.id));
        }
        this.componentInitialize();
        if (this.dialog) {
            this.dialog.setViewRouteUrl(this.routeUrl);
            this.viewRouteSet = true;
        }
        this.getSession().getMcoContainer().reStackView(this.id, this.screenIndex);
        this._viewInitializedSubject.next();
        this.viewIsInitialized = true;
    }
    /**
     * @return {?}
     */
    afterDialogInit() {
        if (this.dialog) {
            //get id of dialog as our id
            this.id = this.dialog.getId();
            this.dialog.screenIndex = this.screenIndex;
            if (typeof this.dialog.modal === "boolean") {
                this.modal = JavaUtils.booleanToString(this.dialog.modal);
            }
            else {
                this.modal = this.dialog.modal;
            }
            if (this.modal != null && (this.modal === "true" || this.modal === "false")) {
                this.setElementAttributeById(this.id, 'modal', this.modal);
                this.setModalMode();
            }
            else {
                this.dialog.modal = "false";
                this.modal = this.dialog.modal;
                this.setElementAttributeById(this.id, 'modal', "false");
            }
            if (this.popupMenus != null) {
                forEach(this.popupMenus, (popupMenu) => popupMenu.convertSubMenuItems(this.id));
            }
            this.dialog.resetId();
            if (this.viewRouteSet !== true) {
                this.dialog.setViewRouteUrl(this.routeUrl);
                this.viewRouteSet = true;
            }
        }
    }
    /**
     * Set modal CSS and dialog's modal property value to true.
     * Make view component display as modal
     * @return {?}
     */
    setModalMode() {
        if (this.modal == "true") {
            this.dialog["elementRef"].nativeElement.className = "modal fade in";
            this.dialog["elementRef"].nativeElement.style.cssText = "display:inline-block;";
            this.setElementAttributeById(this.id, 'modal', this.modal);
            this.dialog.modal = this.modal;
        }
    }
    /**
     * Destroy lifecycle. Clear all references
     * @return {?}
     */
    ngOnDestroy() {
        if (this.beforeDestroyCb != null) {
            this.beforeDestroyCb(this.getId());
        }
        this._inactiveMenuItems = null;
        this.routeDeactivated = true;
        //remove view from stack
        this.getSession().getMcoContainer().removeView(this);
        this.mcos.forEach(mco => this.getSession().getMcoContainer().removeMco(mco));
        this.mcos.clear();
        delete this.mcos;
        if (this.dialog != null) {
            if (this.dialog.viewContainer != null) {
                this.dialog.viewContainer.clear();
                delete this.dialog.viewContainer;
            }
            delete this.dialog;
        }
        this.isDestroyed = true;
        this.getSession().getInjector(DynamicPagesService).removeView(this);
        forEach(this.defIds, (id) => {
            this.getSession().deleteDef(id);
        });
        this.defIds = null;
        this.popupMenus = null;
        // if (this._findElementCache != null) {
        //   this._findElementCache.clear();
        // }
        // this._findElementCache = null;
        this._tableColumnsMap = null;
        super.ngOnDestroy();
    }
    /**
     * Delegate to [[bodyInit]]
     * @return {?}
     */
    componentInitialize() {
        this.bodyInit();
    }
    /**
     * Get the component's tag name. Implementation of [[BaseComponent]] method
     * @return {?} Name of tag
     */
    getTagName() {
        return 'vt-dummy-view';
    }
    /**
     * Not implemented
     * @return {?}
     */
    bodyInit() {
    }
    /**
     * Query the "element" via selectFn function, then set the attribute of the element. If found
     * set the attribute {attribute} with value {value}
     *
     * @param {?} selectorFn
     * @param {?} attribute
     * @param {?} value
     * @return {?}
     */
    setElementAttribute(selectorFn, attribute, value) {
        /** @type {?} */
        const comp = selectorFn(this.children);
        if (comp == null) {
            Logger.warn('Unable to set attribute, component is null');
        }
        else {
            comp.setAttribute(attribute, value);
        }
        this.markForCheck();
    }
    /**
     * Set [[disabled]] property value
     * @param {?} boo Value for disabled property
     * @return {?}
     */
    setDisabled(boo) {
        this.disabled = boo;
        this.dialog.setDisabled(boo);
    }
    /**
     * Query the "element" via selectFn function, then set the attribute of the element. If found
     * set the attribute {attribute} with value {value}
     *
     * @param {?} compId
     * @param {?} attribute
     * @param {?} value
     * @return {?}
     */
    setElementAttributeById(compId, attribute, value) {
        if (attribute === AttributesEnum.TITLE || attribute === 'title') {
            this.setTitle(value);
        }
        else if (compId === this.getId()) {
            this.setAttribute(attribute, value);
        }
        else {
            /** @type {?} */
            let comp = this.findElementById(compId);
            /* istanbul ignore if */
            /* istanbul ignore else */
            if (comp == null) {
                /** @type {?} */
                const compDef = this.getSession().getDef(compId);
                if (compDef != null) {
                    compDef.attribute[attribute] = value;
                }
                else {
                    comp = UiDocument.getMenuComponent(compId);
                    /* istanbul ignore else */
                    if (comp != null) {
                        comp.setAttribute(attribute, value);
                    }
                    else {
                        Logger.warn(`Unable to set attribute, component with id: ${compId} is not found`);
                    }
                }
            }
            else {
                comp.setAttribute(attribute, value);
            }
            this.markForCheck();
        }
    }
    /**
     * Wholesale set attributes to an element.
     *
     * @param {?} compId element to set attribute
     * @param {?} attributes an array of AttributesEnum to be set
     * @return {?}
     */
    setElementAttributesById(compId, attributes) {
        if (compId === this.getId()) {
            this.setAttributes(attributes);
        }
        else {
            /** @type {?} */
            const comp = this.findElementById(compId);
            if (comp == null) {
                /** @type {?} */
                const compDef = this.getSession().getDef(compId);
                if (compDef != null) {
                    for (const attr of attributes) {
                        compDef.attribute[attr.attributeName] = attr.value;
                    }
                }
                else {
                    Logger.warn(`Unable to set attribute, component with id: ${compId} is not found`);
                }
            }
            else {
                comp.setAttributes(attributes);
            }
            this.markForCheck();
        }
    }
    /**
     * Removes an attribute from a component with a specific id
     * @param {?} compId Component id
     * @param {?} attribute Name of attribute to remove from component
     * @return {?}
     */
    removeElementAttributeById(compId, attribute) {
        if (attribute === AttributesEnum.TITLE || attribute === 'title') {
            this.setTitle("");
        }
        else if (compId === this.getId()) {
            this.removeAttribute(attribute);
        }
        else {
            /** @type {?} */
            const comp = this.findElementById(compId);
            /* istanbul ignore if */
            /* istanbul ignore else */
            if (comp == null) {
                Logger.warn(`Unable to remove attribute, component with id: ${compId} is not found`);
            }
            else {
                comp.removeAttribute(attribute);
            }
        }
        this.markForCheck();
    }
    /**
     * Searches for a radio button group by ID and adds an attribute to all [[RadioButtonComponent]] elements in the group
     * @param {?} radioGroupId
     * @param {?} attribute HTML attribute name to be set
     * @param {?} value Value to set on HTML attribute
     * @return {?}
     */
    setRadioGroupAttribute(radioGroupId, attribute, value) {
        /** @type {?} */
        const radios = filter(Array.from(this.children.values()), (child) => {
            return child instanceof RadioButtonComponent && (/** @type {?} */ (child)).group === radioGroupId;
        });
        /* istanbul ignore if */
        if (radios != null && radios.length > 0) {
            forEach(radios, (radio) => {
                radio.setAttribute(attribute, value);
            });
        }
        this.markForCheck();
    }
    /**
     * Get the value of an HTML attribute of a component
     * @param {?} compId Id of component to get attribute from
     * @param {?} attribute Name of HTML attribute to get
     * @return {?}
     */
    getElementAttributeById(compId, attribute) {
        /** @type {?} */
        const comp = this.findElementById(compId);
        if (comp != null) {
            return comp.getAttribute(attribute);
        }
    }
    /**
     * Find [[ComboboxComponent]] by id and call it's initializeComboboxValues method.
     * @param {?} compId Component ID to initialize
     * @param {?} value Value to set on combobox
     * @param {?} attribute Name of attribute to set on combobox
     * @return {?}
     */
    initializeComboBoxValues(compId, value, attribute) {
        /** @type {?} */
        const comboBox = /** @type {?} */ (this.findElementById(compId));
        if (comboBox == null) {
            console.error(`Unable to find combobox: ${compId} `);
        }
        else {
            comboBox.initializeComboboxValues(value);
            if (attribute != null) {
                if (attribute["width"] != null) {
                    comboBox.setControlWidth(attribute["width"]);
                }
                else if (attribute["onCommand"] != null) {
                    comboBox.setOnCommand(attribute["onCommand"]);
                }
            }
        }
    }
    /**
     * Set the [[ComboboxComponent]] selected item that matches value
     * @param {?} compId [[ComboboxComponent]] id
     * @param {?} value Value to set as selected
     * @return {?}
     */
    selectComboBoxItem(compId, value) {
        /** @type {?} */
        const comboBox = /** @type {?} */ (this.findElementById(compId));
        /* istanbul ignore if */
        if (comboBox == null) {
            console.error(`Unable to find combobox: ${compId} `);
        }
        else {
            comboBox.setSelectValue(value);
        }
    }
    /**
     * Find component and focus it
     * @param {?=} compId Component id
     * @return {?}
     */
    setFocus(compId = null) {
        if (compId == this.id) {
            this.showView();
        }
        else if (compId == null || compId == '') {
            this.requestFocus();
        }
        else {
            /** @type {?} */
            const comp = UiDocument.findElementById(compId);
            if (comp == null) {
                console.error(`Unable to setFocus, component with id: ${compId} is not found`);
            }
            else {
                comp.requestFocus();
            }
        }
    }
    /**
     * Set title on [[DialogComponent]]
     * @param {?} title Title of dialog
     * @return {?}
     */
    setTitle(title) {
        if (this.dialog != null) {
            this.dialog.title = title;
            this.dialog.markForCheck();
        }
    }
    /**
     * Close [[dialog]] if it exists on this component
     * @param {?=} delayDialogClose
     * @return {?}
     */
    close(delayDialogClose) {
        /** @type {?} */
        const dialog = document.getElementById(this.dialog.id);
        dialog.setAttribute("style", "display: none;");
        dialog.innerHTML = "";
        this._viewStatus = 1;
        this.cleanup();
        if (this.dialog != null) {
            if (delayDialogClose) {
                setTimeout(() => {
                    this.dialog.close(null, false);
                }, 1);
            }
            else {
                this.dialog.close(null, true);
            }
        }
        else if (this.isDynamicPage === true) {
            this.getSession().getInjector(DynamicPagesService).removeView(this);
        }
        else {
            if (this.getSession() != null && this.getSession().getRouteNavigatorService() != null) {
                this.getSession().getRouteNavigatorService().destroyRoute(this.routeUrl);
            }
            else {
                console.error("Unable to change route, session or route navigation service is not defined");
            }
            console.error('Unable to close ViewComponent, DialogComponent not found');
        }
    }
    /**
     * Get name of this component
     * @return {?}
     */
    getLocalName() {
        return "window";
    }
    /**
     * Register and add an MCO
     * @param {?} mcoName
     * @param {?} mcoClass
     * @return {?}
     */
    createMco(mcoName, mcoClass) {
        /** @type {?} */
        let mco = this.getSession().getMcoContainer().getMco(mcoName);
        //check to see if MCO already exists?
        if (mco != null) {
            console.warn("MCO " + mcoName + " is already exists, use existing one");
        }
        else {
            mco = new mcoClass(this);
            this.getSession().getMcoContainer().registerMco(mcoName, mco);
            //add mco name for tracking (to be cleaned and removed later)
            this.mcos.add(mcoName);
        }
        return mco;
    }
    /**
     * Get MCO from client session
     * @param {?} mcoName Name of MCO to get
     * @return {?} MCO
     */
    getMco(mcoName) {
        return this.getSession().getMcoContainer().getMco(mcoName);
    }
    /**
     * Parse string and create component base on it
     *
     * @param {?} domString
     * @return {?}
     */
    createComponent(domString) {
        //textField
        //label
        //panel
        //horizontalSeparator
        try {
            /** @type {?} */
            const element = AppUtils.parseDom(domString);
        }
        catch (e) {
            console.error(e);
        }
    }
    /**
     * @deprecated DO NOT USE THIS, exists only for legacy support, use ngIf instead
     * @param {?} componentType
     * @return {?}
     */
    _createDynamicComponent(componentType) {
        /** @type {?} */
        let comp = null;
        if (this.dialog != null && this.dialog.viewContainer != null) {
            try {
                /** @type {?} */
                const compFactory = this.getSession().getInjector(ComponentFactoryResolver);
                if (compFactory != null) {
                    /** @type {?} */
                    let compRef;
                    if (componentType === ComponentType.LABEL) {
                        compRef = this.dialog.viewContainer.createComponent(compFactory.resolveComponentFactory(LabelComponent));
                    }
                    else if (componentType === ComponentType.BUTTON) {
                        compRef = this.dialog.viewContainer.createComponent(compFactory.resolveComponentFactory(ButtonComponent));
                    }
                    else if (componentType === ComponentType.COMBOBOX) {
                        compRef = this.dialog.viewContainer.createComponent(compFactory.resolveComponentFactory(ComboBoxComponent));
                    }
                    else if (componentType === ComponentType.TEXT_FIELD) {
                        compRef = this.dialog.viewContainer.createComponent(compFactory.resolveComponentFactory(TextFieldComponent));
                    }
                    else if (componentType === ComponentType.CHECKBOX) {
                        compRef = this.dialog.viewContainer.createComponent(compFactory.resolveComponentFactory(CheckboxComponent));
                    }
                    else if (componentType === ComponentType.RADIO) {
                        compRef = this.dialog.viewContainer.createComponent(compFactory.resolveComponentFactory(RadioButtonComponent));
                    }
                    else if (componentType === ComponentType.TEXTAREA) {
                        compRef = this.dialog.viewContainer.createComponent(compFactory.resolveComponentFactory(TextAreaComponent));
                    }
                    else {
                        throw new Error("Unknown component type: " + componentType);
                    }
                    if (compRef != null) {
                        comp = compRef.instance;
                        comp.compRef = compRef;
                        comp.compRef.changeDetectorRef.detectChanges();
                    }
                }
            }
            catch (e) {
                console.error("fail to create component: " + e);
            }
        }
        return comp;
    }
    /**
     * @deprecated DO NOT USE THIS! Exists only for legacy support
     * @param {?} id
     * @return {?}
     */
    _removeComponent(id) {
        /** @type {?} */
        const child = this.findElementById(id);
        if (child != null) {
            child.destroyComponent();
        }
        else {
            if (this.dialog != null &&
                this.dialog.viewContainer != null &&
                (/** @type {?} */ (this.dialog.viewContainer))._embeddedViews != null &&
                Array.isArray((/** @type {?} */ (this.dialog.viewContainer))._embeddedViews) &&
                (/** @type {?} */ (this.dialog.viewContainer))._embeddedViews.length > 0) {
                try {
                    /** @type {?} */
                    const ev = (/** @type {?} */ (this.dialog.viewContainer))._embeddedViews;
                    for (let v of ev) {
                        if (v.nodes && Array.isArray(v.nodes) && v.nodes.length > 0) {
                            for (let n of v.nodes) {
                                if (n.instance != null && n.instance.id === id) {
                                    if (typeof n.instance.destroyComponent === 'function') {
                                        n.instance.destroyComponent();
                                        /* istanbul ignore if */
                                        if (AppUtils.enableLogging === true) {
                                            console.info("Removed component: " + id);
                                        }
                                    }
                                    break;
                                }
                            }
                        }
                    }
                }
                catch (e) {
                    console.error(e);
                }
            }
        }
    }
    /**
     * Check if this view can be active
     * @return {?} True if view can be active or parent is null
     */
    isView() {
        return this.canBeActiveView !== false ? true : (this.getParent() == null ? true : false);
    }
    /**
     * Check if this view can't be active view
     * @return {?} True if view can't be active view
     */
    isNoneActiveView() {
        return this.canBeActiveView === false;
    }
    /**
     * Check if this is a dynamic page
     * @return {?} True if it is a dynamic page
     */
    isDynamicView() {
        return this.isDynamicPage === true ? true : false;
    }
    /**
     * Set [[DialogComponent]] instance z-index
     * @param {?} newZIndex
     * @return {?}
     */
    updateZIndex(newZIndex) {
        if (this.dialog != null && this.isDestroyed !== true && this.disabled != true) {
            this.dialog.updateZIndex(newZIndex);
            this.zIndex = newZIndex;
        }
    }
    /**
     * Get JSON representation of this component
     * @return {?} Object JSON metadata for this component
     */
    toJson() {
        /** @type {?} */
        const json = super.toJson();
        this.setJson(json, "screenIndex", this.getScreenIndex());
        if (this.getSession().getMcoContainer().activeView().getId() === this.getId() && UiDocument.menuItemElementMap != null) {
            /** @type {?} */
            const menuItems = [];
            /** @type {?} */
            const keySet = UiDocument.menuItemElementMap.keys();
            /** @type {?} */
            let keyIt = keySet.next();
            while (keyIt.done !== true) {
                menuItems.push(UiDocument.menuItemElementMap.get(keyIt.value).toJson());
                keyIt = keySet.next();
            }
            if (this._inactiveMenuItems != null) {
                /** @type {?} */
                const keyIt = this._inactiveMenuItems.values();
                /** @type {?} */
                let rs = keyIt.next();
                while (rs.done !== true) {
                    menuItems.push(rs.value.toJson());
                    rs = keyIt.next();
                }
            }
            if (json["children"] != null) {
                json["children"] = json["children"].concat(menuItems);
            }
            else {
                json["children"] = menuItems;
            }
        }
        return json;
    }
    /**
     * Add component id to [[defIds]]
     * @param {?} id
     * @return {?}
     */
    trackDef(id) {
        this.defIds.push(id);
    }
    /**
     * @param {?} viewId
     * @return {?}
     */
    static hasIdAsCloseTargetOnInit(viewId) {
        return ViewComponent.closeOnInit.idSet.has(viewId);
    }
    /**
     * @param {?} viewType
     * @return {?}
     */
    static hasTypeAsCloseTargetOnInit(viewType) {
        return ViewComponent.closeOnInit.types.has(viewType);
    }
    /**
     * @return {?}
     */
    static hookClosePrevView2DynamicPagesService() {
        if (!ViewComponent.closeOnInit.hooked) {
            DynamicPagesService.onCreateViewCloser = (sessionService, viewType, routeId) => {
                ViewComponent.closePrevView(sessionService, routeId ? routeId : viewType);
            };
            ViewComponent.closeOnInit.hooked = true;
        }
    }
    /**
     * @param {?} sessionService
     * @param {?} target
     * @return {?}
     */
    static closePrevView(sessionService, target) {
        /** @type {?} */
        let view = null;
        if ((typeof target) == "string") {
            /** @type {?} */
            let screenId = /** @type {?} */ (target);
            if (ViewComponent.hasIdAsCloseTargetOnInit(screenId)) {
                view = sessionService.getMcoContainer().getViewById(screenId);
            }
        }
        else if (target instanceof Type) {
            /** @type {?} */
            let viewType = /** @type {?} */ (target);
            if (ViewComponent.hasTypeAsCloseTargetOnInit(viewType)) {
                view = find(sessionService.getMcoContainer().getViews(), v => v.constructor == viewType);
            }
        }
        //Vivify: if view has actionForwardName, do not close the view as we will call it handleActionForward() to refresh the screen.
        if (view && view.actionForwardName == null) {
            view.close();
        }
    }
    /**
     * Close previous version of this view (if this view is "re-open"). This is to support usage
     * of removing current view and replacing with new view
     * @param {?} viewId
     * @param {?=} delayDialogClose
     * @return {?}
     */
    closeView(viewId, delayDialogClose) {
        /** @type {?} */
        const checkScreenInique = viewId === this.id;
        /** @type {?} */
        const oldView = find(this.getSession().getMcoContainer().getViews(), (view) => {
            return view.id === viewId &&
                (checkScreenInique === false ||
                    (checkScreenInique === true &&
                        view.uniqueId !== this.uniqueId));
        });
        if (oldView != null) {
            //for case where we are the same screen, we should't call beforeDestroyCb to cleanup
            if (checkScreenInique === true) {
                oldView.beforeDestroyCb = null;
            }
            oldView.close(delayDialogClose);
        }
        if (!this.viewIsInitialized && checkScreenInique) {
            // This case is too late to close. This object's view is already exist, reused and un-closable!
            // To save this trying, and execute closing at router before create new view.
            if (!ViewComponent.closeOnInit.idSet.has(viewId)) {
                ViewComponent.closeOnInit.idSet.add(viewId);
            }
            /** @type {?} */
            let oType = /** @type {?} */ (this.constructor);
            if (!ViewComponent.closeOnInit.types.has(oType)) {
                ViewComponent.closeOnInit.types.add(oType);
            }
            ViewComponent.hookClosePrevView2DynamicPagesService();
        }
    }
    /**
     * Add a [[PopupMenuDirective]] to [[popupMenus]] property
     * @param {?} popupMenu Popup menu to add to internal [[popupMenus]] list
     * @return {?}
     */
    registerPopupMenu(popupMenu) {
        if (this.popupMenus == null) {
            this.popupMenus = [];
        }
        this.popupMenus.push(popupMenu);
    }
    /**
     * Check if [[popupMenus]] has 1 or more items
     * @return {?} True if [[popupMenus]] is defined and has at least 1 item
     */
    hasPopupMenu() {
        return this.popupMenus != null && this.popupMenus.length > 0;
    }
    /**
     * Get the ID of the first [[PopupMenuDirective]] instance in [[popupMenus
     * @return {?} Id of popup menu
     */
    getFirstPopupMenuId() {
        return this.popupMenus != null && this.popupMenus.length > 0 ? this.popupMenus[0].id : null;
    }
    /**
     * Delegate to [[BaseComponent]] findElementById method
     * @param {?} id Component ID
     * @return {?}
     */
    findElementById(id) {
        /** @type {?} */
        let comp = super.findElementById(id);
        if (comp == null && this._tableColumnsMap != null) {
            comp = this._tableColumnsMap.get(KeyUtils.toMapKey(id));
        }
        if (comp == null) {
            //check for inactive menu items
            comp = /** @type {?} */ (this.getInactiveMenuItem(id));
        }
        return comp;
    }
    /**
     * Stop change detection
     * @return {?}
     */
    freezeChangeDetection() {
        if (this.getChangeDetector() != null) {
            this.getChangeDetector().detach();
            this.changeDetectionFrozen = true;
        }
    }
    /**
     * Resume change detection if it has been stopped
     * @return {?}
     */
    unfreezeChangeDetection() {
        if (this.getChangeDetector() != null) {
            this.getChangeDetector().detectChanges();
            this.getChangeDetector().reattach();
        }
        this.changeDetectionFrozen = false;
    }
    /**
     * Check if change detection has been stopped
     * @return {?} True if change detection has been stopped
     */
    isChangeDetectionFrozen() {
        return this.changeDetectionFrozen === true;
    }
    /**
     * Check if this is a container component
     * @return {?} True
     */
    isContainer() {
        return true;
    }
    /**
     * Trigger change detection for parent [[BaseComponent]] and [[dialog]] instance
     * @return {?}
     */
    detectChanges() {
        super.detectChanges();
        if (this.dialog != null) {
            this.dialog.detectChanges();
        }
    }
    /**
     * Mark this component for change detection
     * @return {?}
     */
    markForCheck() {
        super.markForCheck();
        if (this.dialog != null) {
            this.dialog.markForCheck();
        }
    }
    /**
     * Show the view after it has been hidden via minimized
     * @return {?}
     */
    showView() {
        if (this.dialog != null) {
            this.dialog.showView();
        }
        delete this.isMinimized;
    }
    /**
     * Minimize the [[dialog]] of this component
     * @return {?}
     */
    minimize() {
        if (this.dialog != null) {
            this.dialog.minimize(null);
        }
    }
    /**
     * Move this component to the top of the view stack
     * @return {?}
     */
    moveToTop() {
        this.getSession().getMcoContainer().reStackView(this.id), this.screenIndex;
    }
    /**
     * @param {?} menuItem
     * @return {?}
     */
    trackInactiveMenuItem(menuItem) {
        /** @type {?} */
        const id = menuItem.getId();
        /** @type {?} */
        const fauxMenuItem = new HTMLElementWrapper(null, "menuItem", null);
        fauxMenuItem.setAttribute("id", id);
        if (menuItem.item != null && menuItem.item.customAttributes != null) {
            /** @type {?} */
            const keys$$1 = keys(menuItem.item.customAttributes);
            for (const key of keys$$1) {
                if (key !== "id") {
                    fauxMenuItem.setAttribute(key, menuItem.item.customAttributes[key]);
                }
            }
        }
        if (this._inactiveMenuItems == null) {
            this._inactiveMenuItems = new Map();
        }
        this._inactiveMenuItems.set(id, fauxMenuItem);
    }
    /**
     * @param {?} id
     * @return {?}
     */
    getInactiveMenuItem(id) {
        return this._inactiveMenuItems != null ? this._inactiveMenuItems.get(id) : null;
    }
    /**
     * @return {?}
     */
    cleanup() {
        super.cleanup();
        if (this._viewChildrenMap != null) {
            /** @type {?} */
            const cit = this._viewChildrenMap.values();
            /** @type {?} */
            let val = cit.next();
            while (val.done !== true) {
                //some children are not actual BaseComponent
                if (typeof val.value.emptyChildren === "function") {
                    val.value.emptyChildren();
                    val.value._isDying = true;
                }
                val = cit.next();
            }
        }
        super.emptyChildren();
    }
    /**
     * @return {?}
     */
    isModalDialog() {
        return this.dialog != null && (this.dialog.modal === true || this.dialog.modal === "true");
    }
    /**
     * Not implemented
     * @return {?}
     */
    handleActionForward() {
    }
    /**
     * screen index(0~)の文字列表現
     * @return {?}
     */
    getScreenIndex() {
        return (this.screenIndex === undefined || this.screenIndex === null)
            ? ''
            : this.screenIndex.toString();
    }
    /**
     * @return {?}
     */
    registerScreenIndex() {
        this.screenIndex = this.getSession().getMcoContainer().nextScreenIndex(this.baseScreenId);
    }
    /**
     * @param {?} boo
     * @return {?}
     */
    setVisible(boo) {
        super.setVisible(boo);
        this.getSession().getMcoContainer().refreshBreadCrumb();
    }
}
ViewComponent.closeOnInit = { idSet: new Set(), types: new Set(), hooked: false };
ViewComponent.decorators = [
    { type: Component, args: [{
                selector: 'vt-dummy-view',
                template: ''
            }] }
];
/** @nocollapse */
ViewComponent.ctorParameters = () => [
    { type: BaseComponent, decorators: [{ type: Optional }, { type: SkipSelf }] },
    { type: SessionService },
    { type: ElementRef }
];
ViewComponent.propDecorators = {
    dialog: [{ type: ViewChild, args: [DialogComponent,] }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class ViewModule {
}
ViewModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    BaseModule
                ],
                declarations: [ViewComponent],
                providers: [
                    DynamicPagesService
                ],
                exports: [
                    ViewComponent,
                ]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Class for popup menu component
 */
class PopupMenuComponent extends BaseComponent {
    /**
     *
     * @param {?} parent see [[BaseComponent]] constructor
     * @param {?} sessionService see [[BaseComponent]] constructor
     * @param {?} elementRef see [[BaseComponent]] constructor
     * @param {?} cd Change detector
     * @param {?} differs
     * @param {?} popupMenuService
     * @param {?} renderer see [[BaseComponent]] constructor
     */
    constructor(parent, sessionService, elementRef, cd, differs, popupMenuService, renderer) {
        super(parent, sessionService, elementRef, renderer);
        this.cd = cd;
        this.popupMenuService = popupMenuService;
        this.menuItems = [];
        this.menuItemsDiffer = null;
        this.isShown = false;
        this.menuItemsDiffer = differs.find([]).create();
        this.onDocumentClick = (event) => {
            this.handleDocumentClick(event);
        };
        document.addEventListener("click", this.onDocumentClick, true);
    }
    /**
     * @return {?}
     */
    get hasMenuItems() {
        return this.menuItems != null && this.menuItems.length > 0;
    }
    /**
     * Do check lifecycle
     * @return {?}
     */
    ngDoCheck() {
        if (this.menuItemsDiffer.diff(this.menuItems)) {
            this.cd.markForCheck();
        }
    }
    /**
     * After view init lifecycle. Trigger change detection and show this component
     * @return {?}
     */
    ngAfterViewInit() {
        super.ngAfterViewInit();
        this.cd.detectChanges();
        UiDocument.registerMenuItemElement(this.getId(), /** @type {?} */ (this));
        /** @type {?} */
        const tm = setTimeout(() => {
            clearTimeout(tm);
            this.show();
        });
    }
    /**
     * Destroy lifecycle. Remove event listeners and remove dropdown elements
     * @return {?}
     */
    ngOnDestroy() {
        super.ngOnDestroy();
        UiDocument.unregisterMenuItemElement(this.getId());
        document.removeEventListener("click", this.onDocumentClick, true);
        this.dropdownContainer = null;
        this.dropdown = null;
    }
    /**
     * Show the popup by setting CSS position to on screen
     * @return {?}
     */
    show() {
        this.popupMenuService.setActiveMenu(this.id);
        if (this.dropdown != null) {
            this.dropdown.show();
            this.isShown = true;
            /** @type {?} */
            const position = this.getSession().getMousePosition();
            if (position != null && this.dropdownContainer != null) {
                this.renderer.setStyle(this.dropdownContainer.nativeElement, "left", position.x + "px");
                this.renderer.setStyle(this.dropdownContainer.nativeElement, "top", position.y + "px");
            }
            this.cd.markForCheck();
        }
    }
    /**
     * Hide the popup menu
     * @return {?}
     */
    hide() {
        this.dropdown.hide();
        this.isShown = false;
        this.cd.markForCheck();
        this.popupMenuService.setActiveMenu(null);
    }
    /**
     * Event handler for mouse click
     * @param {?} event
     * @return {?}
     */
    handleDocumentClick(event) {
        if (this.isShown === true && !this.elementRef.nativeElement.contains(event.target)) {
            this.hide();
        }
    }
    /**
     * Get [[cd]] (Change detector) property
     * @return {?}
     */
    getChangeDetector() {
        return this.cd;
    }
    /**
     * Event handler that hides all other popup menus and displays this one
     * @param {?} event
     * @return {?}
     */
    dispSubmenu(event) {
        /** @type {?} */
        const currentTarget = event.currentTarget;
        /** @type {?} */
        const currentChildren = currentTarget.children;
        /** @type {?} */
        const parentChildren = currentTarget.parentElement.children;
        for (let i = 0, len = parentChildren.length; i < len; i++) {
            if (parentChildren[i] !== undefined) {
                this.renderer.setStyle(parentChildren[i], "background-color", "#ffffff");
            }
            if (parentChildren[i].children[1] === undefined) {
                continue;
            }
            parentChildren[i].children[1].classList.remove('popup-sub-menu-display');
        }
        if (currentChildren[1] === undefined
            || (currentChildren[0] !== undefined && !currentChildren[0].classList.contains('dropdown-item'))) {
            return;
        }
        currentChildren[1].classList.add('popup-sub-menu-display');
        this.renderer.setStyle(currentTarget, "background-color", "#f5de92");
    }
    /**
     * Set an attribute with value on the menu item
     * @param {?} name Attribute name
     * @param {?} value Attribute value
     * @return {?}
     */
    setAttribute(name, value) {
        this.setCustomAttribute(name, value);
    }
    /**
     * Get the value of an attribute by name
     * @param {?} name Attribute name
     * @return {?}
     */
    getAttribute(name) {
        return this.getCustomAttribute(name);
    }
    /**
     * @return {?}
     */
    toJson() {
        return super.toJson();
    }
}
PopupMenuComponent.decorators = [
    { type: Component, args: [{
                selector: 'vt-popup-menu-view',
                template: "<div class=\"dropdown-container\" bs-dropdown-container #bsDropdownContainer>\n  <div id=\"{{id}}\" dropdown #myDropdown=\"bs-dropdown\" [autoClose]=\"true\">\n    <ul *dropdownMenu class=\"dropdown-menu popup-menu\" role=\"menu\" id=\"{{id}}_menus\">\n      <ng-template ngFor [ngForOf]=\"menuItems\" let-item>\n        <li *ngIf=\"item.text === '-' && item.display !== false\" role=\"separator\" class=\"divider\"></li>\n        <li (mouseover)=\"dispSubmenu($event)\" *ngIf=\"item.menuItems != null && item.menuItems.length > 0 && item.display !== false\" class=\"dropdown-submenu\" role=\"menuitem\" vt-menu-item-comp [text]=\"item.text\" id=\"{{item.id}}\" [menuItems]=\"item.menuItems\" [display]=\"item.display\" [item]=\"item\" [popupMenuId]=\"id\"></li>\n        <li (mouseover)=\"dispSubmenu($event)\" *ngIf=\"item.text !== '-' && (item.menuItems == null || item.menuItems.length === 0) && item.display !== false\" role=\"menuitem\" vt-menu-item-comp [text]=\"item.text\" id=\"{{item.id}}\" [menuItems]=\"item.menuItems\" [display]=\"item.display\" [item]=\"item\" [popupMenuId]=\"id\"></li>\n      </ng-template>\n    </ul>\n  </div>\n</div>\n",
                changeDetection: ChangeDetectionStrategy.OnPush,
                encapsulation: ViewEncapsulation.None,
                styles: [".hidden{display:none}.dropdown-submenu{position:relative}.dropdown-submenu>a{text-align:left;padding-right:43px!important}.dropdown-submenu>.dropdown-menu{top:0;left:100%;margin-top:-1px;margin-left:-1px;border-radius:6px}.dropdown-submenu:hover>.dropdown-menu{display:block}.dropdown-submenu>a:after{display:block;position:relative;right:-8px;font-size:8px;content:\">\";color:#626d8d;text-shadow:1px 0 0 #626d8d;float:right;margin:2px 0 -10px;padding:0;width:0;height:0;background:0 0;border:none}.dropdown-submenu:hover>a:after{border-left-color:#fff}.dropdown-submenu.pull-left{float:none}.dropdown-submenu.pull-left>.dropdown-menu{left:-100%;margin-left:10px;border-radius:6px}.dropdown-container{position:absolute;z-index:9999}"]
            }] }
];
/** @nocollapse */
PopupMenuComponent.ctorParameters = () => [
    { type: BaseComponent, decorators: [{ type: Optional }, { type: SkipSelf }] },
    { type: SessionService },
    { type: ElementRef },
    { type: ChangeDetectorRef },
    { type: IterableDiffers },
    { type: ContextMenuService },
    { type: Renderer2 }
];
PopupMenuComponent.propDecorators = {
    idName: [{ type: Input }],
    dropdown: [{ type: ViewChild, args: ["myDropdown", { read: BsDropdownDirective },] }],
    dropdownContainer: [{ type: ViewChild, args: ["bsDropdownContainer", { read: ElementRef },] }],
    menuItems: [{ type: Input }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Menu item directive class. Adds menu dispay and behavior to component
 */
class MenuItemDirective {
    constructor() {
        this.text = '';
        this.visible = true;
        this.onCommand = new EventEmitter();
    }
    /**
     * Convert [[MenuItemDirective]] children of parent view to [[MenuItem]]
     * @param {?=} parentScreenId
     * @return {?}
     */
    toMenuItem(parentScreenId) {
        /** @type {?} */
        const menuItem = {
            id: this.id,
            text: this.text,
            menuItems: null,
            onCommand: this.onCommand,
            parentScreenId: parentScreenId,
            display: this.visible
        };
        if (this.subMenuItems != null && this.subMenuItems.length > 0) {
            //filter to remove self then map to MenuItem
            menuItem.menuItems = this.subMenuItems.filter(item => item !== this).map(item => item.toMenuItem(parentScreenId));
        }
        return menuItem;
    }
}
MenuItemDirective.decorators = [
    { type: Directive, args: [{
                selector: 'vt-menu-item'
            },] }
];
MenuItemDirective.propDecorators = {
    idName: [{ type: Input }],
    id: [{ type: Input }],
    text: [{ type: Input }],
    visible: [{ type: Input }],
    onCommand: [{ type: Output }],
    subMenuItems: [{ type: ContentChildren, args: [MenuItemDirective,] }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Class for menu item component. Child rendered by Menu directive
 */
class MenuItemComponent {
    /**
     *
     * @param {?} sessionService Injects reference to [[SessionService]] instance
     * @param {?} cd
     */
    constructor(sessionService, cd) {
        this.sessionService = sessionService;
        this.cd = cd;
        this.display = true;
        this.onClick = new EventEmitter();
    }
    /**
     * Check if menu items exist
     * @return {?} True if [[menuItems]] exists and has 1 or more items
     */
    get hasMenuItems() {
        return this.menuItems != null && this.menuItems.length > 0;
    }
    /**
     * Check if this menu item is a separator/divider (i.e. hyphen)
     * @return {?} True if the menu item text is a hyphen
     */
    get isDivider() {
        return this.text === '-';
    }
    /**
     * Get menu item styles map
     * @return {?} Map of styles
     */
    get menuStyles() {
        return this.item != null ? this.item.styles : null;
    }
    /**
     * After view init lifecycle. Adds menu item to [[UiDocument]]
     * @return {?}
     */
    ngAfterViewInit() {
        UiDocument.registerMenuItemElement(this.id, this);
    }
    /**
     * Destroy lifecycle. Remove menu item from [[UiDocument]]
     * @return {?}
     */
    ngOnDestroy() {
        this.item = null;
        this.menuItems = null;
        UiDocument.unregisterMenuItemElement(this.id);
    }
    /**
     * Set an attribute with value on the menu item
     * @param {?} name Attribute name
     * @param {?} value Attribute value
     * @return {?}
     */
    setAttribute(name, value) {
        if (this.item) {
            if (name === "display" || name === "visible") {
                value = value === true || value === "true";
                this.display = value;
                this.item.display = value;
                this.cd.detectChanges();
            }
            else if (name === "text") {
                this.text = value;
                this.item.text = value;
                this.cd.detectChanges();
            }
            else if (MenuItemBuilder.knownKeys.indexOf(name) < 0) {
                if (this.item.customAttributes == null) {
                    this.item.customAttributes = {};
                }
                this.item.customAttributes[name] = value;
            }
        }
    }
    /**
     * Get the value of an attribute by name
     * @param {?} name Attribute name
     * @return {?}
     */
    getAttribute(name) {
        if (this.item) {
            if (MenuItemBuilder.knownKeys.indexOf(name) < 0) {
                return this.item.customAttributes == null ? null : this.item.customAttributes[name];
            }
            else if (name === "display" || name === "visible") {
                return this.display;
            }
            else if (name === "text") {
                return this.text;
            }
            else if (name === "id") {
                return this.id;
            }
        }
    }
    /**
     * Get value of [[id]] property
     * @return {?} [[id]] value
     */
    getId() {
        return this.id;
    }
    /**
     * Get value of [[text]] property
     * @return {?} [[text]] value
     */
    getText() {
        return this.text;
    }
    /**
     * Event handler fro mouseenter event
     * @param {?} event Mouse event
     * @return {?}
     */
    handleOnEnter(event) {
        /** @type {?} */
        const clientEvent = new ClientEvent(this, event);
        if (AppUtils.customizeClientEvent != null) {
            AppUtils.customizeClientEvent(this, clientEvent);
        }
        if (this.item != null && this.item.parentScreenId != null) {
            clientEvent.setParameter("screenId", this.item.parentScreenId);
        }
        this.sessionService.getEventHandler().setClientEvent(clientEvent);
        if (this.item && typeof this.item.onCommandCallback === 'function') {
            this.item.onCommandCallback(this.item);
        }
        else if (this.item && this.item.onCommand) {
            this.item.onCommand.emit();
        }
        if (this.popupMenuId != null) {
            this.sessionService.hideContextMenu(this.popupMenuId);
        }
    }
    /**
     * Event handler for mouseenter. Focuses the event target
     * @param {?} event Mouse event
     * @return {?}
     */
    handleMouseEnter(event) {
        event.target.focus();
    }
    /**
     * Event handler for click.
     * \@event OnCommand
     * @param {?} event
     * @return {?}
     */
    handleOnClick(event) {
        /** @type {?} */
        const clientEvent = new ClientEvent(this, event);
        if (AppUtils.customizeClientEvent != null) {
            AppUtils.customizeClientEvent(this, clientEvent);
        }
        if (this.item != null && this.item.parentScreenId != null) {
            clientEvent.setParameter("screenId", this.item.parentScreenId);
        }
        this.sessionService.getEventHandler().setClientEvent(clientEvent);
        if (this.item && typeof this.item.onCommandCallback === 'function') {
            this.item.onCommandCallback(this.item);
        }
        else if (this.item && this.item.onCommand) {
            this.item.onCommand.emit();
        }
        if (this.popupMenuId != null) {
            this.sessionService.hideContextMenu(this.popupMenuId);
        }
    }
    /**
     * Event handler for mousedown event
     * @param {?} event Mouse down event
     * @return {?}
     */
    handleMouseDown(event) {
        /** @type {?} */
        const clientEvent = new ClientEvent(this, event);
        if (AppUtils.customizeClientEvent != null) {
            AppUtils.customizeClientEvent(this, clientEvent);
        }
        if (this.item != null && this.item.parentScreenId != null) {
            clientEvent.setParameter("screenId", this.item.parentScreenId);
        }
        this.sessionService.getEventHandler().setClientEvent(clientEvent);
        if (this.item && typeof this.item.onMouseDownCallback === "function") {
            this.item.onMouseDownCallback(this);
        }
    }
    /**
     * Get JSON representation for this component
     * @return {?} Object Metadata as JSON
     */
    toJson() {
        /** @type {?} */
        const json = {};
        json["tagName"] = "menuItem";
        json["nxTagName"] = "menuItem";
        if (this.id != null) {
            json["id"] = this.id;
        }
        if (this.text != null) {
            json["text"] = this.text;
        }
        /* istanbul ignore if */
        if (this.popupMenuId != null) {
            json["popup"] = "#" + this.popupMenuId;
        }
        /* istanbul ignore if */
        if (this.item.customAttributes != null) {
            /** @type {?} */
            const keys$$1 = keys(this.item.customAttributes);
            for (let key of keys$$1) {
                json[key] = KeyUtils.toJsonValue(this.item.customAttributes[key]);
            }
        }
        return json;
    }
    /**
     * Event handler to show the submenu items by adding CSS class
     * @param {?} event
     * @return {?}
     */
    dispSubmenu(event) {
        /** @type {?} */
        const currentTarget = event.currentTarget;
        /** @type {?} */
        const currentChildren = currentTarget.children;
        /** @type {?} */
        const parentChildren = currentTarget.parentElement.children;
        for (let i = 0, len = parentChildren.length; i < len; i++) {
            if (parentChildren[i] !== undefined) {
                parentChildren[i].style.backgroundColor = "#ffffff";
            }
            if (parentChildren[i].children[1] === undefined) {
                continue;
            }
            parentChildren[i].children[1].classList.remove('popup-sub-menu-display');
        }
        if (currentChildren[1] === undefined
            || (currentChildren[0] !== undefined && !currentChildren[0].classList.contains('dropdown-item'))) {
            return;
        }
        currentChildren[1].classList.add('popup-sub-menu-display');
        currentTarget.style.backgroundColor = "#f5de92";
    }
}
MenuItemComponent.decorators = [
    { type: Component, args: [{
                selector: '[vt-menu-item-comp]',
                template: "<a *ngIf=\"hasMenuItems && display !== false\" id=\"{{id}}\" [ngClass]=\"{'dropdown-item': true}\" tabindex=\"-1\">{{text}}</a>\n<a *ngIf=\"hasMenuItems !== true && display !== false\" id=\"{{id}}\" [ngClass]=\"{'dropdown-item': true}\" [ngStyle]=\"menuStyles\" tabindex=\"-1\" (keydown.enter)=\"handleOnEnter($event)\" (mouseenter)=\"handleMouseEnter($event)\" (mousedown)=\"handleMouseDown($event)\" (click)=\"handleOnClick($event)\">{{text}}</a>\n<ng-template [ngIf]=\"hasMenuItems\">\n  <ul class=\"dropdown-menu popup-menu\" role=\"menu\">\n    <ng-template ngFor [ngForOf]=\"menuItems\" let-subItem>\n      <li *ngIf=\"subItem.text === '-' && subItem.display !== false\" role=\"separator\" class=\"divider\"></li>\n      <li (mouseover)=\"dispSubmenu($event)\" *ngIf=\"subItem.menuItems != null && subItem.menuItems.length > 0 && subItem.display !== false\" class=\"dropdown-submenu\" role=\"menuitem\" vt-menu-item-comp [text]=\"subItem.text\" [id]=\"subItem.id\" [menuItems]=\"subItem.menuItems\" [display]=\"subItem.display\" [item]=\"subItem\" [popupMenuId]=\"popupMenuId\"></li>\n      <li (mouseover)=\"dispSubmenu($event)\" *ngIf=\"subItem.text !== '-' && (subItem.menuItems == null || subItem.menuItems.length === 0) && subItem.display !== false\" role=\"menuitem\" vt-menu-item-comp [text]=\"subItem.text\" [id]=\"subItem.id\" [menuItems]=\"subItem.menuItems\" [display]=\"subItem.display\" [item]=\"subItem\" [popupMenuId]=\"popupMenuId\"></li>\n    </ng-template>\n  </ul>\n</ng-template>\n",
                styles: [""]
            }] }
];
/** @nocollapse */
MenuItemComponent.ctorParameters = () => [
    { type: SessionService },
    { type: ChangeDetectorRef }
];
MenuItemComponent.propDecorators = {
    text: [{ type: Input }],
    id: [{ type: Input }],
    menuItems: [{ type: Input }],
    display: [{ type: Input }],
    visible: [{ type: Input }],
    item: [{ type: Input }],
    popupMenuId: [{ type: Input }],
    onClick: [{ type: Output }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Menu directive class
 */
class MenuDirective extends MenuItemDirective {
}
MenuDirective.decorators = [
    { type: Directive, args: [{
                selector: 'vt-menu',
                providers: [
                    {
                        provide: MenuItemDirective,
                        useExisting: forwardRef(() => MenuDirective)
                    }
                ]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Class for popup menu container
 */
class PopupMenuContainerComponent {
    /**
     *
     * @param {?} contextMenuService Injects reference to context menu service
     * @param {?} cd Injects change detector reference
     */
    constructor(contextMenuService, cd) {
        this.contextMenuService = contextMenuService;
        this.cd = cd;
        this.hasPopupMenu = false;
        this.activeMenuSubscription = this.contextMenuService.activeMenuObservable.subscribe((activeMenu) => {
            this.setActiveMenu(activeMenu);
        });
    }
    /**
     * Destroy lifecycle. Remove references
     * @return {?}
     */
    ngOnDestroy() {
        if (this.activeMenuSubscription != null) {
            this.activeMenuSubscription.unsubscribe();
        }
        this.activeMenuSubscription = null;
        this.activeMenuItems = null;
        this.contextMenuService = null;
    }
    /**
     * Set active menu by id
     * @param {?} id Id of menu to set as active
     * @return {?}
     */
    setActiveMenu(id) {
        this.activeMenuId = id;
        if (id != null) {
            this.activeMenuItems = this.contextMenuService.getContextMenuItems(id);
            if (this.activeMenuItems != null && this.activeMenuItems.length > 0) {
                this.hasPopupMenu = true;
            }
        }
        else {
            this.activeMenuItems = null;
            this.hasPopupMenu = false;
        }
        this.cd.detectChanges();
    }
}
PopupMenuContainerComponent.decorators = [
    { type: Component, args: [{
                selector: 'vt-popup-menu-container',
                template: "<vt-popup-menu-view *ngIf=\"hasPopupMenu === true\" id=\"{{activeMenuId}}\" [menuItems]=\"activeMenuItems\"></vt-popup-menu-view>",
                changeDetection: ChangeDetectionStrategy.OnPush,
                styles: [""]
            }] }
];
/** @nocollapse */
PopupMenuContainerComponent.ctorParameters = () => [
    { type: ContextMenuService },
    { type: ChangeDetectorRef }
];
PopupMenuContainerComponent.propDecorators = {
    popupMenu: [{ type: ViewChild, args: [PopupMenuComponent,] }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Popup menu directive class. Adds context menu items to component
 */
class PopupMenuDirective {
    /**
     *
     * @param {?} parent
     * @param {?} contextMenuService Injected service for context menu functions
     */
    constructor(parent, contextMenuService) {
        this.parent = parent;
        this.contextMenuService = contextMenuService;
        this.disabled = false;
        this.visible = true;
        this.text = "";
    }
    /**
     * After view init lifecycle. Initialize submenu items
     * @return {?}
     */
    ngAfterViewInit() {
        if (this.parent != null && this.parent.getParentView() != null) {
            (/** @type {?} */ (this.parent.getParentView())).registerPopupMenu(this);
        }
        else {
            this.convertSubMenuItems(null);
        }
    }
    /**
     * Delegate to [[ContextMenuService]] getContextMenuItems method
     * @return {?}
     */
    getMenuItems() {
        return this.contextMenuService.getContextMenuItems(this.id);
    }
    /**
     * Convert all sub menu items ([[MenuItemDirective]]) to [[MenuItem]]
     * @param {?} parentScreenId Id of parent view component
     * @return {?}
     */
    convertSubMenuItems(parentScreenId) {
        /** @type {?} */
        let menuItems = [];
        if (this.subMenuItems) {
            menuItems = this.subMenuItems.map(item => item.toMenuItem(parentScreenId));
        }
        this.contextMenuService.registerContextMenu(this.id, menuItems, parentScreenId);
    }
}
PopupMenuDirective.decorators = [
    { type: Directive, args: [{
                selector: 'vt-popup-menu'
            },] }
];
/** @nocollapse */
PopupMenuDirective.ctorParameters = () => [
    { type: BaseComponent, decorators: [{ type: Optional }] },
    { type: ContextMenuService }
];
PopupMenuDirective.propDecorators = {
    idName: [{ type: Input }],
    id: [{ type: Input }],
    disabled: [{ type: Input }],
    visible: [{ type: Input }],
    text: [{ type: Input }],
    subMenuItems: [{ type: ContentChildren, args: [MenuItemDirective,] }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class PopupMenuModule {
}
PopupMenuModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    BsDropdownModule.forRoot()
                ],
                declarations: [
                    PopupMenuComponent,
                    MenuItemDirective,
                    MenuItemComponent,
                    MenuDirective,
                    PopupMenuContainerComponent,
                    PopupMenuDirective
                ],
                exports: [
                    PopupMenuComponent,
                    MenuItemDirective,
                    MenuItemComponent,
                    MenuDirective,
                    BsDropdownModule,
                    PopupMenuContainerComponent,
                    PopupMenuDirective
                ],
                providers: [
                    ContextMenuService
                ],
                schemas: [CUSTOM_ELEMENTS_SCHEMA]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Class for bottom/right split-pane section
 */
class BottomPaneComponent {
    constructor() { }
    /**
     * @return {?}
     */
    ngOnInit() {
    }
}
BottomPaneComponent.decorators = [
    { type: Component, args: [{
                selector: 'vt-bottom',
                template: "<ng-template>\n  <ng-content></ng-content>\n</ng-template>",
                styles: [""]
            }] }
];
/** @nocollapse */
BottomPaneComponent.ctorParameters = () => [];
BottomPaneComponent.propDecorators = {
    content: [{ type: ViewChild, args: [TemplateRef,] }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Class for top/left split-pane section
 */
class TopPaneComponent {
    constructor() { }
    /**
     * @return {?}
     */
    ngOnInit() {
    }
}
TopPaneComponent.decorators = [
    { type: Component, args: [{
                selector: 'vt-top',
                template: "<ng-template>\n  <ng-content></ng-content>\n</ng-template>",
                styles: [""]
            }] }
];
/** @nocollapse */
TopPaneComponent.ctorParameters = () => [];
TopPaneComponent.propDecorators = {
    content: [{ type: ViewChild, args: [TemplateRef,] }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * Class for split resizable panes
 */
class SplitPaneComponent extends BaseComponent {
    /**
     *
     * @param {?} parent see [[BaseComponent]] constructor
     * @param {?} sessionService see [[BaseComponent]] constructor
     * @param {?} elementRef see [[BaseComponent]] constructor
     * @param {?} renderer see [[BaseComponent]] constructor
     * @param {?} zone Inject [[NgZone]] reference
     * @param {?} cd Inject [[ChangeDetectorRef]]
     */
    constructor(parent, sessionService, elementRef, renderer, zone, cd) {
        super(parent, sessionService, elementRef, renderer);
        this.zone = zone;
        this.cd = cd;
        /**
         * 'horizontal' = top/bottom panes, 'vertical' = left/right panes
         */
        this.orientation = 'horizontal';
        /**
         * Where the divider position should be set
         */
        this.splitPosition = '50%';
        this._noScroll = false;
        this.dividerStyles = {};
        this.topPaneStyles = {};
        this.bottomPaneStyles = {};
        this.dividerCssClass = ["split-pane-divider"];
        this._resizeOn = false;
        this._prevPos = -1;
        this._update = false;
        this._handleMouseMove = throttle((event) => {
            this._resizePanels(event);
        }, 150);
        this._handleMouseDown = (event) => {
            this.zone.runOutsideAngular(() => {
                document.addEventListener('mousemove', this._handleMouseMove, true);
            });
            if (this.orientation === "vertical") {
                this._prevPos = event.pageX;
            }
            else {
                this._prevPos = event.pageY;
            }
            this._resizeOn = true;
            this._update = false;
        };
        this._handleMouseUp = (event) => {
            this.zone.runOutsideAngular(() => {
                document.removeEventListener("mousemove", this._handleMouseMove, true);
            });
            this._resizeOn = false;
            this._update = true;
        };
    }
    /**
     * Set true, in case of cascading split pane
     * @param {?} value
     * @return {?}
     */
    set noScroll(value) {
        this._noScroll = value;
        this.topPaneStyles['overflow'] = value ? 'hidden' : 'inherit';
        this.bottomPaneStyles['overflow'] = value ? 'hidden' : 'inherit';
    }
    /**
     * @return {?}
     */
    get noScroll() { return this._noScroll; }
    /**
     * Init lifecycle. Set panel width
     * @return {?}
     */
    ngOnInit() {
        super.ngOnInit();
        this.setPaneWidth();
    }
    /**
     * @return {?}
     */
    moveUp() {
        if (this.orientation === 'horizontal') {
            this.renderer.setStyle(this.topPaneElement.nativeElement, "height", "0%");
            this.renderer.setStyle(this.bottomPaneElement.nativeElement, "height", "calc(100% - 13px)");
        }
        else {
            this.renderer.setStyle(this.topPaneElement.nativeElement, "width", "calc(100% - 13px)");
            this.renderer.setStyle(this.bottomPaneElement.nativeElement, "width", "0%");
        }
    }
    /**
     * @return {?}
     */
    moveDown() {
        if (this.orientation === 'horizontal') {
            this.renderer.setStyle(this.topPaneElement.nativeElement, "height", "calc(100% - 13px)");
            this.renderer.setStyle(this.bottomPaneElement.nativeElement, "height", "0%");
        }
        else {
            this.renderer.setStyle(this.topPaneElement.nativeElement, "width", "0%");
            this.renderer.setStyle(this.bottomPaneElement.nativeElement, "width", "calc(100% - 13px)");
        }
    }
    /**
     * Check if this is a container component
     * @return {?} True
     */
    isContainer() {
        return true;
    }
    /**
     * Set pane layout and dimensions
     * @return {?}
     */
    setPaneWidth() {
        if (this.orientation === 'vertical') {
            this.dividerStyles["height"] = "100%";
            this.dividerStyles["width"] = "1px";
            this.dividerStyles['float'] = 'left';
            this.topPaneStyles['width'] = 'calc(' + this.splitPosition + ' - 3px)';
            this.topPaneStyles['height'] = "100%";
            this.topPaneStyles['float'] = 'left';
            /** @type {?} */
            let percent = this.splitPosition.split('%', 1)[0];
            /** @type {?} */
            let nPercent = +percent;
            this.bottomPaneStyles['width'] = 'calc(' + (100 - nPercent) + '% - 10px)';
            this.bottomPaneStyles['height'] = "100%";
            this.bottomPaneStyles['float'] = 'left';
            this.dividerCssClass.push("vertical");
        }
        else {
            this.dividerStyles["height"] = "8px";
            this.dividerStyles["width"] = "100%";
            this.topPaneStyles['height'] = 'calc(' + this.splitPosition + ' - 3px)';
            this.topPaneStyles['width'] = "100%";
            /** @type {?} */
            let percent = this.splitPosition.split('%', 1)[0];
            /** @type {?} */
            let nPercent = +percent;
            this.bottomPaneStyles['height'] = 'calc(' + (100 - nPercent) + '% - 10px)';
            this.bottomPaneStyles['width'] = "100%";
            this.dividerCssClass.push("horizontal");
        }
    }
    /**
     * After view init lifecycle. Add event listeners
     * @return {?}
     */
    ngAfterViewInit() {
        super.ngAfterViewInit();
        this.cd.detectChanges();
        this.zone.runOutsideAngular(() => {
            (/** @type {?} */ (this.splitPaneDivider.nativeElement)).addEventListener("mousedown", this._handleMouseDown, true);
            document.addEventListener("mouseup", this._handleMouseUp, true);
        });
    }
    /**
     * Destroy lifecycle. Remove event listeners
     * @return {?}
     */
    ngOnDestroy() {
        this.zone.runOutsideAngular(() => {
            (/** @type {?} */ (this.splitPaneDivider.nativeElement)).removeEventListener("mousedown", this._handleMouseDown, true);
            document.removeEventListener("mouseup", this._handleMouseUp, true);
            document.removeEventListener("mousemove", this._handleMouseMove, true);
        });
        this._handleMouseDown = null;
        this._handleMouseMove = null;
        this._handleMouseUp = null;
        super.ngOnDestroy();
    }
    /**
     * Event handler for panel resize event
     * @param {?} event Mouse event
     * @return {?}
     */
    _resizePanels(event) {
        if (!this._update) {
            if (this._containerWidth == null) {
                /** @type {?} */
                const c = $(this.splitPaneContainer.nativeElement);
                this._containerHeight = c.height();
                this._containerWidth = c.width();
            }
            this._update = true;
            requestAnimationFrame(() => this._doUpdate(event));
        }
    }
    /**
     * Event handler for mouse event. Update pane width/height
     * @param {?} event Mouse event
     * @return {?}
     */
    _doUpdate(event) {
        if (this._resizeOn === true) {
            if (this.orientation === "vertical") {
                /** @type {?} */
                const diff = this._prevPos - event.pageX;
                /** @type {?} */
                const leftWidth = ($(this.topPaneElement.nativeElement).width() - diff);
                this._containerWidth = $(this.splitPaneContainer.nativeElement).width();
                /** @type {?} */
                let left = (leftWidth / this._containerWidth) * 100;
                /** @type {?} */
                let maximum = (leftWidth / (this._containerWidth - 15)) * 100;
                if (maximum > 100)
                    this.renderer.setStyle(this.topPaneElement.nativeElement, "width", "calc(100% - 13px)");
                else
                    this.renderer.setStyle(this.topPaneElement.nativeElement, "width", left + "%");
                // this.renderer.setStyle(this.bottomPaneElement.nativeElement, "width", (this._containerWidth - (leftWidth + 6)) + "px");
                this.renderer.setStyle(this.bottomPaneElement.nativeElement, "width", "calc(" + (100 - left) + "% - 13px)");
                this._prevPos = event.pageX;
            }
            else {
                /** @type {?} */
                const diff = this._prevPos - event.pageY;
                /** @type {?} */
                const topHeight = ($(this.topPaneElement.nativeElement).height() - diff);
                this._containerHeight = $(this.splitPaneContainer.nativeElement).height();
                /** @type {?} */
                let top = (topHeight / this._containerHeight) * 100;
                /** @type {?} */
                let maximum = (topHeight / (this._containerHeight - 15)) * 100;
                if (maximum > 100)
                    this.renderer.setStyle(this.topPaneElement.nativeElement, "height", "calc(100% - 13px");
                else
                    this.renderer.setStyle(this.topPaneElement.nativeElement, "height", top + "%");
                // this.renderer.setStyle(this.bottomPaneElement.nativeElement, "height", (this._containerHeight - (topHeight + 10)) + "px");
                this.renderer.setStyle(this.bottomPaneElement.nativeElement, "height", "calc(" + (100 - top) + "% - 13px)");
                this._prevPos = event.pageY;
            }
            this._update = false;
        }
    }
}
SplitPaneComponent.decorators = [
    { type: Component, args: [{
                selector: 'vt-split-pane',
                template: "<div\n  class=\"vt-split-pane\"\n  id=\"{{id}}\"\n  [ngClass]=\"cssClass\"\n  [style.height]=\"controlHeight\"\n  [style.width.px]=\"controlWidth\"\n  #splitPaneContainer\n>\n  <section #topPaneSection class=\"top-pane\" *ngIf=\"topPane != null\" [ngStyle]=\"topPaneStyles\">\n    <ng-container *ngTemplateOutlet=\"topPane.content\" #containerTopTemplate></ng-container>\n  </section>\n  <div #splitPaneDivider [ngClass]=\"dividerCssClass\" [ngStyle]=\"dividerStyles\">\n    <span class=\"arrow left pull-left\" (click)=\"moveDown()\">\u2228</span>\n    <span class=\"arrow center\" style=\"font-size: 10pt;vertical-align: top;\">\uFF1D</span>\n    <span class=\"arrow right pull-right\" (click)=\"moveUp()\">\u2227</span>\n  </div>\n  <section #bottomPaneSection class=\"bottom-pane\" *ngIf=\"bottomPane != null\" [ngStyle]=\"bottomPaneStyles\">\n    <ng-container *ngTemplateOutlet=\"bottomPane.content\" #containerBottomTemplate></ng-container>\n  </section>\n</div>\n",
                changeDetection: ChangeDetectionStrategy.OnPush,
                providers: [
                    {
                        provide: BaseComponent,
                        useExisting: forwardRef(() => SplitPaneComponent)
                    }
                ],
                styles: [".split-pane-divider{background-image:linear-gradient(#eff1f1,#cad5db);border:1px solid silver;box-sizing:content-box;overflow:hidden}.split-pane-divider .center{margin-left:0}.split-pane-divider.horizontal{margin:0;background:#cecece;background:linear-gradient(to bottom,#eff1f1,#cad5db)}.split-pane-divider.horizontal .arrow{font-size:10px;line-height:8px}.split-pane-divider.horizontal .center{position:relative;left:calc(50% - 9px);font-size:15px}.split-pane-divider.vertical{width:6px!important;height:calc(100% - 12px)!important;margin-top:5px;background:#cecece;background:linear-gradient(to right,#eff1f1,#cad5db)}.split-pane-divider.vertical:hover{cursor:ew-resize}.split-pane-divider.horizontal:hover{cursor:ns-resize}section.top-pane{overflow:auto}"]
            }] }
];
/** @nocollapse */
SplitPaneComponent.ctorParameters = () => [
    { type: BaseComponent, decorators: [{ type: Optional }, { type: SkipSelf }] },
    { type: SessionService },
    { type: ElementRef },
    { type: Renderer2 },
    { type: NgZone },
    { type: ChangeDetectorRef }
];
SplitPaneComponent.propDecorators = {
    orientation: [{ type: Input }],
    splitPosition: [{ type: Input }],
    noScroll: [{ type: Input }],
    topPaneElement: [{ type: ViewChild, args: ["topPaneSection", { read: ElementRef },] }],
    splitPaneDivider: [{ type: ViewChild, args: ["splitPaneDivider", { read: ElementRef },] }],
    bottomPaneElement: [{ type: ViewChild, args: ["bottomPaneSection", { read: ElementRef },] }],
    splitPaneContainer: [{ type: ViewChild, args: ["splitPaneContainer", { read: ElementRef },] }],
    topPane: [{ type: ContentChild, args: [TopPaneComponent,] }],
    bottomPane: [{ type: ContentChild, args: [BottomPaneComponent,] }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
class SplitPaneModule {
}
SplitPaneModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule
                ],
                declarations: [
                    SplitPaneComponent,
                    TopPaneComponent,
                    BottomPaneComponent
                ],
                exports: [
                    SplitPaneComponent,
                    TopPaneComponent,
                    BottomPaneComponent
                ]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * @abstract
 */
class CustomAttribute {
    /**
     * @param {?} parent
     */
    constructor(parent) {
        this.parent = parent;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        /** @type {?} */
        const name = this.getPropertyName();
        /** @type {?} */
        let value = this.getPropertyValue();
        if (this.parent != null && name != null && name !== "") {
            if (value == null) {
                value = "";
            }
            this.parent.setCustomAttribute(name, value);
        }
        else if (this.parent == null) {
            console.error("Unable to set custom property, parent is null");
        }
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

export { appInjector, AttributesEnum, BaseComponent, BaseModule, ComponentType, AttributeChangeEvent, AppUtils, ButtonComponent, ButtonModule, CheckboxComponent, CheckboxModule, ClientEvent, ComboBoxComponent, ComboBoxModule, FauxComboElement, DialogComponent, DialogModule, DraggableDirective, EventHandlerModule, EventHandlerService, GridColumnDirective, HorizontalSeparatorModule, HorizontalSeparatorComponent, Integer, JavaModule, JavaUtils, IllegalArgumentException, DateFormat, LabelComponent, LabelModule, LayoutModule, LinkModule, ListBoxDirective, ListItemDirective, Long, McoContainerModule, McoContainerService, MomentUtils, UiDocument, Logger, DynamicModule, DynamicElementBuilder, PanelComponent, RadioButtonComponent, RadioButtonModule, ScrollPaneComponent, ScrollPaneModule, SessionModule, SessionService, StringBuilder, TableComponent, TableModule, TabPaneModule, TabPaneComponent, TabComponent, TextAreaComponent, TextAreaModule, TextFieldComponent, TextFieldModule, TreeTableComponent, TreeTableModule, HTMLElementWrapper, Vector, HashMap, Hashtable, ViewComponent, ViewModule, DynamicPagesService, PopupMenuModule, PopupMenuComponent, MenuItemBuilder, SplitPaneModule, SplitPaneComponent, TopPaneComponent, BottomPaneComponent, KeyboardModule, ArrowNavigatableContainerDirective, ArrowNavigatableItemDirective, CustomAttribute, TableColumnDirective, isIE, OnCreateDirective as ɵb, ClipboardModule as ɵl, ClipboardService as ɵk, DynamicComponent as ɵd, LinkComponent as ɵc, ContextMenuService as ɵa, MenuItemDirective as ɵo, MenuItemComponent as ɵp, MenuDirective as ɵq, PopupMenuContainerComponent as ɵr, PopupMenuDirective as ɵs, TabHostDirective as ɵn, FooterRowDirective as ɵi, HeaderDirective as ɵg, LockedColumnDirective as ɵm, RowDirective as ɵj, TableCellDirective as ɵe, TableHeaderDirective as ɵf, TableRowDefDirective as ɵh };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidml2aWZ5LWNvcmUtY29tcG9uZW50cy5qcy5tYXAiLCJzb3VyY2VzIjpbIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvc2Vzc2lvbi9hcHAtaW5qZWN0b3IudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL2Jhc2UvYXR0cmlidXRlcy5lbnVtLnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy9iYXNlL2tleS11dGlscy50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvbWNvLWNvbnRhaW5lci9tY28tY29udGFpbmVyLnNlcnZpY2UudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL2V2ZW50LWhhbmRsZXIvZXZlbnQtaGFuZGxlci5zZXJ2aWNlLnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy9wb3B1cC1tZW51L21lbnUtaXRlbS1idWlsZGVyLnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy9wb3B1cC1tZW51L2NvbnRleHQtbWVudS5zZXJ2aWNlLnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy9zZXNzaW9uL3Nlc3Npb24uc2VydmljZS50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvamF2YS9pbGxlZ2FsLWFyZ3VtZW50LWV4Y2VwdGlvbi50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvamF2YS9qYXZhLXV0aWxzLnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy9ldmVudC1oYW5kbGVyL2NsaWVudC1ldmVudC50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvamF2YS9saXN0LWl0ZXJhdG9yLnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy9qYXZhL3ZlY3Rvci50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvYmFzZS9hdHRyaWJ1dGUtY2hhbmdlLWV2ZW50LnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy9iYXNlL2FwcC11dGlscy50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvamF2YS9oYXNoLW1hcC50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvamF2YS9oYXNodGFibGUudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL2Jhc2UvbG9nZ2VyLnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy9iYXNlL2Jhc2UuY29tcG9uZW50LnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy9tY28tY29udGFpbmVyL21jby1jb250YWluZXIubW9kdWxlLnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy9ldmVudC1oYW5kbGVyL2V2ZW50LWhhbmRsZXIubW9kdWxlLnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy9zZXNzaW9uL3Nlc3Npb24ubW9kdWxlLnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy9qYXZhL2phdmEubW9kdWxlLnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy9iYXNlL29uLWNyZWF0ZS5kaXJlY3RpdmUudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL2Jhc2UvYmFzZS5tb2R1bGUudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL2Jhc2UvY29tcG9uZW50LXR5cGUuZW51bS50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvYnV0dG9uL2J1dHRvbi5jb21wb25lbnQudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL2J1dHRvbi9idXR0b24ubW9kdWxlLnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy9jaGVja2JveC9jaGVja2JveC5jb21wb25lbnQudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL2NoZWNrYm94L2NoZWNrYm94Lm1vZHVsZS50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvY29tYm8tYm94L2xpc3QtaXRlbS5kaXJlY3RpdmUudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL2NvbWJvLWJveC9saXN0LWJveC5kaXJlY3RpdmUudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL2NvbWJvLWJveC9mYXV4LWNvbWJvLWVsZW1lbnQudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL2NvbWJvLWJveC9jb21iby1ib3guY29tcG9uZW50LnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy9rZXlib2FyZC9hcnJvdy1uYXZpZ2F0YWJsZS1pdGVtLmRpcmVjdGl2ZS50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMva2V5Ym9hcmQvYXJyb3ctbmF2aWdhdGFibGUtY29udGFpbmVyLmRpcmVjdGl2ZS50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMva2V5Ym9hcmQva2V5Ym9hcmQubW9kdWxlLnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy9jb21iby1ib3gvY29tYm8tYm94Lm1vZHVsZS50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvZGlhbG9nL2RyYWdnYWJsZS5kaXJlY3RpdmUudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL3ZpZXcvZHluYW1pYy1wYWdlcy5zZXJ2aWNlLnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy9iYXNlL3VpLWRvY3VtZW50LnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy9kaWFsb2cvZGlhbG9nLmNvbXBvbmVudC50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvZGlhbG9nL2RpYWxvZy5tb2R1bGUudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL2xheW91dC9ncmlkLWNvbHVtbi5kaXJlY3RpdmUudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL2hvcml6b250YWwtc2VwYXJhdG9yL2hvcml6b250YWwtc2VwYXJhdG9yLmNvbXBvbmVudC50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvaG9yaXpvbnRhbC1zZXBhcmF0b3IvaG9yaXpvbnRhbC1zZXBhcmF0b3IubW9kdWxlLnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy9qYXZhL2ludGVnZXIudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL2phdmEvZGF0ZS1mb3JtYXQudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL2xhYmVsL2xhYmVsLmNvbXBvbmVudC50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvbGFiZWwvbGFiZWwubW9kdWxlLnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy9sYXlvdXQvcGFuZWwuY29tcG9uZW50LnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy9sYXlvdXQvbGF5b3V0Lm1vZHVsZS50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvbGluay9saW5rLmNvbXBvbmVudC50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvbGluay9saW5rLm1vZHVsZS50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvamF2YS9sb25nLnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy9iYXNlL21vbWVudC11dGlscy50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvZHluYW1pYy9keW5hbWljLmNvbXBvbmVudC50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvdGV4dC1maWVsZC90ZXh0LWZpZWxkLmNvbXBvbmVudC50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvdGV4dC1maWVsZC90ZXh0LWZpZWxkLm1vZHVsZS50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvZHluYW1pYy9keW5hbWljLm1vZHVsZS50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvZHluYW1pYy9keW5hbWljLWVsZW1lbnQuYnVpbGRlci50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvcmFkaW8tYnV0dG9uL3JhZGlvLWJ1dHRvbi5jb21wb25lbnQudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL3JhZGlvLWJ1dHRvbi9yYWRpby1idXR0b24ubW9kdWxlLnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy9zY3JvbGwtcGFuZS9zY3JvbGwtcGFuZS5jb21wb25lbnQudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL3Njcm9sbC1wYW5lL3Njcm9sbC1wYW5lLm1vZHVsZS50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvamF2YS9zdHJpbmctYnVpbGRlci50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvdGFibGUvdGFibGUtY2VsbC5kaXJlY3RpdmUudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL3RhYmxlL3RhYmxlLWhlYWRlci5kaXJlY3RpdmUudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL3RhYmxlL2hlYWRlci5kaXJlY3RpdmUudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL3RhYmxlL3RhYmxlLWNvbHVtbi5kaXJlY3RpdmUudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL3RhYmxlL3RhYmxlLXNlbGVjdGlvbi1ldmVudC50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvdHJlZS10YWJsZS9odG1sLWVsZW1lbnQtd3JhcHBlci50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvdGFibGUvdGFibGUtcm93LWRlZi5kaXJlY3RpdmUudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL3RhYmxlL2Zvb3Rlci1yb3cuZGlyZWN0aXZlLnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy90YWJsZS9yb3cuZGlyZWN0aXZlLnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy9jbGlwYm9hcmQvY2xpcGJvYXJkLnNlcnZpY2UudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9mdW5jdGlvbnMvaXMtaWUudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL3RhYmxlL3RhYmxlLmNvbXBvbmVudC50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvdGFibGUvbG9ja2VkLWNvbHVtbi5kaXJlY3RpdmUudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL2NsaXBib2FyZC9jbGlwYm9hcmQubW9kdWxlLnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy90YWJsZS90YWJsZS5tb2R1bGUudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL3RhYi1wYW5lL3RhYi90YWIuY29tcG9uZW50LnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy90YWItcGFuZS90YWItcGFuZS5jb21wb25lbnQudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL3RhYi1wYW5lL3RhYi90YWItaG9zdC5kaXJlY3RpdmUudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL3RhYi1wYW5lL3RhYi1wYW5lLm1vZHVsZS50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvdGV4dC1hcmVhL3RleHQtYXJlYS5jb21wb25lbnQudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL3RleHQtYXJlYS90ZXh0LWFyZWEubW9kdWxlLnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy90cmVlLXRhYmxlL3RyZWUtdGFibGUuY29tcG9uZW50LnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy90cmVlLXRhYmxlL3RyZWUtdGFibGUubW9kdWxlLnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy92aWV3L3ZpZXcuY29tcG9uZW50LnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy92aWV3L3ZpZXcubW9kdWxlLnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy9wb3B1cC1tZW51L3BvcHVwLW1lbnUuY29tcG9uZW50LnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy9wb3B1cC1tZW51L21lbnUtaXRlbS5kaXJlY3RpdmUudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL3BvcHVwLW1lbnUvbWVudS1pdGVtL21lbnUtaXRlbS5jb21wb25lbnQudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL3BvcHVwLW1lbnUvbWVudS5kaXJlY3RpdmUudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL3BvcHVwLW1lbnUvcG9wdXAtbWVudS1jb250YWluZXIvcG9wdXAtbWVudS1jb250YWluZXIuY29tcG9uZW50LnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy9wb3B1cC1tZW51L3BvcHVwLW1lbnUuZGlyZWN0aXZlLnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy9wb3B1cC1tZW51L3BvcHVwLW1lbnUubW9kdWxlLnRzIiwibmc6Ly92aXZpZnktY29yZS1jb21wb25lbnRzL3NyYy9hcHAvbW9kdWxlcy9zcGxpdC1wYW5lL2JvdHRvbS1wYW5lL2JvdHRvbS1wYW5lLmNvbXBvbmVudC50cyIsIm5nOi8vdml2aWZ5LWNvcmUtY29tcG9uZW50cy9zcmMvYXBwL21vZHVsZXMvc3BsaXQtcGFuZS90b3AtcGFuZS90b3AtcGFuZS5jb21wb25lbnQudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL3NwbGl0LXBhbmUvc3BsaXQtcGFuZS5jb21wb25lbnQudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL3NwbGl0LXBhbmUvc3BsaXQtcGFuZS5tb2R1bGUudHMiLCJuZzovL3ZpdmlmeS1jb3JlLWNvbXBvbmVudHMvc3JjL2FwcC9tb2R1bGVzL2Jhc2UvY3VzdG9tLWF0dHJpYnV0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RvciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG4vKipcbiAqIFRoaXMgY29uc3RhbnQgcHJvdmlkZSBhIGdsb2JhbCBhY2Nlc3MgdG8gaW5qZWN0b3Igc28gd2UgY2FuIHVzZSBpdCB0byByZXRyaWV2ZVxuICogc2VydmljZSBmcm9tIHBsYWNlIHdoZXJlIHdlIGNhbid0IGluamVjdCAobGlrZSBmdW5jdGlvbikuXG4gKlxuICogISEhISEhISEhISEhISFETyBOT1QgVVNFIFRISVMgSU4gUExBQ0VTIFdIRVJFIFlPVSBDQU4gSU5KRUNUIFNFUlZJQ0VTISEhISEhISEhISFcbiAqL1xubGV0IGluamVjdG9yUmVmOiBJbmplY3RvcjtcblxuZXhwb3J0IGNvbnN0IGFwcEluamVjdG9yID0gKGluamVjdG9yPzogSW5qZWN0b3IpOiBJbmplY3RvciA9PiB7XG4gICAgaWYgKGluamVjdG9yKSB7XG4gICAgICAgIGluamVjdG9yUmVmID0gaW5qZWN0b3I7XG4gICAgfVxuXG4gICAgcmV0dXJuIGluamVjdG9yUmVmO1xufVxuIiwiZXhwb3J0IGVudW0gQXR0cmlidXRlc0VudW0ge1xuICBJRCxcbiAgVklTSUJMRSxcbiAgQ0xBU1MsXG4gIERJU0FCTEVELFxuICBFTkFCTEVELFxuICBURVhULFxuICBDT0xPUixcbiAgT05fQ09NTUFORCxcbiAgUkVRVUlSRSxcbiAgVElUTEUsXG4gIEZPTlRfQk9MRCxcbiAgU0VMRUNURUQsXG4gIEJHX0NPTE9SLFxuICBWQUxVRSxcbiAgUEFUVEVSTixcbiAgTUFYX0xFTkdUSCxcbiAgTUFYLFxuICBNSU5cbn1cbiIsImV4cG9ydCBjbGFzcyBLZXlVdGlscyB7XG4gIC8qKlxuICAgKiBNYWtlIGtleSBjYXNlIGluc2Vuc2l0aXZlXG4gICAqIEBwYXJhbSBrZXlcbiAgICovXG4gIHN0YXRpYyB0b01hcEtleShrZXk6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKGtleSAhPSBudWxsKSB7XG4gICAgICByZXR1cm4ga2V5LnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBzdGF0aWMgdG9Kc29uVmFsdWUodmFsOiBhbnkpOiBzdHJpbmcge1xuICAgIGlmICh0eXBlb2YgdmFsID09PSBcIm51bWJlclwiIHx8IHR5cGVvZiB2YWwgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgICByZXR1cm4gdmFsICsgXCJcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHZhbDtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEtleVV0aWxzIH0gZnJvbSAnLi4vYmFzZS9rZXktdXRpbHMnO1xuaW1wb3J0IHsgVmlld0NvbXBvbmVudCB9IGZyb20gJy4uL3ZpZXcvdmlldy5jb21wb25lbnQnO1xuaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgVmlld0NoYW5nZWRFdmVudCB9IGZyb20gJy4vdmlldy1jaGFuZ2VkLmV2ZW50JztcblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgTWNvQ29udGFpbmVyU2VydmljZSB7XG4gIC8qKlxuICAgKiBLZWVwcyBpbnRlcm5hbCBsaXN0IG9mIGFjdGl2ZSBWaWV3Q29tcG9uZW50c1xuICAgKi9cbiAgcHJpdmF0ZSBhY3RpdmVWaWV3c1N0YWNrOiBBcnJheTxWaWV3Q29tcG9uZW50PiA9IFtdO1xuXG4gIC8vc3RvcmVkIGFjdGlvbkZvcndhcmRIYW5kbGVyIChlLmcuIGEgc3ViIHZpZXcpIHRoYXQgZG9lcyBub3QgaGF2ZSBhbiBOWE1MXG4gIHByaXZhdGUgYWN0aW9uRm9yd2FyZEhhbmRsZXI6IE1hcDxzdHJpbmcsIFZpZXdDb21wb25lbnQ+O1xuXG4gIC8qKlxuICAgKiBJbnRlcm5hbCBtYXAgb2YgTUNPIGluc3RhbmNlc1xuICAgKi9cbiAgcHJpdmF0ZSBfbWNvTWFwOiBNYXA8c3RyaW5nLCBhbnk+ID0gbmV3IE1hcDxzdHJpbmcsIGFueT4oKTtcbiAgcHJpdmF0ZSByZWFkb25seSBNSU5fWl9JTkRFWCA9IDEwMDA7XG4gIHByaXZhdGUgcmVhZG9ubHkgTUFYX1pfSU5ERVggPSA5OTk5OTtcbiAgLy8xMDUwIGlzIGZvciBhY3R1YWwgbW9kYWxcblxuICB2aWV3c0NoYW5nZWQgPSBuZXcgU3ViamVjdDxWaWV3Q2hhbmdlZEV2ZW50PigpO1xuXG4gIC8qKlxuICAgKiBHZXQgbWNvIGluc3RhbmNlIGZyb20gaW50ZXJuYWwgW1tfbWNvTWFwXV1cbiAgICogQHBhcmFtIG1jb05hbWUgTmFtZSBvZiBNQ08gaW5zdGFuY2VcbiAgICovXG4gIGdldE1jbyhtY29OYW1lOiBzdHJpbmcpOiBhbnkge1xuICAgIHJldHVybiB0aGlzLl9tY29NYXAuZ2V0KEtleVV0aWxzLnRvTWFwS2V5KG1jb05hbWUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1heGltdW0gYWxsb3dlZCB6LWluZGV4IHZhbHVlIGZvciBsYXllcmluZyB3aW5kb3dzXG4gICAqL1xuICBnZXRNYXhaSW5kZXgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5NQVhfWl9JTkRFWDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbGlhcyBvZiBbW3JlZ2lzdGVyTWNvXV1cbiAgICogQHBhcmFtIG1jb05hbWVcbiAgICogQHBhcmFtIG1jb1xuICAgKi9cbiAgYWRkTWNvKG1jb05hbWU6IHN0cmluZywgbWNvOiBhbnkpIHtcbiAgICB0aGlzLnJlZ2lzdGVyTWNvKG1jb05hbWUsIG1jbyk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGFuIG1jbyBpbnN0YW5jZSB0byBpbnRlcm5hbCBbW19tY29NYXBdXVxuICAgKiBAcGFyYW0gbWNvTmFtZVxuICAgKiBAcGFyYW0gbWNvXG4gICAqL1xuICByZWdpc3Rlck1jbyhtY29OYW1lOiBzdHJpbmcsIG1jbzogYW55KSB7XG4gICAgdGhpcy5fbWNvTWFwLnNldChLZXlVdGlscy50b01hcEtleShtY29OYW1lKSwgbWNvKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgbWNvIG9iamVjdCBmcm9tIGludGVybmFsIFtbX21jb01hcF1dXG4gICAqIEBwYXJhbSBtY29OYW1lIE5hbWUgb2YgbWNvIGluc3RhbmNlIHRvIHJlbW92ZVxuICAgKi9cbiAgcmVtb3ZlTWNvKG1jb05hbWU6IHN0cmluZykge1xuICAgIGNvbnN0IGtleSA9IEtleVV0aWxzLnRvTWFwS2V5KG1jb05hbWUpO1xuICAgIGNvbnN0IG1jbyA9IHRoaXMuX21jb01hcC5nZXQoa2V5KTtcblxuICAgIGlmIChtY28gIT0gbnVsbCAmJiB0eXBlb2YgbWNvW1wiY2xlYW51cFwiXSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBtY28uY2xlYW51cCgpO1xuICAgIH1cblxuICAgIHRoaXMuX21jb01hcC5kZWxldGUoa2V5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQdXNoIHZpZXcgdG8gdGhlIGxhc3QgYWN0aXZlIHZpZXcgc3RhY2suIFRoaXMgd2lsbCBiZSB0aGUgdmlldyB0aGF0IHJldHVybmVkXG4gICAqIHdoZW4gcG9wTGFzdEFjdGl2ZVZpZXcgaXMgY2FsbGVkLlxuICAgKlxuICAgKiBAcGFyYW0gdmlldyBWaWV3Q29tcG9uZW50IHRvIGJlIGFkZCB0byB0aGUgc3RhY2tcbiAgICovXG4gIHJlZ2lzdGVyVmlldyh2aWV3OiBWaWV3Q29tcG9uZW50KSB7XG4gICAgaWYgKHZpZXcuY2FuQmVBY3RpdmVWaWV3ICE9PSB0cnVlKSB7XG4gICAgICAvLyB0aGlzLmFjdGl2ZVZpZXdzU3RhY2suc3BsaWNlKDAsIDAsIHZpZXcpO1xuICAgICAgLy8gdmlldy56SW5kZXggPSB0aGlzLk1JTl9aX0lOREVYIC0gdGhpcy5hY3RpdmVWaWV3c0NvdW50KCk7XG4gICAgICBpZiAodGhpcy5hY3Rpb25Gb3J3YXJkSGFuZGxlciA9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuYWN0aW9uRm9yd2FyZEhhbmRsZXIgPSBuZXcgTWFwPHN0cmluZywgVmlld0NvbXBvbmVudD4oKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuYWN0aW9uRm9yd2FyZEhhbmRsZXIuc2V0KHZpZXcuYWN0aW9uRm9yd2FyZE5hbWUsIHZpZXcpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFjdGl2ZVZpZXdzU3RhY2sucHVzaCh2aWV3KTtcbiAgICAgIHZpZXcuekluZGV4ID0gdGhpcy5nZXRWaWV3WkluZGV4KCk7XG4gICAgfVxuXG4gICAgdGhpcy5hY3RpdmVWaWV3c1N0YWNrID0gXy51bmlxQnkodGhpcy5hY3RpdmVWaWV3c1N0YWNrLCAodik9PnYudW5pcXVlSWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBvcCBsYXN0IGFjdGl2ZSB2aWV3LiBUaGlzIHdpbGwgcmVtb3ZlIHRoZSB2aWV3IGZyb20gdGhlIGFjdGl2ZSBzdGFja1xuICAgKi9cbiAgcG9wTGFzdEFjdGl2ZVZpZXcoKTogVmlld0NvbXBvbmVudCB7XG4gICAgcmV0dXJuIHRoaXMuYWN0aXZlVmlld3NTdGFjay5wb3AoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSB2aWV3IHRoYXQgaGFzIGJlZW4gZGVzdHJveWVkIGZyb20gdGhlIHN0YWNrLlxuICAgKlxuICAgKiBAcGFyYW0gdmlldyBWaWV3Q29tcG9uZW50IHRvIGJlIHJlbW92ZWQgZnJvbSBzdGFja1xuICAgKi9cbiAgcmVtb3ZlVmlldyh2aWV3OiBWaWV3Q29tcG9uZW50KSB7XG4gICAgaWYgKHZpZXcuY2FuQmVBY3RpdmVWaWV3ICE9PSB0cnVlKXtcbiAgICAgIGlmICh0aGlzLmFjdGlvbkZvcndhcmRIYW5kbGVyICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5hY3Rpb25Gb3J3YXJkSGFuZGxlci5kZWxldGUodmlldy5hY3Rpb25Gb3J3YXJkTmFtZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYWN0aXZlVmlld3NTdGFjayA9IF8uZmlsdGVyKHRoaXMuYWN0aXZlVmlld3NTdGFjaywgKHYpPT52LnVuaXF1ZUlkICE9PSB2aWV3LnVuaXF1ZUlkKTtcbiAgICAgIHRoaXMucmVTdGFja1ZpZXcoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTWluaW1pemUgYSB2aWV3IHdpbmRvdyBieSBJRFxuICAgKiBAcGFyYW0gdmlld0lkIElkIG9mIHZpZXcgdG8gbWluaW1pemVcbiAgICogQHBhcmFtIHNjcmVlbkluZGV4IChvcHRpb25hbCkgaW5kZXggb2Ygc2NyZWVuIGlmIG11bHRpIHNjcmVlbiBzdXBwb3J0IGlzIGFsbG93ZWRcbiAgICovXG4gIG1pbmltaXplVmlldyh2aWV3SWQ6IHN0cmluZywgc2NyZWVuSW5kZXg6IG51bWJlciA9IG51bGwpIHtcbiAgICBjb25zdCB2aWV3ID0gdGhpcy5nZXRWaWV3QnlJZCh2aWV3SWQsIHNjcmVlbkluZGV4KTtcblxuICAgIGlmICh2aWV3ICE9IG51bGwpIHtcbiAgICAgIHZpZXcuaXNNaW5pbWl6ZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGxldCBhY3RpdmVWaWV3OiBWaWV3Q29tcG9uZW50ID0gbnVsbDtcbiAgICBsZXQgaXNNb2RhbEFjdGl2ZTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgaWYgKHRoaXMuYWN0aXZlVmlld3NDb3VudCgpID4gMSkge1xuICAgICAgY29uc3QgdmlzaWJsZVZpZXdzID0gdGhpcy5hY3RpdmVWaWV3c1N0YWNrLmZpbHRlcih2PT52LmlzTWluaW1pemVkICE9PSB0cnVlICYmIHYuc2tpcEJyZWFkQ3J1bWIgIT09IHRydWUpO1xuXG4gICAgICBpZiAodmlzaWJsZVZpZXdzICE9IG51bGwgJiYgdmlzaWJsZVZpZXdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYWN0aXZlVmlldyA9IHZpc2libGVWaWV3c1t2aXNpYmxlVmlld3MubGVuZ3RoIC0gMV07XG4gICAgICAgIGxldCBpID0gdmlzaWJsZVZpZXdzLmxlbmd0aCAtIDE7XG4gICAgICAgIC8vIEl0dGVyYXRlIHRocm91Z2ggdmlzaWJpbGUgdmlld3MgdG8gbG9vayBmb3IgdGhlIG5leHQgZGlhbG9nIHZpZXcgKG5vdCBzdWJ2aWV3KVxuICAgICAgICB3aGlsZSAodmlzaWJsZVZpZXdzW2ldICYmICFhY3RpdmVWaWV3LmRpYWxvZykge1xuICAgICAgICAgIGFjdGl2ZVZpZXcgPSB2aXNpYmxlVmlld3NbaV1cbiAgICAgICAgICBpLS07XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY291bnQgPSAwO1xuXG4gICAgICAgIGRvIHtcbiAgICAgICAgICBpZiAodmlzaWJsZVZpZXdzW2NvdW50XSkge1xuICAgICAgICAgICAgaXNNb2RhbEFjdGl2ZSA9IHZpc2libGVWaWV3c1tjb3VudF0uaXNNb2RhbERpYWxvZygpO1xuICAgICAgICAgICAgY291bnQgPSBjb3VudCArIDE7XG4gICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlIChpc01vZGFsQWN0aXZlICE9PSB0cnVlICYmIGNvdW50IDwgdmlzaWJsZVZpZXdzLmxlbmd0aCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy52aWV3c0NoYW5nZWQubmV4dCh7XG4gICAgICB2aWV3czogdGhpcy5nZXRCcmVhZGNydW1iKHRoaXMuYWN0aXZlVmlld3NTdGFjayksXG4gICAgICBhY3RpdmVWaWV3OiBhY3RpdmVWaWV3LFxuICAgICAgbWluTWF4RXZlbnQ6IHRydWUsXG4gICAgICBpc01vZGFsQWN0aXZlOiBpc01vZGFsQWN0aXZlXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2hvd3MgYSB2aWV3IGJ5IGlkXG4gICAqIEBwYXJhbSB2aWV3SWQgSWQgb2YgdmlldyB0byBzaG93XG4gICAqIEBwYXJhbSBzY3JlZW5JbmRleCAob3B0aW9uYWwpIGluZGV4IG9mIHNjcmVlbiBpZiBtdWx0aSBzY3JlZW4gc3VwcG9ydCBpcyBhbGxvd2VkXG4gICAqL1xuICBzaG93Vmlldyh2aWV3SWQ6IHN0cmluZywgc2NyZWVuSW5kZXg6IG51bWJlciA9IG51bGwpIHtcbiAgICBjb25zdCB2aWV3ID0gdGhpcy5nZXRWaWV3QnlJZCh2aWV3SWQsIHNjcmVlbkluZGV4KTtcblxuICAgIGlmICh2aWV3ICE9IG51bGwpIHtcbiAgICAgIHZpZXcuaXNNaW5pbWl6ZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGxldCBpc01vZGFsQWN0aXZlOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBsZXQgY291bnQgPSAwO1xuXG4gICAgZG8ge1xuICAgICAgaWYgKHRoaXMuYWN0aXZlVmlld3NTdGFja1tjb3VudF0pIHtcbiAgICAgICAgaXNNb2RhbEFjdGl2ZSA9IHRoaXMuYWN0aXZlVmlld3NTdGFja1tjb3VudF0uaXNNb2RhbERpYWxvZygpO1xuICAgICAgICBjb3VudCA9IGNvdW50ICsgMTtcbiAgICAgIH1cbiAgICB9IHdoaWxlIChpc01vZGFsQWN0aXZlICE9PSB0cnVlICYmIGNvdW50IDwgdGhpcy5hY3RpdmVWaWV3c1N0YWNrLmxlbmd0aCk7XG5cbiAgICB0aGlzLnZpZXdzQ2hhbmdlZC5uZXh0KHtcbiAgICAgIHZpZXdzOiB0aGlzLmdldEJyZWFkY3J1bWIodGhpcy5hY3RpdmVWaWV3c1N0YWNrKSxcbiAgICAgIGFjdGl2ZVZpZXc6IHZpZXcsXG4gICAgICBtaW5NYXhFdmVudDogdHJ1ZSxcbiAgICAgIGlzTW9kYWxBY3RpdmU6IGlzTW9kYWxBY3RpdmVcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbG9zZSB0aGUgdmlldyB3aW5kb3dcbiAgICogQHBhcmFtIHZpZXdJZCBJZCBvZiB2aWV3IHRvIGNsb3NlXG4gICAqIEBwYXJhbSBzY3JlZW5JbmRleCAob3B0aW9uYWwpIGluZGV4IG9mIHRoZSBzY3JlZW4gaWYgbXVsdGkgc2NyZWVuIHN1cHBvcnRcbiAgICovXG4gIGNsb3NlVmlldyh2aWV3SWQ6IHN0cmluZywgc2NyZWVuSW5kZXg6IG51bWJlciA9IG51bGwpIHtcbiAgICBjb25zdCB2aWV3ID0gdGhpcy5nZXRWaWV3QnlJZCh2aWV3SWQsIHNjcmVlbkluZGV4KTtcblxuICAgIGlmICh2aWV3ICE9IG51bGwpIHtcbiAgICAgIHZpZXcuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBudW1iZXIgb2YgY3VycmVudCBhY3RpdmUgdmlldyBmcm9tIFtbYWN0aXZlVmlld3NTdGFja11dXG4gICAqIEByZXR1cm5zIE51bWJlciBvZiBhY3RpdmUgdmlld3NcbiAgICovXG4gIGFjdGl2ZVZpZXdzQ291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5hY3RpdmVWaWV3c1N0YWNrLmxlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayB0byBzZWUgaWYgYSB2aWV3IGlzIGluIHRoZSBbW2FjdGl2ZVZpZXdTdGFja11dXG4gICAqIEBwYXJhbSB2aWV3IFZpZXdDb21wb25lbnQncyBpZCBhcyBhIHN0cmluZyBvciBbW1ZpZXdDb21wb25lbnRdXSBpbnN0YW5jZVxuICAgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSB2aWV3IGNvbXBvbmVudCBpcyBpbiB0aGUgW1thY3RpdmVWaWV3U3RhY2tdXVxuICAgKi9cbiAgaGFzVmlldyh2aWV3OiBWaWV3Q29tcG9uZW50IHwgc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgaWYgKHR5cGVvZiB2aWV3ID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIF8uZmlsdGVyKHRoaXMuYWN0aXZlVmlld3NTdGFjaywgKHYpPT52LmlkID09PSB2aWV3IGFzIHN0cmluZykubGVuZ3RoID4gMDtcbiAgICB9XG5cbiAgICByZXR1cm4gXy5maWx0ZXIodGhpcy5hY3RpdmVWaWV3c1N0YWNrLCAodik9PnYudW5pcXVlSWQgPT09IHZpZXcudW5pcXVlSWQpLmxlbmd0aCA+IDA7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IGFjdGl2ZSB2aWV3XG4gICAqIEByZXR1cm5zIHRoZSBhY3RpdmUgdmlldyBmcm9tIHRoZSB2aWV3IHN0YWNrXG4gICAqL1xuICBhY3RpdmVWaWV3KCk6IFZpZXdDb21wb25lbnQge1xuICAgIHJldHVybiB0aGlzLmFjdGl2ZVZpZXdzQ291bnQoKSA+IDAgPyB0aGlzLmFjdGl2ZVZpZXdzU3RhY2tbdGhpcy5hY3RpdmVWaWV3c0NvdW50KCkgLSAxXSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgdmlldyBmcm9tIFtbYWN0cml2ZVZpZXdTdGFja11dIGJ5IElEXG4gICAqIEBwYXJhbSB2aWV3SWQgVmlld3MgaWQgdmFsdWVcbiAgICogQHBhcmFtIHNjcmVlbkluZGV4IChvcHRpb25hbCkgdGhlIHNjcmVlbkluZGV4IG9mIHRoZSB2aWV3IChpZiBtdWx0aXBsZSBzY3JlZW4gaXMgYWxsb3cpXG4gICAqIEByZXR1cm5zIFZpZXcgdGhhdCBtYXRjaGVzIHZhbHVlIG9mIGlkXG4gICAqL1xuICBnZXRWaWV3QnlJZCh2aWV3SWQ6IHN0cmluZywgc2NyZWVuSW5kZXg6IG51bWJlciA9IG51bGwpOiBWaWV3Q29tcG9uZW50IHtcbiAgICByZXR1cm4gXy5maW5kKHRoaXMuYWN0aXZlVmlld3NTdGFjaywgKHZpZXc6IFZpZXdDb21wb25lbnQpPT57XG4gICAgICByZXR1cm4gdmlldy5pZCA9PT0gdmlld0lkICYmIChzY3JlZW5JbmRleCA9PSBudWxsIHx8IChzY3JlZW5JbmRleCAhPSBudWxsICYmIHZpZXcuc2NyZWVuSW5kZXggPT09IHNjcmVlbkluZGV4KSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGhhbmRsZXIgdmlldyBjb21wb25lbnQgYnkgbmFtZVxuICAgKiBAcGFyYW0gYWN0aW9uRm9yd2FyZE5hbWVcbiAgICogQHJldHVybnMgVmlldyBjb21wb25lbnQgb3IgbnVsbCBpZiB0aGVyZSBpcyBubyBjb21wb25lbnQgd2l0aCBhY3Rpb25Gb3J3YXJkTmFtZVxuICAgKi9cbiAgZ2V0QWN0aW9uRm9yd2FyZEhhbmRsZXIoYWN0aW9uRm9yd2FyZE5hbWU6IHN0cmluZykge1xuICAgIGlmICh0aGlzLmFjdGlvbkZvcndhcmRIYW5kbGVyICE9IG51bGwpIHtcbiAgICAgIHJldHVybiB0aGlzLmFjdGlvbkZvcndhcmRIYW5kbGVyLmdldChhY3Rpb25Gb3J3YXJkTmFtZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBbW2FjdGlvbkZvcndhcmRIYW5kbGVyXV1cbiAgICovXG4gIGdldEFjdGlvbkZvcndhcmRIYW5kbGVyTWFwKCkge1xuICAgIHJldHVybiB0aGlzLmFjdGlvbkZvcndhcmRIYW5kbGVyO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgW1thY3RpdmVWaWV3U3RhY2tdXVxuICAgKi9cbiAgZ2V0Vmlld3MoKTogQXJyYXk8Vmlld0NvbXBvbmVudD4ge1xuICAgIHJldHVybiB0aGlzLmFjdGl2ZVZpZXdzU3RhY2s7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHotaW5kZXggKGxheWVyIHBvc2l0aW9uKSBvZiBhbGwgYWN0aXZlIHZpZXdzXG4gICAqIEBwYXJhbSB0b3BWaWV3SWQgSUQgb2YgdmlldyBjb21wb25lbnQgdG8gc2V0IG1heCB6LWluZGV4ICh0b3ApXG4gICAqL1xuICByZVN0YWNrVmlldyh0b3BWaWV3SWQ6IHN0cmluZyA9IG51bGwsIHNjcmVlbkluZGV4OiBudW1iZXIgPSBudWxsKSB7XG4gICAgdGhpcy5hY3RpdmVWaWV3c1N0YWNrID0gXy5zb3J0QnkodGhpcy5hY3RpdmVWaWV3c1N0YWNrLCAodmlldzogVmlld0NvbXBvbmVudCk9PntcbiAgICAgIC8vd2UgYXJlIHRvcCB2aWV3XG4gICAgICBpZiAodmlldy5pZCA9PT0gdG9wVmlld0lkICYmIChzY3JlZW5JbmRleCA9PSBudWxsIHx8IChzY3JlZW5JbmRleCA9PT0gdmlldy5zY3JlZW5JbmRleCkpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLk1BWF9aX0lOREVYO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdmlldy56SW5kZXg7XG4gICAgfSk7XG5cbiAgICBsZXQgaXNNb2RhbEFjdGl2ZTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgXy5mb3JFYWNoKHRoaXMuYWN0aXZlVmlld3NTdGFjaywgKHZpZXc6IFZpZXdDb21wb25lbnQsIGlkeDogbnVtYmVyKT0+e1xuICAgICAgdmlldy51cGRhdGVaSW5kZXgodGhpcy5NSU5fWl9JTkRFWCArIGlkeCk7XG5cbiAgICAgIGlmIChpc01vZGFsQWN0aXZlICE9PSB0cnVlICYmIHZpZXcuaXNNb2RhbERpYWxvZygpID09PSB0cnVlKSB7XG4gICAgICAgIGlzTW9kYWxBY3RpdmUgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy52aWV3c0NoYW5nZWQubmV4dCh7XG4gICAgICB2aWV3czogdGhpcy5nZXRCcmVhZGNydW1iKHRoaXMuYWN0aXZlVmlld3NTdGFjayksXG4gICAgICBhY3RpdmVWaWV3OiB0aGlzLmFjdGl2ZVZpZXdzU3RhY2tbdGhpcy5hY3RpdmVWaWV3c1N0YWNrLmxlbmd0aCAtIDFdLFxuICAgICAgaXNNb2RhbEFjdGl2ZTogaXNNb2RhbEFjdGl2ZVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgei1pbmRleFxuICAgKi9cbiAgZ2V0Vmlld1pJbmRleCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLk1JTl9aX0lOREVYICsgdGhpcy5hY3RpdmVWaWV3c0NvdW50KCk7XG4gIH1cblxuICBwcml2YXRlIGdldEJyZWFkY3J1bWIodmlld3M6IEFycmF5PFZpZXdDb21wb25lbnQ+KTogQXJyYXk8Vmlld0NvbXBvbmVudD4ge1xuICAgIHJldHVybiB2aWV3cy5maWx0ZXIodj0+di5za2lwQnJlYWRDcnVtYiAhPT0gdHJ1ZSAmJiB2LmRpYWxvZyAhPSBudWxsICYmIHYudmlzaWJsZSAhPT0gZmFsc2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgc2Vzc2lvbiBmcm9tIGFuIE1DTyBpbnN0YW5jZVxuICAgKiBAcGFyYW0gbWNvXG4gICAqIEByZXR1cm5zIFNlc3Npb25cbiAgICovXG4gIHN0YXRpYyBnZXRDbGllbnRTZXNzaW9uRnJvbU1jbyhtY286IGFueSkge1xuICAgIHJldHVybiBtY28uZ2V0U2Vzc2lvbigpO1xuICB9XG4gIC8qKlxuICAgKiDDpsKswqHDo8KBwq5zY3JlZW5JbmRleMOjwoLCksOlwo/ClsOlwr7Cl8OjwoHCl8OjwoHCvsOjwoHCmcOjwoDCglxuICAgKiBzY3JlZW5JbmRleMOjwoHCrzF+OMOjwoHCrsOlwoDCpMOjwoLCksOjwoHCqMOjwoLCi8OjwoLCiMOjwoHChsOjwoHCq8OjwoDCgcOjwoLCtcOjwoPCvMOjwoPCkMOjwoHCp8OmwoPCs8Olwq7CmsOjwoHClcOjwoLCjMOjwoHCpsOjwoHChMOjwoHCvsOjwoHCmcOjwoDCglxuICAgKi9cbiAgbmV4dFNjcmVlbkluZGV4KGJhc2VTY3JlZW5JZDpzdHJpbmcsIGlkOnN0cmluZyA9IG51bGwpOiBudW1iZXJ7XG4gICAgY29uc3QgZXhpc3RpbmdTY3JlZW5zID0gdGhpcy5hY3RpdmVWaWV3c1N0YWNrLmZpbHRlcih2PT5cbiAgICAgIChpZClcbiAgICAgICAgPyB2LmlkID09PSBpZFxuICAgICAgICA6IHYuYmFzZVNjcmVlbklkID09PSBiYXNlU2NyZWVuSWRcbiAgICApO1xuICAgIGlmIChleGlzdGluZ1NjcmVlbnMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgaSA9IF8ub3JkZXJCeShleGlzdGluZ1NjcmVlbnMsIChzY3I6IFZpZXdDb21wb25lbnQpPT5zY3Iuc2NyZWVuSW5kZXgsIFwiZGVzY1wiKVxuICAgICAgICAucG9wKCkuc2NyZWVuSW5kZXhcbiAgICAgIHJldHVybiBpICsgMTtcbiAgICB9ZWxzZXtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgfVxuXG4gIHJlZnJlc2hCcmVhZENydW1iKCkge1xuICAgIGxldCBpc01vZGFsQWN0aXZlOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBfLmZvckVhY2godGhpcy5hY3RpdmVWaWV3c1N0YWNrLCAodmlldzogVmlld0NvbXBvbmVudCk9PntcbiAgICAgIGlmIChpc01vZGFsQWN0aXZlICE9PSB0cnVlICYmIHZpZXcuaXNNb2RhbERpYWxvZygpID09PSB0cnVlKSB7XG4gICAgICAgIGlzTW9kYWxBY3RpdmUgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy52aWV3c0NoYW5nZWQubmV4dCh7XG4gICAgICB2aWV3czogdGhpcy5nZXRCcmVhZGNydW1iKHRoaXMuYWN0aXZlVmlld3NTdGFjayksXG4gICAgICBhY3RpdmVWaWV3OiB0aGlzLmFjdGl2ZVZpZXdzU3RhY2tbdGhpcy5hY3RpdmVWaWV3c1N0YWNrLmxlbmd0aCAtIDFdLFxuICAgICAgaXNNb2RhbEFjdGl2ZTogaXNNb2RhbEFjdGl2ZVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDbGllbnRFdmVudCB9IGZyb20gJy4vY2xpZW50LWV2ZW50JztcbmltcG9ydCB7IEJhc2VDb21wb25lbnQgfSBmcm9tICcuLi9iYXNlL2Jhc2UuY29tcG9uZW50JztcbmltcG9ydCB7IE1jb0NvbnRhaW5lclNlcnZpY2UgfSBmcm9tICcuLi9tY28tY29udGFpbmVyL21jby1jb250YWluZXIuc2VydmljZSc7XG5cbi8qKlxuICogVHJhY2sgZXZlbnRzXG4gKi9cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIEV2ZW50SGFuZGxlclNlcnZpY2Uge1xuICBwcml2YXRlIF9jbGllbnRFdmVudDogQ2xpZW50RXZlbnQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBtY29Db250YWluZXJTZXJ2aWNlOiBNY29Db250YWluZXJTZXJ2aWNlXG4gICkge1xuXG4gIH1cblxuICBzZXRDbGllbnRFdmVudChldmVudDogQ2xpZW50RXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLl9jbGllbnRFdmVudCA9IGV2ZW50O1xuICB9XG5cbiAgZ2V0Q2xpZW50RXZlbnQoKTogQ2xpZW50RXZlbnQge1xuICAgIHJldHVybiB0aGlzLl9jbGllbnRFdmVudDtcbiAgfVxuXG4gIGZpcmVFdmVudChjb21tYW5kOiBzdHJpbmcsIG1jb05hbWU6IHN0cmluZywgYWN0aW9uTmFtZTogc3RyaW5nLCBhcmc6IGFueSwgc291cmNlOiBCYXNlQ29tcG9uZW50LCBjbGllbnRFdmVudDogQ2xpZW50RXZlbnQpIHtcbiAgICBjb25zdCBtY28gPSB0aGlzLm1jb0NvbnRhaW5lclNlcnZpY2UuZ2V0TWNvKG1jb05hbWUpO1xuXG4gICAgaWYgKG1jbyAhPSBudWxsICYmIHR5cGVvZiBtY29bYWN0aW9uTmFtZV0gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJnKSkge1xuICAgICAgICAobWNvW2FjdGlvbk5hbWVdIGFzIEZ1bmN0aW9uKS5hcHBseShtY28sIGFyZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAobWNvW2FjdGlvbk5hbWVdIGFzIEZ1bmN0aW9uKS5hcHBseShtY28sIFthcmddKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IE1lbnVJdGVtIH0gZnJvbSBcIi4vbWVudS1pdGVtXCI7XG5cbmltcG9ydCAqIGFzIF8gZnJvbSBcImxvZGFzaFwiO1xuXG4vKipcbiAqIENsYXNzIGZvciBjcmVhdGluZyBbW01lbnVJdGVtc11dXG4gKi9cbmV4cG9ydCBjbGFzcyBNZW51SXRlbUJ1aWxkZXIge1xuICAgIC8vaW50ZXJuYWwgbWVudSBpdGVtIGZvciBzcGVjaWFsIGNhc2UsIERPIE5PVCB1c2VcbiAgICAvL3RoaXMgaXMgbmVlZGVkIHdoZW4gcmlnaHQgY2xpY2sgZXZlbnQgb2YgY2hpbGQgaXRlbSBpcyB0YWJsZSBjb2x1bW4gdHJpZ2dlciBiZWZvcmUgcm93XG4gICAgX2ludGVybmFsTWVudUl0ZW06IE1lbnVJdGVtO1xuXG4gICAgLyoqXG4gICAgICogTWFwIG9mIEhUTUwgYXR0cmlidXRlcyB0byBhZGQgdG8gbWVudSBpdGVtXG4gICAgICovXG4gICAgYXR0cmlidXRlczoge1tuYW1lOiBzdHJpbmddOiBhbnl9ID0ge307XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSBtZW51SXRlbSBcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihtZW51SXRlbTogTWVudUl0ZW0gPSBudWxsKSB7XG4gICAgICAgIHRoaXMuX2ludGVybmFsTWVudUl0ZW0gPSBtZW51SXRlbTtcbiAgICB9XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIC8qKlxuICAgICAqIEFsbG93ZWQgYXR0cmlidXRlIG5hbWVzXG4gICAgICovXG4gICAgc3RhdGljIGtub3duS2V5cyA9IFtcbiAgICAgICAgXCJpZFwiLFxuICAgICAgICBcInRleHRcIixcbiAgICAgICAgXCJvbkNvbW1hbmRcIixcbiAgICAgICAgXCJvbkNvbW1hbmRDYWxsYmFja1wiLFxuICAgICAgICBcIm9uTW91c2VEb3duQ2FsbGJhY2tcIixcbiAgICAgICAgXCJtZW51SXRlbXNcIixcbiAgICAgICAgXCJkaXNwbGF5XCIsXG4gICAgICAgIFwiZm9udENvbG9yXCIsXG4gICAgICAgIFwiZm9udEJvbGRcIixcbiAgICAgICAgXCJmb250U2l6ZVwiLFxuICAgICAgICBcIm1hcmdpblwiXG4gICAgXTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG1lbnUgc2VwYXJhdG9yIHVzaW5nIGh5cGhlbnNcbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlSG9yaXpvbnRhbERpdmlkZXIoKSB7XG4gICAgICAgIGNvbnN0IG1lbnVJdGVtID0gbmV3IE1lbnVJdGVtQnVpbGRlcigpO1xuICAgICAgICBtZW51SXRlbS5zZXRBdHRyaWJ1dGUoXCJ0ZXh0XCIsIFwiLVwiKTtcblxuICAgICAgICByZXR1cm4gbWVudUl0ZW07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGEgbmV3IFtbTWVudUl0ZW1CdWlsZGVyXV0gaW5zdGFuY2VcbiAgICAgKiBAcmV0dXJucyBbW01lbnVJdGVtQnVpbGRlcl1dIGluc3RhbmNlXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZU1lbnVJdGVtKCkge1xuICAgICAgICByZXR1cm4gbmV3IE1lbnVJdGVtQnVpbGRlcigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0ZXh0IGF0dHJpYnV0ZVxuICAgICAqIEBwYXJhbSB0ZXh0IFxuICAgICAqL1xuICAgIHNldFRleHQodGV4dDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwidGV4dFwiLCB0ZXh0KTtcbiAgICB9XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB3aWR0aCBcbiAgICAgKi9cbiAgICBzZXRXaWR0aCh3aWR0aDogc3RyaW5nKSB7XG4gICAgICAgIC8vZG9uJ3QgdGhpbmsgdGhpcyBzaG91bGQgYmUgZG9pbmcgYW55dGhpbmcsIGFsbCBtZW51IGl0ZW0gc2hhcmVkIHRoZSBzYW1lIHdpZHRoXG4gICAgfVxuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gaW1nIFxuICAgICAqL1xuICAgIHNldEltZ0hpbnQoaW1nOiBzdHJpbmcpIHtcbiAgICAgICAgLy9UT0RPXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyBldmVudCBoYW5kbGVyIGZvciBtb3VzZWRvd25cbiAgICAgKiBAcGFyYW0gZm4gTW91c2UgZG93biBldmVudCBoYW5kbGVyIGZ1bmN0aW9uXG4gICAgICovXG4gICAgc2V0T25Nb3VzZURvd24oZm46ICh0aGlzQXJnPzogYW55KT0+dm9pZCkge1xuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShcIm9uTW91c2VEb3duQ2FsbGJhY2tcIiwgZm4pO1xuICAgIH1cblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgLyoqXG4gICAgICogU2V0IG1hcmdpbiBhdHRyaWJ1dGVcbiAgICAgKiBAcGFyYW0gbWFyZ2luIFNob3VsZCBiZSBudW1iZXJcbiAgICAgKi9cbiAgICBzZXRNYXJnaW4obWFyZ2luOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJtYXJnaW5cIiwgbWFyZ2luKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgZm9udENvbG9yIGF0dHJpYnV0ZVxuICAgICAqIEBwYXJhbSBjb2xvciBTaG91bGQgYmUgQ1NTIHZhbGlkIGNvbG9yIHN0cmluZyAoZS5nLiAjZmYwMDAwLCByZWQsIGV0Yy4pXG4gICAgICovXG4gICAgc2V0Rm9udENvbG9yKGNvbG9yOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJmb250Q29sb3JcIiwgY29sb3IpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBmb250U2l6ZSBhdHRyaWJ1dGVcbiAgICAgKiBAcGFyYW0gc2l6ZSBTaG91bGQgYmUgbnVtYmVyXG4gICAgICovXG4gICAgc2V0Rm9udFNpemUoc2l6ZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiZm9udFNpemVcIiwgc2l6ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGZvbnRCb2xkIGF0dHJpYnV0ZVxuICAgICAqIEBwYXJhbSBib2xkIFxuICAgICAqL1xuICAgIHNldEZvbnRCb2xkKGJvbGQ6IHN0cmluZykge1xuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShcImZvbnRCb2xkXCIsIGJvbGQpO1xuICAgIH1cblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgLyoqXG4gICAgICogU2V0IGN1c3RvbSBhdHRyaWJ1dGUgb24gW1tNZW51SXRlbV1dXG4gICAgICogQHBhcmFtIG5hbWUgXG4gICAgICogQHBhcmFtIHZhbHVlIFxuICAgICAqL1xuICAgIHNldEF0dHJpYnV0ZShuYW1lOiBzdHJpbmcsIHZhbHVlOiBhbnkpIHtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVzW25hbWVdID0gdmFsdWU7XG5cbiAgICAgICAgaWYgKHRoaXMuX2ludGVybmFsTWVudUl0ZW0gIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKE1lbnVJdGVtQnVpbGRlci5rbm93bktleXMuaW5kZXhPZihuYW1lKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faW50ZXJuYWxNZW51SXRlbVtuYW1lXSA9IHZhbHVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5faW50ZXJuYWxNZW51SXRlbS5jdXN0b21BdHRyaWJ1dGVzID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faW50ZXJuYWxNZW51SXRlbS5jdXN0b21BdHRyaWJ1dGVzID0ge307ICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5faW50ZXJuYWxNZW51SXRlbS5jdXN0b21BdHRyaWJ1dGVzW25hbWVdID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZVxuICAgICAqIFxuICAgICAqIEBwYXJhbSBuYW1lIHRoZSBuYW1lIG9mIHRoZSBhdHRyaWJ1dGVcbiAgICAgKi9cbiAgICBnZXRBdHRyaWJ1dGUobmFtZTogc3RyaW5nKTogYW55IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlc1tuYW1lXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0IFtbTWVudUl0ZW1EaXJlY3RpdmVdXSB0byBbW01lbnVJdGVtXV1cbiAgICAgKiBAcGFyYW0gcGFyZW50U2NyZWVuSWQgXG4gICAgICovXG4gICAgdG9NZW51SXRlbShwYXJlbnRTY3JlZW5JZD86IHN0cmluZyk6IE1lbnVJdGVtIHtcbiAgICAgICAgY29uc3QgbWVudUl0ZW06IE1lbnVJdGVtID0ge307XG4gICAgICAgIG1lbnVJdGVtLnBhcmVudFNjcmVlbklkID0gcGFyZW50U2NyZWVuSWQ7XG5cbiAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgICBpZiAodGhpcy5hdHRyaWJ1dGVzW1wiaWRcIl0gIT0gbnVsbCkge1xuICAgICAgICAgICAgbWVudUl0ZW0uaWQgPSB0aGlzLmF0dHJpYnV0ZXNbXCJpZFwiXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZXNbXCJ0ZXh0XCJdICE9IG51bGwpIHtcbiAgICAgICAgICAgIG1lbnVJdGVtLnRleHQgPSB0aGlzLmF0dHJpYnV0ZXNbXCJ0ZXh0XCJdO1xuICAgICAgICB9XG5cbiAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgICBpZiAodGhpcy5hdHRyaWJ1dGVzW1wibWVudUl0ZW1zXCJdICE9IG51bGwpIHtcbiAgICAgICAgICAgIG1lbnVJdGVtLm1lbnVJdGVtcyA9IF8ubWFwKHRoaXMuYXR0cmlidXRlc1tcIm1lbnVJdGVtc1wiXSwgKHN1Yk1lbnUpPT5zdWJNZW51LnRvTWVudUl0ZW0ocGFyZW50U2NyZWVuSWQpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZXNbXCJvbkNvbW1hbmRDYWxsYmFja1wiXSAhPSBudWxsKSB7XG4gICAgICAgICAgICBtZW51SXRlbS5vbkNvbW1hbmRDYWxsYmFjayA9IHRoaXMuYXR0cmlidXRlc1tcIm9uQ29tbWFuZENhbGxiYWNrXCJdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuYXR0cmlidXRlc1tcIm9uQ29tbWFuZFwiXSAhPSBudWxsKSB7XG4gICAgICAgICAgICBtZW51SXRlbS5vbkNvbW1hbmRDYWxsYmFjayA9IHRoaXMuYXR0cmlidXRlc1tcIm9uQ29tbWFuZFwiXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZXNbXCJvbk1vdXNlRG93bkNhbGxiYWNrXCJdICE9IG51bGwpIHtcbiAgICAgICAgICAgIG1lbnVJdGVtLm9uTW91c2VEb3duQ2FsbGJhY2sgPSB0aGlzLmF0dHJpYnV0ZXNbXCJvbk1vdXNlRG93bkNhbGxiYWNrXCJdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuYXR0cmlidXRlc1tcImRpc3BsYXlcIl0gIT0gbnVsbCkge1xuICAgICAgICAgICAgbWVudUl0ZW0uZGlzcGxheSA9IHRoaXMuYXR0cmlidXRlc1tcImRpc3BsYXlcIl07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5hdHRyaWJ1dGVzW1wiZm9udENvbG9yXCJdICE9IG51bGwpIHtcbiAgICAgICAgICAgIE1lbnVJdGVtQnVpbGRlci5pbml0U3R5bGUobWVudUl0ZW0pO1xuXG4gICAgICAgICAgICBtZW51SXRlbS5zdHlsZXNbXCJjb2xvclwiXSA9IHRoaXMuYXR0cmlidXRlc1tcImZvbnRDb2xvclwiXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZXNbXCJmb250U2l6ZVwiXSAhPSBudWxsKSB7XG4gICAgICAgICAgICBNZW51SXRlbUJ1aWxkZXIuaW5pdFN0eWxlKG1lbnVJdGVtKTtcblxuICAgICAgICAgICAgbWVudUl0ZW0uc3R5bGVzW1wiZm9udC1zaXplXCJdID0gdGhpcy5hdHRyaWJ1dGVzW1wiZm9udFNpemVcIl07XG4gICAgICAgIH1cblxuICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIFxuICAgICAgICBpZiAodGhpcy5hdHRyaWJ1dGVzW1wiZm9udEJvbGRcIl0gIT0gbnVsbCkge1xuICAgICAgICAgICAgTWVudUl0ZW1CdWlsZGVyLmluaXRTdHlsZShtZW51SXRlbSk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZXNbXCJmb250Qm9sZFwiXSA9PT0gdHJ1ZSB8fCB0aGlzLmF0dHJpYnV0ZXNbXCJmb250Qm9sZFwiXSA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgICAgICAgICBtZW51SXRlbS5zdHlsZXNbXCJmb250LXdlaWdodFwiXSA9IHRoaXMuYXR0cmlidXRlc1tcImJvbGRcIl07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG1lbnVJdGVtLnN0eWxlc1tcImZvbnQtd2VpZ2h0XCJdID0gXCJub3JtYWxcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZXNbXCJtYXJnaW5cIl0gIT0gbnVsbCkge1xuICAgICAgICAgICAgTWVudUl0ZW1CdWlsZGVyLmluaXRTdHlsZShtZW51SXRlbSk7XG5cbiAgICAgICAgICAgIG1lbnVJdGVtLnN0eWxlc1tcIm1hcmdpblwiXSA9IHRoaXMuYXR0cmlidXRlc1tcIm1hcmdpblwiXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGtleXMgPSBfLmZpbHRlcihfLmtleXModGhpcy5hdHRyaWJ1dGVzKSwgKGtleSk9PntcbiAgICAgICAgICAgIHJldHVybiBNZW51SXRlbUJ1aWxkZXIua25vd25LZXlzLmluZGV4T2Yoa2V5KSA8IDA7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChrZXlzICYmIGtleXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbWVudUl0ZW0uY3VzdG9tQXR0cmlidXRlcyA9IHt9O1xuXG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgb2Yga2V5cykge1xuICAgICAgICAgICAgICAgIG1lbnVJdGVtLmN1c3RvbUF0dHJpYnV0ZXNba2V5XSA9IHRoaXMuYXR0cmlidXRlc1trZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG1lbnVJdGVtO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBbW01lbnVJdGVtQnVpbGRlcl1dIGluc3RhbmNlIHRvIG1lbnVJdGVtcyBhdHRyaWJ1dGVcbiAgICAgKi9cbiAgICBhcHBlbmRDaGlsZChtZW51SXRlbTogTWVudUl0ZW1CdWlsZGVyKSB7XG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZXNbXCJtZW51SXRlbXNcIl0gPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzW1wibWVudUl0ZW1zXCJdID0gW107XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobWVudUl0ZW0gaW5zdGFuY2VvZiBNZW51SXRlbUJ1aWxkZXIpIHtcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlc1tcIm1lbnVJdGVtc1wiXS5wdXNoKG1lbnVJdGVtKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhcnNlIE1lbnVJdGVtIGFuZCBjb252ZXJ0IHRvIGEgYnVpbGRlci4gTmVlZCBmb3IgY2FzZSB3aGVyZSB0YWJsZSBjb2x1bW4gdHJpZ2dlciBjb250ZXh0IG1lbnVcbiAgICAgKiBwcmlvciB0byB0aGUgY29udGV4dG1lbnUgb2Ygcm93IGlzIGFjdGl2YXRlZC4gVGh1cyB0aGUgTWVudUl0ZW1Db21wb25lbnQgZG9lcyBub3QgZXhpc3RzIHlldCBzb1xuICAgICAqIHdlIG5lZWQgc29tZXRoaW5nIGFzIHRlbXBvcmFyeS5cbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gbWVudUl0ZW0gXG4gICAgICovXG4gICAgc3RhdGljIGZyb21NZW51SXRlbShtZW51SXRlbTogTWVudUl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNZW51SXRlbUJ1aWxkZXIobWVudUl0ZW0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsZWFyIG91dCBzdHlsZSB2YWx1ZXMgZm9yIFtbTWVudUl0ZW1dXVxuICAgICAqIEBwYXJhbSBtZW51SXRlbVxuICAgICAqL1xuICAgIHN0YXRpYyBpbml0U3R5bGUobWVudUl0ZW06IE1lbnVJdGVtKSB7XG4gICAgICAgIGlmIChtZW51SXRlbS5zdHlsZXMgPT0gbnVsbCkge1xuICAgICAgICAgICAgbWVudUl0ZW0uc3R5bGVzID0ge307XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvL2ZyZWUgcmVzb3VyY2VcbiAgICBfZnJlZSgpIHtcbiAgICAgICAgdGhpcy5faW50ZXJuYWxNZW51SXRlbSA9IG51bGw7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IG51bGw7XG4gICAgfVxufSIsImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFBvcHVwTWVudUNvbXBvbmVudCB9IGZyb20gJy4vcG9wdXAtbWVudS5jb21wb25lbnQnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3ViamVjdCB9IGZyb20gXCJyeGpzXCI7XG5pbXBvcnQgeyBNZW51SXRlbUJ1aWxkZXIgfSBmcm9tICcuL21lbnUtaXRlbS1idWlsZGVyJztcbmltcG9ydCB7IE1lbnVJdGVtIH0gZnJvbSAnLi9tZW51LWl0ZW0nO1xuXG5pbXBvcnQgKiBhcyBfIGZyb20gXCJsb2Rhc2hcIjtcblxuZXhwb3J0IGludGVyZmFjZSBQb3B1cE1lbnVEYXRhIHtcbiAgbWVudUl0ZW1zOiBBcnJheTxNZW51SXRlbT47XG4gIHBhcmVudFNjcmVlbklkOiBzdHJpbmc7XG59XG5cbi8qKlxuICogU2VydmljZSBjbGFzcyB0byBoYW5kbGUgY29udGV4dCBtZW51c1xuICovXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBDb250ZXh0TWVudVNlcnZpY2Uge1xuICBwcml2YXRlIGNvbnRleHRNZW51TWFwOiBNYXA8c3RyaW5nLCBQb3B1cE1lbnVEYXRhPiA9IG5ldyBNYXA8c3RyaW5nLCBQb3B1cE1lbnVEYXRhPigpO1xuICBwcml2YXRlIGFjdGl2ZU1lbnVTdWJqZWN0OiBTdWJqZWN0PHN0cmluZz4gPSBuZXcgU3ViamVjdDxzdHJpbmc+KCk7XG4gIHByaXZhdGUgYWN0aXZlTWVudTogc3RyaW5nO1xuICBwcml2YXRlIG1lbnVJdGVtQnVpbGRlcnM6IEFycmF5PE1lbnVJdGVtQnVpbGRlcj47XG5cbiAgYWN0aXZlTWVudU9ic2VydmFibGUgPSB0aGlzLmFjdGl2ZU1lbnVTdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xuXG4gIGNvbnN0cnVjdG9yKCkgeyB9XG5cbiAgLyoqXG4gICAqIFxuICAgKiBAcGFyYW0gbmFtZSBcbiAgICogQHBhcmFtIG1lbnVJdGVtcyBcbiAgICogQHBhcmFtIHBhcmVudFNjcmVlbklkIFxuICAgKi9cbiAgcmVnaXN0ZXJDb250ZXh0TWVudShuYW1lOiBzdHJpbmcsIG1lbnVJdGVtczogQXJyYXk8TWVudUl0ZW0+LCBwYXJlbnRTY3JlZW5JZDogc3RyaW5nID0gbnVsbCkge1xuICAgIGNvbnN0IGtleSA9IHRoaXMucmVrZXkobmFtZSk7XG4gICAgaWYgKHRoaXMuY29udGV4dE1lbnVNYXAuaGFzKGtleSkpIHtcbiAgICAgIGNvbnN0IG1lbnVEYXRhID0gdGhpcy5jb250ZXh0TWVudU1hcC5nZXQoa2V5KTtcblxuICAgICAgaWYgKHBhcmVudFNjcmVlbklkICE9IG51bGwgJiYgcGFyZW50U2NyZWVuSWQgIT09IFwiXCIpIHtcbiAgICAgICAgbWVudURhdGEucGFyZW50U2NyZWVuSWQgPSBwYXJlbnRTY3JlZW5JZDtcbiAgICAgIH1cblxuICAgICAgbWVudURhdGEubWVudUl0ZW1zID0gbWVudUl0ZW1zO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNvbnRleHRNZW51TWFwLnNldChrZXksIHtcbiAgICAgICAgbWVudUl0ZW1zOiBtZW51SXRlbXMsXG4gICAgICAgIHBhcmVudFNjcmVlbklkOiBwYXJlbnRTY3JlZW5JZFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgYWN0aXZlIGFuZCB2aXNpYmxlIGNvbnRleHQgbWVudSBieSBuYW1lXG4gICAqIEBwYXJhbSBuYW1lIFxuICAgKi9cbiAgc2hvd0NvbnRleHRNZW51KG5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGxldCBoYXNDb250ZXh0TWVudTogYm9vbGVhbiA9IGZhbHNlO1xuICAgIFxuICAgIGlmICh0aGlzLmNvbnRleHRNZW51TWFwLmhhcyh0aGlzLnJla2V5KG5hbWUpKSkge1xuICAgICAgaGFzQ29udGV4dE1lbnUgPSB0cnVlO1xuICAgIH1cblxuICAgIHRoaXMuc2V0QWN0aXZlTWVudShuYW1lKTtcbiAgICB0aGlzLmFjdGl2ZU1lbnUgPSBuYW1lO1xuXG4gICAgaWYgKHRoaXMubWVudUl0ZW1CdWlsZGVycyAhPSBudWxsKSB7XG4gICAgICB0aGlzLm1lbnVJdGVtQnVpbGRlcnMuZm9yRWFjaChtZW51SXRlbUJ1aWxkZXI9Pm1lbnVJdGVtQnVpbGRlci5fZnJlZSgpKTtcbiAgICAgIHRoaXMubWVudUl0ZW1CdWlsZGVycyA9IFtdO1xuICAgIH1cblxuICAgIHJldHVybiBoYXNDb250ZXh0TWVudTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWFjdGl2YXRlIG1lbnUgYnkgbmFtZSwgYW5kIGhpZGUgaXRcbiAgICogQHBhcmFtIG5hbWVcbiAgICovXG4gIGhpZGVDb250ZXh0TWVudShuYW1lOiBzdHJpbmcpIHtcbiAgICB0aGlzLnNldEFjdGl2ZU1lbnUobnVsbCk7XG4gICAgdGhpcy5hY3RpdmVNZW51ID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgbWVudSBpdGVtcyBieSBbW1BvcHVwTWVudURhdGFdXSBuYW1lIGtleVxuICAgKiBAcGFyYW0gbmFtZSBOYW1lIG9mIFtbUG9wdXBNZW51RGF0YV1dIGtleVxuICAgKiBAcmV0dXJucyBNZW51IGl0ZW1zIGluIGRhdGEgaWYgaXQgZXhpc3RzLCBvdGhlcndpc2UgbnVsbFxuICAgKi9cbiAgZ2V0Q29udGV4dE1lbnVJdGVtcyhuYW1lOiBzdHJpbmcpOiBBcnJheTxNZW51SXRlbT4ge1xuICAgIGNvbnN0IG1lbnVEYXRhID0gdGhpcy5jb250ZXh0TWVudU1hcC5nZXQodGhpcy5yZWtleShuYW1lKSk7XG5cbiAgICBpZiAobWVudURhdGEgIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG1lbnVEYXRhLm1lbnVJdGVtcztcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1lbnUncyBwYXJlbnQgaWRcbiAgICogQHBhcmFtIG5hbWUgTmFtZSBvZiBbW1BvcHVwTWVudURhdGFdXSBpdGVtIGtleVxuICAgKi9cbiAgZ2V0Q29udGV4dE1lbnVQYXJlbnRTY3JlZW5JZChuYW1lOiBzdHJpbmcpIHtcbiAgICBjb25zdCBtZW51RGF0YSA9IHRoaXMuY29udGV4dE1lbnVNYXAuZ2V0KHRoaXMucmVrZXkobmFtZSkpO1xuXG4gICAgaWYgKG1lbnVEYXRhICE9IG51bGwpIHtcbiAgICAgIHJldHVybiBtZW51RGF0YS5wYXJlbnRTY3JlZW5JZDtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgY29udGV4dCBtZW51IGl0ZW0gYnkgbmFtZVxuICAgKiBAcGFyYW0gbmFtZSBOYW1lIG9mIFtbUG9wdXBNZW51RGF0YV1dIGl0ZW0ga2V5XG4gICAqL1xuICByZW1vdmVDb250ZXh0TWVudShuYW1lOiBzdHJpbmcpIHtcbiAgICB0aGlzLmNvbnRleHRNZW51TWFwLmRlbGV0ZSh0aGlzLnJla2V5KG5hbWUpKTtcblxuICAgIGlmICh0aGlzLmFjdGl2ZU1lbnUgPT09IG5hbWUpIHtcbiAgICAgIHRoaXMuYWN0aXZlTWVudSA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldCBhY3RpdmUgbWVudVxuICAgKiBAcGFyYW0gaWQgSWQgb2YgbWVudSB0byBzZXQgYXMgYWN0aXZlXG4gICAqL1xuICBzZXRBY3RpdmVNZW51KGlkOiBzdHJpbmcpIHtcbiAgICB0aGlzLmFjdGl2ZU1lbnVTdWJqZWN0Lm5leHQoaWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBtZW51IGl0ZW1zIGJ5IHBhcmVudCBzY3JlZW4gaWRcbiAgICogQHBhcmFtIGlkIElkIG9mIHBhcmVudCBjb250YWluaW5nIG1lbnVcbiAgICogQHBhcmFtIG1lbnVJdGVtcyBJdGVtcyB0byBzZXRcbiAgICovXG4gIHJlc2V0TWVudShpZDogc3RyaW5nLCBtZW51SXRlbXM6IEFycmF5PE1lbnVJdGVtQnVpbGRlcj4pIHtcbiAgICBsZXQgbmV3TWVudUl0ZW1zOiBBcnJheTxNZW51SXRlbT47XG5cbiAgICBjb25zdCBwYXJlbnRTY3JlZW5JZCA9IHRoaXMuZ2V0Q29udGV4dE1lbnVQYXJlbnRTY3JlZW5JZChpZCk7XG5cbiAgICBpZiAobWVudUl0ZW1zLmxlbmd0aCA+IDAgJiYgbWVudUl0ZW1zWzBdIGluc3RhbmNlb2YgTWVudUl0ZW1CdWlsZGVyKSB7XG4gICAgICBuZXdNZW51SXRlbXMgPSBfLm1hcChtZW51SXRlbXMsIChtZW51SXRlbTogTWVudUl0ZW1CdWlsZGVyKT0+bWVudUl0ZW0udG9NZW51SXRlbShwYXJlbnRTY3JlZW5JZCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXdNZW51SXRlbXMgPSAobWVudUl0ZW1zIGFzIGFueSl8fCBbXTtcbiAgICB9XG5cbiAgICB0aGlzLnJlZ2lzdGVyQ29udGV4dE1lbnUoaWQsIG5ld01lbnVJdGVtcyk7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCBrZXkgdG8gbG93ZXJjYXNlXG4gICAqIEBwYXJhbSBrZXkgXG4gICAqIEByZXR1cm5zIGtleSB2YWx1ZSBhcyBsb3dlcmNhc2VkIHN0cmluZ1xuICAgKi9cbiAgcHJpdmF0ZSByZWtleShrZXk6IHN0cmluZykge1xuICAgIHJldHVybiBrZXkudG9Mb3dlckNhc2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIGZvciBzcGVjaWFsIGNhc2VcbiAgICogQHBhcmFtIG1lbnVJdGVtQnVpbGRlciBNZW51SXRlbUJ1aWxkZXIgdG8gYmUgcmVsZWFzZWQgb2YgbWVtb3J5IHdoZW4gc2hvd0NvbnRleHRNZW51IGlzIGNhbGxlZC5cbiAgICovXG4gIF90cmFja01lbnVJdGVtQnVpbGRlckZvck1lbVJlbGVhc2UobWVudUl0ZW1CdWlsZGVyOiBNZW51SXRlbUJ1aWxkZXIpIHtcbiAgICBpZiAodGhpcy5tZW51SXRlbUJ1aWxkZXJzID09IG51bGwpIHtcbiAgICAgIHRoaXMubWVudUl0ZW1CdWlsZGVycyA9IFtdO1xuICAgIH1cblxuICAgIHRoaXMubWVudUl0ZW1CdWlsZGVycy5wdXNoKG1lbnVJdGVtQnVpbGRlcik7XG4gIH1cbn1cbiIsImltcG9ydCB7IEluamVjdGFibGUsIEluamVjdG9yLCBUeXBlLCBOZ1pvbmUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE1jb0NvbnRhaW5lclNlcnZpY2UgfSBmcm9tICcuLi9tY28tY29udGFpbmVyL21jby1jb250YWluZXIuc2VydmljZSc7XG5pbXBvcnQgeyBFdmVudEhhbmRsZXJTZXJ2aWNlIH0gZnJvbSAnLi4vZXZlbnQtaGFuZGxlci9ldmVudC1oYW5kbGVyLnNlcnZpY2UnO1xuaW1wb3J0IHsgUmVxdWVzdFNlcnZpY2UgfSBmcm9tICcuL3JlcXVlc3Qtc2VydmljZSc7XG5pbXBvcnQgeyBSb3V0ZU5hdmlnYXRvciB9IGZyb20gJy4vcm91dGUtbmF2aWdhdG9yJztcbmltcG9ydCB7IFBvc2l0aW9uIH0gZnJvbSAnLi9wb3NpdGlvbic7XG5pbXBvcnQgeyBDb250ZXh0TWVudVNlcnZpY2UgfSBmcm9tICcuLi9wb3B1cC1tZW51L2NvbnRleHQtbWVudS5zZXJ2aWNlJztcbmltcG9ydCB7IE1lbnVJdGVtQnVpbGRlciB9IGZyb20gJy4uL3BvcHVwLW1lbnUvbWVudS1pdGVtLWJ1aWxkZXInO1xuaW1wb3J0IHsgTWVudUl0ZW0gfSBmcm9tICcuLi9wb3B1cC1tZW51L21lbnUtaXRlbSc7XG5pbXBvcnQgeyBNZXNzYWdlU2VydmljZSB9IGZyb20gJy4vbWVzc2FnaW5nLXNlcnZpY2UnO1xuXG4vKipcbiAqIENsYXNzIGZvciBtYW5hZ2luZyBjbGllbnQgc2Vzc2lvbnNcbiAqL1xuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIFNlc3Npb25TZXJ2aWNlIHtcbiAgcHJpdmF0ZSByZXF1ZXN0U2VydmljZTogUmVxdWVzdFNlcnZpY2U7XG4gIHByaXZhdGUgcm91dGVOYXZpZ2F0b3I6IFJvdXRlTmF2aWdhdG9yO1xuICBwcml2YXRlIG1vdXNlUG9zaXRpb246IFBvc2l0aW9uO1xuICBwcml2YXRlIGRlZnNNYXA6IE1hcDxzdHJpbmcsIGFueT4gPSBuZXcgTWFwPHN0cmluZywgYW55PigpO1xuXG4gIC8qKlxuICAgKiBGbGFnIHRvIGtlZXAgdHJhY2sgb2Ygd2hlbiBjb250cm9sIGtleSBpcyBwcmVzc2VkXG4gICAqL1xuICBwcml2YXRlIGlzQ3RybDogYm9vbGVhbjtcblxuICAvKipcbiAgICogRmxhZyB0byBrZWVwIHRyYWNrIG9mIHdoZW4gc2hpZnQga2V5IGlzIHByZXNzZWRcbiAgICovXG4gIHByaXZhdGUgaXNTaGlmdDogYm9vbGVhbjtcblxuICAvKipcbiAgICogRmxhZyB0byBrZWVwIHRyYWNrIG9mIHdoZW4gYWx0IGtleSBpcyBwcmVzc2VkXG4gICAqL1xuICBwcml2YXRlIGlzQWx0OiBib29sZWFuO1xuXG4gIHByaXZhdGUgbWVzc2FnaW5nU2VydmljZTogTWVzc2FnZVNlcnZpY2U7XG5cbiAgX2N1cnJlbnRQb3B1cE1lbnVJZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBTcGVjaWZ5IGhvdyBmYXIgYSB1c2VyIGNhbiBkcmFnIHRoZSBkaWFsb2cgZG93bi5cbiAgICovXG4gIGRpYWxvZ01heFRvcFBvc2l0aW9uOiBudW1iZXI7XG5cbiAgLy90cmFjayB3aW5kb3cgbG9zdCBmb2N1c1xuICBfd2luZG93TG9zdEZvY3VzOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gX21jb0NvbnRhaW5lclxuICAgKiBAcGFyYW0gX2V2ZW50SGFuZGxlclNlcnZpY2VcbiAgICogQHBhcmFtIGluamVjdG9yXG4gICAqIEBwYXJhbSBjb250ZXh0TWVudVNlcnZpY2VcbiAgICogQHBhcmFtIG5nWm9uZVxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfbWNvQ29udGFpbmVyOiBNY29Db250YWluZXJTZXJ2aWNlLFxuICAgIHByaXZhdGUgX2V2ZW50SGFuZGxlclNlcnZpY2U6IEV2ZW50SGFuZGxlclNlcnZpY2UsXG4gICAgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IsXG4gICAgcHJpdmF0ZSBjb250ZXh0TWVudVNlcnZpY2U6IENvbnRleHRNZW51U2VydmljZSxcbiAgICBuZ1pvbmU6IE5nWm9uZVxuICApIHtcbiAgICBuZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCk9PntcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChldmVudCk9PnRoaXMuY2hlY2tLZXkoZXZlbnQpLCB0cnVlKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCAoZXZlbnQpPT50aGlzLnJlc2V0S2V5KGV2ZW50KSwgdHJ1ZSk7XG5cbiAgICAgIC8vdHJhY2sgd2hlbiB3aW5kb3cgbG9zdC9nYWluIGZvY3VzXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3Vzb3V0XCIsIChldmVudDogRm9jdXNFdmVudCk9PntcbiAgICAgICAgICB0aGlzLl93aW5kb3dMb3N0Rm9jdXMgPSB0cnVlO1xuICAgICAgfSwgdHJ1ZSk7XG5cbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNpblwiLCAoKT0+e1xuICAgICAgICB0aGlzLl93aW5kb3dMb3N0Rm9jdXMgPSBmYWxzZTtcbiAgICAgIH0sIHRydWUpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBpbnRlcm5hbCBbW19tY29Db250YWluZXJdXVxuICAgKi9cbiAgZ2V0TWNvQ29udGFpbmVyKCk6IE1jb0NvbnRhaW5lclNlcnZpY2Uge1xuICAgIHJldHVybiB0aGlzLl9tY29Db250YWluZXI7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGludGVybmFsIFtbX2V2ZW50SGFuZGxlclNlcnZpY2VdXVxuICAgKi9cbiAgZ2V0RXZlbnRIYW5kbGVyKCk6IEV2ZW50SGFuZGxlclNlcnZpY2Uge1xuICAgIHJldHVybiB0aGlzLl9ldmVudEhhbmRsZXJTZXJ2aWNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBbW3JlcXVlc3RTZXJ2aWNlXV0gdmFsdWVcbiAgICogQHBhcmFtIHJlcXVlc3RTZXJ2aWNlXG4gICAqL1xuICByZWdpc3RlclJlcXVlc3RTZXJ2aWNlKHJlcXVlc3RTZXJ2aWNlOiBSZXF1ZXN0U2VydmljZSkge1xuICAgIHRoaXMucmVxdWVzdFNlcnZpY2UgPSByZXF1ZXN0U2VydmljZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdmFsdWUgb2YgW1tyZXF1ZXN0U2VydmljZV1dIHByb3BlcnR5XG4gICAqIEByZXR1cm5zIFRoZSByZXF1ZXN0U2VydmljZVxuICAgKi9cbiAgZ2V0UmVxdWVzdFNlcnZpY2UoKTogUmVxdWVzdFNlcnZpY2Uge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3RTZXJ2aWNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBbW3JvdXRlTmF2aWdhdG9yXV0gdmFsdWVcbiAgICogQHBhcmFtIHJvdXRlTmF2aWdhdG9yXG4gICAqL1xuICByZWdpc3RlclJvdXRlTmF2aWdhdG9yU2VydmljZShyb3V0ZU5hdmlnYXRvcjogUm91dGVOYXZpZ2F0b3IpIHtcbiAgICB0aGlzLnJvdXRlTmF2aWdhdG9yID0gcm91dGVOYXZpZ2F0b3I7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHZhbHVlIG9mIFtbcm91dGVOYXZpZ2F0b3JdXSBwcm9wZXJ0eVxuICAgKi9cbiAgZ2V0Um91dGVOYXZpZ2F0b3JTZXJ2aWNlKCk6IFJvdXRlTmF2aWdhdG9yIHtcbiAgICByZXR1cm4gdGhpcy5yb3V0ZU5hdmlnYXRvcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHBvc2l0aW9uIG9mIHRoZSBtb3VzZVxuICAgKiBAcGFyYW0gZXZlbnRcbiAgICovXG4gIHNldE1vdXNlUG9zaXRpb24oZXZlbnQ6IE1vdXNlRXZlbnQpIHtcbiAgICB0aGlzLm1vdXNlUG9zaXRpb24gPSB7XG4gICAgICB4OiBldmVudC5jbGllbnRYLFxuICAgICAgeTogZXZlbnQuY2xpZW50WSxcbiAgICAgIHNjcmVlblg6IGV2ZW50LnNjcmVlblgsXG4gICAgICBzY3JlZW5ZOiBldmVudC5zY3JlZW5ZXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbW91c2UgcG9zaXRpb25cbiAgICogQHJldHVybnMgT2JqZWN0IHdpdGggcHJvcGVydGllczogeCwgeSwgc2NyZWVuWCwgc2NyZWVuWVxuICAgKi9cbiAgZ2V0TW91c2VQb3NpdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5tb3VzZVBvc2l0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGVnYXRlIHRvIFtbSW5qZWN0b3JdXS5nZXQgbWV0aG9kXG4gICAqIEBwYXJhbSB0eXBlXG4gICAqL1xuICBnZXRJbmplY3Rvcih0eXBlOiBhbnkpIHtcbiAgICByZXR1cm4gdGhpcy5pbmplY3Rvci5nZXQodHlwZSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGRpc3BsYXkgc2VydmljZS5cbiAgICovXG4gIGdldERpc3BsYXlTZXJ2aWNlKCkge1xuICAgIC8vVE9ET1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGVnYXRlIHRvIFtbQ29udGV4dE1lbnVTZXJ2aWNlXV0uc2hvd0NvbnRleHRNZW51XG4gICAqIEBwYXJhbSBpZCBDb250ZXh0IG1lbnUgaWRcbiAgICovXG4gIHNob3dDb250ZXh0TWVudShpZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY29udGV4dE1lbnVTZXJ2aWNlLnNob3dDb250ZXh0TWVudShpZCk7XG4gIH1cblxuICAvKipcbiAgICogRGVsZWdhdGUgdG8gW1tDb250ZXh0TWVudVNlcnZpY2VdXS5oaWRlQ29udGV4dE1lbnVcbiAgICogQHBhcmFtIGlkIENvbnRleHQgbWVudSBpZFxuICAgKi9cbiAgaGlkZUNvbnRleHRNZW51KGlkOiBzdHJpbmcpIHtcbiAgICB0aGlzLmNvbnRleHRNZW51U2VydmljZS5oaWRlQ29udGV4dE1lbnUoaWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGVnYXRlIHRvIFtbQ29udGV4dE1lbnVTZXJ2aWNlXV0ucmVzZXRNZW51LiBBbmQgc2V0IFtbX2N1cnJlbnRQb3B1cE1lbnVJZF1dXG4gICAqIEBwYXJhbSBpZCBNZW51IGlkXG4gICAqIEBwYXJhbSBtZW51SXRlbXNcbiAgICovXG4gIHJlc2V0Q29udGV4dE1lbnUoaWQ6IHN0cmluZywgbWVudUl0ZW1zOiBBcnJheTxNZW51SXRlbUJ1aWxkZXI+KSB7XG4gICAgdGhpcy5jb250ZXh0TWVudVNlcnZpY2UucmVzZXRNZW51KGlkLCBtZW51SXRlbXMpO1xuICAgIHRoaXMuX2N1cnJlbnRQb3B1cE1lbnVJZCA9IGlkO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBlbnRyeSB0byBbW2RlZnNNYXBdXSBNYXBcbiAgICogQHBhcmFtIGlkIEtleVxuICAgKiBAcGFyYW0gZGF0YSBWYWx1ZVxuICAgKi9cbiAgc3RvcmVEZWYoaWQ6IHN0cmluZywgZGF0YTogYW55KSB7XG4gICAgdGhpcy5kZWZzTWFwLnNldChpZCwgZGF0YSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGRlZiBtYXAgZW50cnkgYnkga2V5XG4gICAqIEBwYXJhbSBpZCBLZXlcbiAgICovXG4gIGdldERlZihpZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZGVmc01hcC5nZXQoaWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBkZWYgZnJvbSBbW2RlZnNNYXBdXSBieSBrZXlcbiAgICogQHBhcmFtIGlkIEtleSB0byBkZWxldGVcbiAgICovXG4gIGRlbGV0ZURlZihpZDogc3RyaW5nKSB7XG4gICAgdGhpcy5kZWZzTWFwLmRlbGV0ZShpZCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IFtbaXNDdHJsXV0gcHJvcGVydHkgdmFsdWVcbiAgICogQHJldHVybnMgVHJ1ZSBpZiBjb250cm9sIGtleSBpcyBwcmVzc2VkLCBvdGhlcndpc2UgZmFsc2UuXG4gICAqL1xuICBpc0N0cmxQcmVzc2VkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmlzQ3RybCA9PT0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgW1tpc1NoaWZ0XV0gcHJvcGVydHkgdmFsdWVcbiAgICogQHJldHVybnMgVHJ1ZSBpZiBzaGlmdCBrZXkgaXMgcHJlc3NlZCwgb3RoZXJ3aXNlIGZhbHNlLlxuICAgKi9cbiAgaXNTaGlmdFByZXNzZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXNTaGlmdCA9PT0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgW1tpc0FsdF1dIHByb3BlcnR5IHZhbHVlXG4gICAqIEByZXR1cm5zIFRydWUgaWYgYWx0IGtleSBpcyBwcmVzc2VkLCBvdGhlcndpc2UgZmFsc2UuXG4gICAqL1xuICBpc0FsdFByZXNzZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXNBbHQgPT09IHRydWU7XG4gIH1cblxuICAvKipcbiAgICogR2V0IFtbbWVzc2FnaW5nU2VydmljZV1dIHByb3BlcnR5XG4gICAqIEByZXR1cm5zIFZhbHVlIG9mIFtbbWVzc2FnaW5nU2VydmljZWRdXVxuICAgKi9cbiAgZ2V0TWVzc2FnaW5nU2VydmljZSgpIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdpbmdTZXJ2aWNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBbW21lc3NhZ2luZ1NlcnZpY2VdXSBwcm9wZXJ0eVxuICAgKiBAcGFyYW0gc2VydmljZVxuICAgKi9cbiAgcmVnaXN0ZXJNZXNzYWdpbmdTZXJ2aWNlKHNlcnZpY2U6IE1lc3NhZ2VTZXJ2aWNlKSB7XG4gICAgdGhpcy5tZXNzYWdpbmdTZXJ2aWNlID0gc2VydmljZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBLZXkgZG93biBoYW5kbGVyIHRvIHNldCBpbnRlcm5hbCBmbGFncyBmb3IgQ29udHJvbCwgU2hpZnQsIGFuZCBBbHRcbiAgICogQHBhcmFtIGV2ZW50XG4gICAqL1xuICBwcml2YXRlIGNoZWNrS2V5KGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XG4gICAgdGhpcy5pc0N0cmwgPSBldmVudC5jdHJsS2V5O1xuICAgIHRoaXMuaXNTaGlmdCA9IGV2ZW50LnNoaWZ0S2V5O1xuICAgIHRoaXMuaXNBbHQgPSBldmVudC5hbHRLZXk7XG4gIH1cblxuICAvKipcbiAgICogS2V5Ym9hcmQgZXZlbnQgaGFuZGxlciBmb3Igc2V0dGluZyBhbGwgaW50ZXJuYWwgZmxhZ3MgZm9yIENvbnRyb2wsIFNoaWZ0LCBhbmQgQWx0IHRvIGZhbHNlXG4gICAqIEBwYXJhbSBldmVudFxuICAgKi9cbiAgcHJpdmF0ZSByZXNldEtleShldmVudDogS2V5Ym9hcmRFdmVudCkge1xuICAgICAgdGhpcy5pc0N0cmwgPSBmYWxzZTtcbiAgICAgIHRoaXMuaXNTaGlmdCA9IGZhbHNlO1xuICAgICAgdGhpcy5pc0FsdCA9IGZhbHNlO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGV4dGVuZHMgRXJyb3Ige1xuXG59XG4iLCJpbXBvcnQgKiBhcyBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgKiBhcyBtb21lbnQgZnJvbSAnbW9tZW50JztcbmltcG9ydCB7IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiB9IGZyb20gJy4vaWxsZWdhbC1hcmd1bWVudC1leGNlcHRpb24nO1xuXG5leHBvcnQgY2xhc3MgSmF2YVV0aWxzIHtcbiAgc3RhdGljIHJlYWRvbmx5IE5VTUVSSUMgPSBuZXcgUmVnRXhwKFwiXlswLTldKyRcIik7XG5cbiAgc3RhdGljIGlzTnVtYmVyKHN0cjogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHN0ciA9PSBudWxsID8gZmFsc2UgOiBKYXZhVXRpbHMuTlVNRVJJQy50ZXN0KHN0cik7XG4gIH1cblxuICBzdGF0aWMgYm9vbGVhblRvU3RyaW5nKGJvbzogYm9vbGVhbik6IHN0cmluZyB7XG4gICAgaWYgKGJvbyA9PT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuICd0cnVlJztcbiAgICB9XG5cbiAgICByZXR1cm4gJ2ZhbHNlJztcbiAgfVxuXG4gIHN0YXRpYyBlcXVhbHMoYTogYW55LCBiOiBhbnkpIHtcbiAgICByZXR1cm4gYSA9PSBiO1xuICB9XG5cbiAgc3RhdGljIHBhcnNlQm9vbGVhbih2YWw6IGFueSkge1xuICAgIGlmICh0eXBlb2YgdmFsID09PSAnYm9vbGVhbicpIHtcbiAgICAgIHJldHVybiB2YWw7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIHZhbCA9PT0gJ3RydWUnID8gdHJ1ZSA6IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydCBib29sZWFuIHZhbHVlOiAnICsgdmFsKTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgc3RyaW5nVmFsdWUodmFsOiBhbnkpIHtcbiAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbCArICcnO1xuICB9XG5cbiAgc3RhdGljIGxvbmdWYWx1ZShzdHI6IGFueSkge1xuICAgIGlmIChzdHIgIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIF8ucGFyc2VJbnQoc3RyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHN0YXRpYyBkb3VibGVWYWx1ZShzdHI6IHN0cmluZykge1xuICAgIGlmIChzdHIgIT0gbnVsbCkge1xuXG4gICAgICBsZXQgcmVzdWx0IDpudW1iZXIgPSBzdHIuaW5kZXhPZihcIi5cIikgPj0gMCA/IHBhcnNlRmxvYXQoc3RyKSA6IF8ucGFyc2VJbnQoc3RyKTtcblxuICAgICAgaWYgKGlzTmFOKHJlc3VsdCkpe1xuICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBzdGF0aWMgaW50VmFsdWUoc3RyOiBhbnkpIHtcbiAgICBpZiAoc3RyICE9IG51bGwpIHtcbiAgICAgIHJldHVybiBfLnBhcnNlSW50KHN0cik7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBzdGF0aWMgdG9TdHJpbmcodmFsOiBhbnkpIHtcbiAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICAgIHJldHVybiB2YWwgKyAnJztcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdib29sZWFuJykge1xuICAgICAgcmV0dXJuIEphdmFVdGlscy5ib29sZWFuVG9TdHJpbmcodmFsKTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgY29tcGFyZVRvKGE6IHN0cmluZywgYjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBsZXQgcmV0VmFsID0gbnVsbDtcblxuICAgIGlmIChhID09PSBiKSB7XG4gICAgICByZXRWYWwgPSAwO1xuICAgIH0gZWxzZSBpZiAoYSA+IGIpIHtcbiAgICAgIHJldFZhbCA9IDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldFZhbCA9IC0xO1xuICAgIH1cblxuICAgIHJldHVybiByZXRWYWw7XG4gIH1cblxuICBzdGF0aWMgYmlnRGVjaW1hbCh2YWw6IG51bWJlciB8IHN0cmluZywgc2NhbGU6IG51bWJlciA9IDAsIHJvdW5kaW5nTW9kZTogbnVtYmVyID0gLTEpIHtcbiAgICAvL2ZvciBub3csIGp1c3QgcmV0cm4gdGhlIG51bWJlclxuICAgIGNvbnN0IGZpeGVkVmFsdWUgPSB0eXBlb2YgdmFsID09PSAnbnVtYmVyJyA/IHZhbCA6IHBhcnNlRmxvYXQodmFsKTtcblxuICAgIGlmIChzY2FsZSA+IDApIHtcbiAgICAgIHJldHVybiBwYXJzZUZsb2F0KGAke2ZpeGVkVmFsdWV9LiR7Xy5wYWRTdGFydCgnJywgc2NhbGUsICcwJyl9YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmaXhlZFZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBzaWdudW0obnVtOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiBudW0gPT09IDAgPyAwIDogbnVtID4gMCA/IDEgOiAtMTtcbiAgfVxuXG4gIHN0YXRpYyBmbG9hdFZhbHVlKHN0cjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICByZXR1cm4gcGFyc2VGbG9hdChzdHIpO1xuICB9XG5cbiAgc3RhdGljIGxlc3NUaGFuKGE6IGFueSwgYjogYW55KTogYm9vbGVhbiB7XG4gICAgaWYgKG1vbWVudC5pc01vbWVudChhKSAmJiBtb21lbnQuaXNNb21lbnQoYikpIHtcbiAgICAgIHJldHVybiAoYSBhcyBtb21lbnQuTW9tZW50KS5pc0JlZm9yZShiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYSA8IGI7XG4gIH1cbn1cbiIsIi8vaW1wb3J0IHsgQmFzZUNvbXBvbmVudCB9IGZyb20gJy4uL2Jhc2UvYmFzZS5jb21wb25lbnQnO1xuaW1wb3J0IHsgS2V5VXRpbHMgfSBmcm9tICcuLi9iYXNlL2tleS11dGlscyc7XG5cbmV4cG9ydCBjbGFzcyBDbGllbnRFdmVudCB7XG4gICAgcHJpdmF0ZSBfcGFyYW1ldGVyczogTWFwPHN0cmluZywgYW55PiA9IG5ldyBNYXA8c3RyaW5nLCBhbnk+KCk7XG4gICAgcHJpdmF0ZSBfYXR0cmlidXRlczogTWFwPHN0cmluZywgYW55PiA9IG5ldyBNYXA8c3RyaW5nLCBhbnk+KCk7XG4gICAgcHJpdmF0ZSBfcmV0dXJuVmFsdWU6IGFueTtcbiAgICBwcml2YXRlIF9yZXR1cm5WYWx1ZVNldDogYW55O1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBfc291cmNlOiBhbnksIHByaXZhdGUgX2V2ZW50OiBFdmVudCkge1xuXG4gICAgfVxuXG4gICAgZ2V0U291cmNlKCk6IGFueSB7XG4gICAgICByZXR1cm4gdGhpcy5fc291cmNlO1xuICAgIH1cblxuICAgIGdldEV2ZW50KCk6IEV2ZW50IHtcbiAgICAgIHJldHVybiB0aGlzLl9ldmVudDtcbiAgICB9XG5cbiAgICBzZXRQYXJhbWV0ZXIocGFyYW1OYW1lOiBzdHJpbmcsIHZhbHVlOiBhbnkpIHtcbiAgICAgIHRoaXMuX3BhcmFtZXRlcnMuc2V0KEtleVV0aWxzLnRvTWFwS2V5KHBhcmFtTmFtZSksIHZhbHVlKTtcbiAgICB9XG5cbiAgICBnZXRQYXJhbWV0ZXIocGFyYW1OYW1lOiBzdHJpbmcpOiBhbnkge1xuICAgICAgcmV0dXJuIHRoaXMuX3BhcmFtZXRlcnMuZ2V0KEtleVV0aWxzLnRvTWFwS2V5KHBhcmFtTmFtZSkpO1xuICAgIH1cblxuICAgIHNldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lOiBzdHJpbmcsIHZhbHVlOiBhbnkpIHtcbiAgICAgIHRoaXMuX2F0dHJpYnV0ZXMuc2V0KEtleVV0aWxzLnRvTWFwS2V5KGF0dHJpYnV0ZU5hbWUpLCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWU6IHN0cmluZyk6IGFueSB7XG4gICAgICByZXR1cm4gdGhpcy5fYXR0cmlidXRlcy5nZXQoS2V5VXRpbHMudG9NYXBLZXkoYXR0cmlidXRlTmFtZSkpO1xuICAgIH1cblxuICAgIHN0b3BQcm9wYWdhdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLl9ldmVudCAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMuX2V2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHByZXZlbnREZWZhdWx0KCkge1xuICAgICAgaWYgKHRoaXMuX2V2ZW50ICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5fZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRSZXR1cm5WYWx1ZSh2YWx1ZTogYW55KXtcbiAgICAgIHRoaXMuX3JldHVyblZhbHVlID0gdmFsdWU7XG5cbiAgICAgIHRoaXMuX3JldHVyblZhbHVlU2V0ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBnZXRSZXR1cm5WYWx1ZSgpOiBhbnkge1xuICAgICAgcmV0dXJuIHRoaXMuX3JldHVyblZhbHVlO1xuICAgIH1cblxuICAgIGlzUmV0dXJuVmFsdWVTZXQoKTogYm9vbGVhbiB7XG4gICAgICAvL2Nhbid0IGNoZWNrIGZvciByZXR1cm5WYWx1ZSBpcyBudWxsIGIvYyBpdCBjYW4gYmUgc2V0IHRvIG51bGxcbiAgICAgIHJldHVybiB0aGlzLl9yZXR1cm5WYWx1ZVNldCA9PT0gdHJ1ZSA/IHRydWUgOiBmYWxzZTtcbiAgICB9XG59IiwiaW1wb3J0IHsgSXRlcmF0b3IgfSBmcm9tICcuL2l0ZXJhdG9yJztcblxuZXhwb3J0IGNsYXNzIExpc3RJdGVyYXRvcjxFID0gYW55PiBpbXBsZW1lbnRzIEl0ZXJhdG9yPEU+e1xuICAgIHByaXZhdGUgY3VycmVudEluZGV4OiBudW1iZXIgPSAwO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBkYXRhOiBBcnJheTxFPikge1xuICAgIH1cblxuICAgIGhhc05leHQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEgIT0gbnVsbCAmJiB0aGlzLmRhdGEubGVuZ3RoID4gdGhpcy5jdXJyZW50SW5kZXg7XG4gICAgfVxuXG4gICAgbmV4dDxUIGV4dGVuZHMgRT4oKTogRSB7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRJbmRleCA8IHRoaXMuZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGFbdGhpcy5jdXJyZW50SW5kZXgrK107XG4gICAgICAgIH1cblxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHN1Y2ggZWxlbWVudCcpO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBJdGVyYXRvciB9IGZyb20gJy4vaXRlcmF0b3InO1xuaW1wb3J0IHsgTGlzdEl0ZXJhdG9yIH0gZnJvbSAnLi9saXN0LWl0ZXJhdG9yJztcbmltcG9ydCB7IEl0ZXJhYmxlIH0gZnJvbSAnLi9pdGVyYWJsZSc7XG5pbXBvcnQgKiBhcyBfIGZyb20gJ2xvZGFzaCc7XG5cbi8vZW11bHZhdGUgSmF2YSB2ZWN0b3IgKHNvbWV3aGF0KVxuZXhwb3J0IGNsYXNzIFZlY3RvcjxFID0gYW55PiBpbXBsZW1lbnRzIEl0ZXJhYmxlIHtcbiAgcHJpdmF0ZSBkYXRhOiBBcnJheTxFPiA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKHNpemU/OiBudW1iZXIgfCBBcnJheTxFPikge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHNpemUpKSB7XG4gICAgICB0aGlzLmRhdGEgPSBzaXplO1xuICAgIH1cbiAgfVxuXG4gIHRvQXJyYXkoKTogQXJyYXk8RT4ge1xuICAgIHJldHVybiB0aGlzLmRhdGE7XG4gIH1cblxuICBzZXREYXRhKGRhdGE6IEFycmF5PEU+KSB7XG4gICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgfVxuXG4gIHNpemUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhID09IG51bGwgPyAwIDogdGhpcy5kYXRhLmxlbmd0aDtcbiAgfVxuXG4gIGdldDxUIGV4dGVuZHMgRT4gKGlkeDogbnVtYmVyKTogVCB7XG4gICAgaWYgKHRoaXMuc2l6ZSgpID4gaWR4KSB7XG4gICAgICByZXR1cm4gdGhpcy5kYXRhW2lkeF0gYXMgVDtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGFkZChlbGVtZW50OiBFLCBpbnNlcnRpb25JbmRleDogbnVtYmVyID0gLTEpOiBudW1iZXIge1xuICAgIGlmIChpbnNlcnRpb25JbmRleCA9PT0gLTEpIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGEucHVzaChlbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kYXRhLnNwbGljZShpbnNlcnRpb25JbmRleCwgMCwgZWxlbWVudCk7XG4gICAgICByZXR1cm4gaW5zZXJ0aW9uSW5kZXg7XG4gICAgfVxuICB9XG5cbiAgZGVsZXRlKGlkeDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZ2V0KGlkeCkpIHtcbiAgICAgIHRoaXMuZGF0YS5zcGxpY2UoaWR4LCAxKTtcbiAgICB9XG4gIH1cblxuICBhZGRFbGVtZW50KGVsZW1lbnQ6IEUpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmFkZChlbGVtZW50KTtcbiAgfVxuXG4gIGFkZEFsbCh2ZWM6IFZlY3RvcjxFPikge1xuICAgIGxldCBpdDogSXRlcmF0b3I8RT4gPSB2ZWMuaXRlcmF0b3IoKTtcbiAgICB3aGlsZShpdC5oYXNOZXh0KCkpIHtcbiAgICAgIHRoaXMuYWRkKGl0Lm5leHQoKSk7XG4gICAgfVxuICB9XG5cbiAgZmlyc3RFbGVtZW50KCk6IEUge1xuICAgIHJldHVybiB0aGlzLmRhdGEgIT0gbnVsbCAmJiB0aGlzLmRhdGEubGVuZ3RoID4gMCA/IHRoaXMuZGF0YVswXSA6IG51bGw7XG4gIH1cblxuICBsYXN0RWxlbWVudCgpOiBFIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhICE9IG51bGwgJiYgdGhpcy5kYXRhLmxlbmd0aCA+IDAgPyB0aGlzLmRhdGFbdGhpcy5kYXRhLmxlbmd0aCAtIDFdIDogbnVsbDtcbiAgfVxuXG4gIGNvbnRhaW5zKGVsZW1lbnQ6IEUpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhICE9IG51bGwgJiYgdGhpcy5kYXRhLmluZGV4T2YoZWxlbWVudCkgPj0gMCA/IHRydWU6IGZhbHNlO1xuICB9XG5cbiAgZWxlbWVudEF0KGlkeDogbnVtYmVyKTogRSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0KGlkeCk7XG4gIH1cblxuICBpc0VtcHR5KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmRhdGEgPT0gbnVsbCB8fCB0aGlzLmRhdGEubGVuZ3RoID09PSAwO1xuICB9XG5cbiAgaXRlcmF0b3IoKTogSXRlcmF0b3I8RT4ge1xuICAgIHJldHVybiBuZXcgTGlzdEl0ZXJhdG9yPEU+KF8uY2xvbmUodGhpcy5kYXRhKSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IEJhc2VDb21wb25lbnQgfSBmcm9tIFwiLi9iYXNlLmNvbXBvbmVudFwiO1xuXG5leHBvcnQgY2xhc3MgQXR0cmlidXRlQ2hhbmdlRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIG5hbWU6IHN0cmluZyxcbiAgICAgICAgcHJpdmF0ZSBvbGRWYWx1ZTogYW55LFxuICAgICAgICBwcml2YXRlIG5ld1ZhbHVlOiBhbnksXG4gICAgICAgIHByaXZhdGUgc291cmNlRWxlbWVudDogQmFzZUNvbXBvbmVudFxuICAgICkge31cblxuICAgIGdldE5hbWUoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZTtcbiAgICB9XG5cbiAgICBnZXRPbGRWYWx1ZSgpOiBhbnkge1xuICAgICAgICByZXR1cm4gdGhpcy5vbGRWYWx1ZTtcbiAgICB9XG5cbiAgICBnZXROZXdWYWx1ZSgpOiBhbnkge1xuICAgICAgICByZXR1cm4gdGhpcy5uZXdWYWx1ZTtcbiAgICB9XG5cbiAgICBnZXRTb3VyY2VFbGVtZW50KCk6IEJhc2VDb21wb25lbnQge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3VyY2VFbGVtZW50O1xuICAgIH1cbiAgICBcbn0iLCJpbXBvcnQgeyBBdHRyaWJ1dGVOYW1lVmFsdWUgfSBmcm9tIFwiLi9hdHRyaWJ1dGUtbmFtZS12YWx1ZVwiO1xuaW1wb3J0IHsgQ2xpZW50RXZlbnQgfSBmcm9tIFwiLi4vZXZlbnQtaGFuZGxlci9jbGllbnQtZXZlbnRcIjtcbmltcG9ydCB7IEJhc2VDb21wb25lbnQgfSBmcm9tIFwiLi9iYXNlLmNvbXBvbmVudFwiO1xuXG4vLyBAZHluYW1pY1xuZXhwb3J0IGNsYXNzIEFwcFV0aWxzIHtcbiAgICBzdGF0aWMgcmVhZG9ubHkgZG9tUGFyc2VyID0gbmV3IERPTVBhcnNlcigpO1xuXG4gICAgLyoqIMOjwoLCr8OjwoPCqcOjwoLCucOlwrHCnsOmwoDCp8OlwqTCicOmwo/Cm8OnwpTCqMOjwoPCnsOjwoPCg8OjwoPClyAqL1xuICAgIHN0YXRpYyBfY2xhc3NPdmVycmlkZU1hcDogTWFwPGFueSwgYW55PiA9IG5ldyBNYXAoKTtcbiAgICBzdGF0aWMgYXR0cmlidXRlT3ZlcnJpZGVDbGFzc0luaXRpYWxpemVyOiAoKSA9PiB2b2lkICA9IG51bGw7XG4gICAgc3RhdGljIGF0dHJpYnV0ZU92ZXJyaWRlQ2xhc3M6ICh2YWx1ZTogc3RyaW5nKSA9PiBBcnJheTxBdHRyaWJ1dGVOYW1lVmFsdWU+ID0gbnVsbDtcbiAgICAvKiogw6PCg8KQw6PCg8Kqw6PCg8KHw6PCg8K8w6PCg8KIw6XCscKew6bCgMKnw6XCpMKJw6bCj8Kbw6fClMKow6PCg8Kew6PCg8KDw6PCg8KXICovXG4gICAgc3RhdGljIF92YWxpZGF0ZU92ZXJyaWRlTWFwOiBNYXA8YW55LCBhbnk+ID0gbmV3IE1hcCgpO1xuICAgIHN0YXRpYyBhdHRyaWJ1dGVPdmVycmlkZVZhbGlkYXRlSW5pdGlhbGl6ZXI6ICgpID0+IHZvaWQgID0gbnVsbDtcbiAgICBzdGF0aWMgYXR0cmlidXRlT3ZlcnJpZGVWYWxpZGF0ZTogKHZhbHVlOiBzdHJpbmcpID0+IEFycmF5PEF0dHJpYnV0ZU5hbWVWYWx1ZT4gPSBudWxsO1xuXG4gICAgc3RhdGljIGN1c3RvbWl6ZUNsaWVudEV2ZW50OiAoc291cmNlOiBhbnksIGNsaWVudEV2ZW50OiBDbGllbnRFdmVudCkgPT4gdm9pZCA9IG51bGw7XG4gICAgc3RhdGljIHZhbGlkYXRlRmllbGQ6IChzb3VyY2U6IEJhc2VDb21wb25lbnQpID0+IGJvb2xlYW4gPSBudWxsO1xuICAgIHN0YXRpYyBwYXJzZURvbShzdHI6IHN0cmluZykge1xuICAgICAgICByZXR1cm4gdGhpcy5kb21QYXJzZXIucGFyc2VGcm9tU3RyaW5nKHN0ciwgXCJhcHBsaWNhdGlvbi94bWxcIikuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlIEhUTUwgYXR0cmlidXRlIHRvIHNlZSBpZiB0aGV5IHNob3VsZCBiZSBwYXNzIHRvIHRoZSBzZXJ2ZXIuIFRoaXMgaXMgbmVlZGVkXG4gICAgICogYmVjYXVzZSBOZXhhd2ViIGZyYW1ld29yayBhbGxvdyBwYXNzaW5nIG9mIGN1c3RvbSBhdHRyaWJ1dGVzXG4gICAgICovXG4gICAgc3RhdGljIHZhbGlkYXRlQXR0cmlidXRlOiAoYXR0cmlidXRlTmFtZTogc3RyaW5nKSA9PiBib29sZWFuID0gbnVsbDtcbiAgICBzdGF0aWMgc2V0Q3VzdG9tQXR0cmlidXRlOiAoanNvbjogeyBbbmFtZTogc3RyaW5nXTogc3RyaW5nIH0sIGVsOiBFbGVtZW50KSA9PiB2b2lkO1xuICAgIHN0YXRpYyBlbmFibGVMb2dnaW5nOiBib29sZWFuID0gdHJ1ZTtcbiAgICBzdGF0aWMgbWF4RmluZEVsZW1lbnRDYWNoZTogbnVtYmVyID0gNTAwO1xuICAgIHN0YXRpYyBpc0Nsb3NlQnRuOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAvKiogYXR0cmlidXRlT3ZlcnJpZGVJbml0aWFsaXplciAqL1xuICAgIHN0YXRpYyBhdHRyaWJ1dGVPdmVycmlkZUluaXRpYWxpemVyKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZU92ZXJyaWRlQ2xhc3NJbml0aWFsaXplcigpO1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZU92ZXJyaWRlVmFsaWRhdGVJbml0aWFsaXplcigpO1xuICAgIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBIYXNoTWFwPEssIFY+IGltcGxlbWVudHMgTWFwPEssIFY+IHtcbiAgICBwcml2YXRlIF9pbnRlcm5hbE1hcDogTWFwPEssIFY+ID0gbmV3IE1hcDxLLCBWPigpO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG5cbiAgICB9XG5cbiAgICBnZXQgc2l6ZSgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5faW50ZXJuYWxNYXAuc2l6ZTtcbiAgICB9XG5cbiAgICBwdXQoa2V5OiBLLCB2YWx1ZTogVikge1xuICAgICAgICB0aGlzLl9pbnRlcm5hbE1hcC5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgZ2V0KGtleTogSyk6IFYge1xuICAgICAgICByZXR1cm4gdGhpcy5faW50ZXJuYWxNYXAuZ2V0KGtleSk7XG4gICAgfVxuXG4gICAgc2V0KGtleTogSywgdmFsdWU6IFYpIHtcbiAgICAgICAgdGhpcy5faW50ZXJuYWxNYXAuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBkZWxldGUoa2V5OiBLKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnRlcm5hbE1hcC5kZWxldGUoa2V5KTtcbiAgICB9XG5cbiAgICByZW1vdmUoa2V5OiBLKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZGVsZXRlKGtleSk7XG4gICAgfVxuXG4gICAgY2xlYXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnRlcm5hbE1hcC5jbGVhcigpO1xuICAgIH1cblxuICAgIGVudHJpZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnRlcm5hbE1hcC5lbnRyaWVzKCk7XG4gICAgfVxuXG4gICAgZm9yRWFjaChjYjogKHZhbHVlOiBWLCBrZXk6IEssIG1hcDogTWFwPEssIFY+KT0+dm9pZCwgdGhpc0FyZzogYW55KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnRlcm5hbE1hcC5mb3JFYWNoKGNiLCB0aGlzQXJnKTtcbiAgICB9XG5cbiAgICBoYXMoa2V5OiBLKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnRlcm5hbE1hcC5oYXMoa2V5KTtcbiAgICB9XG5cbiAgICBrZXlzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faW50ZXJuYWxNYXAua2V5cygpO1xuICAgIH1cblxuICAgIHZhbHVlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ludGVybmFsTWFwLnZhbHVlcygpO1xuICAgIH1cblxuICAgIHRvSnNvbigpOiB7W25hbWU6IHN0cmluZ106IGFueX0ge1xuICAgICAgY29uc3QganNvbiA9IHt9O1xuICAgICAgY29uc3Qga2V5cyA9IHRoaXMua2V5cygpO1xuICAgICAgbGV0IGtleSA9IGtleXMubmV4dCgpO1xuXG4gICAgICB3aGlsZShrZXkuZG9uZSAhPT0gdHJ1ZSkge1xuICAgICAgICBqc29uW2tleS52YWx1ZSBhcyBhbnldID0gdGhpcy5nZXQoa2V5LnZhbHVlKTtcbiAgICAgICAga2V5ID0ga2V5cy5uZXh0KCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBqc29uO1xuICAgIH1cblxuICAgIGdldCBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ludGVybmFsTWFwW1N5bWJvbC5pdGVyYXRvcl07XG4gICAgfVxuXG4gICAgZ2V0IFtTeW1ib2wudG9TdHJpbmdUYWddKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faW50ZXJuYWxNYXBbU3ltYm9sLnRvU3RyaW5nVGFnXTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBIYXNoTWFwIH0gZnJvbSBcIi4vaGFzaC1tYXBcIjtcblxuZXhwb3J0IGNsYXNzIEhhc2h0YWJsZTxLLCBWPiBleHRlbmRzIEhhc2hNYXA8SywgVj4ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBBcHBVdGlscyB9IGZyb20gXCIuL2FwcC11dGlsc1wiO1xuXG5leHBvcnQgY2xhc3MgTG9nZ2VyIHtcbiAgICBzdGF0aWMgd2FybihlOiBhbnkpIHtcbiAgICAgICAgaWYgKEFwcFV0aWxzLmVuYWJsZUxvZ2dpbmcgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBsb2coZTogYW55KSB7XG4gICAgICAgIGlmIChBcHBVdGlscy5lbmFibGVMb2dnaW5nID09PSB0cnVlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBpbmZvKGU6IGFueSkge1xuICAgICAgICBpZiAoQXBwVXRpbHMuZW5hYmxlTG9nZ2luZyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIGVycm9yKGU6IGFueSkge1xuICAgICAgICBpZiAoQXBwVXRpbHMuZW5hYmxlTG9nZ2luZyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBkZWJ1ZyhlOiBhbnkpIHtcbiAgICAgICAgaWYgKEFwcFV0aWxzLmVuYWJsZUxvZ2dpbmcgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoZSk7XG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IHsgQ29tcG9uZW50LCBPcHRpb25hbCwgU2tpcFNlbGYsIEFmdGVyVmlld0luaXQsIElucHV0LCBPbkRlc3Ryb3ksIEVsZW1lbnRSZWYsIE9uSW5pdCwgQ2hhbmdlRGV0ZWN0b3JSZWYsIENvbXBvbmVudFJlZiwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIFJlbmRlcmVyMiB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5cbmltcG9ydCAqIGFzIF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IFNlc3Npb25TZXJ2aWNlIH0gZnJvbSBcIi4uL3Nlc3Npb24vc2Vzc2lvbi5zZXJ2aWNlXCI7XG5pbXBvcnQgeyBLZXlVdGlscyB9IGZyb20gXCIuL2tleS11dGlsc1wiO1xuaW1wb3J0IHsgQXR0cmlidXRlc0VudW0gfSBmcm9tIFwiLi9hdHRyaWJ1dGVzLmVudW1cIjtcbmltcG9ydCB7IEphdmFVdGlscyB9IGZyb20gXCIuLi9qYXZhL2phdmEtdXRpbHNcIjtcbmltcG9ydCB7IENsaWVudEV2ZW50IH0gZnJvbSBcIi4uL2V2ZW50LWhhbmRsZXIvY2xpZW50LWV2ZW50XCI7XG5pbXBvcnQgeyBCb3JkZXJQb3NpdGlvbiB9IGZyb20gXCIuL3N0eWxlLWxpdGVyYWxzXCI7XG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi4vamF2YS92ZWN0b3JcIjtcbmltcG9ydCB7IEF0dHJpYnV0ZUNoYW5nZUxpc3RlbmVyIH0gZnJvbSBcIi4vYXR0cmlidXRlLWNoYW5nZS1saXN0ZW5lclwiO1xuaW1wb3J0IHsgQXR0cmlidXRlQ2hhbmdlRXZlbnQgfSBmcm9tIFwiLi9hdHRyaWJ1dGUtY2hhbmdlLWV2ZW50XCI7XG5pbXBvcnQgeyBBcHBVdGlscyB9IGZyb20gXCIuL2FwcC11dGlsc1wiO1xuaW1wb3J0IHsgSGFzaHRhYmxlIH0gZnJvbSBcIi4uL2phdmEvaGFzaHRhYmxlXCI7XG5pbXBvcnQgeyBIYXNoTWFwIH0gZnJvbSBcIi4uL2phdmEvaGFzaC1tYXBcIjtcbmltcG9ydCB7IFZpZXdDb21wb25lbnQgfSBmcm9tIFwiLi4vdmlldy92aWV3LmNvbXBvbmVudFwiO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4vbG9nZ2VyXCI7XG5pbXBvcnQgeyBIVE1MRWxlbWVudFdyYXBwZXIgfSBmcm9tIFwiLi4vdHJlZS10YWJsZS9odG1sLWVsZW1lbnQtd3JhcHBlclwiO1xuaW1wb3J0IHsgQXR0cmlidXRlTmFtZVZhbHVlIH0gZnJvbSBcIi4vYXR0cmlidXRlLW5hbWUtdmFsdWVcIjtcbmltcG9ydCB7IFRydXN0ZWRTdHlsZVN0cmluZyB9IGZyb20gXCJAYW5ndWxhci9jb3JlL3NyYy9zYW5pdGl6YXRpb24vYnlwYXNzXCI7XG5pbXBvcnQgeyBUYWJDb21wb25lbnQgfSBmcm9tIFwiLi4vdGFiLXBhbmUvdGFiL3RhYi5jb21wb25lbnRcIjtcbmltcG9ydCB7IFRhYlBhbmVDb21wb25lbnQgfSBmcm9tIFwiLi4vdGFiLXBhbmUvdGFiLXBhbmUuY29tcG9uZW50XCI7XG5cbi8qKlxuICogTWFpbiBjbGFzcyB0aGF0IGFsbCBjb3JlIGNvbXBvbmVudHMgc2hvdWxkIGluaGVyaXQuXG4gKi9cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3Z0LWJhc2UnLFxuICB0ZW1wbGF0ZTogJ25vdGhpbmcgaGVyZSdcbn0pXG5leHBvcnQgY2xhc3MgQmFzZUNvbXBvbmVudCBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSwgT25Jbml0IHtcbiAgQElucHV0KCkgYXV0b1dyYXA6IGJvb2xlYW47XG4gIEBJbnB1dCgpIGJvcmRlclBvc2l0aW9uOiBCb3JkZXJQb3NpdGlvbjtcbiAgQElucHV0KCkgaWQ6IHN0cmluZztcbiAgQElucHV0KCkgZGlzYWJsZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgQElucHV0KCkgc29ydDogc3RyaW5nID0gXCJcIjtcbiAgQElucHV0KCkgdmlzaWJsZTogYm9vbGVhbiA9IHRydWU7XG4gIEBJbnB1dCgpIHRleHQ6IHN0cmluZyA9IFwiXCI7XG4gIEBJbnB1dCgpIHNldCBjc3NDbGFzcyhjc3M6IHN0cmluZykge1xuICAgIHRoaXMuX2Nzc0NsYXNzID0gdGhpcy5jbGVhbkNzcyhjc3MpO1xuICAgIHRoaXMuaW5pdEJvcmRlckxheW91dCgpO1xuICB9XG5cbiAgQElucHV0KCkgY29udHJvbFdpZHRoOiBzdHJpbmc7XG4gIEBJbnB1dCgpIGNvbnRyb2xIZWlnaHQ6IHN0cmluZztcbiAgQElucHV0KCkgbWF4SGVpZ2h0OiBzdHJpbmc7XG4gIEBJbnB1dCgpIGxpbmVIZWlnaHQ6IHN0cmluZztcbiAgQElucHV0KCkgbWFyZ2luUmlnaHQ6IHN0cmluZztcbiAgQElucHV0KCkgbWFyZ2luTGVmdDogc3RyaW5nO1xuICBASW5wdXQoKSBtYXJnaW5Ub3A6IHN0cmluZztcbiAgQElucHV0KCkgbWFyZ2luQm90dG9tOiBzdHJpbmc7XG4gIEBJbnB1dCgpIGNvbnRyb2xNYXJnaW46IHN0cmluZztcbiAgQElucHV0KCkgY29udHJvbFBhZGRpbmc6IHN0cmluZztcbiAgQElucHV0KCkgY29udHJvbE92ZXJmbG93OiBzdHJpbmc7XG4gIEBJbnB1dCgpIHBhbmVsV2lkdGg6IHN0cmluZztcbiAgQElucHV0KCkgcGFuZWxNaW5XaWR0aDogc3RyaW5nO1xuICBASW5wdXQoKSBwYW5lbE1pbkhlaWdodDogc3RyaW5nO1xuICBASW5wdXQoKSBjb250cm9sRmxvYXQ6IHN0cmluZztcbiAgQElucHV0KCkgcmVxdWlyZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgQElucHV0KCkgcGF0dGVybjogc3RyaW5nO1xuICBASW5wdXQoKSBtaW46IG51bWJlciB8IHN0cmluZztcbiAgQElucHV0KCkgbWF4OiBudW1iZXIgfCBzdHJpbmc7XG4gIEBJbnB1dCgpIG1pbkxlbmd0aDogbnVtYmVyIHwgc3RyaW5nO1xuICBASW5wdXQoKSBtYXhMZW5ndGg6IG51bWJlciB8IHN0cmluZztcbiAgQElucHV0KCkgaW5wdXRMb2NhbGU6IHN0cmluZztcbiAgQElucHV0KCkgaW5wdXRDaGFyc2V0czogc3RyaW5nO1xuICBASW5wdXQoKSBmb2N1c09uQWN0aXZhdGlvbjogYm9vbGVhbjtcbiAgQElucHV0KCkgZm9jdXNlZDogYm9vbGVhbjtcbiAgQElucHV0KCkgb3JkZXJJbmRleDogbnVtYmVyID0gLTE7XG4gIEBJbnB1dCgpIHg6IHN0cmluZztcbiAgQElucHV0KCkgeTogc3RyaW5nO1xuICBASW5wdXQoKSBzZXQgcmVxdWlyZShyZXE6IGJvb2xlYW4pIHtcbiAgICB0aGlzLnJlcXVpcmVkID0gcmVxO1xuICB9XG4gIEBJbnB1dCgpIGNvbnRyb2xXaWR0aENvbWJvQm94OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEFjY2Vzc29yIGZvciBbW3JlcXVpcmVkXV0gcHJvcGVydHlcbiAgICovXG4gIGdldCByZXF1aXJlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnJlcXVpcmVkO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLy9hZGQgdG8gcHJldmVudCBjb25mdXNpb25cbiAgQElucHV0KCkgY2xhc3MoY3NzOiBzdHJpbmcpIHtcbiAgICB0aGlzLmNzc0NsYXNzID0gY3NzO1xuICB9XG5cbiAgLyoqXG4gICAqIEFjY2Vzc29yIGZvciBbW2Nzc0NsYXNzXV0gcHJvcGVydHlcbiAgICovXG4gIGdldCBjc3NDbGFzcygpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9jc3NDbGFzcztcbiAgfVxuXG4gIC8vVE9ETyBuZWVkIHRvIGZpZ3VyZSBvdXQgd2hhdCB0aGVzZSBkb1xuICBASW5wdXQoKSBoR3JhYlNwYWNlOiBib29sZWFuO1xuICBASW5wdXQoKSB2R3JhYlNwYWNlOiBib29sZWFuO1xuXG4gIEBJbnB1dCgpIGJnQ29sb3I6IHN0cmluZztcblxuICAvL3VzZSBieSA8ZGVmcyAuLi4uPlxuICAvL2UuZy4gPHZ0LWNvbWJvLWJveCBpZD1cImZvb1wiIGVkaXRvcj1cIiNmb29CYXJcIiAuLi4+XG4gIEBJbnB1dCgpIGVkaXRvcjogc3RyaW5nO1xuXG4gIC8vcG9wdXAgbWVudSBpZCB0aGF0IHNob3VsZCBwb3Agd2hlbiB0aGlzIGNvbXAgaXMgcmlnaHQgY2xpY2sgKGlmIHRoZXJlIGlzIGFueSlcbiAgQElucHV0KCkgcG9wdXA6IHN0cmluZztcblxuICAvKipcbiAgICogQWxpZ24gaG9yaXpvbnRhbGx5PyBUT0RPIG5lZWQgaXMgYSBtYWpvciByZWdyZXNzaW9uIHRlc3RcbiAgICovXG4gIEBJbnB1dCgpIGFsaWduSG9yaXpvbnRhbDogc3RyaW5nO1xuXG4gIHByaXZhdGUgX2Nzc0NsYXNzOiBzdHJpbmc7XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgY29tcFJlZjogQ29tcG9uZW50UmVmPGFueT47XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgcHJpdmF0ZSBfdGVtcEZyZWV6ZUNkOiBib29sZWFuO1xuXG4gIC8vYWxpYXMgZm9yIGRpc2FibGVkXG4gIEBJbnB1dCgpIHNldCBlbmFibGVkKGJvbzogYm9vbGVhbikge1xuICAgIGlmICh0eXBlb2YgYm9vID09PSAnc3RyaW5nJykge1xuICAgICAgLy9pZiBlbmFibGVkIGlzIGZhbHNlLCBkaXNhYmxlZCBpcyB0cnVlXG4gICAgICB0aGlzLmRpc2FibGVkID0gYm9vID09PSAndHJ1ZScgPyBmYWxzZSA6IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGlzYWJsZWQgPSAhYm9vO1xuICAgIH1cbiAgfVxuXG4gIGdldCBlbmFibGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhdGhpcy5kaXNhYmxlZDtcbiAgfVxuXG4gIEBJbnB1dCgpIHNldCBzb3J0VmFsdWUodmFsdWU6IHN0cmluZykge1xuICAgIHRoaXMuc29ydCA9IHZhbHVlXG4gIH1cblxuICBnZXQgc29ydFZhbHVlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuc29ydDtcbiAgfVxuXG4gIC8vbG9va3MgbGlrZSBOZXhhd2ViIHN1cHBvcnQgY3VzdG9tIGF0dHJpYnV0ZXMga2V5L3ZhbHVlXG4gIEBJbnB1dCgpIGN1c3RvbUF0dHJpYnV0ZXM6IHsgW25hbWU6IHN0cmluZ106IGFueSB9O1xuXG4gIC8vZm9udFxuICBASW5wdXQoKSBmb250Qm9sZDogYm9vbGVhbiB8IHN0cmluZztcbiAgQElucHV0KCkgZm9udENvbG9yOiBzdHJpbmc7XG4gIEBJbnB1dCgpIGZvbnRJdGFsaWM6IGJvb2xlYW4gfCBzdHJpbmc7XG4gIEBJbnB1dCgpIGZvbnRTaXplOiBudW1iZXI7XG4gIEBJbnB1dCgpIGZvbnRVbmRlcmxpbmU6IGJvb2xlYW4gfCBzdHJpbmc7XG4gIEBJbnB1dCgpIGZvbnRDb2xvckRpc2FibGVkOiBzdHJpbmc7XG4gIEBJbnB1dCgpIG9wYWNpdHk6IHN0cmluZztcblxuICAvL2JvcmRlclxuICBASW5wdXQoKSBib3JkZXJDb2xvcjogc3RyaW5nO1xuICBASW5wdXQoKSBib3JkZXJXaWR0aDogbnVtYmVyIHwgc3RyaW5nO1xuICBASW5wdXQoKSBib3JkZXJTdHlsZTogc3RyaW5nO1xuICBASW5wdXQoKSBib3JkZXJIZWlnaHQ6IG51bWJlciB8IHN0cmluZztcblxuICAvL3NraXAgZW1pdGluZyBjb250ZXh0IG1lbnUgZXZlbnRcbiAgQElucHV0KCkgc2tpcEVtaXRDb250ZXh0TWVudUV2ZW50OiBib29sZWFuO1xuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIEBPdXRwdXQoKSBvbkNvbnRleHRNZW51OiBFdmVudEVtaXR0ZXI8TW91c2VFdmVudD4gPSBuZXcgRXZlbnRFbWl0dGVyPE1vdXNlRXZlbnQ+KCk7XG4gIEBPdXRwdXQoKSBvbkFjdGl2ZUxvc3Q6IEV2ZW50RW1pdHRlcjx2b2lkPiA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcbiAgQE91dHB1dCgpIG9uQmVmb3JlQWN0aXZlTG9zdDogRXZlbnRFbWl0dGVyPHZvaWQ+ID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuXG4gIHN0eWxlczogeyBbbmFtZTogc3RyaW5nXTogc3RyaW5nIH0gPSB7fTtcblxuICAvL2ZvciB0YWJsZSB1c2VcbiAgdGFibGVSb3dObzogbnVtYmVyO1xuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIHByaXZhdGUgX3VuaXF1ZUlkOiBzdHJpbmc7XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIFRoaXMgaXMgZm9yIHVzZSB3aGVuIHNldEF0dHJpYnV0ZShvbkNvbW1hbmQgaXMgc2V0KVxuICAgKi9cbiAgcHJvdGVjdGVkIF9pbnRlcm5hbE9uQ29tbWFuZDogKHBhcmFtPzogYW55KSA9PiB2b2lkO1xuICBwcm90ZWN0ZWQgX2ludGVybmFsT25BY3RpdmVMb3N0OiAocGFyYW0/OiBhbnkpID0+IHZvaWQ7XG5cbiAgLy9pbnRlcm5hbCB1c2Ugb25seSwgZG8gbm90IHVzZSBleHRlcm5hbGx5XG4gIF9pbnRlcm5hbENoYW5nZUNiOiAoY29tcDogQmFzZUNvbXBvbmVudCkgPT4gdm9pZDtcblxuICBnZXQgdW5pcXVlSWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fdW5pcXVlSWQ7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2NoaWxkcmVuOiBNYXA8c3RyaW5nLCBCYXNlQ29tcG9uZW50PiA9IG51bGw7XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgcHJvdGVjdGVkIF9jaGlsZHJlbkluZGV4OiBBcnJheTxzdHJpbmc+ID0gbnVsbDtcblxuICBnZXQgY2hpbGRyZW4oKTogTWFwPHN0cmluZywgQmFzZUNvbXBvbmVudD4ge1xuICAgIHJldHVybiB0aGlzLl9jaGlsZHJlbjtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIHByaXZhdGUgYXR0cmlidXRlQ2hhbmdlTGlzdGVuZXJzOiBBcnJheTxBdHRyaWJ1dGVDaGFuZ2VMaXN0ZW5lcj47XG5cbiAgcHJpdmF0ZSByYWRpb0J1dHRvbkdyb3VwczogTWFwPHN0cmluZywgQXJyYXk8QmFzZUNvbXBvbmVudD4+O1xuXG4gIGhpZ2hsaWdodEJnQ29sb3I6IHN0cmluZztcbiAgaGlnaGxpZ2h0Rm9udENvbG9yOiBzdHJpbmc7XG5cbiAgcGFyZW50VGFibGVSb3c6IGFueTtcblxuICAvL2NhY2hlIHJlZHVjZUNoaWxkcmVuSXRlcmF0aXZlXG4gIC8vIHByaXZhdGUgX3JlZHVjZUNoaWxkcmVuSXRlcmF0aXZlQ2FjaGU6IEFycmF5PEJhc2VDb21wb25lbnQ+O1xuXG4gIC8vdHJhY2sgYWxsIGNoaWxkcmVuIGZvciB0aGUgdmlld1xuICBwcm90ZWN0ZWQgX3ZpZXdDaGlsZHJlbk1hcDogTWFwPHN0cmluZywgQmFzZUNvbXBvbmVudD47XG5cbiAgLy9mb3IgVGFiQ29tcG9uZW50XG4gIHByb3RlY3RlZCB0YWJDaGlsZHJlbklkczogQXJyYXk8c3RyaW5nPjtcblxuICBwcml2YXRlIHNjcm9sbFBhbmVzOiBBcnJheTxCYXNlQ29tcG9uZW50PjtcblxuICBfaXNEeWluZzogYm9vbGVhbjtcblxuICAvKipcbiAgICogQ29uc3RydWN0b3Igd2hlcmUgaXQgcmVxdWlyZWQgbWluaW1hbCBpbmplY3Rpb24gaW4gb3JkZXIgZm9yIHRoaXMgY2xhc3MgdG8gZnVuY3Rpb24gcHJvcGVybHkuIFN1YmNsYXNzIGNhbiBvdmVybG9hZCB0aGlzIGNvbnN0cnVjdG9yXG4gICAqIGJ1dCBpdCBtdXN0IHByb3ZpZGVkIHRoZSBtaW5pbWFsIHJlcXVpcmVkIGl0ZW1zIHRvIGJlIGluamVjdGVkLlxuICAgKlxuICAgKiBAcGFyYW0gcGFyZW50IFRoZSBjb21wb25lbnQgd2hlcmUgdGhpcyBjb21wb25lbnQgd2lsbCBiZSB1c2VkLiBUaGlzIGluamVjdGlvbiBpcyBwcm92aWRlZCBieSBBbmd1bGFyIGlmIHRoZSBwYXJlbnQgY29tcG9uZW50IFwicHJvdmlkZVwiIGl0c2VsZi5cbiAgICogQHBhcmFtIHNlc3Npb25TZXJ2aWNlIFNlc3Npb25TZXJ2aWNlIG5lZWRlZCBieSB0aGlzIGNsYXNzLCB0aGlzIHNob3VsZCBiZSBpbmplY3RlZCBieSBBbmd1bGFyLlxuICAgKiBAcGFyYW0gZWxlbWVudFJlZiB0aGUgZWxlbWVudCByZWZlcmVuY2UgdGhhdCB3cmFwIHRoZSBlbGVtZW50ICh0YWcpIG9mIHRoaXMgY29tcG9uZW50LlxuICAgKiBAcGFyYW0gcmVuZGVyZXIgVGhlIHJlbmRlcmVyIChpbmplY3RlZCBieSBBbmd1bGFyKSB0aGF0IHdlIHVzZWQgdG8gcGVyZm9ybSBET00gbWFuaXB1bGF0aW9uLlxuICAgKi9cbiAgY29uc3RydWN0b3IoQE9wdGlvbmFsKCkgQFNraXBTZWxmKCkgcHJvdGVjdGVkIHBhcmVudDogQmFzZUNvbXBvbmVudCwgcHJpdmF0ZSBzZXNzaW9uU2VydmljZTogU2Vzc2lvblNlcnZpY2UsIHByb3RlY3RlZCBlbGVtZW50UmVmOiBFbGVtZW50UmVmLCBwcm90ZWN0ZWQgcmVuZGVyZXI6IFJlbmRlcmVyMikge1xuICAgIHRoaXMuX3VuaXF1ZUlkID0gQmFzZUNvbXBvbmVudC5nZW5lcmF0ZVVuaXF1ZUlkKCk7XG5cbiAgICAvL2luaXRpYWwgaWRcbiAgICB0aGlzLmlkID0gdGhpcy5fdW5pcXVlSWQ7XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogR290IGNhbGwgd2hlbiB0aGlzIGNvbXBvbmVudCBmaW5pc2hlZCBpbml0aWFsaXppbmcsIGlmIHlvdSBvdmVycmlkZSB0aGlzLCBtYWtlIHN1cmUgdG8gY2FsbCBzdXBlci5uZ0FmdGVyVmlld0luaXQoKVxuICAgKi9cbiAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgIGlmICh0aGlzLnBhcmVudCAhPSBudWxsKSB7XG4gICAgICB0aGlzLnBhcmVudC5hZGRDaGlsZCh0aGlzKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jaGlsZHJlbkluZGV4ID0gXy51bmlxKHRoaXMuX2NoaWxkcmVuSW5kZXgpO1xuXG4gICAgLy9jb21tbmV0IG91dCwgY2F1c2luZyByZWdyZXNzaW9uIGIvYyB0aGUgY3NzIHNlbGVjdG9yIG5lZWQgaWQgb2YgcGFyZW50IHdpbmRvd1xuICAgIC8vIGlmICh0aGlzLnJlbmRlcmVyICE9IG51bGwgJiYgdHlwZW9mIHRoaXMucmVuZGVyZXJbXCJyZW1vdmVBdHRyaWJ1dGVcIl0gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIC8vICAgdGhpcy5yZW5kZXJlci5yZW1vdmVBdHRyaWJ1dGUodGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQsIFwiaWRcIik7XG4gICAgLy8gfVxuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIEluaXQgbGlmZSBjeWNsZSBvZiB0aGlzIGNsYXNzLCBpZiB5b3Ugb3ZlcnJpZGUgdGhpcywgbWFrZSBzdXJlIHRvIGNhbGwgc3VwZXIubmdPbkluaXQoKVxuICAgKi9cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5pbml0Qm9yZGVyTGF5b3V0KCk7XG5cbiAgICBpZiAodGhpcy5mb250Qm9sZCA9PT0gdHJ1ZSB8fCB0aGlzLmZvbnRCb2xkID09PSBcInRydWVcIikge1xuICAgICAgdGhpcy5zZXRGb250Qm9sZCh0cnVlKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5mb250SXRhbGljID09PSB0cnVlIHx8IHRoaXMuZm9udEl0YWxpYyA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgIHRoaXMuc3R5bGVzW1wiZm9udC1zdHlsZVwiXSA9IFwiaXRhbGljXCI7XG4gICAgICB0aGlzLnNldEZvbnRJdGFsaWModHJ1ZSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZm9udFNpemUgIT0gbnVsbCkge1xuICAgICAgdGhpcy5zZXRGb250U2l6ZSh0aGlzLmZvbnRTaXplKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5mb250VW5kZXJsaW5lID09PSB0cnVlIHx8IHRoaXMuZm9udFVuZGVybGluZSA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgIHRoaXMuc2V0Rm9udFVuZGVybGluZSh0cnVlKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5mb250Q29sb3IgIT0gbnVsbCkge1xuICAgICAgdGhpcy5zZXRDb2xvcih0aGlzLmZvbnRDb2xvcik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYXV0b1dyYXAgPT09IHRydWUpIHtcbiAgICAgIHRoaXMuc3R5bGVzW1wid2hpdGUtc3BhY2VcIl0gPSBcIm5vcm1hbFwiO1xuICAgICAgdGhpcy5tYXJrRm9yQ2hlY2soKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuYXV0b1dyYXAgPT09IGZhbHNlKSB7XG4gICAgICB0aGlzLnN0eWxlc1tcIndoaXRlLXNwYWNlXCJdID0gXCJub3dyYXBcIjtcbiAgICAgIHRoaXMubWFya0ZvckNoZWNrKCk7XG4gICAgfVxuXG4gICAgdGhpcy5jaGVja054U3R5bGluZygpO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgcHJpdmF0ZSBjaGVja054U3R5bGluZyhza2lwQXR0cmlidXRlT3ZlcnJpZGU6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIGlmIChza2lwQXR0cmlidXRlT3ZlcnJpZGUgIT09IHRydWUgJiYgdGhpcy5fY3NzQ2xhc3MgIT0gbnVsbCAmJiB0aGlzLl9jc3NDbGFzcy5sZW5ndGggPiAwICYmIHR5cGVvZiBBcHBVdGlscy5hdHRyaWJ1dGVPdmVycmlkZUNsYXNzID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIGxldCBuZXdBdHRyaWJ1dGVzID0gQXBwVXRpbHMuYXR0cmlidXRlT3ZlcnJpZGVDbGFzcyh0aGlzLl9jc3NDbGFzcyk7XG5cbiAgICAgIGlmIChuZXdBdHRyaWJ1dGVzICE9IG51bGwpIHtcbiAgICAgICAgLy8gY2xhc3Mgw6PCgcKrw6nClsKiw6PCgcKXw6PCgcKmw6PCgcKvw6PCgMKBw6bCl8Kiw6XCrcKYw6PCgcKuw6bCjMKHw6XCrsKaw6PCgcKow6PCg8Kew6PCg8K8w6PCgsK4XG4gICAgICAgIGNvbnN0IG5ld0Nzc0NsYXNzID0gXy5maWx0ZXIobmV3QXR0cmlidXRlcywgKGF0dHI6IEF0dHJpYnV0ZU5hbWVWYWx1ZSkgPT4gYXR0ci5hdHRyaWJ1dGVOYW1lID09PSBBdHRyaWJ1dGVzRW51bS5DTEFTUykubWFwKChhdHRyOiBBdHRyaWJ1dGVOYW1lVmFsdWUpID0+IGF0dHIudmFsdWUpLmpvaW4oXCIgXCIpO1xuICAgICAgICBuZXdBdHRyaWJ1dGVzID0gXy5maWx0ZXIobmV3QXR0cmlidXRlcywgKGF0dHI6IEF0dHJpYnV0ZU5hbWVWYWx1ZSkgPT4gYXR0ci5hdHRyaWJ1dGVOYW1lICE9PSBBdHRyaWJ1dGVzRW51bS5DTEFTUyk7XG4gICAgICAgIFxuICAgICAgICBuZXdBdHRyaWJ1dGVzLnB1c2goe1xuICAgICAgICAgIGF0dHJpYnV0ZU5hbWU6IEF0dHJpYnV0ZXNFbnVtLkNMQVNTLFxuICAgICAgICAgIHZhbHVlOiAodGhpcy5fY3NzQ2xhc3MgKyBcIiBcIiArIG5ld0Nzc0NsYXNzKS50cmltKCksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlcyhuZXdBdHRyaWJ1dGVzLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5lbGVtZW50UmVmICE9IG51bGwpIHtcbiAgICAgIGNvbnN0IF92YWxpZGF0ZSA9IHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LmdldEF0dHJpYnV0ZShcInZhbGlkYXRlXCIpO1xuXG4gICAgICBpZiAoc2tpcEF0dHJpYnV0ZU92ZXJyaWRlICE9PSB0cnVlICYmIF92YWxpZGF0ZSAhPSBudWxsICYmIF92YWxpZGF0ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGxldCBuZXdBdHRyaWJ1dGVzID0gQXBwVXRpbHMuYXR0cmlidXRlT3ZlcnJpZGVWYWxpZGF0ZShfdmFsaWRhdGUpO1xuXG4gICAgICAgIGlmIChuZXdBdHRyaWJ1dGVzICE9IG51bGwpIHtcbiAgICAgICAgICAvLyBjbGFzcyDDo8KBwqvDqcKWwqLDo8KBwpfDo8KBwqbDo8KBwq/Do8KAwoHDpsKXwqLDpcKtwpjDo8KBwq7DpsKMwofDpcKuwprDo8KBwqjDo8KDwp7Do8KDwrzDo8KCwrhcbiAgICAgICAgICBjb25zdCBuZXdDc3NDbGFzcyA9IF8uZmlsdGVyKG5ld0F0dHJpYnV0ZXMsIChhdHRyOiBBdHRyaWJ1dGVOYW1lVmFsdWUpID0+IGF0dHIuYXR0cmlidXRlTmFtZSA9PT0gQXR0cmlidXRlc0VudW0uQ0xBU1MpLm1hcCgoYXR0cjogQXR0cmlidXRlTmFtZVZhbHVlKSA9PiBhdHRyLnZhbHVlKS5qb2luKFwiIFwiKTtcbiAgICAgICAgICBuZXdBdHRyaWJ1dGVzID0gXy5maWx0ZXIobmV3QXR0cmlidXRlcywgKGF0dHI6IEF0dHJpYnV0ZU5hbWVWYWx1ZSkgPT4gYXR0ci5hdHRyaWJ1dGVOYW1lICE9PSBBdHRyaWJ1dGVzRW51bS5DTEFTUyk7XG4gICAgICAgICAgXG4gICAgICAgICAgbmV3QXR0cmlidXRlcy5wdXNoKHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZU5hbWU6IEF0dHJpYnV0ZXNFbnVtLkNMQVNTLFxuICAgICAgICAgICAgdmFsdWU6ICh0aGlzLl9jc3NDbGFzcyArIFwiIFwiICsgbmV3Q3NzQ2xhc3MpLnRyaW0oKSxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlcyhuZXdBdHRyaWJ1dGVzLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGJvcmRlciBDU1MgYmFzZWQgb24gYm9yZGVyUG9zaXRpb24gdmFsdWUgKHRvcCB8IGxlZnQgfCBib3R0b20gfCByaWdodClcbiAgICovXG4gIHByaXZhdGUgaW5pdEJvcmRlckxheW91dCgpIHtcbiAgICBpZiAodGhpcy5ib3JkZXJQb3NpdGlvbiAhPSBudWxsICYmIHRoaXMuYm9yZGVyUG9zaXRpb24gIT0gJycpIHtcbiAgICAgIGlmICh0aGlzLl9jc3NDbGFzcyAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMuX2Nzc0NsYXNzID0gdGhpcy5fY3NzQ2xhc3MgKyAnIGJvcmRlci0nICsgdGhpcy5ib3JkZXJQb3NpdGlvbjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2Nzc0NsYXNzID0gJ2JvcmRlci0nICsgdGhpcy5ib3JkZXJQb3NpdGlvbjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogRGVzdHJveSBsaWZlY3ljbGUuIENsZWFyIGNvbXBvbmVudCByZWZlcmVuY2VzIGFuZCBjYWNoZVxuICAgKi9cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5jbGVhbnVwKCk7XG4gICAgdGhpcy5faXNEeWluZyA9IHRydWU7XG5cbiAgICBjb25zdCBwYXJlbnRWaWV3ID0gdGhpcy5nZXRQYXJlbnRWaWV3KCk7XG5cbiAgICBpZiAocGFyZW50VmlldyAhPSBudWxsKSB7XG4gICAgICAvL3JlbW92ZSBvdXJzZWxmIGZyb20gdGhlIHZpZXcgY2hpbGRyZW4gbWFwXG4gICAgICBpZiAocGFyZW50Vmlldy5fdmlld0NoaWxkcmVuTWFwICE9IG51bGwpIHtcbiAgICAgICAgcGFyZW50Vmlldy5fdmlld0NoaWxkcmVuTWFwLmRlbGV0ZShLZXlVdGlscy50b01hcEtleSh0aGlzLmdldElkKCkpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9pbnRlcm5hbENoYW5nZUNiID0gbnVsbDtcblxuICAgIGlmICh0aGlzLnBhcmVudCkge1xuICAgICAgdGhpcy5wYXJlbnQucmVtb3ZlQ2hpbGQodGhpcyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3ZpZXdDaGlsZHJlbk1hcCAhPSBudWxsKSB7XG4gICAgICB0aGlzLl92aWV3Q2hpbGRyZW5NYXAuY2xlYXIoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fY2hpbGRyZW4gIT09IG51bGwpIHtcbiAgICAgIHRoaXMuX2NoaWxkcmVuLmNsZWFyKCk7XG4gICAgfVxuXG4gICAgdGhpcy5fY2hpbGRyZW5JbmRleCA9IG51bGw7XG4gICAgdGhpcy5fdmlld0NoaWxkcmVuTWFwID0gbnVsbDtcbiAgICB0aGlzLnBhcmVudCA9IG51bGw7XG4gICAgdGhpcy5zZXNzaW9uU2VydmljZSA9IG51bGw7XG4gICAgdGhpcy5hdHRyaWJ1dGVDaGFuZ2VMaXN0ZW5lcnMgPSBudWxsO1xuICAgIHRoaXMucmFkaW9CdXR0b25Hcm91cHMgPSBudWxsO1xuICAgIHRoaXMuZWxlbWVudFJlZiA9IG51bGw7XG4gICAgdGhpcy5zY3JvbGxQYW5lcyA9IG51bGw7XG4gIH1cblxuICBwcm90ZWN0ZWQgY2xlYW51cCgpIHtcblxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBbW1Nlc3Npb25TZXJ2aWNlXV0gaW5zdGFuY2UgaW5qZWN0ZWQgdmlhIGNvbnN0cnVjdG9yXG4gICAqIEByZXR1cm5zIFNlc3Npb25TZXJ2aWNlIGluc3RhbmNlXG4gICAqL1xuICBnZXRTZXNzaW9uKCk6IFNlc3Npb25TZXJ2aWNlIHtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uU2VydmljZTtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBHZXQgY2hpbGQgY29tcG9uZW50IGJ5IGlkXG4gICAqIEBwYXJhbSBpZCBDb21wb25lbnQgSURcbiAgICogQHJldHVybnMgQ2hpbGQgW1tCYXNlQ29tcG9uZW50XV1cbiAgICovXG4gIGdldENoaWxkKGlkOiBzdHJpbmcpIHtcbiAgICBpZiAodGhpcy5fY2hpbGRyZW4gIT09IG51bGwpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jaGlsZHJlbi5nZXQoS2V5VXRpbHMudG9NYXBLZXkoaWQpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIFNldCBbW2Rpc2FibGVkXV0gcHJvcGVydHkgdmFsdWVcbiAgICogQHBhcmFtIGJvbyBWYWx1ZSBmb3IgZGlzYWJsZWQgcHJvcGVydHlcbiAgICovXG4gIHNldERpc2FibGVkKGJvbzogYm9vbGVhbikge1xuICAgIHRoaXMuZGlzYWJsZWQgPSBib287XG4gICAgdGhpcy5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBTZXQgW1t2aXNpYmxlXV0gcHJvcGVydHkgdmFsdWVcbiAgICogQHBhcmFtIGJvbyBWYWx1ZSBmb3IgdmlzaWJsZSBwcm9wZXJ0eVxuICAgKi9cbiAgc2V0VmlzaWJsZShib286IGJvb2xlYW4pIHtcbiAgICB0aGlzLnZpc2libGUgPSBib287XG4gICAgdGhpcy5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuXG4gIHNldFNjcm9sbFBvc1ZlcnRpY2FsKGV4cHJlc3Npb24pIHtcbiAgICAvL1RPRE9cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgY29sb3Igb2YgdGV4dCBvbiB0aGUgY29tcG9uZW50XG4gICAqIEBwYXJhbSB2YWx1ZSBDb2xvciBzdHJpbmcuIFNob3VsZCBiZSBoZXhhZGVjaW1hbCBvciBjb2xvciBuYW1lIHN1cHBvcnRlZCBieSBDU1NcbiAgICovXG4gIHNldEZvbnRDb2xvcih2YWx1ZSkge1xuICAgIHRoaXMuc2V0Q29sb3IodmFsdWUpO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIFZhbHVlIG9mIFtbZGlzYWJsZWRdXSBwcm9wZXJ0eVxuICAgKiBAcmV0dXJucyBWYWx1ZSBvZiBkaXNhYmxlZFxuICAgKi9cbiAgZ2V0RGlzYWJsZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZGlzYWJsZWQ7XG4gIH1cblxuICAvKipcbiAgICogVmFsdWUgb2Ygb3Bwb3NpdGUgb2YgW1tkaXNhYmxlZF1dIHZhbHVlXG4gICAqIEByZXR1cm5zIFZhbHVlIG9mIGVuYWJsZWRcbiAgICovXG4gIGdldEVuYWJsZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICF0aGlzLmdldERpc2FibGVkKCk7XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogVmFsdWUgb2Ygc29Db2x1bW5ObyBhdHRyaWJ1dGVcbiAgICogQHJldHVybnMgQ29sdW1uIG51bWJlclxuICAgKi9cbiAgZ2V0U29Db2x1bW5ObygpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZShcInNvQ29sdW1uTm9cIik7XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogR2V0IHRoZSBjb21wb25lbnQgcmVmIHN0cmluZyB2YWx1ZSBmcm9tIFtbZWRpdG9yXV0gcHJvcGVydHlcbiAgICogQHJldHVybnMgUmVmIG9mIGNvbXBvbmVudFxuICAgKi9cbiAgZ2V0RWRpdG9yKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuZWRpdG9yO1xuICB9XG5cbiAgLyoqXG4gICAqIFZhbHVlIG9mIHNvUmVxdWlyZSBhdHRyaWJ1dGVcbiAgICogQHJldHVybnMgc29SZXF1aXJlIHZhbHVlXG4gICAqL1xuICBnZXRTb1JlcXVpcmUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoXCJzb1JlcXVpcmVcIik7XG4gIH1cblxuICAvKipcbiAgICogVmFsdWUgb2Ygc29WYWxpZGF0ZSBhdHRyaWJ1dGVcbiAgICogQHJldHVybnMgc29WYWxpZGF0ZSB2YWx1ZVxuICAgKi9cbiAgZ2V0U29WYWxpZGF0ZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZShcInNvVmFsaWRhdGVcIik7XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogVmFsdWUgb2Ygc29UeXBlIGF0dHJpYnV0ZVxuICAgKiBAcmV0dXJucyBzb1R5cGUgdmFsdWVcbiAgICovXG4gIGdldFNvVHlwZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZShcInNvVHlwZVwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWYWx1ZSBvZiBzb0Zvcm1hdCBhdHRyaWJ1dGVcbiAgICogQHJldHVybnMgc29Gb3JtYXQgdmFsdWVcbiAgICovXG4gIGdldFNvRm9ybWF0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKFwic29Gb3JtYXRcIik7XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogVmFsdWUgb2Ygc29NaW4gYXR0cmlidXRlXG4gICAqIEByZXR1cm5zIHNvTWluIHZhbHVlXG4gICAqL1xuICBnZXRTb01pbigpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZShcInNvTWluXCIpO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIFZhbHVlIG9mIHNvTWF4IGF0dHJpYnV0ZVxuICAgKiBAcmV0dXJucyBzb01heCB2YWx1ZVxuICAgKi9cbiAgZ2V0U29NYXgoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoXCJzb01heFwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWYWx1ZSBvZiBzb01heExlbmd0aCBhdHRyaWJ1dGVcbiAgICogQHJldHVybnMgc29NYXhMZW5ndGggdmFsdWVcbiAgICovXG4gIGdldFNvTWF4TGVuZ3RoKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKFwic29NYXhMZW5ndGhcIik7XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogVmFsdWUgb2Ygc29QYXR0ZXJuIGF0dHJpYnV0ZVxuICAgKiBAcmV0dXJucyBzb1BhdHRlcm4gdmFsdWVcbiAgICovXG4gIGdldFNvUGF0dGVybigpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZShcInNvUGF0dGVyblwiKTtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBWYWx1ZSBvZiBzb01heEJ5dGVMZW4gYXR0cmlidXRlXG4gICAqIEByZXR1cm5zIHNvTWF4Qnl0ZUxlbiB2YWx1ZVxuICAgKi9cbiAgZ2V0U29NYXhCeXRlTGVuKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKFwic29NYXhCeXRlTGVuXCIpO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIFNldCBbW2Rpc2FibGVkXV0gcHJvcGVydHkgdG8gb3Bwb3NpdGUgb2YgaW5wdXRcbiAgICogQHBhcmFtIGJvbyBWYWx1ZSBvZiBlbmFibGVkXG4gICAqL1xuICBzZXRFbmFibGVkKGJvbzogYm9vbGVhbiB8IHN0cmluZykge1xuICAgIGlmICh0eXBlb2YgYm9vID09PSAnc3RyaW5nJykge1xuICAgICAgYm9vID0gYm9vID09PSAndHJ1ZScgPyB0cnVlIDogZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuc2V0RGlzYWJsZWQoIWJvbyk7XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogU2V0IHZhbHVlIG9mIFtbc29ydF1dIHByb3BlcnR5XG4gICAqIEBwYXJhbSB2YWx1ZSBTb3J0IHZhbHVlIHRvIHNldFxuICAgKi9cbiAgc2V0U29ydFZhbHVlKHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLnNvcnQgPSB2YWx1ZVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB2YWx1ZSBvZiBbW3Zpc2libGVdXSBwcm9wZXJ0eVxuICAgKiBAcmV0dXJucyBWaXNibGUgcHJvcGVydHkgdmFsdWVcbiAgICovXG4gIGdldFZpc2libGUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMudmlzaWJsZTtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBTZXRzIHZhbHVlIG9mIHRleHQgYXR0cmlidXRlIGFuZCBtYXJrcyBjb21wb25lbnQgZm9yIGNoYW5nZSBkZXRlY3Rpb25cbiAgICogQHBhcmFtIHZhbHVlIFRleHQgdG8gc2V0LiBJZiBpdCdzIGEgbnVsbCB2YWx1ZSwgaXQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYW4gZW1wdHkgc3RyaW5nXG4gICAqIElmIGl0J3MgYSBudW1iZXIgb3Igbm9uLXN0cmluZywgaXQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHZhbHVlLlxuICAgKi9cbiAgc2V0VGV4dCh2YWx1ZTogc3RyaW5nIHwgbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMudGV4dCA9IHZhbHVlO1xuICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgdGhpcy50ZXh0ID0gJyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudGV4dCA9IHZhbHVlICsgJyc7XG4gICAgfVxuICAgIHRoaXMubWFya0ZvckNoZWNrKCk7XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogU2V0IGNhbGxiYWNrIGZ1bmN0aW9uIGZvciBbW29uQ29tbWFuZF1dXG4gICAqIEBwYXJhbSBmbiBGdW5jdGlvbiB0byBiZSBpbnZva2VkIGZvciBbW29uQ29tbWFuZF1dIGV2ZW50XG4gICAqL1xuICBzZXRPbkNvbW1hbmQoZm46ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLl9pbnRlcm5hbE9uQ29tbWFuZCA9IGZuO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIFNldCBjYWxsYmFjayBmdW5jdGlvbiBmb3IgW1tvbkFjdGl2ZUxvc3RdXVxuICAgKiBAcGFyYW0gZm4gRnVuY3Rpb24gdG8gYmUgaW52b2tlZCBmb3IgW1tvbkFjdGl2ZUxvc3RdXSBldmVudFxuICAgKi9cbiAgc2V0T25BY3RpdmVMb3N0KGZuOiAoKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5faW50ZXJuYWxPbkFjdGl2ZUxvc3QgPSBmbjtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBTZXQgYWxsIGF0dHJpYnV0ZXMgaW4gb25lIGdvXG4gICAqXG4gICAqIEBwYXJhbSBhdHRyc1xuICAgKiBAcGFyYW0gc2tpcEF0dHJpYnV0ZU92ZXJyaWRlIFNldCB0byAndHJ1ZScgaWYgeW91IGRvIG5vdCB3YW50IGN1c3RvbSBhdHRyaWJ1dGUgdG8gb3ZlcnJpZGUgZXhpc2l0aW5nIEhUTUwgYXR0cmlidXRlXG4gICAqL1xuICBzZXRBdHRyaWJ1dGVzKGF0dHJzOiBBcnJheTxBdHRyaWJ1dGVOYW1lVmFsdWU+LCBza2lwQXR0cmlidXRlT3ZlcnJpZGU6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIHRoaXMuX3RlbXBGcmVlemVDZCA9IHRydWU7XG5cbiAgICBmb3IgKGNvbnN0IGF0dHIgb2YgYXR0cnMpIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKGF0dHIuYXR0cmlidXRlTmFtZSwgYXR0ci52YWx1ZSwgc2tpcEF0dHJpYnV0ZU92ZXJyaWRlKTtcbiAgICB9XG5cbiAgICB0aGlzLl90ZW1wRnJlZXplQ2QgPSBmYWxzZTtcbiAgICB0aGlzLm1hcmtGb3JDaGVjaygpO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIFNldCBIVE1MIGF0dHJpYnV0ZSB2YWx1ZSBvbiBjb21wb25lbnRcbiAgICogQHBhcmFtIGF0dHJpYnV0ZSBIVE1MIGF0dHJpYnV0ZSB0byBzZXRcbiAgICogQHBhcmFtIHZhbHVlIFZhbHVlIG9mIGF0dHJpYnV0ZVxuICAgKiBAcGFyYW0gc2tpcEF0dHJpYnV0ZU92ZXJyaWRlIFNldCB0byAndHJ1ZScgaWYgeW91IGRvIG5vdCB3YW50IGN1c3RvbSBhdHRyaWJ1dGUgdG8gb3ZlcnJpZGUgZXhpc2l0aW5nIEhUTUwgYXR0cmlidXRlXG4gICAqL1xuICBzZXRBdHRyaWJ1dGUoYXR0cmlidXRlOiBBdHRyaWJ1dGVzRW51bSB8IHN0cmluZywgdmFsdWU6IGFueSwgc2tpcEF0dHJpYnV0ZU92ZXJyaWRlOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICBpZiAodHlwZW9mIGF0dHJpYnV0ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGNvbnN0IG9yaWdpbmFsQXR0cmlidXRlTmFtZSA9IGF0dHJpYnV0ZTtcbiAgICAgIGF0dHJpYnV0ZSA9IGF0dHJpYnV0ZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICBpZiAoYXR0cmlidXRlID09PSBcImlkXCIpIHtcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoQXR0cmlidXRlc0VudW0uSUQsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoYXR0cmlidXRlID09PSAndmlzaWJsZScpIHtcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoQXR0cmlidXRlc0VudW0uVklTSUJMRSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGUgPT09IFwiY2xhc3NcIikge1xuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShBdHRyaWJ1dGVzRW51bS5DTEFTUywgdmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGUgPT09ICdlbmFibGVkJykge1xuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShBdHRyaWJ1dGVzRW51bS5FTkFCTEVELCB2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZSA9PT0gJ2Rpc2FibGVkJykge1xuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShBdHRyaWJ1dGVzRW51bS5ESVNBQkxFRCwgdmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGUgPT09ICd0ZXh0Jykge1xuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShBdHRyaWJ1dGVzRW51bS5URVhULCB2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZSA9PT0gJ2NvbG9yJykge1xuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShBdHRyaWJ1dGVzRW51bS5DT0xPUiwgdmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGUgPT09IFwidGl0bGVcIikge1xuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShBdHRyaWJ1dGVzRW51bS5USVRMRSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGUgPT09IFwicmVxdWlyZVwiKSB7XG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKEF0dHJpYnV0ZXNFbnVtLlJFUVVJUkUsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoYXR0cmlidXRlID09PSBcImZvbnRCb2xkXCIgfHwgYXR0cmlidXRlID09PSBcImZvbnRib2xkXCIpIHtcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoQXR0cmlidXRlc0VudW0uRk9OVF9CT0xELCB2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZSA9PT0gXCJzZWxlY3RlZFwiKSB7XG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKEF0dHJpYnV0ZXNFbnVtLlNFTEVDVEVELCB2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZSA9PT0gXCJiZ2NvbG9yXCIpIHtcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoQXR0cmlidXRlc0VudW0uQkdfQ09MT1IsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoYXR0cmlidXRlID09PSBcInZhbHVlXCIpIHtcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoQXR0cmlidXRlc0VudW0uVkFMVUUsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoYXR0cmlidXRlID09PSBcIm1heGxlbmd0aFwiIHx8IGF0dHJpYnV0ZSA9PT0gXCJtYXhfbGVuZ3RoXCIpIHtcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoQXR0cmlidXRlc0VudW0uTUFYX0xFTkdUSCwgdmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGUgPT09IFwicmVxdWlyZVwiIHx8IGF0dHJpYnV0ZSA9PT0gXCJyZXF1aXJlZFwiKSB7XG4gICAgICAgIHRoaXMuc2V0UmVxdWlyZSh2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZSA9PT0gXCJ3aWR0aFwiKSB7XG4gICAgICAgIHRoaXMuc2V0Q29udHJvbFdpZHRoKHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoYXR0cmlidXRlID09PSBcImhlaWdodFwiKSB7XG4gICAgICAgIHRoaXMuc2V0Q29udHJvbEhlaWdodCh2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZSA9PT0gXCJmb250U2l6ZVwiIHx8IGF0dHJpYnV0ZSA9PT0gXCJmb250c2l6ZVwiKSB7XG4gICAgICAgIHRoaXMuc2V0Rm9udFNpemUodmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGUgPT09IFwib25jb21tYW5kXCIpIHtcbiAgICAgICAgdGhpcy5zZXRPbkNvbW1hbmQodmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGUgPT09IFwib25hY3RpdmVsb3N0XCIpIHtcbiAgICAgICAgdGhpcy5zZXRPbkFjdGl2ZUxvc3QodmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGUgPT09IFwicGF0dGVyblwiKSB7XG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKEF0dHJpYnV0ZXNFbnVtLlBBVFRFUk4sIHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoYXR0cmlidXRlID09PSBcIm1heFwiKSB7XG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKEF0dHJpYnV0ZXNFbnVtLk1BWCwgdmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGUgPT09IFwibWluXCIpIHtcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoQXR0cmlidXRlc0VudW0uTUlOLCB2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKEphdmFVdGlscy5pc051bWJlcihvcmlnaW5hbEF0dHJpYnV0ZU5hbWUpID09PSB0cnVlKSB7XG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKF8ucGFyc2VJbnQob3JpZ2luYWxBdHRyaWJ1dGVOYW1lKSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zZXRDdXN0b21BdHRyaWJ1dGUob3JpZ2luYWxBdHRyaWJ1dGVOYW1lLCB2YWx1ZSk7XG4gICAgICAgIC8vIExvZ2dlci53YXJuKGBVbmtub3duIGF0dHJpYnV0ZTogJHthdHRyaWJ1dGV9LCBzZXR0aW5nIGFzIGN1c3RvbSBhdHRyaWJ1dGVgKTtcblxuICAgICAgICBpZiAoYXR0cmlidXRlID09PSBcInZhbGlkYXRlXCIgJiYgc2tpcEF0dHJpYnV0ZU92ZXJyaWRlICE9PSB0cnVlICYmIHZhbHVlICE9IG51bGwgJiYgdmFsdWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGxldCBuZXdBdHRyaWJ1dGVzID0gQXBwVXRpbHMuYXR0cmlidXRlT3ZlcnJpZGVWYWxpZGF0ZSh2YWx1ZSk7XG5cbiAgICAgICAgICBpZiAobmV3QXR0cmlidXRlcyAhPSBudWxsKSB7XG4gICAgICAgICAgICAvLyBjbGFzcyDDo8KBwqvDqcKWwqLDo8KBwpfDo8KBwqbDo8KBwq/Do8KAwoHDpsKXwqLDpcKtwpjDo8KBwq7DpsKMwofDpcKuwprDo8KBwqjDo8KDwp7Do8KDwrzDo8KCwrhcbiAgICAgICAgICAgIGNvbnN0IG5ld0Nzc0NsYXNzID0gXy5maWx0ZXIobmV3QXR0cmlidXRlcywgKGF0dHI6IEF0dHJpYnV0ZU5hbWVWYWx1ZSkgPT4gYXR0ci5hdHRyaWJ1dGVOYW1lID09PSBBdHRyaWJ1dGVzRW51bS5DTEFTUykubWFwKChhdHRyOiBBdHRyaWJ1dGVOYW1lVmFsdWUpID0+IGF0dHIudmFsdWUpLmpvaW4oXCIgXCIpO1xuICAgICAgICAgICAgbmV3QXR0cmlidXRlcyA9IF8uZmlsdGVyKG5ld0F0dHJpYnV0ZXMsIChhdHRyOiBBdHRyaWJ1dGVOYW1lVmFsdWUpID0+IGF0dHIuYXR0cmlidXRlTmFtZSAhPT0gQXR0cmlidXRlc0VudW0uQ0xBU1MpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBuZXdBdHRyaWJ1dGVzLnB1c2goe1xuICAgICAgICAgICAgICBhdHRyaWJ1dGVOYW1lOiBBdHRyaWJ1dGVzRW51bS5DTEFTUyxcbiAgICAgICAgICAgICAgdmFsdWU6ICh0aGlzLl9jc3NDbGFzcyArIFwiIFwiICsgbmV3Q3NzQ2xhc3MpLnRyaW0oKSxcbiAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGVzKG5ld0F0dHJpYnV0ZXMsIHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLmZpcmVTZXRBdHRyaWJ1dGVFdmVudChvcmlnaW5hbEF0dHJpYnV0ZU5hbWUsIHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGF0dHJpYnV0ZSA9PT0gQXR0cmlidXRlc0VudW0uQ0xBU1MgJiYgc2tpcEF0dHJpYnV0ZU92ZXJyaWRlICE9PSB0cnVlICYmIHZhbHVlICE9IG51bGwgJiYgdmFsdWUubGVuZ3RoID4gMCAmJiB0eXBlb2YgQXBwVXRpbHMuYXR0cmlidXRlT3ZlcnJpZGVDbGFzcyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGxldCBuZXdBdHRyaWJ1dGVzID0gQXBwVXRpbHMuYXR0cmlidXRlT3ZlcnJpZGVDbGFzcyh2YWx1ZSk7XG5cbiAgICAgICAgaWYgKG5ld0F0dHJpYnV0ZXMgIT0gbnVsbCkge1xuICAgICAgICAgIC8vIGNsYXNzIMOjwoHCq8OpwpbCosOjwoHCl8OjwoHCpsOjwoHCr8OjwoDCgcOmwpfCosOlwq3CmMOjwoHCrsOmwozCh8Olwq7CmsOjwoHCqMOjwoPCnsOjwoPCvMOjwoLCuFxuICAgICAgICAgIGNvbnN0IG5ld0Nzc0NsYXNzID0gXy5maWx0ZXIobmV3QXR0cmlidXRlcywgKGF0dHI6IEF0dHJpYnV0ZU5hbWVWYWx1ZSkgPT4gYXR0ci5hdHRyaWJ1dGVOYW1lID09PSBBdHRyaWJ1dGVzRW51bS5DTEFTUykubWFwKChhdHRyOiBBdHRyaWJ1dGVOYW1lVmFsdWUpID0+IGF0dHIudmFsdWUpLmpvaW4oXCIgXCIpO1xuICAgICAgICAgIG5ld0F0dHJpYnV0ZXMgPSBfLmZpbHRlcihuZXdBdHRyaWJ1dGVzLCAoYXR0cjogQXR0cmlidXRlTmFtZVZhbHVlKSA9PiBhdHRyLmF0dHJpYnV0ZU5hbWUgIT09IEF0dHJpYnV0ZXNFbnVtLkNMQVNTKTtcbiAgICAgICAgICBcbiAgICAgICAgICBuZXdBdHRyaWJ1dGVzLnB1c2goe1xuICAgICAgICAgICAgYXR0cmlidXRlTmFtZTogQXR0cmlidXRlc0VudW0uQ0xBU1MsXG4gICAgICAgICAgICB2YWx1ZTogKHRoaXMuX2Nzc0NsYXNzICsgXCIgXCIgKyBuZXdDc3NDbGFzcykudHJpbSgpLFxuICAgICAgICAgIH0pO1xuICBcbiAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZXMobmV3QXR0cmlidXRlcywgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGF0dHJpYnV0ZSA9PT0gQXR0cmlidXRlc0VudW0uSUQpIHtcbiAgICAgICAgdGhpcy5zZXRJZCh2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZSA9PT0gQXR0cmlidXRlc0VudW0uVklTSUJMRSkge1xuICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCAmJiB2YWx1ZSAhPT0gXCJcIikge1xuICAgICAgICAgIHRoaXMuc2V0VmlzaWJsZShKYXZhVXRpbHMucGFyc2VCb29sZWFuKHZhbHVlKSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYXR0cmlidXRlID09PSBBdHRyaWJ1dGVzRW51bS5DTEFTUykge1xuICAgICAgICB0aGlzLnNldENzc0NsYXNzKHZhbHVlLCBza2lwQXR0cmlidXRlT3ZlcnJpZGUpO1xuICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGUgPT09IEF0dHJpYnV0ZXNFbnVtLkRJU0FCTEVEKSB7XG4gICAgICAgIGlmICh2YWx1ZSAhPSBudWxsICYmIHZhbHVlICE9PSBcIlwiKSB7XG4gICAgICAgICAgdGhpcy5zZXREaXNhYmxlZChKYXZhVXRpbHMucGFyc2VCb29sZWFuKHZhbHVlKSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYXR0cmlidXRlID09PSBBdHRyaWJ1dGVzRW51bS5FTkFCTEVEKSB7XG4gICAgICAgIGlmICh2YWx1ZSAhPSBudWxsICYmIHZhbHVlICE9PSBcIlwiKSB7XG4gICAgICAgICAgdGhpcy5zZXREaXNhYmxlZCghSmF2YVV0aWxzLnBhcnNlQm9vbGVhbih2YWx1ZSkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZSA9PT0gQXR0cmlidXRlc0VudW0uVEVYVCkge1xuICAgICAgICB0aGlzLnNldFRleHQodmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGUgPT09IEF0dHJpYnV0ZXNFbnVtLkNPTE9SKSB7XG4gICAgICAgIHRoaXMuc2V0Q29sb3IodmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGUgPT09IEF0dHJpYnV0ZXNFbnVtLkZPTlRfQk9MRCkge1xuICAgICAgICB0aGlzLnNldEZvbnRCb2xkKHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoYXR0cmlidXRlID09PSBBdHRyaWJ1dGVzRW51bS5PTl9DT01NQU5EKSB7XG4gICAgICAgIHRoaXMuc2V0T25Db21tYW5kKHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoYXR0cmlidXRlID09PSBBdHRyaWJ1dGVzRW51bS5SRVFVSVJFKSB7XG4gICAgICAgIHRoaXMuc2V0UmVxdWlyZSh2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZSA9PT0gQXR0cmlidXRlc0VudW0uVElUTEUpIHtcbiAgICAgICAgdGhpcy5zZXRUaXRsZSh2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZSA9PT0gQXR0cmlidXRlc0VudW0uU0VMRUNURUQpIHtcbiAgICAgICAgdGhpcy5zZXRTZWxlY3RlZCh2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZSA9PT0gQXR0cmlidXRlc0VudW0uQkdfQ09MT1IpIHtcbiAgICAgICAgdGhpcy5zZXRCZ0NvbG9yKHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoYXR0cmlidXRlID09PSBBdHRyaWJ1dGVzRW51bS5WQUxVRSkge1xuICAgICAgICB0aGlzLnNldFZhbHVlKHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoYXR0cmlidXRlID09PSBBdHRyaWJ1dGVzRW51bS5NQVhfTEVOR1RIKSB7XG4gICAgICAgIHRoaXMuc2V0TWF4TGVuZ3RoKHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoYXR0cmlidXRlID09PSBBdHRyaWJ1dGVzRW51bS5NQVgpIHtcbiAgICAgICAgdGhpcy5zZXRNYXgodmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGUgPT09IEF0dHJpYnV0ZXNFbnVtLk1JTikge1xuICAgICAgICB0aGlzLnNldE1pbih2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZSA9PT0gQXR0cmlidXRlc0VudW0uUEFUVEVSTikge1xuICAgICAgICB0aGlzLnNldFBhdHRlcm4odmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgTG9nZ2VyLndhcm4oJ1VuYWJsZSB0byBzZXQgYXR0cmlidXRlLCB1bmtub3duIGF0dHJpYnV0ZSBpZDogJyArIGF0dHJpYnV0ZSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMubWFya0ZvckNoZWNrKCk7XG4gICAgfVxuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIEdldCB2YWx1ZSBvZiBIVE1MIGF0dHJpYnV0ZVxuICAgKiBAcGFyYW0gYXR0cmlidXRlIE5hbWUgb2YgSFRNTCBhdHRyaWJ1dGUgdG8gZ2V0XG4gICAqIEByZXR1cm5zIFZhbHVlIG9mIGF0dHJpYnV0ZVxuICAgKi9cbiAgZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZTogc3RyaW5nIHwgQXR0cmlidXRlc0VudW0sIHNraXBRdWVyeURPTUlmTm90RXhpc3RzOiBib29sZWFuID0gZmFsc2UpOiBhbnkge1xuICAgIGlmICh0eXBlb2YgYXR0cmlidXRlID09PSAnc3RyaW5nJykge1xuICAgICAgY29uc3QgYXR0cmlidXRlTG93ZXIgPSBhdHRyaWJ1dGUudG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmIChhdHRyaWJ1dGVMb3dlciA9PT0gJ3Zpc2libGUnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFZpc2libGUoKSArICcnO1xuICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGVMb3dlciA9PT0gJ2VuYWJsZWQnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEVuYWJsZWQoKSArICcnO1xuICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGVMb3dlciA9PT0gJ2Rpc2FibGVkJykge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXREaXNhYmxlZCgpICsgJyc7XG4gICAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZUxvd2VyID09PSAndGV4dCcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGV4dCgpO1xuICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGVMb3dlciA9PT0gJ2NvbG9yJykge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2xvcigpO1xuICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGVMb3dlciA9PT0gJ3JlcXVpcmUnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFJlcXVpcmVkKCkgKyAnJztcbiAgICAgIH0gZWxzZSBpZiAoYXR0cmlidXRlTG93ZXIgPT09IFwidmFsdWVcIikge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRWYWx1ZSgpO1xuICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGVMb3dlciA9PT0gXCJzZWxlY3RlZFwiKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldENoZWNrZWQoKSArICcnO1xuICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGVMb3dlciA9PT0gXCJpZFwiKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldElkKCk7XG4gICAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZUxvd2VyID09PSBcInBhdHRlcm5cIikge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRQYXR0ZXJuKCk7XG4gICAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZUxvd2VyID09PSBcIm1pblwiKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1pbigpO1xuICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGVMb3dlciA9PT0gXCJtYXhcIikge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRNYXgoKTtcbiAgICAgIH0gZWxzZSBpZiAoYXR0cmlidXRlTG93ZXIgPT09IFwibWF4X2xlbmd0aFwiKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1heExlbmd0aCgpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmN1c3RvbUF0dHJpYnV0ZXMgIT0gbnVsbCAmJiB0aGlzLmN1c3RvbUF0dHJpYnV0ZXNbYXR0cmlidXRlXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEN1c3RvbUF0dHJpYnV0ZShhdHRyaWJ1dGUpO1xuICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGUgPT09IFwiaXNMb2NrZWRDb2x1bW5cIikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9IGVsc2UgaWYgKHNraXBRdWVyeURPTUlmTm90RXhpc3RzICE9PSB0cnVlKSB7XG4gICAgICAgIExvZ2dlci53YXJuKGBBdHRyaWJ1dGUgJHthdHRyaWJ1dGV9IGRvZXMgbm90IGV4aXN0cywgdHJ5aW5nIHRvIGdldCBmcm9tIERPTWApO1xuICAgICAgICBpZiAodGhpcy5lbGVtZW50UmVmICE9IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZSA9PT0gQXR0cmlidXRlc0VudW0uVklTSUJMRSkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0VmlzaWJsZSgpICsgJyc7XG4gICAgfSBlbHNlIGlmIChhdHRyaWJ1dGUgPT09IEF0dHJpYnV0ZXNFbnVtLkRJU0FCTEVEKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXREaXNhYmxlZCgpICsgJyc7XG4gICAgfSBlbHNlIGlmIChhdHRyaWJ1dGUgPT09IEF0dHJpYnV0ZXNFbnVtLkVOQUJMRUQpIHtcbiAgICAgIHJldHVybiAhdGhpcy5nZXREaXNhYmxlZCgpICsgJyc7XG4gICAgfSBlbHNlIGlmIChhdHRyaWJ1dGUgPT09IEF0dHJpYnV0ZXNFbnVtLlRFWFQpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldFRleHQoKTtcbiAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZSA9PT0gQXR0cmlidXRlc0VudW0uQ09MT1IpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldENvbG9yKCk7XG4gICAgfSBlbHNlIGlmIChhdHRyaWJ1dGUgPT09IEF0dHJpYnV0ZXNFbnVtLlJFUVVJUkUpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldFJlcXVpcmVkKCkgKyAnJztcbiAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZSA9PT0gQXR0cmlidXRlc0VudW0uVkFMVUUpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldFZhbHVlKCk7XG4gICAgfSBlbHNlIGlmIChhdHRyaWJ1dGUgPT09IEF0dHJpYnV0ZXNFbnVtLlNFTEVDVEVEKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRDaGVja2VkKCkgKyAnJztcbiAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZSA9PT0gQXR0cmlidXRlc0VudW0uUEFUVEVSTikge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0UGF0dGVybigpO1xuICAgIH0gZWxzZSBpZiAoYXR0cmlidXRlID09PSBBdHRyaWJ1dGVzRW51bS5NSU4pIHtcbiAgICAgIHJldHVybiB0aGlzLmdldE1pbigpO1xuICAgIH0gZWxzZSBpZiAoYXR0cmlidXRlID09PSBBdHRyaWJ1dGVzRW51bS5NQVgpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldE1heCgpO1xuICAgIH0gZWxzZSBpZiAoYXR0cmlidXRlID09PSBBdHRyaWJ1dGVzRW51bS5NQVhfTEVOR1RIKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRNYXhMZW5ndGgoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcignVW5hYmxlIHRvIGdldCBhdHRyaWJ1dGUsIHVua25vd24gYXR0cmlidXRlIGlkOiAnICsgYXR0cmlidXRlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIEZvY3VzIHRoZSBIVE1MIGVsZW1lbnQgb2YgdGhpcyBjb21wb25lbnRcbiAgICovXG4gIHJlcXVlc3RGb2N1cygpIHtcbiAgICBpZiAodGhpcy5nZXRFbGVtZW50KCkgIT0gbnVsbCkge1xuICAgICAgdGhpcy5nZXRFbGVtZW50KCkuZm9jdXMoKTtcbiAgICB9XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogRm9jdXMgdGhlIG5hdGl2ZSBIVE1MIGVsZW1lbnQgb2YgdGhlIGNvbXBvbmVudCBhbmQgbWFyayBmb3IgY2hhbmdlIGRldGVjdGlvblxuICAgKi9cbiAgc2V0Rm9jdXMoKSB7XG4gICAgaWYgKHRoaXMuZWxlbWVudFJlZiAhPSBudWxsKSB7XG4gICAgICAodGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQgYXMgSFRNTEVsZW1lbnQpLmZvY3VzKCk7XG4gICAgICB0aGlzLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFdmVudCBoYW5kbGVyIGZvciB3aGVuIGZvY3VzIGlzIGxvc3QuIEludm9rZXMgb25BY3RpdmVMb3N0IGV2ZW50IGhhbmRsZXJcbiAgICogQGV2ZW50IFtbT25BY3RpdmVMb3N0XV1cbiAgICovXG4gIGZvY3VzTG9zdCgpIHtcbiAgICB0aGlzLm9uQWN0aXZlTG9zdC5lbWl0KCk7XG5cbiAgICBpZiAodHlwZW9mIHRoaXMuX2ludGVybmFsT25BY3RpdmVMb3N0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzLl9pbnRlcm5hbE9uQWN0aXZlTG9zdCh0aGlzKTtcbiAgICB9XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogQ3JlYXRlcyBhIHVuaXF1ZSBpZCB1c2luZyBhbiBvcHRpb25hbCBwcmVmaXhcbiAgICogQHBhcmFtIHByZWZpeCBTdHJpbmcgdG8gYXBwZW5kIHRvIGJlZ2lubmluZyBvZiBJRFxuICAgKiBAcmV0dXJucyBVbmlxdWUgSURcbiAgICovXG4gIHN0YXRpYyBnZW5lcmF0ZVVuaXF1ZUlkKHByZWZpeDogc3RyaW5nID0gJ2Jhc2UnKTogc3RyaW5nIHtcbiAgICByZXR1cm4gcHJlZml4ICsgRGF0ZS5ub3coKSArICdfJyArIF8ucmFuZG9tKDEsIDEwMDApICsgXy5yYW5kb20oMSwgMTAwKTtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBBZGRzIGNoaWxkIGNvbXBvbmVudCB0byB0aGlzIGNvbXBvbmVudFxuICAgKiBAcGFyYW0gY2hpbGQgQ29tcG9uZW50IHRvIGFkZCBhcyBjaGlsZFxuICAgKi9cbiAgcHJvdGVjdGVkIGFkZENoaWxkKGNoaWxkOiBCYXNlQ29tcG9uZW50KSB7XG4gICAgaWYgKGNoaWxkLmlkICE9PSB0aGlzLmlkKSB7XG4gICAgICBjb25zdCBjaGlsZEtleSA9IEtleVV0aWxzLnRvTWFwS2V5KGNoaWxkLmlkKTtcblxuICAgICAgaWYgKHRoaXMuX2NoaWxkcmVuID09PSBudWxsKSB7XG4gICAgICAgIHRoaXMuX2NoaWxkcmVuID0gbmV3IE1hcDxzdHJpbmcsIEJhc2VDb21wb25lbnQ+KCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9jaGlsZHJlbkluZGV4ID09PSBudWxsKSB7XG4gICAgICAgIHRoaXMuX2NoaWxkcmVuSW5kZXggPSBuZXcgQXJyYXk8c3RyaW5nPigpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9jaGlsZHJlbi5zZXQoY2hpbGRLZXksIGNoaWxkKTtcbiAgICAgIHRoaXMuX2NoaWxkcmVuSW5kZXgucHVzaChjaGlsZC5pZCk7XG5cbiAgICAgIC8vY2hlY2sgdG8gc2VlIGlmIHdlIGhhdmUgVmlld0NvbXBvbmVudCwgaWYgc28sIHJlZ2lzdGVyIG91cnNlbGYgc28gdGhhdFxuICAgICAgLy9pdCBjYW4gYmUgbG9jYXRlZCBmYXN0ZXJcbiAgICAgIGNvbnN0IHBhcmVudFZpZXcgPSB0aGlzLmdldFBhcmVudFZpZXcoKTtcblxuICAgICAgaWYgKHBhcmVudFZpZXcgIT0gbnVsbCAmJiAoY2hpbGQuaXNGYXV4RWxlbWVudCgpIHx8IGNoaWxkLmlzRGlhbG9nKCkgIT09IHRydWUpKSB7XG4gICAgICAgIGlmIChwYXJlbnRWaWV3Ll92aWV3Q2hpbGRyZW5NYXAgPT0gbnVsbCkge1xuICAgICAgICAgIHBhcmVudFZpZXcuX3ZpZXdDaGlsZHJlbk1hcCA9IG5ldyBNYXA8c3RyaW5nLCBCYXNlQ29tcG9uZW50PigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcGFyZW50Vmlldy5fdmlld0NoaWxkcmVuTWFwLnNldChjaGlsZEtleSwgY2hpbGQpO1xuXG4gICAgICAgIC8vdHJhY2sgU2Nyb2xsUGFuZSBmb3Igc2Nyb2xsIGFkanVzdG1lbnRcbiAgICAgICAgaWYgKHR5cGVvZiBjaGlsZC5pc1Njcm9sbFBhbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBjaGlsZC5pc1Njcm9sbFBhbmUoKSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHBhcmVudFZpZXcucmVnaXN0ZXJTY3JvbGxQYW5lKGNoaWxkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG5hdGl2ZSBlbGVtZW50IG9mIHRoZSBjb21wb25lbnQgaWYgYSByZWZlcmVuY2UgdG8gaXQgaXMgZGVmaW5lZFxuICAgKiBAcmV0dXJucyBUaGUgSFRNTCBuYXRpdmUgZWxlbWVudCBvciAnbnVsbCcgaWYgcmVmZXJlbmNlIGlzIG1pc3NpbmdcbiAgICovXG4gIGdldEVsZW1lbnQoKTogSFRNTEVsZW1lbnQge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnRSZWYgPyB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCA6IG51bGw7XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogR2V0IHRoZSB0ZXh0IHByb3BlcnR5IHZhbHVlXG4gICAqIEByZXR1cm5zIFRleHQgdmFsdWVcbiAgICovXG4gIGdldFRleHQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy50ZXh0O1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIFNldCBDU1MgY29sb3Igc3R5bGUgYXR0cmlidXRlIGFuZCBtYXJrcyBmb3IgY2hhbmdlIGRldGVjdGlvblxuICAgKiBAcGFyYW0gY29sb3IgQ1NTIGNvbG9yIHN0cmluZyB2YWx1ZS4gU2hvdWxkIGJlIGhleGFkZWNpbWFsIG9yIHZhbGlkIENTUyBjb2xvciBzdHJpbmdcbiAgICovXG4gIHNldENvbG9yKGNvbG9yOiBzdHJpbmcpIHtcbiAgICBpZiAoY29sb3IgPT0gbnVsbCB8fCBjb2xvciA9PT0gXCJcIikge1xuICAgICAgZGVsZXRlIHRoaXMuc3R5bGVzWydjb2xvciddO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0eWxlc1snY29sb3InXSA9IGNvbG9yO1xuICAgIH1cblxuICAgIHRoaXMubWFya0ZvckNoZWNrKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjb2xvciBzdHlsZSBhdHRyaWJ1dGUgdmFsdWVcbiAgICogQHJldHVybnMgQ29sb3Igc3RyaW5nLiBIZXhhZGVjaW1hbCBvciBDU1MgY29sb3Igc3RyaW5nXG4gICAqL1xuICBnZXRDb2xvcigpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLnN0eWxlc1snY29sb3InXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgYmFja2dyb3VuZCBjb2xvciBDU1Mgc3R5bGUgYXR0cmlidXRlIHZhbHVlXG4gICAqIEBwYXJhbSBiZ0NvbG9yIENvbG9yIHN0cmluZyB2YWx1ZSB0byBzZXQuIFNob3VsZCBiZSBoZXhhZGVjaW1hbCBvciB2YWxpZCBDU1MgY29sb3Igc3RyaW5nLlxuICAgKi9cbiAgc2V0QmdDb2xvcihiZ0NvbG9yOiBzdHJpbmcpIHtcbiAgICB0aGlzLmJnQ29sb3IgPSBiZ0NvbG9yO1xuICAgIHRoaXMuc3R5bGVzW1wiYmFja2dyb3VuZFwiXSA9IGJnQ29sb3I7XG4gICAgdGhpcy5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBTZXRzIGZvbnQtd2VpZ2h0IHN0eWxlIHByb3BlcnR5IHRvIGJvbGRcbiAgICogQHBhcmFtIGJvbyBTd2l0Y2ggZm9yIHR1cm5pbmcgYm9sZCBzdHlsZSBvbi9vZmZcbiAgICovXG4gIHNldEZvbnRCb2xkKGJvbzogYm9vbGVhbiB8IHN0cmluZykge1xuICAgIHRoaXMuZm9udEJvbGQgPSBib287XG5cbiAgICBpZiAoYm9vID09PSB0cnVlIHx8IGJvbyA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgIHRoaXMuc3R5bGVzW1wiZm9udC13ZWlnaHRcIl0gPSBcImJvbGRcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVsZXRlIHRoaXMuc3R5bGVzW1wiZm9udC13ZWlnaHRcIl07XG4gICAgfVxuXG4gICAgdGhpcy5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBTZXRzIENTUyBzdHlsZSBhdHRyaWJ1dGUgZm9udC1zdHlsZSB0byBpdGFsaWNcbiAgICogQHBhcmFtIGJvbyBTd2l0Y2ggZm9yIHR1cm5pbmcgaXRhbGljIHN0eWxlIG9uL29mZlxuICAgKi9cbiAgc2V0Rm9udEl0YWxpYyhib286IGJvb2xlYW4gfCBzdHJpbmcpIHtcbiAgICB0aGlzLmZvbnRJdGFsaWMgPSBib287XG5cbiAgICBpZiAoYm9vID09PSB0cnVlIHx8IGJvbyA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgIHRoaXMuc3R5bGVzW1wiZm9udC1zdHlsZVwiXSA9IFwiaXRhbGljXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlbGV0ZSB0aGlzLnN0eWxlc1tcImZvbnQtc3R5bGVcIl07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgQ1NTIHN0eWxlIGF0dHJpYnV0ZSBmb250LXNpemVcbiAgICogQHBhcmFtIHNpemUgTnVtYmVyIG9mIHBpeGVscyBmb3IgZm9udC1zaXplXG4gICAqL1xuICBzZXRGb250U2l6ZShzaXplOiBudW1iZXIpIHtcbiAgICB0aGlzLmZvbnRTaXplID0gc2l6ZTtcblxuICAgIHRoaXMuc3R5bGVzW1wiZm9udC1zaXplXCJdID0gc2l6ZSArIFwicHhcIjtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBBZGQvcmVtb3ZlIENTUyBzdHlsZSBhdHRyaWJ1dGUgdGV4dC1kZWNvcmF0aW9uIHRvIHVuZGVybGluZVxuICAgKiBAcGFyYW0gdW5kZXJsaW5lIFN3aXRjaCBmb3IgdHVybmluZyB1bmRlcmxpbmUgc3R5bGUgb24vb2ZmIGZvciB0ZXh0XG4gICAqL1xuICBzZXRGb250VW5kZXJsaW5lKHVuZGVybGluZTogYm9vbGVhbiB8IHN0cmluZykge1xuICAgIHRoaXMuZm9udFVuZGVybGluZSA9IHVuZGVybGluZTtcblxuICAgIGlmICh0aGlzLmZvbnRVbmRlcmxpbmUgPT09IFwidHJ1ZVwiIHx8IHRoaXMuZm9udFVuZGVybGluZSA9PT0gdHJ1ZSkge1xuICAgICAgdGhpcy5zdHlsZXNbXCJ0ZXh0LWRlY29yYXRpb25cIl0gPSBcInVuZGVybGluZVwiO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWxldGUgdGhpcy5zdHlsZXNbXCJ0ZXh0LWRlY29yYXRpb25cIl07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IGhhbmRsZXIgdGhhdCByZWdpc3RlcnMgZm9jdXMgZXZlbnRcbiAgICogQHBhcmFtIGV2ZW50XG4gICAqL1xuICBoYW5kbGVGb2N1cyhldmVudDogRm9jdXNFdmVudCkge1xuICAgIHRoaXMucmVnaXN0ZXJDbGllbnRFdmVudChldmVudCk7XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogRXZlbnQgaGFuZGxlciB0aGF0IHJlZ2lzdGVycyBjbGljayBldmVudFxuICAgKiBAcGFyYW0gZXZlbnRcbiAgICovXG4gIGhhbmRsZUNsaWNrKGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gICAgdGhpcy5yZWdpc3RlckNsaWVudEV2ZW50KGV2ZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmVudCBoYW5kbGVyIHRoYXQgcmVnaXN0ZXJzIGtleWRvd24gZXZlbnRcbiAgICogQHBhcmFtIGV2ZW50XG4gICAqL1xuICBoYW5kbGVLZXlEb3duKGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XG4gICAgdGhpcy5yZWdpc3RlckNsaWVudEV2ZW50KGV2ZW50KTtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBFdmVudCBoYW5kbGVyIHRoYXQgcmVnaXN0ZXJzIGtleXVwIGV2ZW50XG4gICAqIEBwYXJhbSBldmVudFxuICAgKi9cbiAgaGFuZGxlS2V5VXAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICB0aGlzLnJlZ2lzdGVyQ2xpZW50RXZlbnQoZXZlbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IGhhbmRsZXIgdGhhdCByZWdpc3RlcnMgbW91c2Vkb3duIGV2ZW50XG4gICAqIEBwYXJhbSBldmVudFxuICAgKi9cbiAgaGFuZGxlTW91c2VEb3duKGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gICAgdGhpcy5yZWdpc3RlckNsaWVudEV2ZW50KGV2ZW50KTtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBHZXRzIGN1c3RvbSBhdHRyaWJ1dGUgYnkgbmFtZSBpZiBpdCBleGlzdHNcbiAgICogQHBhcmFtIGF0dHJpYnV0ZU5hbWUgTmFtZSBvZiBjdXN0b20gYXR0cmlidXRlXG4gICAqIEByZXR1cm5zIEN1c3RvbSBhdHRyaWJ1dGUgaWYgaXQgZXhpc3RzLCBvdGhlcndpc2UgdW5kZWZpbmVkXG4gICAqL1xuICBnZXRDdXN0b21BdHRyaWJ1dGUoYXR0cmlidXRlTmFtZTogc3RyaW5nKTogYW55IHtcbiAgICBpZiAodGhpcy5jdXN0b21BdHRyaWJ1dGVzICE9IG51bGwpIHtcbiAgICAgIHJldHVybiB0aGlzLmN1c3RvbUF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBTZXQgYXR0cmlidXRlIG9uIGN1c3RvbUF0dHJpYnV0ZSBvYmplY3QgdXNpbmcgbmFtZSBhcyBrZXlcbiAgICogQHBhcmFtIG5hbWUga2V5IG5hbWUgb2YgYXR0cmlidXRlXG4gICAqIEBwYXJhbSB2YWx1ZSB2YWx1ZSB0byBzZXQgZm9yIGtleS9uYW1lXG4gICAqL1xuICBzZXRDdXN0b21BdHRyaWJ1dGUobmFtZTogc3RyaW5nLCB2YWx1ZTogYW55KSB7XG4gICAgaWYgKHRoaXMuY3VzdG9tQXR0cmlidXRlcyA9PSBudWxsKSB7XG4gICAgICB0aGlzLmN1c3RvbUF0dHJpYnV0ZXMgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgdGhpcy5jdXN0b21BdHRyaWJ1dGVzW25hbWVdID0gdmFsdWUgKyAnJztcbiAgICB9XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogQ2hlY2sgaWYgY3VzdG9tIGF0dHJpYnV0ZSBleGlzdHNcbiAgICogQHBhcmFtIGlkIEtleSBuYW1lIG9mIGF0dHJpYnV0ZVxuICAgKiBAcmV0dXJucyBUcnVlIGlmIGN1c3RvbSBhdHRyaWJ1dGUgd2l0aCBuYW1lL2tleSBleGlzdHNcbiAgICovXG4gIGhhc0N1c3RvbUF0dHJpYnV0ZShpZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY3VzdG9tQXR0cmlidXRlcyAhPSBudWxsICYmIHRoaXMuY3VzdG9tQXR0cmlidXRlc1tpZF0gIT0gbnVsbDtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBHZXQgY2hpbGQgY29tcG9uZW50IGJ5IGluZGV4XG4gICAqIEBwYXJhbSBpZHggSW5kZXggb2YgY2hpbGQgY29tcG9uZW50XG4gICAqIEByZXR1cm5zIENoaWxkIFtbQmFzZUNvbXBvbmVudF1dXG4gICAqL1xuICBnZXRDaGlsZEF0KGlkeDogbnVtYmVyKTogQmFzZUNvbXBvbmVudCB7XG4gICAgaWYgKHRoaXMuX2NoaWxkcmVuSW5kZXggIT09IG51bGwpIHtcbiAgICAgIGlmICh0aGlzLl9jaGlsZHJlbkluZGV4Lmxlbmd0aCA+IGlkeCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRDaGlsZCh0aGlzLl9jaGlsZHJlbkluZGV4W2lkeF0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbnVtYmVyIG9mIGNoaWxkIGNvbXBvbmVudHNcbiAgICogQHJldHVybnMgTnVtYmVyIG9mIGNoaWxkcmVuXG4gICAqL1xuICBnZXRDaGlsZENvdW50KCk6IG51bWJlciB7XG4gICAgaWYgKHRoaXMuX2NoaWxkcmVuICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY2hpbGRyZW4uc2l6ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBpbmRleCBvZiBjaGlsZCBjb21wb25lbnQgaWYgaXQgZXhpc3RzXG4gICAqIEBwYXJhbSBjaGlsZCBDaGlsZCBjb21wb25lbnRcbiAgICovXG4gIGluZGV4T2ZDaGlsZChjaGlsZDogYW55KTogbnVtYmVyIHtcbiAgICAvL1RPRE9cbiAgICBjb25zb2xlLmVycm9yKFwiaW5kZXhPZkNoaWxkIGlzIG5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgICByZXR1cm4gLTE7XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogSW5zZXJ0IGNoaWxkIGNvbXBvbmVudCB0byBjaGlsZHJlbiBhcnJheSBhdCBsb2NhdGlvbiBvZiBpbmRleFxuICAgKiBAcGFyYW0gaWR4IEluZGV4IG9mIGluc2VydCBsb2NhdGlvblxuICAgKiBAcGFyYW0gcm93XG4gICAqL1xuICBpbnNlcnRDaGlsZEF0KGlkeDogbnVtYmVyLCByb3c6IGFueSkge1xuICAgIC8vVE9ET1xuICAgIGNvbnNvbGUuZXJyb3IoXCJpbnNlcnRDaGlsZEF0IGlzIG5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBUT0RPOiBBZGQgZG9jdW1lbnRhdGlvbiBmb3IgZW1pdEludGVybmFsQ29tbWFuZFxuICAgKi9cbiAgcHJvdGVjdGVkIGVtaXRJbnRlcm5hbE9uQ29tbWFuZCgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuX2ludGVybmFsT25Db21tYW5kID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzLl9pbnRlcm5hbE9uQ29tbWFuZCh0aGlzKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMuX2ludGVybmFsT25Db21tYW5kID09PSBcInN0cmluZ1wiKSB7XG4gICAgICB0aGlzLmludm9rZU1jb0FjdGlvbih0aGlzLl9pbnRlcm5hbE9uQ29tbWFuZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBldmVudCBoYW5kbGVyIGZvciBjbGllbnQgZXZlbnRcbiAgICogQHBhcmFtIGV2ZW50IEV2ZW50IHRvIHJlZ2lzdGVyXG4gICAqL1xuICBwcm90ZWN0ZWQgcmVnaXN0ZXJDbGllbnRFdmVudChldmVudDogRXZlbnQpIHtcbiAgICBjb25zdCBjbGllbnRFdmVudCA9IG5ldyBDbGllbnRFdmVudCh0aGlzLCBldmVudCk7XG5cbiAgICBpZiAoQXBwVXRpbHMuY3VzdG9taXplQ2xpZW50RXZlbnQgIT0gbnVsbCkge1xuICAgICAgQXBwVXRpbHMuY3VzdG9taXplQ2xpZW50RXZlbnQodGhpcywgY2xpZW50RXZlbnQpO1xuICAgIH1cblxuICAgIHRoaXMuZ2V0U2Vzc2lvbigpLmdldEV2ZW50SGFuZGxlcigpLnNldENsaWVudEV2ZW50KGNsaWVudEV2ZW50KTtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBHZXQgdGhlIG5hdGl2ZSBIVE1MIGVsZW1lbnQgdGFnIG5hbWVcbiAgICogQHJldHVybnMgTmFtZSBvZiBIVE1MIGVsZW1lbnQgdGFnXG4gICAqL1xuICBnZXRUYWdOYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudFJlZiAhPSBudWxsID8gdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQudGFnTmFtZSA6ICcnO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjb21wb25lbnQgdGFnIG5hbWUgd2l0aG91dCB2aXZpZnkgY29yZSBwcmVmaXggKGkuZS4gXCJ2dC1cIilcbiAgICogQHJldHVybnMgVGFnIG5hbWVcbiAgICovXG4gIGdldExvY2FsTmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmdldFRhZ05hbWUoKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoXCJ2dC1cIiwgXCJcIik7XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogR2V0IHRoZSBwYXJlbnQgY29tcG9uZW50IGlmIGl0IGV4aXN0c1xuICAgKiBAcmV0dXJucyBDb21wb25lbnQgb3IgbnVsbCBpZiB0aGVyZSBpcyBubyBwYXJlbnRcbiAgICovXG4gIGdldFBhcmVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJlbnQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHZhbHVlIHByb3BlcnR5IGlmIGl0IGV4aXN0cywgb3RoZXJ3aXNlIHJldHVybiAnbnVsbCdcbiAgICogQHJldHVybnMgVmFsdWUgb3IgJ251bGwnXG4gICAqL1xuICBnZXRWYWx1ZSgpIHtcbiAgICBpZiAodGhpc1tcInZhbHVlXCJdKSB7XG4gICAgICByZXR1cm4gdGhpc1tcInZhbHVlXCJdO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIFJlbW92ZXMgYXR0cmlidXRlIG5hbWUgbmFtZVxuICAgKiBAcGFyYW0gYXR0cmlidXRlIEF0dHJpYnV0ZSB0byByZW1vdmVcbiAgICovXG4gIHJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGU6IHN0cmluZyB8IEF0dHJpYnV0ZXNFbnVtKSB7XG4gICAgaWYgKHR5cGVvZiBhdHRyaWJ1dGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBjb25zdCBhdHRyaWJ1dGVMb3dlciA9IGF0dHJpYnV0ZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgaWYgKGF0dHJpYnV0ZUxvd2VyID09PSAndmlzaWJsZScpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoQXR0cmlidXRlc0VudW0uVklTSUJMRSk7XG4gICAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZUxvd2VyID09PSAnZW5hYmxlZCcpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoQXR0cmlidXRlc0VudW0uRU5BQkxFRCk7XG4gICAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZUxvd2VyID09PSAnZGlzYWJsZWQnKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKEF0dHJpYnV0ZXNFbnVtLkRJU0FCTEVEKTtcbiAgICAgIH0gZWxzZSBpZiAoYXR0cmlidXRlTG93ZXIgPT09ICd0ZXh0Jykge1xuICAgICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShBdHRyaWJ1dGVzRW51bS5URVhUKTtcbiAgICAgIH0gZWxzZSBpZiAoYXR0cmlidXRlTG93ZXIgPT09ICdjb2xvcicpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoQXR0cmlidXRlc0VudW0uQ09MT1IpO1xuICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGVMb3dlciA9PT0gJ3BhdHRlcm4nKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKEF0dHJpYnV0ZXNFbnVtLlBBVFRFUk4pO1xuICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGVMb3dlciA9PT0gJ21heCcpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoQXR0cmlidXRlc0VudW0uTUFYKTtcbiAgICAgIH0gZWxzZSBpZiAoYXR0cmlidXRlTG93ZXIgPT09ICdtYXhsZW5ndGgnIHx8IGF0dHJpYnV0ZUxvd2VyID09PSAnbWF4X2xlbmd0aCcpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoQXR0cmlidXRlc0VudW0uTUFYX0xFTkdUSCk7XG4gICAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZUxvd2VyID09PSAnbWluJykge1xuICAgICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShBdHRyaWJ1dGVzRW51bS5NSU4pO1xuICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGVMb3dlciA9PT0gJ2NsYXNzJykge1xuICAgICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShBdHRyaWJ1dGVzRW51bS5DTEFTUyk7XG4gICAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZUxvd2VyID09PSAnb25jb21tYW5kJyB8fCBhdHRyaWJ1dGVMb3dlciA9PT0gJ29uX2NvbW1hbmQnKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKEF0dHJpYnV0ZXNFbnVtLk9OX0NPTU1BTkQpO1xuICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGVMb3dlciA9PT0gJ3JlcXVpcmUnKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKEF0dHJpYnV0ZXNFbnVtLlJFUVVJUkUpO1xuICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGVMb3dlciA9PT0gJ3RpdGxlJykge1xuICAgICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShBdHRyaWJ1dGVzRW51bS5USVRMRSk7XG4gICAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZUxvd2VyID09PSAnZm9udGJvbGQnIHx8IGF0dHJpYnV0ZUxvd2VyID09PSAnZm9udF9ib2xkJykge1xuICAgICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShBdHRyaWJ1dGVzRW51bS5GT05UX0JPTEQpO1xuICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGVMb3dlciA9PT0gJ3NlbGVjdGVkJykge1xuICAgICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShBdHRyaWJ1dGVzRW51bS5TRUxFQ1RFRCk7XG4gICAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZUxvd2VyID09PSAnYmdDb2xvcicpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoQXR0cmlidXRlc0VudW0uQkdfQ09MT1IpO1xuICAgICAgfSBlbHNlIGlmIChhdHRyaWJ1dGVMb3dlciA9PT0gJ3ZhbHVlJykge1xuICAgICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShBdHRyaWJ1dGVzRW51bS5WQUxVRSk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuY3VzdG9tQXR0cmlidXRlcyAhPSBudWxsKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmN1c3RvbUF0dHJpYnV0ZXNbYXR0cmlidXRlXTtcbiAgICAgICAgTG9nZ2VyLndhcm4oYFVua25vd24gYXR0cmlidXRlOiAke2F0dHJpYnV0ZX0sIHNldHRpbmcgYXMgY3VzdG9tIGF0dHJpYnV0ZWApO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmZpcmVSZW5vdmVBdHRyaWJ1dGVFdmVudChhdHRyaWJ1dGUpO1xuICAgIH0gZWxzZSBpZiAoYXR0cmlidXRlID09PSBBdHRyaWJ1dGVzRW51bS5WSVNJQkxFKSB7XG4gICAgICB0aGlzLnNldFZpc2libGUodHJ1ZSk7XG4gICAgfSBlbHNlIGlmIChhdHRyaWJ1dGUgPT09IEF0dHJpYnV0ZXNFbnVtLkRJU0FCTEVEKSB7XG4gICAgICB0aGlzLnNldERpc2FibGVkKGZhbHNlKTtcbiAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZSA9PT0gQXR0cmlidXRlc0VudW0uRU5BQkxFRCkge1xuICAgICAgdGhpcy5zZXRFbmFibGVkKHRydWUpO1xuICAgIH0gZWxzZSBpZiAoYXR0cmlidXRlID09PSBBdHRyaWJ1dGVzRW51bS5URVhUKSB7XG4gICAgICBkZWxldGUgdGhpcy50ZXh0O1xuICAgICAgdGhpcy5tYXJrRm9yQ2hlY2soKTtcbiAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZSA9PT0gQXR0cmlidXRlc0VudW0uQ09MT1IpIHtcbiAgICAgIHRoaXMuc2V0Q29sb3IoXCJcIik7XG4gICAgfSBlbHNlIGlmIChhdHRyaWJ1dGUgPT09IEF0dHJpYnV0ZXNFbnVtLk9OX0NPTU1BTkQpIHtcbiAgICAgIGRlbGV0ZSB0aGlzLl9pbnRlcm5hbE9uQ29tbWFuZDtcbiAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZSA9PT0gQXR0cmlidXRlc0VudW0uUEFUVEVSTikge1xuICAgICAgdGhpcy5zZXRQYXR0ZXJuKHVuZGVmaW5lZCk7XG4gICAgfSBlbHNlIGlmIChhdHRyaWJ1dGUgPT09IEF0dHJpYnV0ZXNFbnVtLk1BWCkge1xuICAgICAgdGhpcy5zZXRNYXgodW5kZWZpbmVkKTtcbiAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZSA9PT0gQXR0cmlidXRlc0VudW0uTUFYX0xFTkdUSCkge1xuICAgICAgdGhpcy5zZXRNYXhMZW5ndGgodW5kZWZpbmVkKTtcbiAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZSA9PT0gQXR0cmlidXRlc0VudW0uTUlOKSB7XG4gICAgICB0aGlzLnNldE1pbih1bmRlZmluZWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBMb2dnZXIud2FybignVW5hYmxlIHRvIHNldCBhdHRyaWJ1dGUsIHVua25vd24gYXR0cmlidXRlIGlkOiAnICsgYXR0cmlidXRlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWxpYXMgb2YgW1tzZXRSZXF1aXJlZF1dXG4gICAqIEBwYXJhbSBib29cbiAgICovXG4gIHNldFJlcXVpcmUoYm9vOiBib29sZWFuIHwgc3RyaW5nKSB7XG4gICAgdGhpcy5zZXRSZXF1aXJlZChib28pO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIFNldCBbW3JlcXVpcmVkXV0gdG8gdHJ1ZSBvciBmYWxzZVxuICAgKiBAcGFyYW0gYm9vXG4gICAqL1xuICBzZXRSZXF1aXJlZChib286IGJvb2xlYW4gfCBzdHJpbmcpIHtcbiAgICBpZiAoYm9vID09PSAndHJ1ZScgfHwgYm9vID09PSB0cnVlKSB7XG4gICAgICB0aGlzLnJlcXVpcmVkID0gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLnJlcXVpcmVkID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMubWFya0ZvckNoZWNrKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IFtbcGF0dGVybl1dIHZhbHVlXG4gICAqIEBwYXJhbSBwYXR0ZXJuXG4gICAqL1xuICBzZXRQYXR0ZXJuKHBhdHRlcm46IHN0cmluZykge1xuICAgIHRoaXMucGF0dGVybiA9IHBhdHRlcm47XG4gICAgdGhpcy5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgW1ttaW5dXSB2YWx1ZVxuICAgKiBAcGFyYW0gdmFsXG4gICAqL1xuICBzZXRNaW4odmFsOiBhbnkpIHtcbiAgICB0aGlzLm1pbiA9IHZhbDtcbiAgICB0aGlzLm1hcmtGb3JDaGVjaygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBbW21heF1dIHZhbHVlXG4gICAqIEBwYXJhbSB2YWxcbiAgICovXG4gIHNldE1heCh2YWw6IGFueSkge1xuICAgIHRoaXMubWF4ID0gdmFsO1xuICAgIHRoaXMubWFya0ZvckNoZWNrKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IFtbcGF0dGVybl1dIHZhbHVlXG4gICAqIEByZXR1cm5zIFtbcGF0dGVybl1dXG4gICAqL1xuICBnZXRQYXR0ZXJuKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMucGF0dGVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgW1ttaW5dXSB2YWx1ZVxuICAgKiBAcmV0dXJucyBbW21pbl1dXG4gICAqL1xuICBnZXRNaW4oKTogYW55IHtcbiAgICByZXR1cm4gdGhpcy5taW47XG4gIH1cblxuICAvKipcbiAgICogR2V0IFtbbWF4XV0gdmFsdWVcbiAgICogQHJldHVybnMgW1ttYXhdXVxuICAgKi9cbiAgZ2V0TWF4KCk6IGFueSB7XG4gICAgcmV0dXJuIHRoaXMubWF4O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBbW2lucHV0TG9jYWxlXV0gdmFsdWVcbiAgICogQHJldHVybnMgW1tpbnB1dExvY2FsZV1dXG4gICAqL1xuICBnZXRJbnB1dExvY2FsZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmlucHV0TG9jYWxlO1xuICB9XG5cbiAgLyoqIFNldCBbW2lucHV0TG9jYWxlXV0gdmFsdWVcbiAgICogQHBhcmFtIGxvY2FsZVxuICAgKi9cbiAgc2V0SW5wdXRMb2NhbGUobG9jYWxlOiBzdHJpbmcpIHtcbiAgICB0aGlzLmlucHV0TG9jYWxlID0gbG9jYWxlO1xuICAgIHRoaXMubWFya0ZvckNoZWNrKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IFtbaW5wdXRDaGFyc2V0c11dIHZhbHVlXG4gICAqIEByZXR1cm5zIFtbaW5wdXRDaGFyc2V0c11dXG4gICAqL1xuICBnZXRJbnB1dENoYXJzZXRzKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuaW5wdXRDaGFyc2V0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgW1tpbnB1dENoYXJlc3RzXV0gdmFsdWVcbiAgICogQHBhcmFtIGlucHV0Q2hhclNldHNcbiAgICovXG4gIHNldElucHV0Q2hhcnNldHMoaW5wdXRDaGFyU2V0czogc3RyaW5nKSB7XG4gICAgdGhpcy5pbnB1dENoYXJzZXRzID0gaW5wdXRDaGFyU2V0cztcbiAgICB0aGlzLm1hcmtGb3JDaGVjaygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBbW2lkXV0gdmFsdWVcbiAgICogQHJldHVybnMgW1tpZF1dXG4gICAqL1xuICBnZXRJZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmlkO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBbW2lkXV0gdmFsdWVcbiAgICogQHBhcmFtIGlkXG4gICAqL1xuICBzZXRJZChpZDogc3RyaW5nKSB7XG4gICAgaWYgKHRoaXMucGFyZW50ICE9IG51bGwgJiYgdGhpcy5wYXJlbnQuY2hpbGRyZW4uaGFzKHRoaXMuaWQpKSB7XG4gICAgICB0aGlzLnBhcmVudC5jaGlsZHJlbi5kZWxldGUoS2V5VXRpbHMudG9NYXBLZXkodGhpcy5pZCkpO1xuICAgICAgdGhpcy5wYXJlbnQuY2hpbGRyZW4uc2V0KEtleVV0aWxzLnRvTWFwS2V5KGlkKSwgdGhpcyk7XG5cbiAgICAgIGlmICh0aGlzLl9jaGlsZHJlbkluZGV4ICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IGlkeCA9IF8uZmluZEluZGV4KHRoaXMucGFyZW50Ll9jaGlsZHJlbkluZGV4LCAoaXRlbSkgPT4gaXRlbSA9PT0gdGhpcy5pZCk7XG5cbiAgICAgICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgICAgdGhpcy5wYXJlbnQuX2NoaWxkcmVuSW5kZXhbaWR4XSA9IGlkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucGFyZW50Ll9jaGlsZHJlbkluZGV4LnB1c2goaWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wYXJlbnQuX2NoaWxkcmVuSW5kZXggPSBfLnVuaXEodGhpcy5wYXJlbnQuX2NoaWxkcmVuSW5kZXgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuaWQgPSBpZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBYnN0cmFjdCBtZXRob2QuIEltcGxlbWVudGVkIGJ5IHN1YiBjbGFzcyBjb21wb25lbnRzXG4gICAqIEBwYXJhbSB0aXRsZVxuICAgKi9cbiAgc2V0VGl0bGUodGl0bGU6IHN0cmluZykge1xuICAgIC8vaW1wbC4gYnkgc3ViIGNsYXNzXG4gIH1cblxuICAvKipcbiAgICogU2V0IFtbY3NzQ2xhc3NdXSBvZiBjb21wb25lbnQuXG4gICAqIEBwYXJhbSBjc3MgQ2xhc3MgKENTUykgbmFtZSB0byBzZXQgb24gY29tcG9uZW50LiBGb3IgbXVsdGlwbGUgQ1NTIGNsYXNzZXMsIGpvaW4gd2l0aCBET1QgKC4pXG4gICAqIGBgYFxuICAgKiAuY2xhc3MxLmNsYXNzMi5jbGFzczNcbiAgICogYGBgXG4gICAqL1xuICBzZXRDc3NDbGFzcyhjc3M6IHN0cmluZywgc2tpcEF0dHJpYnV0ZU92ZXJyaWRlOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICBpZiAoY3NzICE9IG51bGwgJiYgY3NzLmluZGV4T2YoXCIuXCIpID49IDApIHtcbiAgICAgIGNvbnN0IHRlbXAgPSBjc3Muc3BsaXQoXCJcXC5cIik7XG5cbiAgICAgIHRoaXMuY3NzQ2xhc3MgPSB0ZW1wLmpvaW4oXCItXCIpO1xuXG4gICAgICBpZiAodGVtcFswXSA9PT0gXCJcIikge1xuICAgICAgICB0aGlzLmNzc0NsYXNzID0gdGhpcy5jc3NDbGFzcy5zdWJzdHJpbmcoMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5jc3NDbGFzcyA9IGNzcztcbiAgICB0aGlzLmNoZWNrTnhTdHlsaW5nKHNraXBBdHRyaWJ1dGVPdmVycmlkZSk7XG4gICAgdGhpcy5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgY3NzIGNsYXNzIG5hbWUgdG8gdGhlIGludGVybmFsIFtbX2Nzc0NsYXNzXV0gcHJvcGVydHlcbiAgICogQHBhcmFtIGNzcyBDU1MgY2xhc3MgbmFtZSB0byBhZGRcbiAgICovXG4gIGFkZENzc0NsYXNzKGNzczogc3RyaW5nKSB7XG4gICAgaWYgKHRoaXMuX2Nzc0NsYXNzID09IG51bGwgfHwgdGhpcy5fY3NzQ2xhc3MgPT09IFwiXCIpIHtcbiAgICAgIHRoaXMuX2Nzc0NsYXNzID0gY3NzO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fY3NzQ2xhc3MuaW5kZXhPZihjc3MpID09IC0xKSB7XG4gICAgICB0aGlzLl9jc3NDbGFzcyA9IGAke3RoaXMuX2Nzc0NsYXNzfSAke2Nzc31gO1xuICAgIH1cbiAgICB0aGlzLmNoZWNrTnhTdHlsaW5nKCk7XG4gICAgdGhpcy5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGNzcyBjbGFzcyBuYW1lIGZyb20gaW50ZXJuYWwgW1tfY3NzQ2xhc3NdXSBwcm9wZXJ0eVxuICAgKiBAcGFyYW0gY3NzIENTUyBjbGFzcyBuYW1lIHRvIHJlbW92ZVxuICAgKi9cbiAgcmVtb3ZlQ3NzQ2xhc3MoY3NzOiBzdHJpbmcpIHtcblxuICAgIGlmICh0aGlzLl9jc3NDbGFzcyAhPSBudWxsKVxuICAgICAgdGhpcy5fY3NzQ2xhc3MgPSB0aGlzLl9jc3NDbGFzcy5yZXBsYWNlKGNzcywgJycpO1xuICAgIHRoaXMuY2hlY2tOeFN0eWxpbmcoKTtcbiAgICB0aGlzLm1hcmtGb3JDaGVjaygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgW1tyZXF1aXJlXV0gcHJvcGVydHkgdmFsdWVcbiAgICogQHJldHVybnMgVmFsdWUgb2YgW1tyZXF1aXJlXV1cbiAgICovXG4gIGdldFJlcXVpcmVkKCk6IHN0cmluZyB8IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnJlcXVpcmU7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGFsbCByZWZlcmVuY2VzIHRvIHRoZSBjb21wb25lbnQgYW5kIGludm9rZXMgQW5ndWxhcnMgW1tuZ09uRGVzdHJveV1dIG1ldGhvZFxuICAgKi9cbiAgZGVzdHJveUNvbXBvbmVudCgpIHtcbiAgICBpZiAodGhpcy5jb21wUmVmICE9IG51bGwpIHtcbiAgICAgIHRoaXMuY29tcFJlZi5kZXN0cm95KCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmVsZW1lbnRSZWYgIT0gbnVsbCkge1xuICAgICAgKHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50IGFzIEhUTUxFbGVtZW50KS5yZW1vdmUoKTtcbiAgICAgIHRoaXMubmdPbkRlc3Ryb3koKTtcbiAgICAgIExvZ2dlci53YXJuKFwiTWVtb3J5IGxlYWshIFBsZWFzZSB1c2UgbmdJZiBpZiB5b3Ugd2FudCB0byByZW1vdmUgY29tcG9uZW50IVwiKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjb21wb25lbnRcbiAgICogQHJldHVybnMgSlNPTiBvYmplY3RcbiAgICovXG4gIHRvSnNvbigpOiB7fSB7XG4gICAgY29uc3QgcmV0VmFsOiBhbnkgPSB7fTtcblxuICAgIC8vZ2V0IGN1c3RvbSBhdHRyaWJ1dGVzIGJpbmRlZCB0byBvdXIgdGFnXG4gICAgaWYgKHRoaXMuZWxlbWVudFJlZiAhPSBudWxsICYmIHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50ICE9IG51bGwpIHtcbiAgICAgIGNvbnN0IGVsID0gdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQ7XG4gICAgICBsZXQgYXR0cmlidXRlczogQXJyYXk8c3RyaW5nPiA9IG51bGw7XG5cbiAgICAgIGlmICh0eXBlb2YgZWwuZ2V0QXR0cmlidXRlTmFtZXMgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBhdHRyaWJ1dGVzID0gZWwuZ2V0QXR0cmlidXRlTmFtZXMoKTtcbiAgICAgIH0gZWxzZSBpZiAoZWwuYXR0cmlidXRlcykge1xuICAgICAgICBhdHRyaWJ1dGVzID0gW107XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbC5hdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgYXR0cmlidXRlcy5wdXNoKGVsLmF0dHJpYnV0ZXNbaV0ubmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGF0dHJpYnV0ZXMgIT0gbnVsbCkge1xuICAgICAgICBfLmZvckVhY2goYXR0cmlidXRlcywgKGF0dHJpYnV0ZU5hbWUpID0+IHtcbiAgICAgICAgICBpZiAodHlwZW9mIEFwcFV0aWxzLnZhbGlkYXRlQXR0cmlidXRlID09PSBcImZ1bmN0aW9uXCIgJiYgQXBwVXRpbHMudmFsaWRhdGVBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSkpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0SnNvbihyZXRWYWwsIGF0dHJpYnV0ZU5hbWUsIGVsLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIEFwcFV0aWxzLnNldEN1c3RvbUF0dHJpYnV0ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIEFwcFV0aWxzLnNldEN1c3RvbUF0dHJpYnV0ZShyZXRWYWwsIGVsKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnNldEpzb24ocmV0VmFsLCBcIm54VGFnTmFtZVwiLCB0aGlzLmdldE54VGFnTmFtZSgpKTtcbiAgICB0aGlzLnNldEpzb24ocmV0VmFsLCBcInRhZ05hbWVcIiwgdGhpcy5nZXRUYWdOYW1lKCkpO1xuICAgIHRoaXMuc2V0SnNvbihyZXRWYWwsIFwiaWRcIiwgdGhpcy5pZCk7XG4gICAgdGhpcy5zZXRKc29uKHJldFZhbCwgXCJkaXNhYmxlZFwiLCB0aGlzLmdldERpc2FibGVkKCkpO1xuICAgIHRoaXMuc2V0SnNvbihyZXRWYWwsIFwiZW5hYmxlZFwiLCB0aGlzLmdldEVuYWJsZWQoKSk7XG4gICAgdGhpcy5zZXRKc29uKHJldFZhbCwgXCJ2aXNpYmxlXCIsIHRoaXMuZ2V0VmlzaWJsZSgpKTtcbiAgICB0aGlzLnNldEpzb24ocmV0VmFsLCBcInRleHRcIiwgdGhpcy5nZXRUZXh0KCkpO1xuICAgIHRoaXMuc2V0SnNvbihyZXRWYWwsIFwiY3NzQ2xhc3NcIiwgdGhpcy5jc3NDbGFzcyk7XG4gICAgdGhpcy5zZXRKc29uKHJldFZhbCwgXCJjdXN0b21BdHRyaWJ1dGVzXCIsIHRoaXMuY3VzdG9tQXR0cmlidXRlc1RvSnNvbigpKTtcblxuICAgIGlmICh0aGlzLmdldFZhbHVlKCkgIT0gbnVsbCkge1xuICAgICAgdGhpcy5zZXRKc29uKHJldFZhbCwgXCJ2YWx1ZVwiLCB0aGlzLmdldFZhbHVlKCkpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9jaGlsZHJlbiAhPT0gbnVsbCkge1xuICAgICAgaWYgKHRoaXMuX2NoaWxkcmVuLnNpemUgPiAwKSB7XG4gICAgICAgIC8vbmVlZCB0byByZXR1cm4gY2hpbGRyZW4gaW4gcHJvcGVyIG9yZGVyXG4gICAgICAgIHJldFZhbFtcImNoaWxkcmVuXCJdID0gW107XG5cbiAgICAgICAgaWYgKHRoaXMuX2NoaWxkcmVuSW5kZXggIT09IG51bGwpIHtcbiAgICAgICAgICBmb3IgKGxldCBpZCBvZiB0aGlzLl9jaGlsZHJlbkluZGV4KSB7XG4gICAgICAgICAgICBjb25zdCBjID0gdGhpcy5nZXRDaGlsZChpZCk7XG5cbiAgICAgICAgICAgIC8vZ2V0Q2hpbGQgY2FuIHJldHVybiBudWxsP1xuICAgICAgICAgICAgaWYgKGMgIT0gbnVsbCkge1xuICAgICAgICAgICAgICBjb25zdCBjaGlsZEpzb24gPSB0aGlzLmNoaWxkVG9Kc29uKGMpO1xuXG4gICAgICAgICAgICAgIGlmIChjaGlsZEpzb24gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldFZhbFtcImNoaWxkcmVuXCJdLnB1c2goY2hpbGRKc29uKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXRWYWw7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCBjaGlsZCB0byBKU09OXG4gICAqIEBwYXJhbSBjaGlsZCBjaGlsZCB0byBiZSBjb252ZXJ0ZWQgdG8gSlNPTlxuICAgKi9cbiAgcHJvdGVjdGVkIGNoaWxkVG9Kc29uKGNoaWxkOiBCYXNlQ29tcG9uZW50KSB7XG4gICAgcmV0dXJuIGNoaWxkLnRvSnNvbigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBbW2N1c3RvbUF0dHJpYnV0ZXNdXVxuICAgKiBAcmV0dXJucyBKU09OIE9iamVjdFxuICAgKi9cbiAgcHJvdGVjdGVkIGN1c3RvbUF0dHJpYnV0ZXNUb0pzb24oKSB7XG4gICAgcmV0dXJuIEJhc2VDb21wb25lbnQubWFwVG9Kc29uKHRoaXMuY3VzdG9tQXR0cmlidXRlcyk7XG4gIH1cblxuICBzdGF0aWMgbWFwVG9Kc29uKG1hcDogeyBbbmFtZTogc3RyaW5nXTogYW55IH0pIHtcbiAgICBjb25zdCBjdXN0b21BdHRyaWJ1dGVzID0ge307XG5cbiAgICBpZiAobWFwKSB7XG4gICAgICBjb25zdCBrZXlzID0gXy5rZXlzKG1hcCk7XG5cbiAgICAgIGZvciAobGV0IGtleSBvZiBrZXlzKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IG1hcFtrZXldO1xuXG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwic3RyaW5nXCIgJiYgdmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgIHZhbHVlID0gdmFsdWUgKyBcIlwiO1xuICAgICAgICB9XG5cbiAgICAgICAgY3VzdG9tQXR0cmlidXRlc1trZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGN1c3RvbUF0dHJpYnV0ZXM7XG4gIH1cblxuICAvKipcbiAgICogU2hvdWxkIGJlIGltcGxlbWVudGVkIGJ5IHN1YiBjbGFzcyBvdGhlcndpc2UgcmV0dXJucyBkZWZhdWx0IHZhbHVlIG9mIFwibm9uZVwiXG4gICAqIEByZXR1cm5zIE54VGFnTmFtZSBhcyBzdHJpbmdcbiAgICovXG4gIHByb3RlY3RlZCBnZXROeFRhZ05hbWUoKSB7XG4gICAgcmV0dXJuIFwibm9uZVwiO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgSlNPTiB2YWx1ZXMuIE11dGF0ZXMgSlNPTiBvYmplY3QgdGhhdCBpcyBwYXNzZWQgaW5cbiAgICogQHBhcmFtIGpzb24gT2JqZWN0IHRvIGFkZCBrZXkgdG9cbiAgICogQHBhcmFtIGtleSBLZXkgdG8gc2V0XG4gICAqIEBwYXJhbSB2YWx1ZSBWYWx1ZSB0byBzZXQgZm9yIGtleSBwYXJhbVxuICAgKi9cbiAgcHJvdGVjdGVkIHNldEpzb24oanNvbjogYW55LCBrZXk6IGFueSwgdmFsdWU6IGFueSkge1xuICAgIGlmIChrZXkgIT0gbnVsbCkge1xuICAgICAganNvbltrZXldID0gdGhpcy50b0pzb25WYWx1ZSh2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIHZhbHVlIHRvIGEgdmFsaWQgSlNPTiBwcm9wZXJ0eSBzdHJpbmdcbiAgICogQHBhcmFtIHZhbHVlIFZhbHVlIHRvIGNvbnZlcnQgdG8gc3RyaW5nXG4gICAqIEByZXR1cm5zIFZhbHVlIGFzIGEgdmFsaWQgSlNPTiBwcm9wZXJ0eSBzdHJpbmdcbiAgICovXG4gIHByb3RlY3RlZCB0b0pzb25WYWx1ZSh2YWx1ZTogYW55KSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgfHwgdHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpIHtcbiAgICAgIHJldHVybiB2YWx1ZSArICcnO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgW1tpZF1dIHByb3BlcnR5IHRvIGEgdW5pcXVlIHN0cmluZyBJRCBnZW5lcmF0ZWQgYnkgW1tfdW5pcXVlSWRdXVxuICAgKi9cbiAgcmVzZXRJZCgpIHtcbiAgICB0aGlzLmlkID0gdGhpcy5fdW5pcXVlSWQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHZhbHVlIG9mIGNoZWNrZWQgcHJvcGVydHkuIFNob3VsZCBiZSBpbXBsZW1lbnRlZCBpbiBzdWIgY2xhc3MgY29tcG9uZW50cyB0aGF0IGhhdmUgY2hlY2tlZCBzdGF0ZVxuICAgKiBAcmV0dXJucyBWYWx1ZSBvZiBbW2NoZWNrZWRdXSBwcm9wZXJ0eVxuICAgKi9cbiAgZ2V0Q2hlY2tlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQWJzdHJhY3QgbWV0aG9kLiBTaG91bGQgYmUgaW1wbGVtZW50ZWQgYnkgc3ViIGNsYXNzIGNvbXBvbmVudHMgdGhhdCBoYXZlIGNoZWNrZWQgc3RhdGVcbiAgICogQHBhcmFtIGJvbyBUb2dnbGUgW1tjaGVja2VkXV0gb24vb2ZmXG4gICAqL1xuICBzZXRDaGVja2VkKGJvbzogYm9vbGVhbiB8IHN0cmluZykge1xuICAgIC8vIE5PLU9QXG4gIH1cblxuICAvKipcbiAgICogQWJzdHJhY3QgbWV0aG9kLiBTaG91bGQgYmUgaW1wbGVtZW50ZWQgYnkgc3ViIGNsYXNzIGNvbXBvbmVudHMgdGhhdCBoYXZlIHNlbGVjdGVkIHN0YXRlXG4gICAqIEBwYXJhbSBib28gVG9nZ2xlIFtbY2hlY2tlZF1dIG9uL29mZlxuICAgKi9cbiAgc2V0U2VsZWN0ZWQoYm9vOiBib29sZWFuIHwgc3RyaW5nKSB7XG4gICAgLy8gTk8tT1BcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBHZXQgW1ttYXhMZW5ndGhdXSBwcm9wZXJ0eS4gUmV0dXJucyAtMSBpZiBpdCBpcyBudWxsXG4gICAqIEByZXR1cm5zIFZhbHVlIG9mIG1heExlbmd0aCBhcyBpbnRlZ2VyIGlmIGl0J3Mgc2V0LCBvdGhlcndpc2UgcmV0dXJucyBudWxsXG4gICAqL1xuICBnZXRNYXhMZW5ndGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5tYXhMZW5ndGggPT0gbnVsbCA/IC0xIDogSmF2YVV0aWxzLmludFZhbHVlKHRoaXMubWF4TGVuZ3RoKTtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBHZXQgW1ttaW5MZW5ndGhdXSBwcm9wZXJ0eS4gUmV0dXJucyAtMSBpZiBpdCBpcyBudWxsXG4gICAqIEByZXR1cm5zIFZhbHVlIG9mIG1pbkxlbmd0aCBhcyBpbnRlZ2VyIGlmIGl0J3Mgc2V0LCBvdGhlcndpc2UgcmV0dXJucyBudWxsXG4gICAqL1xuICBnZXRNaW5MZW5ndGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5taW5MZW5ndGggPT0gbnVsbCA/IC0xIDogSmF2YVV0aWxzLmludFZhbHVlKHRoaXMubWluTGVuZ3RoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBsaXN0IG9mIGNoaWxkIGNvbXBvbmVudHNcbiAgICogQHJldHVybnMgQ2hpbGQgY29tcG9uZW50c1xuICAgKi9cbiAgZ2V0Q2hpbGRyZW4oKSB7XG4gICAgY29uc3QgY2hpbGRyZW4gPSBuZXcgVmVjdG9yPEJhc2VDb21wb25lbnQ+KCk7XG4gICAgaWYgKHRoaXMuX2NoaWxkcmVuSW5kZXggIT09IG51bGwpIHtcbiAgICAgIGZvciAobGV0IGlkIG9mIHRoaXMuX2NoaWxkcmVuSW5kZXgpIHtcbiAgICAgICAgY29uc3QgYyA9IHRoaXMuZ2V0Q2hpbGQoaWQpO1xuXG4gICAgICAgIGlmIChjICE9IG51bGwpIHtcbiAgICAgICAgICBjaGlsZHJlbi5hZGQoYyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY2hpbGRyZW47XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogUmVtb3ZlIGNoaWxkIGNvbXBvbmVudCBmcm9tIGxpc3Qgb2YgY2hpbGRyZW4gYW5kIHJlbW92ZSBjaGlsZHJlbiBvZiBjaGlsZFxuICAgKiBAcGFyYW0gY2hpbGQgQ2hpbGQgY29tcG9uZW50IHRvIHJlbW92ZVxuICAgKi9cbiAgcmVtb3ZlQ2hpbGQoY2hpbGQ6IEJhc2VDb21wb25lbnQpIHtcbiAgICAvL2lmIHNvbWVob3cgc2VuZCBpdCBhcyBzdHJpbmcgKHZpYSB0eXBlIGFueSlcbiAgICBpZiAodHlwZW9mIGNoaWxkID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBjaGlsZCA9IHRoaXMuZ2V0RWxlbWVudEJ5SWQoY2hpbGQpIGFzIEJhc2VDb21wb25lbnQ7XG4gICAgfVxuXG4gICAgaWYgKGNoaWxkICE9IG51bGwpIHtcbiAgICAgIC8vZmlyc3QgaGlkZSBpdFxuICAgICAgaWYgKGNoaWxkLnNldFZpc2libGUpIHtcbiAgICAgICAgY2hpbGQuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmNoaWxkcmVuKSB7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4uZGVsZXRlKEtleVV0aWxzLnRvTWFwS2V5KGNoaWxkLmlkKSk7XG4gICAgICAgIGlmICh0aGlzLl9jaGlsZHJlbkluZGV4ICE9PSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5fY2hpbGRyZW5JbmRleCA9IF8udW5pcShfLmZpbHRlcih0aGlzLl9jaGlsZHJlbkluZGV4LCAoaXRlbSkgPT4gaXRlbSAhPT0gY2hpbGQuaWQpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBwYXJlbnRWaWV3ID0gdGhpcy5nZXRQYXJlbnRWaWV3KCk7XG5cbiAgICAgIC8vcmVtb3ZlIG91cnNlbGYgZnJvbSB0aGUgdmlldyBjaGlsZHJlbiBtYXBcbiAgICAgIGlmIChwYXJlbnRWaWV3ICE9IG51bGwgJiYgcGFyZW50Vmlldy5fdmlld0NoaWxkcmVuTWFwICE9IG51bGwpIHtcbiAgICAgICAgcGFyZW50Vmlldy5fdmlld0NoaWxkcmVuTWFwLmRlbGV0ZShLZXlVdGlscy50b01hcEtleShjaGlsZC5nZXRJZCgpKSk7XG4gICAgICB9XG5cbiAgICAgIC8vbW92ZSBjaGlsZHJlbiBvZiBjaGlsZHJlblxuICAgICAgaWYgKGNoaWxkLnJlbW92ZUFsbENoaWxkcmVuKSB7XG4gICAgICAgIGNoaWxkLnJlbW92ZUFsbENoaWxkcmVuKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgY2hpbGQgY29tcG9uZW50IGJ5IElEXG4gICAqIEBwYXJhbSBpZCBDaGlsZCBbW2lkXV1cbiAgICovXG4gIHJlbW92ZUNoaWxkQnlJZChpZDogc3RyaW5nKSB7XG4gICAgY29uc3QgY2hpbGQgPSB0aGlzLmdldEVsZW1lbnRCeUlkKGlkKTtcblxuICAgIGlmIChjaGlsZCAhPSBudWxsKSB7XG4gICAgICB0aGlzLnJlbW92ZUNoaWxkKGNoaWxkKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGFsbCBjaGlsZCBjb21wb25lbnRzXG4gICAqL1xuICBwcml2YXRlIHJlbW92ZUFsbENoaWxkcmVuKCkge1xuICAgIGlmICh0aGlzLmNoaWxkcmVuICE9IG51bGwpIHtcbiAgICAgIGNvbnN0IGNpdCA9IHRoaXMuY2hpbGRyZW4udmFsdWVzKCk7XG4gICAgICBsZXQgY3IgPSBjaXQubmV4dCgpO1xuXG4gICAgICB3aGlsZSAoY3IuZG9uZSAhPT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLnJlbW92ZUNoaWxkKGNyLnZhbHVlKTtcbiAgICAgICAgY3IgPSBjaXQubmV4dCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnRhYkNoaWxkcmVuSWRzICE9IG51bGwpIHtcbiAgICAgIHRoaXMudGFiQ2hpbGRyZW5JZHMuZm9yRWFjaChjaWQgPT4ge1xuICAgICAgICB0aGlzLnJlbW92ZUNoaWxkQnlJZChjaWQpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIEZpbmRzIHRoZSBjaGlsZCBjb21wb25lbnQgYnkgSUQuIERlZXAgc2VhcmNoXG4gICAqIEBwYXJhbSBpZCBDaGlsZCBjb21wb25lbnQgW1tpZF1dXG4gICAqL1xuICBnZXRFbGVtZW50QnlJZChpZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZmluZEVsZW1lbnRCeUlkKGlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIGNoaWxkIGNvbXBvbmVudCB3aXRoIGlkIGV4aXN0c1xuICAgKiBAcGFyYW0gaWQgQ2hpbGQgY29tcG9uZW50IFtpZF1cbiAgICovXG4gIGhhc0NoaWxkKGlkOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5maW5kRWxlbWVudEJ5SWQoaWQpICE9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHZhbGlkYXRlIGF0dHJpYnV0ZSBmb3IgaW5wdXQgY29tcG9uZW50LiBJbXBsZW1lbnQgb24gc3ViIGNsYXNzIGNvbXBvbmVudFxuICAgKiBAcGFyYW0gYXR0clxuICAgKi9cbiAgc2V0VmFsaWRhdGUoYXR0cjogc3RyaW5nKSB7XG4gICAgLy9UT0RPXG4gICAgY29uc29sZS5lcnJvcihcInNldFZhbGlkYXRlIGlzIG5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdHlwZSBhdHRyaWJ1dGUgZm9yIGlucHV0IGNvbXBvbmVudC4gSW1wbGVtZW50IG9uIHN1YiBjbGFzcyBjb21wb25lbnRcbiAgICogQHBhcmFtIHR5cGVcbiAgICovXG4gIHNldFR5cGUodHlwZTogc3RyaW5nKSB7XG4gICAgLy9UT0RPXG4gICAgY29uc29sZS5lcnJvcihcInNldFR5cGUgaXMgbm90IGltcGxlbWVudGVkXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBmb3JtYXQgYXR0cmlidXRlIGZvciBpbnB1dCBjb21wb25lbnQuIEltcGxlbWVudCBvbiBzdWIgY2xhc3MgY29tcG9uZW50XG4gICAqIEBwYXJhbSBmb3JtYXRcbiAgICovXG4gIHNldEZvcm1hdChmb3JtYXQ6IHN0cmluZykge1xuICAgIC8vVE9ET1xuICAgIGNvbnNvbGUuZXJyb3IoXCJzZXRGb3JtYXQgaXMgbm90IGltcGxlbWVudGVkXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBbW21heExlbmd0aF1dIGZvciBpbnB1dCBjb21wb25lbnRcbiAgICogQHBhcmFtIG1heExlbmd0aCBJbnB1dCBtYXggbGVuZ3RoIHByb3BlcnR5LiBTaG91bGQgYmUgbnVtZXJpYyBzdHJpbmdcbiAgICovXG4gIHNldE1heExlbmd0aChtYXhMZW5ndGg6IHN0cmluZykge1xuICAgIHRoaXMubWF4TGVuZ3RoID0gbWF4TGVuZ3RoO1xuICAgIHRoaXMubWFya0ZvckNoZWNrKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IFtbbWluTGVuZ3RoXV0gZm9yIGlucHV0IGNvbXBvbmVudFxuICAgKiBAcGFyYW0gbWluTGVuZ3RoIElucHV0IG1heCBsZW5ndGggcHJvcGVydHkuIFNob3VsZCBiZSBudW1lcmljIHN0cmluZ1xuICAgKi9cbiAgc2V0TWluTGVuZ3RoKG1pbkxlbmd0aDogc3RyaW5nKSB7XG4gICAgdGhpcy5taW5MZW5ndGggPSBtaW5MZW5ndGg7XG4gICAgdGhpcy5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgW1ttYXhMZW5ndGhdXSBhcyBieXRlIGxlbmd0aCBmb3IgaW5wdXQgY29tcG9uZW50XG4gICAqIEBwYXJhbSBibCBTaG91bGQgYmUgbnVtZXJpYyBzdHJpbmdcbiAgICovXG4gIHNldE1heEJ5dGVMZW4oYmw6IHN0cmluZykge1xuICAgIHRoaXMuc2V0TWF4TGVuZ3RoKGJsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBYnN0cmFjdCBtZXRob2QuIFNldCB2YWx1ZSBvZiBpbnB1dCBjb21wb25lbnRcbiAgICogQHBhcmFtIHZhbCBWYWx1ZSB0byBzZXRcbiAgICovXG4gIHNldFZhbHVlKHZhbDogYW55KSB7XG5cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgZm9jdXNhYmxlIHByb3BlcnR5IHZhbHVlIGZvciBjb21wb25lbnQuIEltcGxlbWVudCBvbiBzdWIgY2xhc3NcbiAgICogQHBhcmFtIGZvY3VzYWJsZSBUb2dnbGUgZm9jdXNhYmxlIG9uL29mZlxuICAgKi9cbiAgc2V0Rm9jdXNhYmxlKGZvY3VzYWJsZTogYm9vbGVhbiB8IHN0cmluZykge1xuICAgIC8vVE9ET1xuICB9XG5cbiAgLyoqXG4gICAqIEFic3RyYWN0LiBTZWxlY3QgcGFyZW50IGNvbXBvbmVudCB0YWIuIEltcGxlbWVudCBvbiBzdWIgY2xhc3NcbiAgICovXG4gIHNlbGVjdFBhcmVudFRhYigpIHtcbiAgICBmdW5jdGlvbiBmaW5kVGFiQmVsb25nKGl0ZW06IEJhc2VDb21wb25lbnQpIHtcbiAgICAgIGlmIChpdGVtICE9IG51bGwpIHtcbiAgICAgICAgY29uc3QgcGFyZW50ID0gaXRlbS5nZXRQYXJlbnQoKTtcbiAgICAgICAgaWYgKHBhcmVudCAhPSBudWxsICYmIHBhcmVudC5nZXRMb2NhbE5hbWUoKSAhPT0gJ3RhYicpXG4gICAgICAgICAgcmV0dXJuIGZpbmRUYWJCZWxvbmcocGFyZW50KTtcbiAgICAgICAgcmV0dXJuIHBhcmVudDtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgdGFiID0gZmluZFRhYkJlbG9uZyh0aGlzLmdldEVsZW1lbnRCeUlkKHRoaXMuaWQpKSBhcyBUYWJDb21wb25lbnQ7XG5cbiAgICBmdW5jdGlvbiBmaW5kVGFiUGFuZUJlbG9uZyh0YWI6IEJhc2VDb21wb25lbnQpIHtcbiAgICAgIGlmICh0YWIgIT0gbnVsbCkge1xuICAgICAgICBjb25zdCBwYXJlbnQgPSB0YWIuZ2V0UGFyZW50KCk7XG4gICAgICAgIGlmIChwYXJlbnQgIT0gbnVsbCAmJiBwYXJlbnQuZ2V0TG9jYWxOYW1lKCkgIT09ICd0YWItcGFuZScpXG4gICAgICAgICAgcmV0dXJuIGZpbmRUYWJQYW5lQmVsb25nKHBhcmVudCk7XG4gICAgICAgIHJldHVybiBwYXJlbnQ7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHRhYlBhbmUgPSBmaW5kVGFiUGFuZUJlbG9uZyh0aGlzLmdldEVsZW1lbnRCeUlkKHRoaXMuaWQpKSBhcyBUYWJQYW5lQ29tcG9uZW50O1xuICAgIGlmICh0YWIgIT0gbnVsbCkge1xuICAgICAgdGFiUGFuZS5zZXRTZWxlY3RlZFRhYih0YWIuaWQpO1xuICAgIH1cbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBQZXJmb3JtIGEgZGVlcCBzZWFyY2ggKHRoYXQgaXMsIGxvb2tzIHVwIGRlc2NlbmRhbnRzKVxuICAgKiBAcGFyYW0gaWQgZWxlbWVudCBpZCB0byBzZWFyY2hcbiAgICovXG4gIGZpbmRFbGVtZW50QnlJZChpZDogc3RyaW5nKTogQmFzZUNvbXBvbmVudCB7XG4gICAgY29uc3QgbWFwcGVkQ2hpbGRJZCA9IEtleVV0aWxzLnRvTWFwS2V5KGlkKTtcblxuICAgIGxldCBjb21wOiBCYXNlQ29tcG9uZW50ID0gbnVsbDtcbiAgICAvL2ZpcnN0IGNoZWNrIGZvciBjYWNoZVxuICAgIC8vIGxldCBjb21wOiBCYXNlQ29tcG9uZW50ID0gVWlEb2N1bWVudC5nZXRGcm9tQ2FjaGUobWFwcGVkQ2hpbGRJZCk7XG5cbiAgICBpZiAoY29tcCA9PSBudWxsKSB7XG4gICAgICAvL2NoZWNrIGZvciByYWRpbyBidXR0b24gZ3JvdXBcbiAgICAgIGNvbnN0IHJhZGlvR3JvdXAgPSB0aGlzLmdldFJhZGlvQnV0dG9uR3JvdXBDb21wb25lbnQoaWQpO1xuXG4gICAgICBpZiAocmFkaW9Hcm91cCAhPSBudWxsKSB7XG4gICAgICAgIGNvbXAgPSByYWRpb0dyb3VwO1xuICAgICAgfVxuXG4gICAgICBpZiAoY29tcCA9PSBudWxsKSB7XG4gICAgICAgIC8vZ2V0IGFsbCBjaGlsZHJlbiBmcm9tIFZpZXdcbiAgICAgICAgLy8gY29uc3QgYWxsQ2hpbGRyZW4gPSB0aGlzLmdldFBhcmVudFZpZXcoKS5yZWR1Y2VDaGlsZHJlbkl0ZXJhdGl2ZSgpO1xuICAgICAgICAvLyBjb25zdCBlZGl0b3JJZCA9IGAje2lkfWA7XG5cbiAgICAgICAgLy8gZm9yIChsZXQgY2hpbGQgb2YgYWxsQ2hpbGRyZW4pIHtcbiAgICAgICAgLy8gICBpZiAoXG4gICAgICAgIC8vICAgICBLZXlVdGlscy50b01hcEtleShjaGlsZC5nZXRJZCgpKSA9PT0gbWFwcGVkQ2hpbGRJZCB8fFxuICAgICAgICAvLyAgICAgLy9ieSBlZGl0b3IgaWQgKGUuZy4gZWRpdG9yPVwiI2VkaXRvcklkXCIpXG4gICAgICAgIC8vICAgICBjaGlsZC5lZGl0b3IgPT09IGVkaXRvcklkXG4gICAgICAgIC8vICAgKSB7XG4gICAgICAgIC8vICAgICBjb21wID0gY2hpbGQ7XG4gICAgICAgIC8vICAgICBicmVhaztcbiAgICAgICAgLy8gICB9XG4gICAgICAgIC8vIH1cbiAgICAgICAgaWYgKHRoaXMuX3ZpZXdDaGlsZHJlbk1hcCAhPSBudWxsKSB7XG4gICAgICAgICAgY29tcCA9IHRoaXMuX3ZpZXdDaGlsZHJlbk1hcC5nZXQobWFwcGVkQ2hpbGRJZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29tcCA9PSBudWxsICYmIHRoaXMuaXNWaWV3KCkgIT09IHRydWUpIHtcbiAgICAgICAgICBjb25zdCBwYXJlbnRWaWV3ID0gdGhpcy5nZXRQYXJlbnRWaWV3KCk7XG5cbiAgICAgICAgICBpZiAocGFyZW50VmlldyAhPSBudWxsKSB7XG4gICAgICAgICAgICBjb21wID0gcGFyZW50Vmlldy5maW5kRWxlbWVudEJ5SWQobWFwcGVkQ2hpbGRJZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vaWYgd2UgZmluZCBjb21wb25lbnQsIGFkZCB0byBjYWNoZVxuICAgICAgLy8gaWYgKGNvbXAgIT0gbnVsbCkge1xuICAgICAgLy8gICBVaURvY3VtZW50LmFkZFRvQ2FjaGUobWFwcGVkQ2hpbGRJZCwgY29tcCk7XG4gICAgICAvLyB9XG4gICAgfVxuXG4gICAgaWYgKGNvbXAgPT09IHVuZGVmaW5lZCkge1xuICAgICAgY29tcCA9IG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbXA7XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogR2V0IHJhZGlvIGJ1dHRvbiBncm91cCBjb21wb25lbnQgYnkgaWRcbiAgICogQHBhcmFtIGlkIFJhZGlvIGJ1dHRvbiBncm91cCBJRFxuICAgKi9cbiAgZ2V0UmFkaW9CdXR0b25Hcm91cENvbXBvbmVudChpZDogc3RyaW5nKTogQmFzZUNvbXBvbmVudCB7XG4gICAgaWYgKGlkID09PSAodGhpcyBhcyBhbnkpLmdyb3VwKSB7XG4gICAgICAvL3JhZGlvIGJ1dHRvbiBncm91cFxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHJhZGlvR3JvdXAgPSB0aGlzLmdldFJhZGlvQnV0dG9uR3JvdXAoaWQpO1xuXG4gICAgICBpZiAocmFkaW9Hcm91cCAhPSBudWxsKSB7XG4gICAgICAgIGxldCByZXRWYWwgPSByYWRpb0dyb3VwWzBdO1xuXG4gICAgICAgIGZvciAobGV0IHJhZGlvIG9mIHJhZGlvR3JvdXApIHtcbiAgICAgICAgICBpZiAocmFkaW8uZ2V0Q2hlY2tlZCgpID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZXRWYWwgPSByYWRpbztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0VmFsO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBjaGFuZ2UgbGlzdGVuZXIgb24gYXR0cmlidXRlc1xuICAgKiBAcGFyYW0gbGlzdGVuZXJcbiAgICovXG4gIGFkZEF0dHJpYnV0ZUNoYW5nZUxpc3RlbmVyKGxpc3RlbmVyOiBBdHRyaWJ1dGVDaGFuZ2VMaXN0ZW5lcik6IHZvaWQge1xuICAgIGlmICh0aGlzLmF0dHJpYnV0ZUNoYW5nZUxpc3RlbmVycyA9PSBudWxsKSB7XG4gICAgICB0aGlzLmF0dHJpYnV0ZUNoYW5nZUxpc3RlbmVycyA9IFtdO1xuICAgIH1cblxuICAgIGxpc3RlbmVyLl9pbnRlcm5hbElkID0gQmFzZUNvbXBvbmVudC5nZW5lcmF0ZVVuaXF1ZUlkKCdsaXN0ZW5lcicpO1xuXG4gICAgdGhpcy5hdHRyaWJ1dGVDaGFuZ2VMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcilcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgY2hhbmdlIGxpc3RlbmVyIG9uIGF0dHJpYnV0ZXNcbiAgICogQHBhcmFtIGxpc3RlbmVyXG4gICAqL1xuICByZW1vdmVBdHRyaWJ1dGVDaGFuZ2VMaXN0ZW5lcihsaXN0ZW5lcjogQXR0cmlidXRlQ2hhbmdlTGlzdGVuZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5hdHRyaWJ1dGVDaGFuZ2VMaXN0ZW5lcnMgIT0gbnVsbCkge1xuICAgICAgdGhpcy5hdHRyaWJ1dGVDaGFuZ2VMaXN0ZW5lcnMgPSBfLmZpbHRlcih0aGlzLmF0dHJpYnV0ZUNoYW5nZUxpc3RlbmVycywgKGl0ZW06IEF0dHJpYnV0ZUNoYW5nZUxpc3RlbmVyKSA9PiBpdGVtLl9pbnRlcm5hbElkICE9PSBsaXN0ZW5lci5faW50ZXJuYWxJZCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldCBhdHRyaWJ1dGUgYW5kIGVtaXQgY2hhbmdlIGV2ZW50XG4gICAqIEBwYXJhbSBhdHRyaWJ1dGVOYW1lXG4gICAqIEBwYXJhbSBuZXdWYWx1ZVxuICAgKiBAZXZlbnQgQXR0cmlidXRlQ2hhbmdlRXZlbnRcbiAgICovXG4gIHByb3RlY3RlZCBmaXJlU2V0QXR0cmlidXRlRXZlbnQoYXR0cmlidXRlTmFtZTogc3RyaW5nLCBuZXdWYWx1ZTogYW55KSB7XG4gICAgaWYgKHRoaXMuYXR0cmlidXRlQ2hhbmdlTGlzdGVuZXJzICYmIHRoaXMuYXR0cmlidXRlQ2hhbmdlTGlzdGVuZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGV2ZW50OiBBdHRyaWJ1dGVDaGFuZ2VFdmVudCA9IG5ldyBBdHRyaWJ1dGVDaGFuZ2VFdmVudChcbiAgICAgICAgYXR0cmlidXRlTmFtZSwgdGhpcy5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSksIG5ld1ZhbHVlLCB0aGlzXG4gICAgICApO1xuXG4gICAgICBfLmZvckVhY2godGhpcy5hdHRyaWJ1dGVDaGFuZ2VMaXN0ZW5lcnMsIChsaXN0ZW5lcjogQXR0cmlidXRlQ2hhbmdlTGlzdGVuZXIpID0+IHtcbiAgICAgICAgbGlzdGVuZXIub25BdHRyaWJ1dGVTZXQoZXZlbnQpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhdHRyaWJ1dGUgYW5kIGVtaXQgY2hhbmdlIGV2ZW50XG4gICAqIEBwYXJhbSBhdHRyaWJ1dGVOYW1lXG4gICAqIEBldmVudCBBdHRyaWJ1dGVDaGFuZ2VFdmVudFxuICAgKi9cbiAgcHJvdGVjdGVkIGZpcmVSZW5vdmVBdHRyaWJ1dGVFdmVudChhdHRyaWJ1dGVOYW1lOiBzdHJpbmcpIHtcbiAgICBpZiAodGhpcy5hdHRyaWJ1dGVDaGFuZ2VMaXN0ZW5lcnMgJiYgdGhpcy5hdHRyaWJ1dGVDaGFuZ2VMaXN0ZW5lcnMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgZXZlbnQ6IEF0dHJpYnV0ZUNoYW5nZUV2ZW50ID0gbmV3IEF0dHJpYnV0ZUNoYW5nZUV2ZW50KFxuICAgICAgICBhdHRyaWJ1dGVOYW1lLCB0aGlzLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lKSwgbnVsbCwgdGhpc1xuICAgICAgKTtcblxuICAgICAgXy5mb3JFYWNoKHRoaXMuYXR0cmlidXRlQ2hhbmdlTGlzdGVuZXJzLCAobGlzdGVuZXI6IEF0dHJpYnV0ZUNoYW5nZUxpc3RlbmVyKSA9PiB7XG4gICAgICAgIGxpc3RlbmVyLm9uQXR0cmlidXRlUmVtb3ZlZChldmVudCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWxpYXMgZm9yIHN0YXRpYyBbW2NsZWFuQ3NzXV0gbWV0aG9kXG4gICAqIEBwYXJhbSBjc3NcbiAgICovXG4gIHByaXZhdGUgY2xlYW5Dc3MoY3NzOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gQmFzZUNvbXBvbmVudC5jbGVhbkNzcyhjc3MpO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIEZvcm1hdCBjc3Mgc2VsZWN0b3JzLiBSZW1vdmUgZG90XG4gICAqIEBwYXJhbSBjc3NcbiAgICogQHJldHVybnMgTmV3IENTUyBzZWxlY3RvciBzdHJpbmdcbiAgICovXG4gIHN0YXRpYyBjbGVhbkNzcyhjc3M6IHN0cmluZykge1xuICAgIGlmIChjc3MgIT0gbnVsbCAmJiBjc3MuaW5kZXhPZihcIi5cIikgPj0gMCkge1xuICAgICAgLy9tb3JlIHRoYW4gb25lIHN0eWxlP1xuICAgICAgaWYgKGNzcy5pbmRleE9mKFwiIFwiKSA+IDApIHtcbiAgICAgICAgcmV0dXJuIF8ubWFwKGNzcy5zcGxpdChcIiBcIiksIChpdGVtKSA9PiB0aGlzLmNsZWFuQ3NzKGl0ZW0pKS5qb2luKFwiIFwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vb25seSBvbmUgc3R5bGVcbiAgICAgICAgcmV0dXJuIGNzcy5yZXBsYWNlKC9cXC4vZywgJy0nKS5yZXBsYWNlKC9eXFwtLywgJycpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjc3M7XG4gIH1cblxuICAvKipcbiAgICogQWJzdHJhY3QgbWV0aG9kIGdldHMgdGhlIGluc3RhbmNlJ3MgW1tDaGFuZ2VEZXRlY3RvclJlZl1dLiBTaG91bGQgYmUgaW1wbGVtZW50ZWQgaW4gc3ViIGNsYXNzXG4gICAqL1xuICBwcm90ZWN0ZWQgZ2V0Q2hhbmdlRGV0ZWN0b3IoKTogQ2hhbmdlRGV0ZWN0b3JSZWYge1xuICAgIC8vc3ViLWNsYXNzIG92ZXJyaWRlXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogTWFyayBjb21wb25lbnQgZm9yIGNoYW5nZSBkZXRlY3Rpb25cbiAgICovXG4gIG1hcmtGb3JDaGVjaygpIHtcbiAgICBpZiAodGhpcy5fdGVtcEZyZWV6ZUNkICE9PSB0cnVlICYmIHRoaXMuX2lzRHlpbmcgIT09IHRydWUpIHtcbiAgICAgIGlmICh0aGlzLmdldENoYW5nZURldGVjdG9yKCkgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLmdldENoYW5nZURldGVjdG9yKCkubWFya0ZvckNoZWNrKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEludm9rZSBjaGFuZ2UgZGV0ZWN0aW9uIG9uIGNvbXBvbmVudFxuICAgKi9cbiAgZGV0ZWN0Q2hhbmdlcygpIHtcbiAgICBpZiAodGhpcy5fdGVtcEZyZWV6ZUNkICE9PSB0cnVlICYmIHRoaXMuX2lzRHlpbmcgIT09IHRydWUpIHtcbiAgICAgIGlmICh0aGlzLmdldENoYW5nZURldGVjdG9yKCkgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLmdldENoYW5nZURldGVjdG9yKCkuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgQ1NTIGhlaWdodCBhbmQgd2lkdGggc3R5bGUgdmFsdWUuIEVpdGhlciAnaGVpZ2h0L3dpZHRoJyBvciAnbWF4LWhlaWdodC9tYXgtd2lkdGgnXG4gICAqIEBwYXJhbSBoZWlnaHRTdHlsZU5hbWVcbiAgICogQHBhcmFtIHdpZHRoU3R5bGVOYW1lXG4gICAqL1xuICBwcm90ZWN0ZWQgaW5pdFdpZHRoSGVpZ2h0U3R5bGUoaGVpZ2h0U3R5bGVOYW1lOiBzdHJpbmcgPSAnaGVpZ2h0Jywgd2lkdGhTdHlsZU5hbWU6IHN0cmluZyA9ICdtYXgtd2lkdGgnKSB7XG4gICAgaWYgKHRoaXMuY29udHJvbEhlaWdodCAhPSBudWxsICYmIHRoaXMuY29udHJvbEhlaWdodCAhPSBcIlwiICYmIHBhcnNlSW50KHRoaXMuY29udHJvbEhlaWdodCkgPiAwKSB7XG4gICAgICB0aGlzLnN0eWxlc1tcImhlaWdodFwiXSA9IHBhcnNlSW50KHRoaXMuY29udHJvbEhlaWdodCkgKyBcInB4XCI7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY29udHJvbFdpZHRoICE9IG51bGwgJiYgdGhpcy5jb250cm9sV2lkdGggIT0gXCJcIiAmJiBwYXJzZUludCh0aGlzLmNvbnRyb2xXaWR0aCkgPiAwKSB7XG4gICAgICB0aGlzLnN0eWxlc1t3aWR0aFN0eWxlTmFtZV0gPSBwYXJzZUludCh0aGlzLmNvbnRyb2xXaWR0aCkgKyBcInB4XCI7XG4gICAgfVxuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIEFkZCBhIHJhZGlvIGJ1dHRvbiBjb21wb25lbnQgdG8gdGhpcyBjb21wb25lbnRcbiAgICogQHBhcmFtIHJhZGlvXG4gICAqL1xuICBhZGRSYWRpb0J1dHRvbkdyb3VwKHJhZGlvOiBCYXNlQ29tcG9uZW50KSB7XG4gICAgLy9yYWRpbyBncm91cCBuZWVkIHRvIGJlIGF0IFZpZXdDb21wb25lbnQgbGV2ZWxcbiAgICBpZiAodGhpcy5pc1ZpZXcoKSAhPT0gdHJ1ZSAmJiB0aGlzLmdldFBhcmVudCgpICE9IG51bGwpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldFBhcmVudCgpLmFkZFJhZGlvQnV0dG9uR3JvdXAocmFkaW8pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnJhZGlvQnV0dG9uR3JvdXBzID09IG51bGwpIHtcbiAgICAgIHRoaXMucmFkaW9CdXR0b25Hcm91cHMgPSBuZXcgTWFwPHN0cmluZywgQXJyYXk8QmFzZUNvbXBvbmVudD4+KCk7XG4gICAgfVxuXG4gICAgLy9pZ25vcmUgdHlwZSB0byBwcmV2ZW50IGNpcmN1bGFyIHJlZlxuICAgIGxldCBncm91cElkOiBzdHJpbmcgPSAocmFkaW8gYXMgYW55KS5ncm91cDtcblxuICAgIGlmICh0aGlzLnJhZGlvQnV0dG9uR3JvdXBzLmdldChncm91cElkKSA9PSBudWxsKSB7XG4gICAgICB0aGlzLnJhZGlvQnV0dG9uR3JvdXBzLnNldChncm91cElkLCBbcmFkaW9dKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yYWRpb0J1dHRvbkdyb3Vwcy5nZXQoZ3JvdXBJZCkucHVzaChyYWRpbyk7XG4gICAgfVxuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIEdldCByYWRpbyBidXR0b24gZ3JvdXAgYnkgZ3JvdXAgSURcbiAgICogQHBhcmFtIGdyb3VwSWRcbiAgICogQHJldHVybnMgIFJhZGlvIGJ1dHRvbiBncm91cCBjb21wb25lbnRcbiAgICovXG4gIGdldFJhZGlvQnV0dG9uR3JvdXAoZ3JvdXBJZDogc3RyaW5nKSB7XG4gICAgbGV0IHZpZXcgPSB0aGlzLmdldFBhcmVudFZpZXcoKTtcblxuICAgIHJldHVybiB2aWV3ICE9IG51bGwgJiYgdmlldy5yYWRpb0J1dHRvbkdyb3VwcyAhPSBudWxsID8gdmlldy5yYWRpb0J1dHRvbkdyb3Vwcy5nZXQoZ3JvdXBJZCkgOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgW1tjb250cm9sV2lkdGhdXSBwcm9wZXJ0eVxuICAgKiBAcGFyYW0gd2lkdGggU2hvdWxkIGJlIG51bWVyaWMgdmFsdWVcbiAgICovXG4gIHNldENvbnRyb2xXaWR0aCh3aWR0aDogYW55KSB7XG4gICAgdGhpcy5jb250cm9sV2lkdGggPSB3aWR0aDtcblxuICAgIHRoaXMuaW5pdFdpZHRoSGVpZ2h0U3R5bGUoKTtcbiAgICB0aGlzLm1hcmtGb3JDaGVjaygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgW1tjb250cm9sSGVpZ2h0XV0gcHJvcGVydHlcbiAgICogQHBhcmFtIGhlaWdodCBTaG91bGQgYmUgbnVtZXJpYyB2YWx1ZVxuICAgKi9cbiAgc2V0Q29udHJvbEhlaWdodChoZWlnaHQ6IGFueSkge1xuICAgIHRoaXMuY29udHJvbEhlaWdodCA9IGhlaWdodDtcblxuICAgIHRoaXMuaW5pdFdpZHRoSGVpZ2h0U3R5bGUoKTtcbiAgICB0aGlzLm1hcmtGb3JDaGVjaygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFsaWFzIGZvciBbW3NldENvbnRyb2xXaWR0aF1dIG1ldGhvZFxuICAgKiBAcGFyYW0gd2lkdGggU2hvdWxkIGJlIGEgbnVtZXJpYyB2YWx1ZVxuICAgKi9cbiAgc2V0V2lkdGgod2lkdGg6IGFueSkge1xuICAgIHRoaXMuc2V0Q29udHJvbFdpZHRoKHdpZHRoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgW1tjb250cm9sV2lkdGhdXSBwcm9wZXJ0eVxuICAgKiBAcmV0dXJucyBWYWx1ZSBvZiBbW2NvbnRyb2xXaWR0aF1dXG4gICAqL1xuICBnZXRXaWR0aCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmNvbnRyb2xXaWR0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbGlhcyBmb3IgW1tzZXRDb250cm9sSGVpZ2h0XV0gbWV0aG9kXG4gICAqIEBwYXJhbSBoZWlnaHQgU2hvdWxkIGJlIGEgbnVtZXJpYyB2YWx1ZVxuICAgKi9cbiAgc2V0SGVpZ2h0KGhlaWdodDogYW55KSB7XG4gICAgdGhpcy5zZXRDb250cm9sSGVpZ2h0KGhlaWdodCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IFtbY29udHJvbEhlaWdodF1dIHByb3BlcnR5XG4gICAqIEByZXR1cm5zIFZhbHVlIG9mIFtbY29udHJvbEhlaWdodF1dXG4gICAqL1xuICBnZXRIZWlnaHQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5jb250cm9sSGVpZ2h0O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdmFsdWUgb2YgW1t4XV0gcHJvcGVydHkgZm9yIGhvcml6b250YWwgcG9zaXRpb24uXG4gICAqIFNldHMgQ1NTIFwibGVmdFwiIHByb3BlcnR5IHRvIFtbeF1dIHB4LlxuICAgKiBAcGFyYW0geCBIb3Jpem9udGFsIGNvb3JkaW5hdGUgcG9zaXRpb25cbiAgICovXG4gIHNldFgoeDogc3RyaW5nKSB7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnN0eWxlc1tcImxlZnRcIl0gPSB4ICsgXCJweFwiO1xuICAgIHRoaXMubWFya0ZvckNoZWNrKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IFtbeF1dIHByb3BlcnR5XG4gICAqIEByZXR1cm5zIFZhbHVlIG9mIFtbeF1dXG4gICAqL1xuICBnZXRYKCkge1xuICAgIHJldHVybiB0aGlzLng7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB2YWx1ZSBvZiBbW3ldXSBwcm9wZXJ0eSBmb3IgdmVydGljYWwgcG9zaXRpb24uXG4gICAqIFNldHMgQ1NTIFwidG9wXCIgcHJvcGVydHkgdG8gW1t5XV0gcHguXG4gICAqIEBwYXJhbSB5IFZlcnRpY2FsIGNvb3JkaW5hdGUgcG9zaXRpb25cbiAgICovXG4gIHNldFkoeTogc3RyaW5nKSB7XG4gICAgdGhpcy55ID0geTtcbiAgICB0aGlzLnN0eWxlc1tcInRvcFwiXSA9IHkgKyBcInB4XCI7XG4gICAgdGhpcy5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgW1t5XV0gcHJvcGVydHlcbiAgICogQHJldHVybnMgVmFsdWUgb2YgW1t5XV1cbiAgICovXG4gIGdldFkoKSB7XG4gICAgcmV0dXJuIHRoaXMueTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgW1tib3JkZXJXaWR0aF1dIHByb3BlcnR5IHZhbHVlXG4gICAqIEBwYXJhbSBib3JkZXJXaWR0aCBTaG91bGQgYmUgbnVtZXJpY1xuICAgKi9cbiAgc2V0Qm9yZGVyV2lkdGgoYm9yZGVyV2lkdGg6IHN0cmluZykge1xuICAgIHRoaXMuYm9yZGVyV2lkdGggPSBib3JkZXJXaWR0aDtcbiAgICB0aGlzLm1hcmtGb3JDaGVjaygpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGNvbXBvbmVudCBpcyB2aWV3IGNvbXBvbmVudC5cbiAgICogSW1wbGVtZW50IGluIHN1YiBjbGFzc1xuICAgKi9cbiAgaXNWaWV3KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGVyZSBhcmUgYWN0aXZlIHZpZXdzLlxuICAgKiBJbXBsZW1lbnQgaW4gc3ViIGNsYXNzXG4gICAqL1xuICBpc05vbmVBY3RpdmVWaWV3KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGlzIGNvbXBvbmVudCBpcyBhbiBpbnN0YW5jZSBvZiBbW0RpYWxvZ0NvbXBvbmVudF1dXG4gICAqL1xuICBwcm90ZWN0ZWQgaXNEaWFsb2coKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoaXMgY29tcG9uZW50IGlzIGEgZHluYW1pYyB2aWV3XG4gICAqL1xuICBpc0R5bmFtaWNWaWV3KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHBhcmVudCB2aWV3IG9mIHRoaXMgY29tcG9uZW50XG4gICAqIEByZXR1cm5zIFBhcmVudCB2aWV3IGNvbXBvbmVudFxuICAgKi9cbiAgZ2V0UGFyZW50VmlldygpOiBCYXNlQ29tcG9uZW50IHtcbiAgICBpZiAodGhpcy5pc1ZpZXcoKSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgbGV0IHBhcmVudFZpZXc6IEJhc2VDb21wb25lbnQgPSBudWxsO1xuXG4gICAgaWYgKHRoaXMucGFyZW50ICE9IG51bGwpIHtcbiAgICAgIGxldCBzdGFjazogQXJyYXk8QmFzZUNvbXBvbmVudD4gPSBbdGhpcy5wYXJlbnRdO1xuXG4gICAgICB3aGlsZSAoc3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCB0ZW1wID0gc3RhY2sucG9wKCk7XG5cbiAgICAgICAgaWYgKHRlbXAuaXNWaWV3KCkgPT09IHRydWUpIHtcbiAgICAgICAgICBwYXJlbnRWaWV3ID0gdGVtcDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0ZW1wLnBhcmVudCAhPSBudWxsKSB7XG4gICAgICAgICAgc3RhY2sucHVzaCh0ZW1wLnBhcmVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcGFyZW50VmlldztcbiAgfVxuXG4gIGdldFBhcmVudFNjcm9sbFZpZXcoKTogQmFzZUNvbXBvbmVudCB7XG4gICAgaWYgKHRoaXMuaXNTY3JvbGxWaWV3KCkpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGxldCBwYXJlbnRWaWV3OiBCYXNlQ29tcG9uZW50ID0gbnVsbDtcblxuICAgIGlmICh0aGlzLnBhcmVudCAhPSBudWxsKSB7XG4gICAgICBsZXQgc3RhY2s6IEFycmF5PEJhc2VDb21wb25lbnQ+ID0gW3RoaXMucGFyZW50XTtcblxuICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgdGVtcCA9IHN0YWNrLnBvcCgpO1xuXG4gICAgICAgIGlmICh0ZW1wLmlzU2Nyb2xsVmlldygpID09PSB0cnVlKSB7XG4gICAgICAgICAgcGFyZW50VmlldyA9IHRlbXA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGVtcC5wYXJlbnQgIT0gbnVsbCkge1xuICAgICAgICAgIHN0YWNrLnB1c2godGVtcC5wYXJlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcmVudFZpZXc7XG4gIH1cblxuICBpc1Njcm9sbFZpZXcoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgcGFyZW50IGNvbnRhaW5lciBjb21wb25lbnQgKGZvciBzdWJ2aWV3KSwgbm90IHRoZSBhY3R1YWwgcGFyZW50IHZpZXcuIFRoaXMgaXMgdGhlIHBhcmVudFxuICAgKiBWaWV3Q29tcG9uZW50IHdoZXJlIGNhbkJlQWN0aXZlVmlldyBpcyBmYWxzZVxuICAgKi9cbiAgX2dldE5vbmVBY3RpdmVWaWV3UGFyZW50KCk6IEJhc2VDb21wb25lbnQge1xuICAgIGlmICh0aGlzLmlzTm9uZUFjdGl2ZVZpZXcoKSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgbGV0IHBhcmVudFZpZXc6IEJhc2VDb21wb25lbnQgPSBudWxsO1xuXG4gICAgaWYgKHRoaXMucGFyZW50ICE9IG51bGwpIHtcbiAgICAgIGxldCBzdGFjazogQXJyYXk8QmFzZUNvbXBvbmVudD4gPSBbdGhpcy5wYXJlbnRdO1xuXG4gICAgICB3aGlsZSAoc3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCB0ZW1wID0gc3RhY2sucG9wKCk7XG5cbiAgICAgICAgaWYgKHRlbXAuaXNOb25lQWN0aXZlVmlldygpID09PSB0cnVlKSB7XG4gICAgICAgICAgcGFyZW50VmlldyA9IHRlbXA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGVtcC5wYXJlbnQgIT0gbnVsbCkge1xuICAgICAgICAgIHN0YWNrLnB1c2godGVtcC5wYXJlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcmVudFZpZXc7XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogRXZlbnQgaGFuZGxlciBmb3IgY29udGV4dCBtZW51IGNsaWNrIChyaWdodCBjbGljaykuXG4gICAqIERlbGVnYXRlcyB0byBbW1Nlc3Npb25TZXJ2aWNlXV0gdG8gZGlzcGxheSBwb3B1cC5cbiAgICogQHBhcmFtIGV2ZW50IENsaWNrIGV2ZW50XG4gICAqIEBwYXJhbSBmb3JjZSBhbHdheXMgZW1pdFxuICAgKi9cbiAgaGFuZGxlT25Db250ZXh0TWVudShldmVudDogTW91c2VFdmVudCwgZm9yY2U6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIC8vYWxsb3cgY29tcG9uZW50IHRvIHNraXAgZW1pdCBldmVudCBhbmQgbGV0IHBhcmVudCAoaS5lLiB0YWJsZSBjZWxsIHRvIGVtaXQgaXQpXG4gICAgaWYgKGZvcmNlID09PSB0cnVlIHx8IHRoaXMuc2tpcEVtaXRDb250ZXh0TWVudUV2ZW50ICE9PSB0cnVlKSB7XG4gICAgICBpZiAodGhpcy5nZXRTZXNzaW9uKCkgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLmdldFNlc3Npb24oKS5zZXRNb3VzZVBvc2l0aW9uKGV2ZW50KTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcGFyZW50VmlldyA9IHRoaXMuZ2V0UGFyZW50VmlldygpO1xuICAgICAgbGV0IHBvcHVwTWVudUlkOiBzdHJpbmcgPSBudWxsO1xuXG4gICAgICBpZiAocGFyZW50VmlldyAhPSBudWxsKSB7XG4gICAgICAgIHBvcHVwTWVudUlkID0gKHBhcmVudFZpZXcgYXMgVmlld0NvbXBvbmVudCkuZ2V0Rmlyc3RQb3B1cE1lbnVJZCgpO1xuICAgICAgfVxuXG5cbiAgICAgIHRoaXMub25Db250ZXh0TWVudS5lbWl0KGV2ZW50KTtcblxuXG4gICAgICBpZiAodGhpcy5wb3B1cCAhPSBudWxsICYmIHRoaXMucG9wdXAgIT09IFwiXCIpIHtcbiAgICAgICAgaWYgKHRoaXMucG9wdXAuaW5kZXhPZihcIiNcIikgPT09IDApIHtcbiAgICAgICAgICB0aGlzLnBvcHVwID0gdGhpcy5wb3B1cC5zdWJzdHJpbmcoMSk7XG4gICAgICAgIH1cblxuICAgICAgICBwb3B1cE1lbnVJZCA9IHRoaXMucG9wdXA7XG5cbiAgICAgICAgdGhpcy5nZXRTZXNzaW9uKCkuX2N1cnJlbnRQb3B1cE1lbnVJZCA9IHRoaXMucG9wdXA7XG4gICAgICB9XG5cbiAgICAgIGlmIChwb3B1cE1lbnVJZCAhPSBudWxsKSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGNvbnN0IHRtID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRtKTtcblxuICAgICAgICAgIGlmICh0aGlzLmdldFNlc3Npb24oKS5fY3VycmVudFBvcHVwTWVudUlkICE9IG51bGwpIHtcbiAgICAgICAgICAgIHBvcHVwTWVudUlkID0gdGhpcy5nZXRTZXNzaW9uKCkuX2N1cnJlbnRQb3B1cE1lbnVJZDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLmdldFNlc3Npb24oKS5zaG93Q29udGV4dE1lbnUocG9wdXBNZW51SWQpO1xuICAgICAgICAgIHRoaXMuZ2V0U2Vzc2lvbigpLl9jdXJyZW50UG9wdXBNZW51SWQgPSBudWxsO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRW1pdHMgZm9jdXMgbG9zdCBldmVudCBmb3IgY29tcG9uZW50cyB0aGF0IHJlcXVpcmUgdmFsaWRhdGlvblxuICAgKiBAcGFyYW0gZXZlbnRcbiAgICogQGV2ZW50IEJlZm9yZUFjdGl2ZUxvc3RcbiAgICovXG4gIHZhbGlkYXRlRmllbGQoZXZlbnQ6IEZvY3VzRXZlbnQpIHtcbiAgICBpZiAoQXBwVXRpbHMudmFsaWRhdGVGaWVsZCAhPSBudWxsICYmIEFwcFV0aWxzLnZhbGlkYXRlRmllbGQodGhpcykgIT09IHRydWUpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9XG5cbiAgICB0aGlzLm9uQmVmb3JlQWN0aXZlTG9zdC5lbWl0KCk7XG5cbiAgICB0aGlzLmZvY3VzTG9zdCgpO1xuICB9XG5cbiAgLy9pdGVyYXRhdGl2ZSBmdW5jdGlvbiB0byBwcmV2ZW50IHN0YWNrIG92ZXJmbG93XG4gIC8vIHJlZHVjZUNoaWxkcmVuSXRlcmF0aXZlKCkge1xuICAvLyAgIGlmICh0aGlzLl9yZWR1Y2VDaGlsZHJlbkl0ZXJhdGl2ZUNhY2hlICE9IG51bGwgJiYgdGhpcy5fcmVkdWNlQ2hpbGRyZW5JdGVyYXRpdmVDYWNoZS5sZW5ndGggPiAwKSB7XG4gIC8vICAgICByZXR1cm4gdGhpcy5fcmVkdWNlQ2hpbGRyZW5JdGVyYXRpdmVDYWNoZTtcbiAgLy8gICB9XG5cbiAgLy8gICB0aGlzLl9yZWR1Y2VDaGlsZHJlbkl0ZXJhdGl2ZUNhY2hlID0gW107XG5cbiAgLy8gICBpZiAodGhpcy5jaGlsZHJlbiA9PSBudWxsKSB7XG4gIC8vICAgICBMb2dnZXIud2FybihcInJlZHVjZUNoaWxkcmVuSXRlcmF0aXZlLCBjaGlsZHJlbiBpcyBudWxsXCIpO1xuICAvLyAgICAgcmV0dXJuIHRoaXMuX3JlZHVjZUNoaWxkcmVuSXRlcmF0aXZlQ2FjaGU7XG4gIC8vICAgfVxuXG4gIC8vICAgLy9za2lwIERpYWxvZ0NvbXBvbmVudFxuICAvLyAgIGxldCBzdGFjazogQXJyYXk8QmFzZUNvbXBvbmVudD4gPSBfLmZpbHRlcihBcnJheS5mcm9tKHRoaXMuY2hpbGRyZW4udmFsdWVzKCkpLCAoY29tcDogQmFzZUNvbXBvbmVudCk9PntcbiAgLy8gICAgIHJldHVybiBjb21wLmlzRmF1eEVsZW1lbnQoKSB8fCBjb21wLmlzRGlhbG9nKCkgIT09IHRydWU7XG4gIC8vICAgfSk7XG5cbiAgLy8gICB0aGlzLl9yZWR1Y2VDaGlsZHJlbkl0ZXJhdGl2ZUNhY2hlID0gdGhpcy5fcmVkdWNlQ2hpbGRyZW5JdGVyYXRpdmVDYWNoZS5jb25jYXQoc3RhY2spO1xuICAvLyAgIGxldCBjb3VudGVyID0gMDtcblxuICAvLyAgIHdoaWxlKHN0YWNrLmxlbmd0aCA+IDApIHtcbiAgLy8gICAgIGNvbnN0IGNoaWxkID0gc3RhY2sucG9wKCk7XG5cbiAgLy8gICAgIGlmIChjaGlsZC5jaGlsZHJlbiAhPSBudWxsICYmIGNoaWxkLmNoaWxkcmVuLnNpemUgPiAwKSB7XG4gIC8vICAgICAgIC8vZ2V0IGdyYW5kY2hpbGRyZW5cbiAgLy8gICAgICAgY29uc3QgZ3JhbmRDaGlsZHJlbiA9IEFycmF5LmZyb20oY2hpbGQuY2hpbGRyZW4udmFsdWVzKCkpO1xuICAvLyAgICAgICB0aGlzLl9yZWR1Y2VDaGlsZHJlbkl0ZXJhdGl2ZUNhY2hlID0gdGhpcy5fcmVkdWNlQ2hpbGRyZW5JdGVyYXRpdmVDYWNoZS5jb25jYXQoZ3JhbmRDaGlsZHJlbik7XG5cbiAgLy8gICAgICAgLy9wdXNoIHRvIG91ciBzdGFjayB0byBpdGVyYXRlIG91ciBncmFuZGNoaWxkcmVuIHRvIGxvb2sgZm9yIGdyZWF0IGdyYW5kY2hpbGRyZW5cbiAgLy8gICAgICAgc3RhY2sgPSBzdGFjay5jb25jYXQoZ3JhbmRDaGlsZHJlbik7XG4gIC8vICAgICB9XG5cbiAgLy8gICAgIGNvdW50ZXIrKztcblxuICAvLyAgICAgaWYgKGNvdW50ZXIgPiAxMDAwMCB8fCBzdGFjay5sZW5ndGggPiAxMDAwMCkge1xuICAvLyAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCYXNlQ29tcG9uZW50LnJlZHVjZUNoaWxkcmVuSXRlcmF0aXZlOiBzdGFjayBvdmVyZmxvd1wiKTtcbiAgLy8gICAgIH1cbiAgLy8gICB9XG5cbiAgLy8gICByZXR1cm4gdGhpcy5fcmVkdWNlQ2hpbGRyZW5JdGVyYXRpdmVDYWNoZTtcbiAgLy8gfVxuXG4gIC8qKlxuICAgKiBHZXQgY2hpbGRyZW4gb2YgYSB0YWJsZSBjb21wb25lbnQuXG4gICAqIEByZXR1cm5zIEFycmF5IG9mIHRhYmxlIGNoaWxkcmVuXG4gICAqL1xuICBnZXRUYWJsZUNoaWxkcmVuKCk6IEFycmF5PGFueT4ge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgW1tiZ0NvbG9yXV0gcHJvcGVydHlcbiAgICogQHJldHVybnMgVmFsdWUgb2YgW1tiZ0NvbG9yXV1cbiAgICovXG4gIGdldEJnQ29sb3IoKSB7XG4gICAgcmV0dXJuIHRoaXMuYmdDb2xvcjtcbiAgfVxuXG4gIHByb3RlY3RlZCBzZXRBdHRyaWJ1dGVGcm9tRGVmKCkge1xuICAgIGNvbnN0IGNvbXBEZWYgPSB0aGlzLmdldFNlc3Npb24oKS5nZXREZWYodGhpcy5pZCk7XG5cbiAgICBpZiAoY29tcERlZiAhPSBudWxsICYmIGNvbXBEZWYuYXR0cmlidXRlICE9IG51bGwpIHtcbiAgICAgIGlmIChcbiAgICAgICAgY29tcERlZi5hdHRyaWJ1dGUgaW5zdGFuY2VvZiBNYXAgfHxcbiAgICAgICAgY29tcERlZi5hdHRyaWJ1dGUgaW5zdGFuY2VvZiBIYXNodGFibGUgfHxcbiAgICAgICAgY29tcERlZi5hdHRyaWJ1dGUgaW5zdGFuY2VvZiBIYXNoTWFwXG4gICAgICApIHtcbiAgICAgICAgY29uc3Qga2V5cyA9IGNvbXBEZWYuYXR0cmlidXRlLmtleXMoKTtcbiAgICAgICAgbGV0IGtleSA9IGtleXMubmV4dCgpO1xuXG4gICAgICAgIHdoaWxlIChrZXkuZG9uZSAhPT0gdHJ1ZSkge1xuICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKGtleS52YWx1ZSwgY29tcERlZi5hdHRyaWJ1dGUuZ2V0KGtleSkpO1xuICAgICAgICAgIGtleSA9IGtleXMubmV4dCgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBrZXlzID0gXy5rZXlzKGNvbXBEZWYuYXR0cmlidXRlKTtcblxuICAgICAgICBmb3IgKGxldCBrZXkgb2Yga2V5cykge1xuICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKGtleSwgY29tcERlZi5hdHRyaWJ1dGVba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybSBhbiB4cGF0aCBsb29rdXAgb24gdGhlIGVsZW1lbnQuIFRoaXMgd2lsbCBiZSBldmFsdWF0ZWQgYWdhaW5zdCB0aGUgYWN0dWFsIEhUTUxFbGVtZW50LlxuICAgKlxuICAgKiBAd2FybmluZyBQTEVBU0UgRU5TVVJFIFRPIEZSRUUgVVAgVEhFIFRIRSBSRVNVTFQgU08gV0UgRE9OJ1QgSEFWRSBBTlkgREFOR0xJTkcgSFRNTCBFTEVNRU5UXG4gICAqXG4gICAqIEBwYXJhbSB4cGF0aEV4cHJlc3Npb25cbiAgICovXG4gIGV2YWx1YXRlWFBhdGgoeHBhdGhFeHByZXNzaW9uOiBzdHJpbmcpOiBWZWN0b3I8Tm9kZT4ge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBjb2xvciBvZiBoaWdodGxpZ2h0ZWQgdGV4dCBiYWNrZ3JvdW5kXG4gICAqIEBwYXJhbSBjb2xvciBTaG91bGQgYmUgYSB2YWxpZCBDU1MgY29sb3IgdmFsdWUgKGUuZy4gXCIjRkYwMDAwXCIgb3IgXCJyZWRcIilcbiAgICovXG4gIHNldEhpZ2hsaWdodEJnQ29sb3IoY29sb3I6IHN0cmluZykge1xuICAgIHRoaXMuaGlnaGxpZ2h0QmdDb2xvciA9IGNvbG9yO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBjb2xvciBvZiBoaWdobGlnaHRlZCB0ZXh0IGZvcmVncm91bmRcbiAgICogQHBhcmFtIGNvbG9yIFNob3VsZCBiZSBhIHZhbGlkIENTUyBjb2xvciB2YWx1ZSAoZS5nLiBcIiNGRjAwMDBcIiBvciBcInJlZFwiKVxuICAgKi9cbiAgc2V0SGlnaGxpZ2h0Rm9udENvbG9yKGNvbG9yOiBzdHJpbmcpIHtcbiAgICB0aGlzLmhpZ2hsaWdodEZvbnRDb2xvciA9IGNvbG9yO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBbW2hpZ2h0bGlnaHRCZ0NvbG9yXV0gcHJvcGVydHlcbiAgICogQHJldHVybnMgQ29sb3Igc3RyaW5nXG4gICAqL1xuICBnZXRIaWdobGlnaHRCZ0NvbG9yKCkge1xuICAgIHJldHVybiB0aGlzLmhpZ2hsaWdodEJnQ29sb3I7XG4gIH1cblxuICAvKipcbiAgICogR2V0IFtbaGlnaGxpZ2h0Rm9udENvbG9yXV0gcHJvcGVydHlcbiAgICogQHJldHVybnMgQ29sb3Igc3RyaW5nXG4gICAqL1xuICBnZXRIaWdobGlnaHRGb250Q29sb3IoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGlnaGxpZ2h0Rm9udENvbG9yO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBbW3BhcmVudFRhYmxlUm93XV0gcHJvcGVydHlcbiAgICovXG4gIGdldFBhcmVudFRhYmxlUm93KCkge1xuICAgIHJldHVybiB0aGlzLnBhcmVudFRhYmxlUm93O1xuICB9XG5cbiAgLy9jbGVhciByZWR1Y2UgY2hpbGRyZW4gaXRlcmF0aXZlIGNhY2hlXG4gIC8vIHJlc2V0UmVkdWNlQ2hpbGRyZW5JdGVyYXRpdmVDYWNoZSgpIHtcbiAgLy8gICB0aGlzLl9yZWR1Y2VDaGlsZHJlbkl0ZXJhdGl2ZUNhY2hlID0gbnVsbDtcbiAgLy8gfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBjaGFuZ2UgZGV0ZWN0aW9uIGlzIGZyb3plblxuICAgKiBAcmV0dXJucyBCb29sZWFuIElmIGNvbXBvbmVudCBjaGFuZ2UgZGV0ZWN0aW9uIGlzIGZyb3plblxuICAgKi9cbiAgaXNDaGFuZ2VEZXRlY3Rpb25Gcm96ZW4oKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGNvbXBvbmVudCBpcyBhIGZhdXggZWxlbWVudFxuICAgKiBAcmV0dXJucyBCb29sZWFuIElmIGNvbXBvbmVudCBpcyBmYXV4IGVsZW1lbnRcbiAgICovXG4gIGlzRmF1eEVsZW1lbnQoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBpbnRlcm5hbCBbW192aWV3Q2hpbGRyZW5NYXBdXSBtZW1iZXJcbiAgICogQHJldHVybnMgVmFsdWUgb2YgW1tfdmlld0NoaWxkcmVuTWFwXV1cbiAgICovXG4gIGdldFZpZXdDaGlsZHJlbk1hcCgpOiBNYXA8c3RyaW5nLCBCYXNlQ29tcG9uZW50PiB7XG4gICAgcmV0dXJuIHRoaXMuX3ZpZXdDaGlsZHJlbk1hcDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIHZpZXcgY2hpbGQgd2l0aCBpZCBmcm9tIFtbX3ZpZXdDaGlsZHJlbk1hcF1dXG4gICAqIEBwYXJhbSBpZCBJRCBvZiBjaGlsZCB0byByZW1vdmVcbiAgICovXG4gIHJlbW92ZVZpZXdDaGlsZEZyb21NYXAoaWQ6IHN0cmluZykge1xuICAgIGlmICh0aGlzLl92aWV3Q2hpbGRyZW5NYXAgIT0gbnVsbCkge1xuICAgICAgdGhpcy5fdmlld0NoaWxkcmVuTWFwLmRlbGV0ZShLZXlVdGlscy50b01hcEtleShpZCkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgY29tcG9uZW50IHRvIFtbX3ZpZXdDaGlsZHJlbk1hcF1dXG4gICAqIEBwYXJhbSBvYmogQ2hpbGQgdG8gYWRkIHRvIFtbX3ZpZXdDaGlsZHJlbk1hcF1dXG4gICAqL1xuICBhZGRWaWV3Q2hpbGRUb01hcChvYmo6IEJhc2VDb21wb25lbnQgfCBIVE1MRWxlbWVudFdyYXBwZXIpIHtcbiAgICBpZiAodGhpcy5fdmlld0NoaWxkcmVuTWFwICE9IG51bGwpIHtcbiAgICAgIHRoaXMuX3ZpZXdDaGlsZHJlbk1hcC5zZXQoS2V5VXRpbHMudG9NYXBLZXkob2JqLmdldElkKCkpLCBvYmogYXMgYW55KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSW52b2tlIGFuIE1DTyBtZXRob2QgYnkgbmFtZS4gSWYgYSBmdW5jdGlvbiBpcyBwYXNzZWQgYXMgYXJndW1lbnQsIGl0IHdpbGwgYmUgY2FsbGVkIHdpdGhcbiAgICogdGhpcyBjb21wb25lbnQgYXMgYW4gYXJndW1lbnQuXG4gICAqIEBwYXJhbSBhY3Rpb24gTmFtZSBvZiBhY3Rpb24gbWV0aG9kIHRvIGludm9rZSBvciBhIGZ1bmN0aW9uIHRvIGludm9rZVxuICAgKi9cbiAgcHJvdGVjdGVkIGludm9rZU1jb0FjdGlvbihhY3Rpb246IHN0cmluZyB8ICgoYXJnPzogYW55KSA9PiBhbnkpKSB7XG4gICAgaWYgKHR5cGVvZiBhY3Rpb24gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgYWN0aW9uKHRoaXMpO1xuICAgIH0gZWxzZSBpZiAoYWN0aW9uLmluZGV4T2YoXCJtY286Ly9cIikgPT09IDApIHtcbiAgICAgIGNvbnN0IG1jb05hbWUgPSBhY3Rpb24uc3Vic3RyaW5nKDYsIGFjdGlvbi5pbmRleE9mKFwiLlwiKSk7XG4gICAgICBjb25zdCBtZXRob2ROYW1lID0gYWN0aW9uLnN1YnN0cmluZyhhY3Rpb24uaW5kZXhPZihcIi5cIikgKyAxLCBhY3Rpb24uaW5kZXhPZihcIihcIikpO1xuICAgICAgY29uc3QgYXJnID0gYWN0aW9uLnN1YnN0cmluZyhhY3Rpb24uaW5kZXhPZihcIihcIikgKyAxLCBhY3Rpb24uaW5kZXhPZihcIilcIikpO1xuXG4gICAgICBpZiAoYXJnICE9IG51bGwgJiYgYXJnLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgbWNvID0gdGhpcy5zZXNzaW9uU2VydmljZS5nZXRNY29Db250YWluZXIoKS5nZXRNY28obWNvTmFtZSk7XG5cbiAgICAgICAgaWYgKG1jbyAhPSBudWxsKSB7XG4gICAgICAgICAgaWYgKGFyZyA9PT0gXCJ0aGlzXCIpIHtcbiAgICAgICAgICAgIG1jb1ttZXRob2ROYW1lXS5hcHBseShtY28sIFt0aGlzXSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1jb1ttZXRob2ROYW1lXS5hcHBseShtY28sIFthcmddKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIlVuYWJsZSB0byBleGVjdXRlIE1DTyBhY3Rpb24sIG1jbyBub3QgZm91bmQ6IFwiICsgbWNvTmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IG1jbyA9IHRoaXMuc2Vzc2lvblNlcnZpY2UuZ2V0TWNvQ29udGFpbmVyKCkuZ2V0TWNvKG1jb05hbWUpO1xuXG4gICAgICAgIGlmIChtY28gIT0gbnVsbCkge1xuICAgICAgICAgIG1jb1ttZXRob2ROYW1lXS5hcHBseShtY28pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJVbmFibGUgdG8gZXhlY3V0ZSBNQ08gYWN0aW9uLCBtY28gbm90IGZvdW5kOiBcIiArIG1jb05hbWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIF9ub3RpZnlJbnRlcm5hbENoYW5nZUNiKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5faW50ZXJuYWxDaGFuZ2VDYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICB0aGlzLl9pbnRlcm5hbENoYW5nZUNiKHRoaXMpO1xuICAgIH1cbiAgfVxuXG4gIGVtcHR5Q2hpbGRyZW4oKSB7XG4gICAgaWYgKHRoaXMuX3ZpZXdDaGlsZHJlbk1hcCAhPSBudWxsKSB7XG4gICAgICBjb25zdCBjaXQgPSB0aGlzLl92aWV3Q2hpbGRyZW5NYXAudmFsdWVzKCk7XG4gICAgICBsZXQgdmFsID0gY2l0Lm5leHQoKTtcblxuICAgICAgd2hpbGUgKHZhbC5kb25lICE9PSB0cnVlKSB7XG4gICAgICAgIC8vc29tZSBjaGlsZHJlbiBhcmUgbm90IGFjdHVhbCBCYXNlQ29tcG9uZW50XG4gICAgICAgIGlmICh0eXBlb2YgdmFsLnZhbHVlLmVtcHR5Q2hpbGRyZW4gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIHZhbC52YWx1ZS5lbXB0eUNoaWxkcmVuKCk7XG4gICAgICAgICAgdmFsLnZhbHVlLl9pc0R5aW5nID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhbCA9IGNpdC5uZXh0KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY2hpbGRyZW4gIT0gbnVsbCkge1xuICAgICAgdGhpcy5jaGlsZHJlbi5jbGVhcigpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl92aWV3Q2hpbGRyZW5NYXAgIT0gbnVsbCkge1xuICAgICAgdGhpcy5fdmlld0NoaWxkcmVuTWFwLmNsZWFyKCk7XG4gICAgICBkZWxldGUgdGhpcy5fdmlld0NoaWxkcmVuTWFwO1xuICAgIH1cblxuICAgIC8vIHRoaXMuX3ZpZXdDaGlsZHJlbk1hcCA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgdG8gc2VlIGlmIHRoaXMgaXMgYSBTY3JvbGxQYW5lQ29tcG9uZW50XG4gICAqL1xuICBpc1Njcm9sbFBhbmUoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0IHRoZSBzY3JvbGwgcG9zaXRpb24gdG8gdGhlIHByZXZpb3VzIGNhcHR1cmVkXG4gICAqL1xuICByZXNldFNjcm9sbFRvcFRvUHJldmlvdXNQb3NpdGlvbigpIHtcbiAgICAvL2ltcGxlbWVudCBieSBzY3JvbGxwYW5lXG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgYWxsIHNjcm9sbHBhbmUgcG9zXG4gICAqL1xuICByZXNldEFsbFNjcm9sbFBhbmVzUG9zaXRpb25Ub1ByZXZpb3VzKCkge1xuICAgIGlmICh0aGlzLnNjcm9sbFBhbmVzICE9IG51bGwpIHtcbiAgICAgIHRoaXMuc2Nyb2xsUGFuZXMuZm9yRWFjaCgoc2Nyb2xsUGFuZSkgPT4gc2Nyb2xsUGFuZS5yZXNldFNjcm9sbFRvcFRvUHJldmlvdXNQb3NpdGlvbigpKTtcbiAgICB9XG4gIH1cblxuICByZXNldFNjcm9sbFRvcFBvc2l0aW9uKCkge1xuICB9XG4gIHJlc2V0QWxsU2Nyb2xsUGFuZXNQb3NpdGlvblRvVG9wKCkge1xuICAgIGlmICh0aGlzLnNjcm9sbFBhbmVzICE9IG51bGwpIHtcbiAgICAgIHRoaXMuc2Nyb2xsUGFuZXMuZm9yRWFjaCgoc2Nyb2xsUGFuZSkgPT4gc2Nyb2xsUGFuZS5yZXNldFNjcm9sbFRvcFBvc2l0aW9uKCkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBOb3RpZnkgcGFyZW50IHZpZXcgdGhhdCB0aGVyZSBpcyBhIHZhbGlkYXRpb24gZXJyb3Igb24gdGhpcywgdGhpcyBzaG91bGQgb25seSBiZSBhcHBsaWNhYmxlZCB0byBkaXNhYmxlZCBlbGVtZW50XG4gICAqL1xuICBub3RpZnlQYXJlbnRPZkVycm9yKCkge1xuICAgIGlmICh0aGlzLmdldERpc2FibGVkKCkgPT09IHRydWUpIHtcbiAgICAgIGNvbnN0IHBhcmVudFZpZXcgPSB0aGlzLmdldFBhcmVudFZpZXcoKTtcblxuICAgICAgaWYgKHBhcmVudFZpZXcgIT0gbnVsbCAmJiBwYXJlbnRWaWV3W1wiZGlhbG9nXCJdICE9IG51bGwpIHtcbiAgICAgICAgaWYgKHBhcmVudFZpZXdbXCJkaWFsb2dcIl0uX2Rpc2FibGVkRXJyb3JFbGVtZW50SWQgPT0gbnVsbCkge1xuICAgICAgICAgIHBhcmVudFZpZXdbXCJkaWFsb2dcIl0uX2Rpc2FibGVkRXJyb3JFbGVtZW50SWQgPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYXJlbnRWaWV3W1wiZGlhbG9nXCJdLl9kaXNhYmxlZEVycm9yRWxlbWVudElkLmluZGV4T2YodGhpcy5nZXRJZCgpKSA8IDApIHtcbiAgICAgICAgICBwYXJlbnRWaWV3W1wiZGlhbG9nXCJdLl9kaXNhYmxlZEVycm9yRWxlbWVudElkLnB1c2godGhpcy5nZXRJZCgpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBGb2N1cyB0aGUgcGFyZW50IHRhYlxuICAgKi9cbiAgZm9jdXNQYXJlbnRUYWIoKSB7XG4gICAgLy9nZXQgcGFyZW50IHZpZXdcbiAgICBjb25zdCBwYXJlbnRWaWV3ID0gdGhpcy5fZ2V0Tm9uZUFjdGl2ZVZpZXdQYXJlbnQoKSB8fCB0aGlzLmdldFBhcmVudFZpZXcoKTtcblxuICAgIGlmIChwYXJlbnRWaWV3ICE9IG51bGwpIHtcbiAgICAgIC8vY2hlY2sgdG8gc2VlIGlmIHRoaXMgdmlldyBpcyBpbiBhIFRhYlBhbmVcbiAgICAgIGNvbnN0IHRhYlBhbmUgPSBwYXJlbnRWaWV3LmdldFBhcmVudCgpO1xuXG4gICAgICAvL2NoZWNrIHRvIHNlZSBpZiB0aGUgcGFyZW50IGlzIGEgVGFiXG4gICAgICBpZiAodGFiUGFuZSAhPSBudWxsICYmIHRhYlBhbmUuZ2V0TnhUYWdOYW1lKCkgPT09IFwidGFiXCIpIHtcbiAgICAgICAgdGFiUGFuZS5zZXRGb2N1cygpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBzY3JvbGxwYW5lXG4gICAqXG4gICAqIEBwYXJhbSBzY3JvbGxQYW5lIHNjcm9sbFBhbmUgdG8gcmVnaXN0ZXJcbiAgICovXG4gIHByaXZhdGUgcmVnaXN0ZXJTY3JvbGxQYW5lKHNjcm9sbFBhbmU6IEJhc2VDb21wb25lbnQpIHtcbiAgICBpZiAodHlwZW9mIHNjcm9sbFBhbmUuaXNTY3JvbGxQYW5lID09PSBcImZ1bmN0aW9uXCIgJiYgc2Nyb2xsUGFuZS5pc1Njcm9sbFBhbmUoKSA9PT0gdHJ1ZSkge1xuICAgICAgaWYgKHRoaXMuc2Nyb2xsUGFuZXMgPT0gbnVsbCkge1xuICAgICAgICB0aGlzLnNjcm9sbFBhbmVzID0gW107XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2Nyb2xsUGFuZXMucHVzaChzY3JvbGxQYW5lKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgTWNvQ29udGFpbmVyU2VydmljZSB9IGZyb20gJy4vbWNvLWNvbnRhaW5lci5zZXJ2aWNlJztcblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogW1xuICAgIENvbW1vbk1vZHVsZVxuICBdLFxuICBkZWNsYXJhdGlvbnM6IFtdLFxuICBwcm92aWRlcnM6IFtcbiAgICBNY29Db250YWluZXJTZXJ2aWNlXG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgTWNvQ29udGFpbmVyTW9kdWxlIHsgfVxuIiwiaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBFdmVudEhhbmRsZXJTZXJ2aWNlIH0gZnJvbSAnLi9ldmVudC1oYW5kbGVyLnNlcnZpY2UnO1xuaW1wb3J0IHsgTWNvQ29udGFpbmVyTW9kdWxlIH0gZnJvbSAnLi4vbWNvLWNvbnRhaW5lci9tY28tY29udGFpbmVyLm1vZHVsZSc7XG5cbkBOZ01vZHVsZSh7XG4gIGltcG9ydHM6IFtcbiAgICBDb21tb25Nb2R1bGUsXG4gICAgTWNvQ29udGFpbmVyTW9kdWxlXG4gIF0sXG4gIGRlY2xhcmF0aW9uczogW10sXG4gIHByb3ZpZGVyczogW1xuICAgIEV2ZW50SGFuZGxlclNlcnZpY2VcbiAgXVxufSlcbmV4cG9ydCBjbGFzcyBFdmVudEhhbmRsZXJNb2R1bGUgeyB9XG4iLCJpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IFNlc3Npb25TZXJ2aWNlIH0gZnJvbSAnLi9zZXNzaW9uLnNlcnZpY2UnO1xuaW1wb3J0IHsgTWNvQ29udGFpbmVyTW9kdWxlIH0gZnJvbSAnLi4vbWNvLWNvbnRhaW5lci9tY28tY29udGFpbmVyLm1vZHVsZSc7XG5pbXBvcnQgeyBFdmVudEhhbmRsZXJNb2R1bGUgfSBmcm9tICcuLi9ldmVudC1oYW5kbGVyL2V2ZW50LWhhbmRsZXIubW9kdWxlJztcblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogW1xuICAgIENvbW1vbk1vZHVsZSxcbiAgICBNY29Db250YWluZXJNb2R1bGUsXG4gICAgRXZlbnRIYW5kbGVyTW9kdWxlXG4gIF0sXG4gIGRlY2xhcmF0aW9uczogW10sXG4gIHByb3ZpZGVyczogW1xuICAgIFNlc3Npb25TZXJ2aWNlXG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgU2Vzc2lvbk1vZHVsZSB7IH1cbiIsImltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuXG5ATmdNb2R1bGUoe1xuICBpbXBvcnRzOiBbXG4gICAgQ29tbW9uTW9kdWxlXG4gIF0sXG4gIGRlY2xhcmF0aW9uczogW11cbn0pXG5leHBvcnQgY2xhc3MgSmF2YU1vZHVsZSB7IH1cbiIsImltcG9ydCB7IERpcmVjdGl2ZSwgQ29udGVudENoaWxkLCBPbkluaXQsIEVsZW1lbnRSZWYsIEV2ZW50RW1pdHRlciwgT3V0cHV0LCBWaWV3Q2hpbGQsIGZvcndhcmRSZWYsIFZpZXdDb250YWluZXJSZWYsIE5nWm9uZSwgSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE9uQ3JlYXRlRXZlbnQgfSBmcm9tICcuL29uLWNyZWF0ZS1ldmVudCc7XG5cbkBEaXJlY3RpdmUoe1xuICBzZWxlY3RvcjogJ1t2dE9uQ3JlYXRlXSdcbn0pXG5leHBvcnQgY2xhc3MgT25DcmVhdGVEaXJlY3RpdmUgaW1wbGVtZW50cyBPbkluaXQge1xuICBASW5wdXQoKSBydW5PdXRzaWRlWm9uZTogYm9vbGVhbjtcbiAgQE91dHB1dCgpIHZ0T25DcmVhdGU6IEV2ZW50RW1pdHRlcjxPbkNyZWF0ZUV2ZW50PiA9IG5ldyBFdmVudEVtaXR0ZXI8T25DcmVhdGVFdmVudD4oKTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWY8SFRNTEVsZW1lbnQ+LFxuICAgIHByaXZhdGUgem9uZTogTmdab25lXG4gICkge1xuXG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICBpZiAodGhpcy5ydW5PdXRzaWRlWm9uZSA9PT0gdHJ1ZSkge1xuICAgICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpPT57XG4gICAgICAgIHRoaXMudnRPbkNyZWF0ZS5lbWl0KHtcbiAgICAgICAgICBlbGVtZW50OiB0aGlzLmVsZW1lbnRSZWZcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy52dE9uQ3JlYXRlLmVtaXQoe1xuICAgICAgICBlbGVtZW50OiB0aGlzLmVsZW1lbnRSZWZcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBCYXNlQ29tcG9uZW50IH0gZnJvbSAnLi9iYXNlLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBTZXNzaW9uTW9kdWxlIH0gZnJvbSAnLi4vc2Vzc2lvbi9zZXNzaW9uLm1vZHVsZSc7XG5pbXBvcnQgeyBKYXZhTW9kdWxlIH0gZnJvbSAnLi4vamF2YS9qYXZhLm1vZHVsZSc7XG5pbXBvcnQgeyBFdmVudEhhbmRsZXJNb2R1bGUgfSBmcm9tICcuLi9ldmVudC1oYW5kbGVyL2V2ZW50LWhhbmRsZXIubW9kdWxlJztcbmltcG9ydCB7IE9uQ3JlYXRlRGlyZWN0aXZlIH0gZnJvbSAnLi9vbi1jcmVhdGUuZGlyZWN0aXZlJztcblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogW1xuICAgIENvbW1vbk1vZHVsZSxcbiAgICBTZXNzaW9uTW9kdWxlLFxuICAgIEphdmFNb2R1bGUsXG4gICAgRXZlbnRIYW5kbGVyTW9kdWxlXG4gIF0sXG4gIGRlY2xhcmF0aW9uczogW0Jhc2VDb21wb25lbnQsIE9uQ3JlYXRlRGlyZWN0aXZlXSxcbiAgZXhwb3J0czogW0Jhc2VDb21wb25lbnQsIE9uQ3JlYXRlRGlyZWN0aXZlXVxufSlcbmV4cG9ydCBjbGFzcyBCYXNlTW9kdWxlIHsgfVxuIiwiZXhwb3J0IGVudW0gQ29tcG9uZW50VHlwZSB7XG4gIExBQkVMLFxuICBCVVRUT04sXG4gIFRFWFRfRklFTEQsXG4gIENPTUJPQk9YLFxuICBDSEVDS0JPWCxcbiAgUkFESU8sXG4gIFRFWFRBUkVBXG59XG4iLCJpbXBvcnQgeyBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIElucHV0LCBPbkluaXQsIE91dHB1dCwgRWxlbWVudFJlZiwgU2tpcFNlbGYsIE9wdGlvbmFsLCBDaGFuZ2VEZXRlY3RvclJlZiwgUmVuZGVyZXIyLCBmb3J3YXJkUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBCYXNlQ29tcG9uZW50IH0gZnJvbSAnLi4vYmFzZS9iYXNlLmNvbXBvbmVudCc7XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuaW1wb3J0IHsgU2Vzc2lvblNlcnZpY2UgfSBmcm9tICcuLi9zZXNzaW9uL3Nlc3Npb24uc2VydmljZSc7XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuaW1wb3J0IHsgQXBwVXRpbHMgfSBmcm9tICcuLi9iYXNlL2FwcC11dGlscyc7XG5cbi8qKlxuICogQnV0dG9uIGNvbXBvbmVudCBjbGFzcy4gSW5oZXJpdHMgZnJvbSBbW0Jhc2VDb21wb25lbnRdXVxuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICd2dC1idXR0b24nLFxuICB0ZW1wbGF0ZVVybDogJy4vYnV0dG9uLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vYnV0dG9uLmNvbXBvbmVudC5jc3MnXSxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gIHByb3ZpZGVyczogW1xuICAgIHtcbiAgICAgIHByb3ZpZGU6IEJhc2VDb21wb25lbnQsXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKT0+QnV0dG9uQ29tcG9uZW50KVxuICAgIH1cbiAgXVxufSlcbmV4cG9ydCBjbGFzcyBCdXR0b25Db21wb25lbnQgZXh0ZW5kcyBCYXNlQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgQElucHV0KCkgZm9jdXNlZDogYm9vbGVhbiA9IHRydWU7XG5cdEBPdXRwdXQoKSBvbkNvbW1hbmQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgY29uc3RydWN0b3IoQE9wdGlvbmFsKCkgQFNraXBTZWxmKCkgcGFyZW50OiBCYXNlQ29tcG9uZW50LCBzZXNzaW9uU2VydmljZTogU2Vzc2lvblNlcnZpY2UsIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsIHByaXZhdGUgY2Q6IENoYW5nZURldGVjdG9yUmVmLCByZW5kZXJlcjogUmVuZGVyZXIyKSB7XG4gICAgc3VwZXIocGFyZW50LCBzZXNzaW9uU2VydmljZSwgZWxlbWVudFJlZiwgcmVuZGVyZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXQgbGlmZWN5Y2xlLiBNdXN0IGNhbGwgcGFyZW50IG5nT25Jbml0XG4gICAqL1xuICBuZ09uSW5pdCgpIHtcbiAgICBzdXBlci5uZ09uSW5pdCgpO1xuXG4gICAgaWYodGhpcy5tYXJnaW5Ub3AgIT0gbnVsbCl7XG4gICAgICB0aGlzLm1hcmdpblRvcCA9IHRoaXMubWFyZ2luVG9wICsgJ3B4JztcbiAgICB9XG5cbiAgICBpZih0aGlzLm1hcmdpblJpZ2h0ICE9IG51bGwpe1xuICAgICAgdGhpcy5tYXJnaW5SaWdodCA9IHRoaXMubWFyZ2luUmlnaHQgKyAncHgnO1xuICAgIH1cblxuICAgIGlmKHRoaXMubWFyZ2luTGVmdCAhPSBudWxsKXtcbiAgICAgIHRoaXMubWFyZ2luTGVmdCA9IHRoaXMubWFyZ2luTGVmdCArICdweCc7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFmdGVyIHZpZXcgaW5pdCBsaWZlY3ljbGUuIE11c3QgY2FsbCBwYXJlbnQgbmdBZnRlclZpZXdJbml0XG4gICAqL1xuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgc3VwZXIubmdBZnRlclZpZXdJbml0KCk7XG5cbiAgICB0aGlzLmluaXRXaWR0aEhlaWdodFN0eWxlKFwiaGVpZ2h0XCIsIFwid2lkdGhcIik7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGVGcm9tRGVmKCk7XG4gICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogRXZlbnQgaGFuZGxlciBmb3IgY2xpY2sgZXZlbnRcbiAgICogQHBhcmFtIGV2ZW50XG4gICAqIEBldmVudCBPbkNvbW1hbmRcbiAgICovXG5cdG9uQ2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpIHtcblxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgLy9yZWdpc3RlciBjbGllbnQgZXZlbnQgZm9yIG1jb1xuICAgIHRoaXMuaGFuZGxlQ2xpY2soZXZlbnQpO1xuXG4gICAgdGhpcy5vbkNvbW1hbmQuZW1pdCgpO1xuXG4gICAgLy9pdCBsb29rcyBsaWtlIHlvdSBjYW4gY2hhbmdlIG9uQ29tbWFuZCBiaW5kaW5nIGF0IHJ1bnRpbWUgYW5kIHNpbmNlIHdlIGFyZSBjb2RlXG4gICAgLy93ZSBhZGQgYW5vdGhlciBmbiB0byBkbyBpdCAod2UgbWF5IHJlbW92ZWQgdGhpcyBsYXRlciBvbmNlIHdlIGhhdmUgYSBiZXR0ZXIgb2YgdXNhZ2UpXG4gICAgdGhpcy5lbWl0SW50ZXJuYWxPbkNvbW1hbmQoKTtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBFdmVudCBoYW5kbGVyIGZvciBtb3VzZWRvd24gZXZlbnRcbiAgICogQHBhcmFtIGVcbiAgICovXG4gIG9uTW91c2VEb3duKGU6IE1vdXNlRXZlbnQpIHtcbiAgICBsZXQgY3VycmVudFRhcmdldDogc3RyaW5nID0gZS5jdXJyZW50VGFyZ2V0WydpZCddO1xuICAgIGlmIChjdXJyZW50VGFyZ2V0ICE9IG51bGwgJiYgY3VycmVudFRhcmdldC5pbmRleE9mKFwiQnRuQ2xvc2VcIikgPiAwKSB7XG4gICAgICBBcHBVdGlscy5pc0Nsb3NlQnRuID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgQXBwVXRpbHMuaXNDbG9zZUJ0biA9IGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLmhhbmRsZU1vdXNlRG93bihlKTtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIGhhbmRsZU9uQmx1cigpIHtcbiAgICBBcHBVdGlscy5pc0Nsb3NlQnRuID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGNoYW5nZSBkZXRlY3RvciByZWZlcmVuY2UgZm9yIHRoZSBidXR0b24gaW5zdGFuY2VcbiAgICogQHJldHVybnMgW1tjZF1dIHByb3BlcnR5IChDaGFuZ2UgZGV0ZWN0b3IpXG4gICAqL1xuICBwcm90ZWN0ZWQgZ2V0Q2hhbmdlRGV0ZWN0b3IoKTogQ2hhbmdlRGV0ZWN0b3JSZWYge1xuICAgIHJldHVybiB0aGlzLmNkO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBOZXhhd2ViIHRhZyBuYW1lXG4gICAqIEByZXR1cm5zIFN0cmluZ1xuICAgKi9cbiAgcHJvdGVjdGVkIGdldE54VGFnTmFtZSgpIHtcbiAgICByZXR1cm4gXCJidXR0b25cIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgSlNPTiByZXByZXNlbnRhdGlvbiBvZiB0aGUgYnV0dG9uIGNvbXBvbmVudFxuICAgKiBAcmV0dXJucyBKc29uIG9iamVjdFxuICAgKi9cbiAgdG9Kc29uKCk6IHt9IHtcbiAgICBjb25zdCBqc29uOiBhbnkgPSBzdXBlci50b0pzb24oKTtcbiAgICB0aGlzLnNldEpzb24oanNvbiwgXCJmb2N1c2VkXCIsIHRoaXMuZm9jdXNlZCk7XG5cbiAgICByZXR1cm4ganNvbjtcbiAgfVxuXG59XG4iLCJpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IEJ1dHRvbkNvbXBvbmVudCB9IGZyb20gJy4vYnV0dG9uLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBCYXNlTW9kdWxlIH0gZnJvbSAnLi4vYmFzZS9iYXNlLm1vZHVsZSc7XG5cbkBOZ01vZHVsZSh7XG4gIGltcG9ydHM6IFtcbiAgICBDb21tb25Nb2R1bGUsXG4gICAgQmFzZU1vZHVsZVxuICBdLFxuICBkZWNsYXJhdGlvbnM6IFtCdXR0b25Db21wb25lbnRdLFxuICBleHBvcnRzOiBbQnV0dG9uQ29tcG9uZW50XSxcbiAgZW50cnlDb21wb25lbnRzOiBbXG4gICAgQnV0dG9uQ29tcG9uZW50XG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgQnV0dG9uTW9kdWxlIHsgfVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBFbGVtZW50UmVmLCBJbnB1dCwgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIE9wdGlvbmFsLCBTa2lwU2VsZiwgQ2hhbmdlRGV0ZWN0b3JSZWYsIFJlbmRlcmVyMiwgZm9yd2FyZFJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQmFzZUNvbXBvbmVudCB9IGZyb20gJy4uL2Jhc2UvYmFzZS5jb21wb25lbnQnO1xuaW1wb3J0IHsgU2Vzc2lvblNlcnZpY2UgfSBmcm9tICcuLi9zZXNzaW9uL3Nlc3Npb24uc2VydmljZSc7XG5cbi8qKlxuICogQ2hlY2sgYm94IGNvbXBvbmVudCBjbGFzc1xuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICd2dC1jaGVjay1ib3gnLFxuICB0ZW1wbGF0ZVVybDogJy4vY2hlY2tib3guY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9jaGVja2JveC5jb21wb25lbnQuY3NzJ10sXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICBwcm92aWRlcnM6IFtcbiAgICB7XG4gICAgICBwcm92aWRlOiBCYXNlQ29tcG9uZW50LFxuICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCk9PkNoZWNrYm94Q29tcG9uZW50KVxuICAgIH1cbiAgXVxufSlcbmV4cG9ydCBjbGFzcyBDaGVja2JveENvbXBvbmVudCBleHRlbmRzIEJhc2VDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICBASW5wdXQoKSB2YWx1ZTogYW55O1xuICBASW5wdXQoKSBjaGVja2VkOiBib29sZWFuID0gZmFsc2U7XG4gIC8vYWxpYXMgZm9yIGNoZWNrZWRcbiAgQElucHV0KCkgc2V0IGlzQ2hlY2tlZChib286IGJvb2xlYW4pIHtcbiAgICB0aGlzLmNoZWNrZWQgPSBib287XG4gIH1cblxuICBnZXQgaXNDaGVja2VkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmNoZWNrZWQ7XG4gIH1cblxuICBAT3V0cHV0KCkgb25Db21tYW5kOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgQE91dHB1dCgpIG9uU3RhdGVDaGFuZ2U6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICBcbiAgQE91dHB1dCgpIG9uU2VsZWN0OiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICBjb25zdHJ1Y3RvcihAT3B0aW9uYWwoKSBAU2tpcFNlbGYoKSBwYXJlbnQ6IEJhc2VDb21wb25lbnQsIHNlc3Npb25TZXJ2aWNlOiBTZXNzaW9uU2VydmljZSwgZWxlbWVudFJlZjogRWxlbWVudFJlZiwgcHJpdmF0ZSBjZDogQ2hhbmdlRGV0ZWN0b3JSZWYsIHJlbmRlcmVyOiBSZW5kZXJlcjIpIHtcbiAgICBzdXBlcihwYXJlbnQsIHNlc3Npb25TZXJ2aWNlLCBlbGVtZW50UmVmLCByZW5kZXJlcik7XG4gIH1cblxuICAvKipcbiAgICogSW5pdCBsaWZlY3ljbGUuIE11c3QgY2FsbCBwYXJlbnQgY2xhc3MgbmdPbkluaXRcbiAgICovXG4gIG5nT25Jbml0KCkge1xuICAgIHN1cGVyLm5nT25Jbml0KCk7XG4gIH1cblxuICAvKipcbiAgICogQWZ0ZXIgdmlldyBpbml0IGxpZmVjeWNsZS4gTXVzdCBjYWxsIHBhcmVudCBjbGFzcyBuZ0FmdGVyVmlld0luaXRcbiAgICovXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICBzdXBlci5uZ0FmdGVyVmlld0luaXQoKTtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZUZyb21EZWYoKTtcbiAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmVudCBoYW5kbGVyIGZvciBjbGljayBldmVudFxuICAgKiBAcGFyYW0gZXZlbnRcbiAgICogQGV2ZW50IE9uQ29tbWFuZFxuICAgKi9cbiAgb25DbGljayhldmVudDogTW91c2VFdmVudCkge1xuICAgIC8vY29uc3VtZSB0aGUgZXZlbnQsIGRvIG5vdCBwcm9wYWdhdGUgYW55IGZ1cnRoZXJcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBcbiAgICB0aGlzLmhhbmRsZUNsaWNrKGV2ZW50KTtcbiAgICB0aGlzLm9uQ29tbWFuZC5lbWl0KCk7XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgaGFuZGxlciBmb3IgbW91c2Vkb3duIGV2ZW50XG4gICAqIEBwYXJhbSBldmVudCBcbiAgICovXG4gIG9uTW91c2VEb3duKGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gICAgLy9jb25zdW1lIHRoZSBldmVudCwgZG8gbm90IHByb3BhZ2F0ZSBhbnkgZnVydGhlclxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgdGhpcy5oYW5kbGVNb3VzZURvd24oZXZlbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IGhhbmRsZXIgZm9yIHN0YXRlIGNoYW5nZSAoY2hlY2svdW5jaGVjaylcbiAgICogQGV2ZW50IE9uU3RhdGVDaGFuZ2VcbiAgICogQGV2ZW50IE9uU2VsZWN0IElmIHRoZSBjaGVja2JveCBpcyBzZXQgdG8gc2VsZWN0ZWQgc3RhdGVcbiAgICovXG4gIGhhbmRsZVN0YXRlQ2hhbmdlKCkge1xuICAgIHRoaXMub25TdGF0ZUNoYW5nZS5lbWl0KCk7XG5cbiAgICBpZiAodGhpcy5jaGVja2VkID09PSB0cnVlKSB7XG4gICAgICB0aGlzLm9uU2VsZWN0LmVtaXQoKTtcbiAgICB9XG5cbiAgICAvL25vdGlmeSBpbnRlcm5hbCBjaGFuZ2VzIChmb3IgaW50ZXJuYWwgdXNlIG9ubHkpXG4gICAgdGhpcy5fbm90aWZ5SW50ZXJuYWxDaGFuZ2VDYigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjb21wb25lbnQgbmFtZVxuICAgKiBAcmV0dXJucyBOYW1lIG9mIGNvbXBvbmVudFxuICAgKi9cbiAgZ2V0TG9jYWxOYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiY2hlY2tCb3hcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgW1tjaGVja2VkXV0gcHJvcGVydHlcbiAgICogQHJldHVybnMgVmFsdWUgb2YgW1tjaGVja2VkXV1cbiAgICovXG4gIGdldENoZWNrZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY2hlY2tlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgW1tjaGVja2VkXV0gcHJvcGVydHkgdmFsdWVcbiAgICogQHBhcmFtIHNob3VsZENoZWNrZWQgVmFsdWUgc2hvdWxkIGJlIHRydWUvZmFsc2Ugb3IgXCJ0cnVlXCIvXCJmYWxzZVwiIHRvIHNldCBbW2NoZWNrZWRdXVxuICAgKi9cbiAgc2V0Q2hlY2tlZChzaG91bGRDaGVja2VkOiBib29sZWFuIHwgc3RyaW5nLCBza2lwSW50ZXJuYWxDaGFuZ2U6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIHRoaXMuY2hlY2tlZCA9IHNob3VsZENoZWNrZWQgPT09IHRydWUgfHwgc2hvdWxkQ2hlY2tlZCA9PT0gJ3RydWUnO1xuXG4gICAgdGhpcy5tYXJrRm9yQ2hlY2soKTtcblxuICAgIC8vbm90aWZ5IGludGVybmFsIGNoYW5nZXMgKGZvciBpbnRlcm5hbCB1c2Ugb25seSlcbiAgICBpZiAoc2tpcEludGVybmFsQ2hhbmdlICE9PSB0cnVlKSB7XG4gICAgICB0aGlzLl9ub3RpZnlJbnRlcm5hbENoYW5nZUNiKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFsaWFzIGZvciBbW3NldENoZWNrZWRdXSBtZXRob2RcbiAgICogQHBhcmFtIGJvbyBUb2dnbGUgW1tjaGVja2VkXV1cbiAgICovXG4gIHNldFNlbGVjdGVkKGJvbzogYm9vbGVhbiB8IHN0cmluZykge1xuICAgIHRoaXMuc2V0Q2hlY2tlZChib28pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBbW3ZhbHVlXV0gcHJvcGVydHlcbiAgICogQHJldHVybnMgVmFsdWUgb2YgW1t2YWx1ZV1dXG4gICAqL1xuICBnZXRWYWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBjb21wb25lbnQgc3RhdGVcbiAgICogQHJldHVybnMgT2JqZWN0IEpzb24gb2JqZWN0XG4gICAqL1xuICB0b0pzb24oKSB7XG4gICAgY29uc3QganNvbiA9IHN1cGVyLnRvSnNvbigpO1xuXG4gICAgaWYgKHRoaXMuZ2V0Q2hlY2tlZCgpID09PSB0cnVlKSB7XG4gICAgICBqc29uW1wic2VsZWN0ZWRcIl0gPSBcInRydWVcIjtcbiAgICB9IGVsc2Uge1xuICAgICAganNvbltcInNlbGVjdGVkXCJdID0gXCJmYWxzZVwiO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnZhbHVlICE9IG51bGwpIHtcbiAgICAgIGpzb25bXCJ2YWx1ZVwiXSA9IHRoaXMudmFsdWUgKyAnJztcbiAgICB9XG5cbiAgICByZXR1cm4ganNvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgTmV4YXdlYiB0YWcgbmFtZVxuICAgKiBAcmV0dXJucyBTdHJpbmcgVGFnIG5hbWVcbiAgICovXG4gIHByb3RlY3RlZCBnZXROeFRhZ05hbWUoKSB7XG4gICAgcmV0dXJuIFwiY2hlY2tCb3hcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgW1tjZF1dIChDaGFuZ2UgZGV0ZWN0b3IpIHByb3BlcnR5XG4gICAqIEByZXR1cm5zIFRoZSBjb21wb25lbnQncyBjaGFuZ2UgZGV0ZWN0b3IgcmVmZXJlbmNlXG4gICAqL1xuICBwcm90ZWN0ZWQgZ2V0Q2hhbmdlRGV0ZWN0b3IoKTogQ2hhbmdlRGV0ZWN0b3JSZWYge1xuICAgIHJldHVybiB0aGlzLmNkO1xuICB9XG4gICAgLyoqXG4gICAqIFNldCBiYWNrZ3JvdW5kLWNvbG9yXG4gICAqIEBwYXJhbSBTdHJpbmcgYmFja2dyb3VuZCBjb2xvclxuICAgKi9cbiAgc2V0QmdDb2xvcihjb2xvcjpzdHJpbmcpe1xuICAgIHRoaXNbJ2VsZW1lbnRSZWYnXS5uYXRpdmVFbGVtZW50LmNoaWxkcmVuWzBdWydzdHlsZSddWydiYWNrZ3JvdW5kLWNvbG9yJ10gPSBjb2xvcjtcbiAgfVxuICBnZXRCZ0NvbG9yKCl7XG4gICByZXR1cm4gIHRoaXNbJ2VsZW1lbnRSZWYnXS5uYXRpdmVFbGVtZW50LmNoaWxkcmVuWzBdWydzdHlsZSddWydiYWNrZ3JvdW5kLWNvbG9yJ107XG4gIH1cbn1cbiIsImltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgQ2hlY2tib3hDb21wb25lbnQgfSBmcm9tICcuL2NoZWNrYm94LmNvbXBvbmVudCc7XG5pbXBvcnQgeyBGb3Jtc01vZHVsZSwgUmVhY3RpdmVGb3Jtc01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogW1xuICAgIENvbW1vbk1vZHVsZSxcbiAgICBGb3Jtc01vZHVsZSxcbiAgICBSZWFjdGl2ZUZvcm1zTW9kdWxlLFxuICBdLFxuICBkZWNsYXJhdGlvbnM6IFtDaGVja2JveENvbXBvbmVudF0sXG4gIGV4cG9ydHM6IFtcbiAgICBDaGVja2JveENvbXBvbmVudCxcbiAgICBGb3Jtc01vZHVsZSxcbiAgICBSZWFjdGl2ZUZvcm1zTW9kdWxlLFxuICBdLFxuICBlbnRyeUNvbXBvbmVudHM6IFtcbiAgICBDaGVja2JveENvbXBvbmVudFxuICBdXG59KVxuZXhwb3J0IGNsYXNzIENoZWNrYm94TW9kdWxlIHsgfVxuIiwiaW1wb3J0IHsgRGlyZWN0aXZlLCBJbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6ICd2dC1saXN0LWl0ZW0nXG59KVxuZXhwb3J0IGNsYXNzIExpc3RJdGVtRGlyZWN0aXZlIHtcbiAgQElucHV0KCkgdmFsdWU6IHN0cmluZztcbiAgQElucHV0KCkgdGV4dDogc3RyaW5nO1xuICBASW5wdXQoKSBzZWxlY3RlZDogYm9vbGVhbiB8IHN0cmluZztcbiAgQElucHV0KCkgaXNDaGVja2VkOiBib29sZWFuIHwgc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKCkgeyB9XG5cbn1cbiIsImltcG9ydCB7IENvbnRlbnRDaGlsZHJlbiwgRGlyZWN0aXZlLCBRdWVyeUxpc3QgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IExpc3RJdGVtRGlyZWN0aXZlIH0gZnJvbSAnLi9saXN0LWl0ZW0uZGlyZWN0aXZlJztcblxuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiAndnQtbGlzdC1ib3gnXG59KVxuZXhwb3J0IGNsYXNzIExpc3RCb3hEaXJlY3RpdmUge1xuICBAQ29udGVudENoaWxkcmVuKExpc3RJdGVtRGlyZWN0aXZlKVxuICBsaXN0SXRlbXM6IFF1ZXJ5TGlzdDxMaXN0SXRlbURpcmVjdGl2ZT47XG5cbiAgY29uc3RydWN0b3IoKSB7IH1cblxufVxuIiwiaW1wb3J0IHsgQ29tYm9Cb3hDb21wb25lbnQgfSBmcm9tIFwiLi9jb21iby1ib3guY29tcG9uZW50XCI7XG5pbXBvcnQgeyBWYWx1ZVBhaXIgfSBmcm9tIFwiLi92YWx1ZS1wYWlyXCI7XG5pbXBvcnQgeyBBdHRyaWJ1dGVzRW51bSB9IGZyb20gXCIuLi9iYXNlL2F0dHJpYnV0ZXMuZW51bVwiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IGNsYXNzIEZhdXhDb21ib0VsZW1lbnQge1xuICAgIHN0YXRpYyByZWFkb25seSBMT0NBTF9OQU1FOiBzdHJpbmcgPSBcImxpc3RJdGVtXCI7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBjb21ib0JveDogQ29tYm9Cb3hDb21wb25lbnQsIHByaXZhdGUgdmFsdWVQYWlyOiBWYWx1ZVBhaXIpIHtcblxuICAgIH1cblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgc2V0QXR0cmlidXRlKG5hbWU6IGFueSwgdmFsdWU6IGFueSkge1xuICAgICAgICBpZiAobmFtZSA9PT0gQXR0cmlidXRlc0VudW0uU0VMRUNURUQgfHwgbmFtZSA9PT0gXCJzZWxlY3RlZFwiKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT0gdHJ1ZSB8fCB2YWx1ZSA9PSBcInRydWVcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tYm9Cb3guc2V0U2VsZWN0SXRlbSh0aGlzLnZhbHVlUGFpciwgdHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tYm9Cb3guc2V0U2VsZWN0SXRlbShudWxsLCB0cnVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy52YWx1ZVBhaXIuc2VsZWN0ZWQgPSB2YWx1ZSA9PSB0cnVlIHx8IHZhbHVlID09IFwidHJ1ZVwiO1xuXG4gICAgICAgICAgICB0aGlzLmNvbWJvQm94LmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgfSBlbHNlIGlmIChuYW1lID09PSBBdHRyaWJ1dGVzRW51bS5WSVNJQkxFIHx8IG5hbWUgPT09IFwidmlzaWJsZVwiKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlUGFpci52aXNpYmxlID0gdmFsdWU7XG4gICAgICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gQXR0cmlidXRlc0VudW0uVEVYVCB8fCBuYW1lID09PSBcInRleHRcIikge1xuICAgICAgICAgICAgdGhpcy52YWx1ZVBhaXIudGV4dCA9IHZhbHVlO1xuICAgICAgICB9IGVsc2UgaWYgKG5hbWUgPT09IEF0dHJpYnV0ZXNFbnVtLlZBTFVFIHx8IG5hbWUgPT09IFwidmFsdWVcIikge1xuICAgICAgICAgICAgdGhpcy52YWx1ZVBhaXIudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYXV4Q29tYm9FbGVtZW50OiBVbmtub3duIGF0dHJpYnV0ZTogXCIgKyBuYW1lKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldExvY2FsTmFtZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gRmF1eENvbWJvRWxlbWVudC5MT0NBTF9OQU1FO1xuICAgIH1cblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgZ2V0QXR0cmlidXRlKG5hbWU6IGFueSkge1xuICAgICAgICBpZiAobmFtZSA9PT0gXCJ2YWx1ZVwiIHx8IG5hbWUgPT09IEF0dHJpYnV0ZXNFbnVtLlZBTFVFKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZVBhaXIudmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmFtZSA9PT0gXCJ0ZXh0XCIgfHwgbmFtZSA9PT0gQXR0cmlidXRlc0VudW0uVEVYVCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVQYWlyLnRleHQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmFtZSA9PT0gXCJzZWxlY3RlZFwiIHx8IG5hbWUgPT09IEF0dHJpYnV0ZXNFbnVtLlNFTEVDVEVEKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZVBhaXIuc2VsZWN0ZWQgPT0gdHJ1ZSA/IFwidHJ1ZVwiIDogXCJmYWxzZVwiO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKFwidmFsdWVcIik7XG4gICAgfVxuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICBnZXRUZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoXCJ0ZXh0XCIpO1xuICAgIH1cblxuICAgIGlzU2VsZWN0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZShcInNlbGVjdGVkXCIpO1xuICAgIH1cblxuICAgIHNldENoZWNrZWQoYm9vOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwic2VsZWN0ZWRcIiwgYm9vKTtcbiAgICB9XG59IiwiaW1wb3J0IHsgQ29tcG9uZW50LCBDb250ZW50Q2hpbGQsIE9uSW5pdCwgRWxlbWVudFJlZiwgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIFNraXBTZWxmLCBPcHRpb25hbCwgQ2hhbmdlRGV0ZWN0b3JSZWYsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBSZW5kZXJlcjIsIElucHV0LCBWaWV3RW5jYXBzdWxhdGlvbiwgVmlld0NoaWxkLCBmb3J3YXJkUmVmLCBOZ1pvbmUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEJhc2VDb21wb25lbnQgfSBmcm9tICcuLi9iYXNlL2Jhc2UuY29tcG9uZW50Jztcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5pbXBvcnQgeyBTZXNzaW9uU2VydmljZSB9IGZyb20gJy4uL3Nlc3Npb24vc2Vzc2lvbi5zZXJ2aWNlJztcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5pbXBvcnQgeyBMaXN0Qm94RGlyZWN0aXZlIH0gZnJvbSAnLi9saXN0LWJveC5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgVmFsdWVQYWlyIH0gZnJvbSAnLi92YWx1ZS1wYWlyJztcblxuaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSAnLi4vamF2YS92ZWN0b3InO1xuaW1wb3J0IHsgRmF1eENvbWJvRWxlbWVudCB9IGZyb20gJy4vZmF1eC1jb21iby1lbGVtZW50JztcbmltcG9ydCB7IFZpZXdDb21wb25lbnQgfSBmcm9tICcuLi92aWV3L3ZpZXcuY29tcG9uZW50JztcbmltcG9ydCB7IEJzRHJvcGRvd25EaXJlY3RpdmUgfSBmcm9tICduZ3gtYm9vdHN0cmFwJztcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmRlY2xhcmUgdmFyICQ6IGFueTtcblxuLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbi8qKlxuICogQ2xhc3MgZm9yIGNvbWJvIGJveCBjb21wb25lbnRcbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAndnQtY29tYm8tYm94JyxcbiAgdGVtcGxhdGVVcmw6ICcuL2NvbWJvLWJveC5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2NvbWJvLWJveC5jb21wb25lbnQuY3NzJ10sXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxuICBwcm92aWRlcnM6IFtcbiAgICB7XG4gICAgICBwcm92aWRlOiBCYXNlQ29tcG9uZW50LFxuICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gQ29tYm9Cb3hDb21wb25lbnQpXG4gICAgfVxuICBdXG59KVxuZXhwb3J0IGNsYXNzIENvbWJvQm94Q29tcG9uZW50IGV4dGVuZHMgQmFzZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIEBPdXRwdXQoKSBvbkNvbW1hbmQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgQENvbnRlbnRDaGlsZChMaXN0Qm94RGlyZWN0aXZlKVxuICBsaXN0Qm94OiBMaXN0Qm94RGlyZWN0aXZlO1xuICBAVmlld0NoaWxkKCdpbnB1dCcpIGlucHV0RWxlbWVudDogRWxlbWVudFJlZjtcblxuICBAVmlld0NoaWxkKFwiZHJvcGRvd25cIiwgeyByZWFkOiBCc0Ryb3Bkb3duRGlyZWN0aXZlIH0pIGRyb3Bkb3duOiBCc0Ryb3Bkb3duRGlyZWN0aXZlO1xuXG4gIGhvdmVyZWRJdGVtOiBudW1iZXI7XG5cbiAgaG92ZXJlZFN0eWxlID0ge1xuICAgICdjb2xvcic6ICcjMDAwMGNkJyxcbiAgICAnYmFja2dyb3VuZC1jb2xvcic6ICcjZmY5YzAwJ1xuICB9O1xuXG4gIGRlZmF1bHRTdHlsZSA9IHtcbiAgICAnY29sb3InOiAnIzMzMzMzMycsXG4gICAgJ2JhY2tncm91bmQtY29sb3InOiAnI2ZmZmZmZidcbiAgfTtcblxuICBkcm9wZG93bkVsZW1lbnRJZCA9IGBkcm9wZG93bi0ke3RoaXMuaWR9YDtcblxuICBASW5wdXQoKSBzZXQgbGlzdEl0ZW1zKGl0ZW1zOiBBcnJheTxWYWx1ZVBhaXI+KSB7XG4gICAgdGhpcy5fbGlzdEl0ZW1zID0gaXRlbXM7XG5cbiAgICBpZiAodGhpcy5fbGlzdEl0ZW1zICE9IG51bGwpIHtcbiAgICAgIGNvbnN0IHNlbGVjdGVkSXRlbSA9IF8uZmluZCh0aGlzLl9saXN0SXRlbXMsIChpdGVtOiBWYWx1ZVBhaXIpID0+IGl0ZW0uc2VsZWN0ZWQgPT09IHRydWUpO1xuXG4gICAgICBpZiAoc2VsZWN0ZWRJdGVtICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5zZXRTZWxlY3RJdGVtKHNlbGVjdGVkSXRlbSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlzRHJvcHVwID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIEFjY2Vzc29yIG1ldGhvZCBmb3IgW1tfbGlzdEl0ZW1zXV0gcHJvcGVydHlcbiAgICovXG4gIGdldCBsaXN0SXRlbXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xpc3RJdGVtcztcbiAgfVxuXG4gIHByaXZhdGUgX2xpc3RJdGVtczogQXJyYXk8VmFsdWVQYWlyPjtcbiAgcHJpdmF0ZSBpc0Ryb3Bkb3duT3BlbiA9IGZhbHNlO1xuICBzZWxlY3RlZEl0ZW06IFZhbHVlUGFpcjtcbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgZHJvcGRvd25NZW51U3R5bGU6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7fTtcbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgaGFzSW5wdXRGb2N1czogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBBY2Nlc3NvciBtZXRob2QgZm9yIFtbc2VsZWN0ZWRJdGVtLnRleHRdXSBwcm9wZXJ0eVxuICAgKi9cbiAgZ2V0IHNlbGVjdGVkSXRlbVRleHQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5zZWxlY3RlZEl0ZW0gPyB0aGlzLnNlbGVjdGVkSXRlbS50ZXh0IDogJyc7XG4gIH1cblxuICBwcml2YXRlIHBhcmVudFNjcm9sbEhhbmxkZXI6ICgpID0+IHZvaWQ7XG4gIHByaXZhdGUgcGFyZW50U2Nyb2xsZXI6IEhUTUxFbGVtZW50O1xuXG4vLyBWM1IxLVVULU5TRC02NDMgw6TCv8Kuw6bCrcKjIFNUQVJUXG4gIHByaXZhdGUgaXNGaXJzdEtleURvd246IGJvb2xlYW4gPSB0cnVlO1xuLy8gVjNSMS1VVC1OU0QtNjQzIMOkwr/CrsOmwq3CoyBFTkRcblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHBhcmVudCBzZWUgW1tCYXNlQ29tcG9uZW50XV1cbiAgICogQHBhcmFtIHNlc3Npb25TZXJ2aWNlIHNlZSBbW0Jhc2VDb21wb25lbnRdXVxuICAgKiBAcGFyYW0gZWxlbWVudFJlZiBzZWUgW1tCYXNlQ29tcG9uZW50XV1cbiAgICogQHBhcmFtIGNkIENoYW5nZURldGVjdG9yIHJlZmVyZW5jZSBwcm92aWRlZCBieSBBbmd1bGFyIHRvIGNvbnRyb2wgY2hhbmdlIGRldGVjdGlvblxuICAgKiBAcGFyYW0gcmVuZGVyZXIgc2VlIFtbQmFzZUNvbXBvbmVudF1dXG4gICAqL1xuICBjb25zdHJ1Y3RvcihAT3B0aW9uYWwoKSBAU2tpcFNlbGYoKSBwYXJlbnQ6IEJhc2VDb21wb25lbnQsIHNlc3Npb25TZXJ2aWNlOiBTZXNzaW9uU2VydmljZSwgZWxlbWVudFJlZjogRWxlbWVudFJlZiwgcHJpdmF0ZSBjZDogQ2hhbmdlRGV0ZWN0b3JSZWYsIHJlbmRlcmVyOiBSZW5kZXJlcjIsIHByaXZhdGUgbmdab25lOiBOZ1pvbmUpIHtcbiAgICBzdXBlcihwYXJlbnQsIHNlc3Npb25TZXJ2aWNlLCBlbGVtZW50UmVmLCByZW5kZXJlcik7XG5cbiAgICB0aGlzLnBhcmVudFNjcm9sbEhhbmxkZXIgPSAoKSA9PiB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgICAgaWYgKHRoaXMuZHJvcGRvd24gIT0gbnVsbCkge1xuICAgICAgICB0aGlzLmRyb3Bkb3duLmhpZGUoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgaWYgKHRoaXMucGFyZW50U2Nyb2xsSGFubGRlciAhPSBudWxsICYmIHRoaXMucGFyZW50U2Nyb2xsZXIgIT0gbnVsbCkge1xuICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICB0aGlzLnBhcmVudFNjcm9sbGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcy5wYXJlbnRTY3JvbGxIYW5sZGVyKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMucGFyZW50U2Nyb2xsSGFubGRlciA9IG51bGw7XG4gICAgdGhpcy5wYXJlbnRTY3JvbGxlciA9IG51bGw7XG4gICAgaWYodGhpcy5kcm9wZG93biAmJiB0aGlzLmRyb3Bkb3duLmlzT3Blbikge1xuICAgICAgdGhpcy5kcm9wZG93bi5oaWRlKCk7XG4gICAgfVxuICAgIHRoaXMuZHJvcGRvd24gPSBudWxsO1xuXG4gICAgc3VwZXIubmdPbkRlc3Ryb3koKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGNvbXBvbmVudCBhbmQgc2V0IGNzcyBzdHllIGF0dHJpYnV0ZSBmb3IgZHJvcGRvd24gZWxlbWVudFxuICAgKi9cbiAgbmdPbkluaXQoKSB7XG4gICAgc3VwZXIubmdPbkluaXQoKTtcblxuICAgIHRoaXMuZHJvcGRvd25FbGVtZW50SWQgPSBgZHJvcGRvd24tJHt0aGlzLmlkfWA7XG5cbiAgICAvLyBFbnN1cmUgY29udHJvbFdpZHRoIGlzIGV4aXN0cyBhbmQgaXMgYSBudW1iZXJcbiAgICBpZiAocGFyc2VJbnQodGhpcy5jb250cm9sV2lkdGgsIDEwKSkge1xuICAgICAgdGhpcy5kcm9wZG93bk1lbnVTdHlsZVsnbWluLXdpZHRoJ10gPSB0aGlzLmNvbnRyb2xXaWR0aCArICdweCAhaW1wb3J0YW50JztcbiAgICB9XG5cbiAgICBpZiAodGhpcy5hbGlnbkhvcml6b250YWwpIHtcbiAgICAgIHRoaXMuYWxpZ25Ib3Jpem9udGFsID0gdGhpcy5hbGlnbkhvcml6b250YWw7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBTZXQgdXAgbGlzdCBpdGVtcyBhbmQgc2V0IHZhbHVlL3RleHQgb24gdGhlbS4gU2V0cyBzZWxlY3RlZCBpdGVtXG4gICAqL1xuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgc3VwZXIubmdBZnRlclZpZXdJbml0KCk7XG5cbiAgICBpZiAodGhpcy5saXN0Qm94ICE9IG51bGwgJiYgdGhpcy5saXN0Qm94Lmxpc3RJdGVtcyAhPSBudWxsKSB7XG4gICAgICB0aGlzLl9saXN0SXRlbXMgPSBbXTtcblxuICAgICAgdGhpcy5saXN0Qm94Lmxpc3RJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgIGxldCB0ZXh0ID0gaXRlbS50ZXh0IHx8ICcnLFxuICAgICAgICAgIHZhbHVlID0gaXRlbS52YWx1ZSB8fCAnJztcbiAgICAgICAgdGhpcy5fbGlzdEl0ZW1zLnB1c2goe1xuICAgICAgICAgIHRleHQ6IHRleHQgPyB0ZXh0IDogdmFsdWUsXG4gICAgICAgICAgdmFsdWU6IHZhbHVlID8gdmFsdWUgOiB0ZXh0LFxuICAgICAgICAgIHNlbGVjdGVkOiBpdGVtLnNlbGVjdGVkID09PSB0cnVlIHx8IGl0ZW0uc2VsZWN0ZWQgPT09IFwidHJ1ZVwiIHx8IGl0ZW0uaXNDaGVja2VkID09PSB0cnVlIHx8IGl0ZW0uaXNDaGVja2VkID09PSBcInRydWVcIlxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICAvL3NlbGVjdGQgZmlyc3QgaXRlbSB0aGF0IGlzIHNlbGVjdGVkXG4gICAgICBjb25zdCBzZWxlY3RlZEl0ZW0gPSBfLmZpbmQodGhpcy5fbGlzdEl0ZW1zLCAoaXRlbTogVmFsdWVQYWlyKSA9PiBpdGVtLnNlbGVjdGVkID09PSB0cnVlKTtcblxuICAgICAgaWYgKHNlbGVjdGVkSXRlbSAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMuc2V0U2VsZWN0SXRlbShzZWxlY3RlZEl0ZW0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMubG9hZERhdGFGcm9tRGVmKCk7XG5cbiAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcblxuICAgIHRoaXMuc3Vic2NyaWJlVG9QYXJlbnRTY3JvbGxlcigpO1xuXG4gIH1cblxuICAvKipcbiAgICogU2V0cyBjb21ib2JveCBsaXN0IHVzaW5nIGFycmF5IG9mIHZhbHVlc1xuICAgKiBAcGFyYW0gdmFsdWVzIEFycmF5IG9mIFtbVmFsdWVQYWlyc11dIHRvIHNldCBjb21ib2JveCBvcHRpb25zLlxuICAgKi9cbiAgaW5pdGlhbGl6ZUNvbWJvYm94VmFsdWVzKHZhbHVlczogQXJyYXk8VmFsdWVQYWlyPikge1xuICAgIGlmICh2YWx1ZXMgIT0gbnVsbCkge1xuICAgICAgdGhpcy5fbGlzdEl0ZW1zID0gXy5tYXAodmFsdWVzLCAoaXRlbSkgPT4ge1xuICAgICAgICBpdGVtLnRleHQgPSBpdGVtLnRleHQgfHwgJyc7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0ZXh0OiBpdGVtLnRleHQsXG4gICAgICAgICAgdmFsdWU6IGl0ZW0udmFsdWUsXG4gICAgICAgICAgc2VsZWN0ZWQ6IGl0ZW0uc2VsZWN0ZWRcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vc2VsZWN0ZCBmaXJzdCBpdGVtIHRoYXQgaXMgc2VsZWN0ZWRcbiAgICAgIGNvbnN0IHNlbGVjdGVkSXRlbSA9IF8uZmluZCh0aGlzLl9saXN0SXRlbXMsIChpdGVtOiBWYWx1ZVBhaXIpID0+IGl0ZW0uc2VsZWN0ZWQgPT09IHRydWUpO1xuXG4gICAgICBpZiAoc2VsZWN0ZWRJdGVtICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5zZXRTZWxlY3RJdGVtKHNlbGVjdGVkSXRlbSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5zZXRTZWxlY3RJdGVtKHRoaXMuX2xpc3RJdGVtc1swXSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2xpc3RJdGVtcyA9IFtdO1xuICAgIH1cblxuICAgIHRoaXMuY2QubWFya0ZvckNoZWNrKCk7XG4gIH1cblxuICAvKipcbiAgICogRm9jdXNlcyBhbmQgc2VsZWN0cyBpdGVtIHRoYXQgaXMgY2xpY2tlZFxuICAgKiBAcGFyYW0gaXRlbSBJdGVtIHRvIGZvY3VzIGFuZCBzZWxlY3RcbiAgICogQHBhcmFtIGV2ZW50IE1vdXNlIGNsaWNrIGV2ZW50IG9uIGl0ZW1cbiAgICogQGV2ZW50IG9uQ29tbWFuZFxuICAgKi9cbiAgc2VsZWN0SXRlbShpdGVtOiBWYWx1ZVBhaXIsIGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gICAgdGhpcy5pbnB1dEVsZW1lbnQubmF0aXZlRWxlbWVudC5mb2N1cygpO1xuICAgIHRoaXMuc2V0U2VsZWN0SXRlbShpdGVtKTtcbiAgICBpZiAodGhpcy5lbWl0SW50ZXJuYWxPbkNvbW1hbmQoKSA9PT0gZmFsc2UpIHtcbiAgICAgIHRoaXMub25Db21tYW5kLmVtaXQoKTtcbiAgICB9XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogU2V0cyBzZWxlY3RlZCBpdGVtIHRoYXQgbWF0Y2hlcyBpdGVtIFtbVmFsdWVQYWlyXV0gcGFyYW1ldGVyXG4gICAqIEBwYXJhbSBpdGVtIEl0ZW0gdG8gc2V0IGFzIHNlbGVjdGVkXG4gICAqIEBwYXJhbSBmb3JjZUNkIEZvcmNlIGNoYW5nZSBkZXRlY3Rpb25cbiAgICovXG4gIHNldFNlbGVjdEl0ZW0oaXRlbTogVmFsdWVQYWlyLCBmb3JjZUNkOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICB0aGlzLnNlbGVjdGVkSXRlbSA9IGl0ZW07XG5cbiAgICBpZiAoZm9yY2VDZCA9PT0gdHJ1ZSkge1xuICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG5cbiAgICAvL25vdGlmeSBpbnRlcm5hbCBjaGFuZ2VzIChmb3IgaW50ZXJuYWwgdXNlIG9ubHkpXG4gICAgdGhpcy5fbm90aWZ5SW50ZXJuYWxDaGFuZ2VDYigpO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIFNldHMgc2VsZWN0ZWQgaXRlbSBiYXNlZCBvbiB2YWx1ZVxuICAgKiBAcGFyYW0gdmFsdWUgVmFsdWUgdG8gc2V0XG4gICAqL1xuICBzZXRTZWxlY3RWYWx1ZSh2YWx1ZTogc3RyaW5nIHwgbnVtYmVyKSB7XG4gICAgaWYgKHRoaXMuX2xpc3RJdGVtcyAhPSBudWxsKSB7XG4gICAgICBjb25zdCB0ZW1wID0gXy5maW5kKHRoaXMuX2xpc3RJdGVtcywgKGl0ZW06IFZhbHVlUGFpcikgPT4gaXRlbS52YWx1ZSA9PSB2YWx1ZSB8fCAodmFsdWUgIT0gbnVsbCAmJiB2YWx1ZSAhPT0gXCJcIiAmJiB2YWx1ZSA9PT0gaXRlbS50ZXh0KSk7XG5cbiAgICAgIGlmICh0ZW1wICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5zZXRTZWxlY3RJdGVtKHRlbXApO1xuICAgICAgICB0aGlzLmNkLm1hcmtGb3JDaGVjaygpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBFdmVudCBoYW5kbGVyIGZvciBtb3VzZSBjbGljayBvbiBpbnB1dFxuICAgKiBAcGFyYW0gZXZlbnQgTW91c2UgY2xpY2sgZXZlbnQgb24gaW5wdXQgZWxlbWVudC5cbiAgICovXG4gIG9uSW5wdXRDbGljayhldmVudDogTW91c2VFdmVudCwgZHJvcGRvd246IEJzRHJvcGRvd25EaXJlY3RpdmUpIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB0aGlzLmhvdmVyZWRTdHlsZSA9IHtcbiAgICAgICdjb2xvcic6ICcjMDAwMGNkJyxcbiAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogJyNmZjljMDAnXG4gICAgfTtcbiAgICBkcm9wZG93bi50b2dnbGUodHJ1ZSk7XG4gXG4gICAgaWYgKHBhcnNlSW50KHRoaXMuY29udHJvbFdpZHRoQ29tYm9Cb3gsIDEwKSkge1xuICAgICAgdGhpcy5kcm9wZG93bk1lbnVTdHlsZVsnd2lkdGgnXSA9IChwYXJzZUludCh0aGlzLmNvbnRyb2xXaWR0aENvbWJvQm94KSkgKyAncHgnO1xuICAgIH1lbHNle1xuICAgICAgdGhpcy5kcm9wZG93bk1lbnVTdHlsZVsnd2lkdGgnXSA9IChwYXJzZUludCh0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5jaGlsZHJlblswXS5jaGlsZHJlblswXS5jaGlsZHJlblswXS5jbGllbnRXaWR0aCkgKyAyMCkgKyAncHgnO1xuICAgIH1cbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIG9uS2V5RG93bihlOiBLZXlib2FyZEV2ZW50LCBkcm9wZG93bjogQnNEcm9wZG93bkRpcmVjdGl2ZSkge1xuICAgIGlmICghdGhpcy5pc0Ryb3Bkb3duT3BlbiAmJiAoZS5rZXlDb2RlID09PSAzOCB8fCBlLmtleUNvZGUgPT09IDQwKSkgeyAvLyAzOCA9IFVQIGFycm93LCA0MCA9IERPV04gYXJyb3dcbiAgICAgIHRoaXMuaG92ZXJlZFN0eWxlID0gdGhpcy5kZWZhdWx0U3R5bGU7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBkcm9wZG93bi50b2dnbGUodHJ1ZSk7XG4vLyBWM1IxLVVULU5TRC02NDMgw6TCv8Kuw6bCrcKjIFNUQVJUXG4gICAgICAvLyDDqMKowq3DpcKuwprDo8KBwpnDo8KCwovDo8KDwpfDo8KDwqvDo8KDwoDDo8KCwqbDo8KDwrPDo8KBwq7Do8KCwqTDo8KDwrPDo8KDwofDo8KDwoPDo8KCwq/Do8KCwrlcbiAgICAgIGxldCBpZHg6IG51bWJlciA9IDA7XG4gICAgICAvLyDDo8KDwojDo8KCwrDDo8KDwqvDo8KBwozDqcKWwonDo8KBwpjDo8KCwonDo8KCwozDo8KBwqbDo8KBwoTDo8KCwovDp8KKwrbDpsKFwovDo8KBwqfDo8KCwq3Do8KDwrzDo8KDwpzDo8KDwrzDo8KDwonDo8KBwq5VUMOjwoDCgURPV07Do8KBwozDpsKKwrzDpMK4wovDo8KBwpXDo8KCwozDo8KBwp/DpcKgwrTDpcKQwohcbiAgICAgIGlmIChlLmtleUNvZGUgPT09IDM4KSB7XG4gICAgICAgIC8vIFVQw6PCgcKuw6XCoMK0w6XCkMKIw6PCgMKBw6PCg8KXw6PCg8Krw6PCg8KAw6PCgsKmw6PCg8Kzw6PCgcKuw6bCnMKAw6fCtcKCw6PCgcKrw6fCp8K7w6XCi8KVw6PCgcKXw6PCgcKmw6PCgcKXw6PCgcK+w6PCgcKGw6PCgcKfw6PCgsKBw6PCgMKBw6bCnMKAw6XCvsKMw6PCgcKuw6jCpsKBw6fCtMKgw6PCgsKSw6jCqMKtw6XCrsKaw6PCgcKow6PCgcKZw6PCgsKLXG4gICAgICAgIGlkeCA9IHRoaXMuX2xpc3RJdGVtcy5sZW5ndGggLSAxO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRE9XTsOjwoHCrsOlwqDCtMOlwpDCiMOjwoDCgcOmwpzCgMOlwojCncOjwoHCrsOowqbCgcOnwrTCoMOjwoLCksOowqjCrcOlwq7CmsOjwoHCqMOjwoHCmcOjwoLCi1xuICAgICAgICBpZHggPSAwO1xuICAgICAgfVxuICAgICAgLy8gOmhvdmVyw6fCisK2w6bChcKLw6PCgcKuw6PCgsKkw6PCg8Kzw6PCg8KHw6PCg8KDw6PCgsKvw6PCgsK5w6PCgsKSw6bCm8K0w6bClsKwXG4gICAgICB0aGlzLmhvdmVyZWRJdGVtID0gaWR4O1xuICAgICAgLy8gw6PCg8KXw6PCg8Krw6PCg8KAw6PCgsKmw6PCg8Kzw6PCgsKSw6jCqMKtw6XCrsKaXG4gICAgICB0aGlzLnNlbGVjdEl0ZW0odGhpcy5fbGlzdEl0ZW1zW2lkeF0sIG51bGwpO1xuICAgICAgLy8gw6PCg8KVw6PCg8Kpw6PCgsKww6PCgsKSw6bCm8K0w6bClsKwXG4gICAgICB0aGlzLmlzRmlyc3RLZXlEb3duID0gZmFsc2U7XG5cbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNEcm9wZG93bk9wZW4gJiYgKGUua2V5Q29kZSA9PT0gMzggfHwgZS5rZXlDb2RlID09PSA0MCkpIHsgLy8gMzggPSBVUCBhcnJvdywgNDAgPSBET1dOIGFycm93XG4gICAgICAvLyDDo8KDwojDo8KCwrDDo8KDwqvDo8KBwozDqcKWwovDo8KBwoTDo8KBwqbDo8KBwoTDo8KCwovDp8KKwrbDpsKFwovDo8KBwovDo8KBwqTDo8KCwq3Do8KDwrzDo8KDwpzDo8KDwrzDo8KDwonDo8KBwq5VUMOjwoDCgURPV07Do8KBwozDpsKKwrzDpMK4wovDo8KBwpXDo8KCwozDo8KBwp/DpcKgwrTDpcKQwohcbiAgICAgIHRoaXMuaG92ZXJlZFN0eWxlID0gdGhpcy5kZWZhdWx0U3R5bGU7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIC8vIMOowqjCrcOlwq7CmsOjwoHCmcOjwoLCi8OjwoPCl8OjwoPCq8OjwoPCgMOjwoLCpsOjwoPCs8OjwoHCrsOjwoLCpMOjwoPCs8OjwoPCh8OjwoPCg8OjwoLCr8OjwoLCuVxuICAgICAgbGV0IGlkeDogbnVtYmVyID0gMDtcbiAgICAgIGlmIChlLmtleUNvZGUgPT09IDM4KSB7IC8vIDM4ID0gVVAgYXJyb3dcbiAgICAgICAgaWYgKHRoaXMuaXNGaXJzdEtleURvd24gfHwgdGhpcy5ob3ZlcmVkSXRlbSA9PT0gMCkge1xuICAgICAgICAgIC8vIMOjwoPCiMOjwoLCsMOjwoPCq8OjwoHCjMOpwpbCi8OjwoHCi8OjwoLCjMOjwoHCn8OnworCtsOmwoXCi8OjwoHCp8OjwoDCgcOlwojCncOjwoLCgcOjwoHCpsOjwoLCrcOjwoPCvMOjwoHCjMOmworCvMOkwrjCi8OjwoHClcOjwoLCjMOjwoHCn8OlwqDCtMOlwpDCiFxuICAgICAgICAgIC8vIDpob3ZlcsOnworCtsOmwoXCi8OjwoHCrsOjwoPCl8OjwoPCq8OjwoPCgMOjwoLCpsOjwoPCs8OowqbCgcOnwrTCoMOjwoHCjMOkwrjCgMOnwpXCqsOkwrjCisOjwoHCrsOlwqDCtMOlwpDCiFxuICAgICAgICAgIC8vIFVQw6PCgcKvw6bCnMKAw6XCvsKMw6PCgcKuw6jCpsKBw6fCtMKgw6PCgsKSw6jCqMKtw6XCrsKaw6PCgcKZw6PCgsKLXG4gICAgICAgICAgaWR4ID0gdGhpcy5fbGlzdEl0ZW1zLmxlbmd0aCAtIDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gw6TCuMKKw6jCqMKYw6TCu8Klw6XCpMKWXG4gICAgICAgICAgLy8gOmhvdmVyw6fCisK2w6bChcKLw6PCgcKuw6jCpsKBw6fCtMKgw6PCgcKuw6/CvMKRw6PCgcKkw6TCuMKKw6PCgsKSw6jCqMKtw6XCrsKaXG4gICAgICAgICAgaWR4ID0gdGhpcy5ob3ZlcmVkSXRlbSAtIDE7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7IC8vIDQwID0gRE9XTiBhcnJvd1xuICAgICAgICBpZiAodGhpcy5pc0ZpcnN0S2V5RG93biB8fCB0aGlzLmhvdmVyZWRJdGVtID09PSAodGhpcy5fbGlzdEl0ZW1zLmxlbmd0aCAtIDEpKSB7XG4gICAgICAgICAgLy8gw6PCg8KIw6PCgsKww6PCg8Krw6PCgcKMw6nClsKLw6PCgcKLw6PCgsKMw6PCgcKfw6fCisK2w6bChcKLw6PCgcKnw6PCgMKBw6XCiMKdw6PCgsKBw6PCgcKmw6PCgsKtw6PCg8K8w6PCgcKMw6bCisK8w6TCuMKLw6PCgcKVw6PCgsKMw6PCgcKfw6XCoMK0w6XCkMKIXG4gICAgICAgICAgLy8gOmhvdmVyw6fCisK2w6bChcKLw6PCgcKuw6PCg8KXw6PCg8Krw6PCg8KAw6PCgsKmw6PCg8Kzw6jCpsKBw6fCtMKgw6PCgcKMw6TCuMKAw6fClcKqw6TCuMKLw6PCgcKuw6XCoMK0w6XCkMKIXG4gICAgICAgICAgLy8gw6XCiMKdw6PCgsKBw6PCgcKuw6jCpsKBw6fCtMKgw6PCgsKSw6jCqMKtw6XCrsKaXG4gICAgICAgICAgaWR4ID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyDDpMK4worDqMKowpjDpMK7wqXDpcKkwpZcbiAgICAgICAgICAvLyA6aG92ZXLDp8KKwrbDpsKFwovDo8KBwq7DqMKmwoHDp8K0wqDDo8KBwq7Dr8K8wpHDo8KBwqTDpMK4wovDo8KCwpLDqMKowq3DpcKuwppcbiAgICAgICAgICBpZHggPSB0aGlzLmhvdmVyZWRJdGVtICsgMTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gOmhvdmVyw6fCisK2w6bChcKLw6PCgcKuw6PCgsKkw6PCg8Kzw6PCg8KHw6PCg8KDw6PCgsKvw6PCgsK5w6PCgsKSw6bCm8K0w6bClsKwXG4gICAgICB0aGlzLmhvdmVyZWRJdGVtID0gaWR4O1xuICAgICAgLy8gw6PCg8KXw6PCg8Krw6PCg8KAw6PCgsKmw6PCg8Kzw6PCgsKSw6jCqMKtw6XCrsKaXG4gICAgICB0aGlzLnNlbGVjdEl0ZW0odGhpcy5fbGlzdEl0ZW1zW2lkeF0sIG51bGwpO1xuICAgICAgLy8gw6PCg8KVw6PCg8Kpw6PCgsKww6PCgsKSw6bCm8K0w6bClsKwXG4gICAgICB0aGlzLmlzRmlyc3RLZXlEb3duID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuY2QubWFya0ZvckNoZWNrKCk7XG4vLyBWM1IxLVVULU5TRC02NDMgw6TCv8Kuw6bCrcKjIEVORFxuICB9XG5cbiAgYWRqdXN0UHVsbGRvd25XaWR0aCgpIHtcbiAgICB0aGlzLmhvdmVyZWRTdHlsZSA9IHtcbiAgICAgICdjb2xvcic6ICcjMDAwMGNkJyxcbiAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogJyNmZjljMDAnXG4gICAgfTtcbiAgICBpZiAocGFyc2VJbnQodGhpcy5jb250cm9sV2lkdGhDb21ib0JveCwgMTApKSB7XG4gICAgICB0aGlzLmRyb3Bkb3duTWVudVN0eWxlWyd3aWR0aCddID0gKHBhcnNlSW50KHRoaXMuY29udHJvbFdpZHRoQ29tYm9Cb3gpKSArICdweCc7XG4gICAgfWVsc2V7XG4gICAgICB0aGlzLmRyb3Bkb3duTWVudVN0eWxlWyd3aWR0aCddID0gKHBhcnNlSW50KHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLmNsaWVudFdpZHRoKSArIDIwKSArICdweCc7XG4gICAgfVxuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgdG9nZ2xlU3RhdHVzKCkge1xuICAgIGlmICghdGhpcy5pc0Ryb3Bkb3duT3Blbikge1xuICAgICAgbGV0IGlkID0gXy5nZXQodGhpcy5nZXRQYXJlbnRTY3JvbGxWaWV3KCksIFwiaWRcIik7XG4gICAgICBsZXQgX3RoaXMgPSB0aGlzO1xuICAgICAgJChgIyR7aWR9YCkub24oJ3Njcm9sbCBtb3VzZXdoZWVsJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoX3RoaXMuZHJvcGRvd24gIT0gbnVsbCkge1xuICAgICAgICAgIF90aGlzLmRyb3Bkb3duLmhpZGUoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXR1cm4gZmFsc2U7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcGFyZW50VmlldzogVmlld0NvbXBvbmVudCA9IHRoaXMuZ2V0UGFyZW50VmlldygpIGFzIFZpZXdDb21wb25lbnQ7XG4gICAgICBpZiAocGFyZW50VmlldyAhPSBudWxsICYmIHBhcmVudFZpZXcuZGlhbG9nICE9IG51bGwgJiYgcGFyZW50Vmlldy5kaWFsb2cubW9kYWxDb250ZW50ICYmIHBhcmVudFZpZXcuZGlhbG9nLm1vZGFsQ29udGVudCAhPSBudWxsKSB7XG4gICAgICAgIGxldCBwYXJlbnRQYW5lbCA9IHBhcmVudFZpZXcuZGlhbG9nICYmIHBhcmVudFZpZXcuZGlhbG9nLm1vZGFsQ29udGVudC5uYXRpdmVFbGVtZW50O1xuICAgICAgICBsZXQgY29tYm9Cb3ggPSB0aGlzLmlucHV0RWxlbWVudC5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIGxldCBwYXJlbnRQb3MgPSBwYXJlbnRQYW5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgICBsZXQgY2hpbGRyZW5Qb3MgPSBjb21ib0JveC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgICBsZXQgZGlzdGFuY2VUb0JvdHRvbSA9IHBhcmVudFBvcy5ib3R0b20gLSBjaGlsZHJlblBvcy5ib3R0b207XG4gICAgICAgIGxldCBkaXN0YW5jZVRvVG9wID0gY2hpbGRyZW5Qb3MudG9wIC0gcGFyZW50UG9zLnRvcDtcbiAgICAgICAgbGV0IGhlaWdodE9mQm94ID0gdGhpcy5fbGlzdEl0ZW1zID8gTWF0aC5taW4oMTggKiB0aGlzLl9saXN0SXRlbXMubGVuZ3RoLCAyMDApIDogMjAwO1xuICAgICAgICBpZiAoZGlzdGFuY2VUb0JvdHRvbSA8IDIwMCkge1xuICAgICAgICAgIGlmIChkaXN0YW5jZVRvVG9wID4gMjAwKSB7XG4gICAgICAgICAgICAkKFwiLmRyb3Bkb3duLW1lbnVcIikucGFyZW50KCkuYXR0cihcImNsYXNzXCIsIFwiZHJvcHVwXCIpXG4gICAgICAgICAgfSBlbHNlIGlmIChkaXN0YW5jZVRvVG9wID4gZGlzdGFuY2VUb0JvdHRvbSkge1xuICAgICAgICAgICAgJChcIi5kcm9wZG93bi1tZW51XCIpLnBhcmVudCgpLmF0dHIoXCJjbGFzc1wiLCBcImRyb3B1cFwiKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKFwiLmRyb3Bkb3duLW1lbnVcIikucGFyZW50KCkuYXR0cihcImNsYXNzXCIsIFwiZHJvcGRvd25cIilcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJChcIi5kcm9wZG93bi1tZW51XCIpLnBhcmVudCgpLmF0dHIoXCJjbGFzc1wiLCBcImRyb3Bkb3duXCIpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocGFyZW50VmlldyAhPSBudWxsKSB7XG4gICAgICAgIGxldCBkaWFsb2cgPSAkKGAjJHtwYXJlbnRWaWV3W1wibWFpblNjcmVlbklkXCJdfWApO1xuICAgICAgICBpZiAoZGlhbG9nICE9IG51bGwgJiYgZGlhbG9nLmNoaWxkcmVuKCkgJiYgZGlhbG9nLmNoaWxkcmVuKClbMF0gJiYgZGlhbG9nLmNoaWxkcmVuKClbMF0gIT0gbnVsbCkge1xuICAgICAgICAgIGxldCBjb21ib0JveCA9IHRoaXMuaW5wdXRFbGVtZW50Lm5hdGl2ZUVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgICBsZXQgcGFyZW50UG9zID0gZGlhbG9nLmNoaWxkcmVuKClbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgICAgICBsZXQgY2hpbGRyZW5Qb3MgPSBjb21ib0JveC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgICAgIGxldCBkaXN0YW5jZVRvQm90dG9tID0gcGFyZW50UG9zLmJvdHRvbSAtIGNoaWxkcmVuUG9zLmJvdHRvbTtcbiAgICAgICAgICBsZXQgZGlzdGFuY2VUb1RvcCA9IGNoaWxkcmVuUG9zLnRvcCAtIHBhcmVudFBvcy50b3A7XG4gICAgICAgICAgbGV0IGhlaWdodE9mQm94ID0gdGhpcy5fbGlzdEl0ZW1zID8gTWF0aC5taW4oMTggKiB0aGlzLl9saXN0SXRlbXMubGVuZ3RoLCAyMDApIDogMjAwO1xuICAgICAgICAgIGlmIChkaXN0YW5jZVRvQm90dG9tIDwgMjAwKSB7XG4gICAgICAgICAgICBpZiAoZGlzdGFuY2VUb1RvcCA+IDIwMCkge1xuICAgICAgICAgICAgICAkKFwiLmRyb3Bkb3duLW1lbnVcIikucGFyZW50KCkuYXR0cihcImNsYXNzXCIsIFwiZHJvcHVwXCIpXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRpc3RhbmNlVG9Ub3AgPiBkaXN0YW5jZVRvQm90dG9tKSB7XG4gICAgICAgICAgICAgICQoXCIuZHJvcGRvd24tbWVudVwiKS5wYXJlbnQoKS5hdHRyKFwiY2xhc3NcIiwgXCJkcm9wdXBcIilcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICQoXCIuZHJvcGRvd24tbWVudVwiKS5wYXJlbnQoKS5hdHRyKFwiY2xhc3NcIiwgXCJkcm9wZG93blwiKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKFwiLmRyb3Bkb3duLW1lbnVcIikucGFyZW50KCkuYXR0cihcImNsYXNzXCIsIFwiZHJvcGRvd25cIilcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGlkID0gXy5nZXQodGhpcy5nZXRQYXJlbnRTY3JvbGxWaWV3KCksIFwiaWRcIik7XG4gICAgICAkKGAjJHtpZH1gKS5vZmYoJ3Njcm9sbCBtb3VzZXdoZWVsJyk7XG4vLyBWM1IxLVVULU5TRC02NDMgw6TCv8Kuw6bCrcKjIFNUQVJUXG4gICAgICAvLyDDo8KDwojDo8KCwrDDo8KDwqvDo8KBwozDqcKWwonDo8KBwpjDo8KCwonDo8KCwozDo8KBwp/Do8KCwr/Do8KCwqTDo8KDwp/Do8KDwrPDo8KCwrDDo8KBwqfDo8KDwpXDo8KDwqnDo8KCwrDDo8KCwpLDpsKIwrvDo8KBwplcbiAgICAgIHRoaXMuaXNGaXJzdEtleURvd24gPSB0cnVlO1xuLy8gVjNSMS1VVC1OU0QtNjQzIMOkwr/CrsOmwq3CoyBFTkRcbiAgICAgIHRoaXMuZHJvcGRvd24uaGlkZSgpO1xuICAgIH1cbiAgICB0aGlzLmlzRHJvcGRvd25PcGVuID0gIXRoaXMuaXNEcm9wZG93bk9wZW47XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgc2VsZWN0ZWQgY29tYm9ib3ggb3B0aW9uIHRvICd2YWwnIHBhcmFtZXRlci5cbiAgICogQHBhcmFtIHZhbCBWYWx1ZSB0byBzZXQuXG4gICAqL1xuICBzZXRWYWx1ZSh2YWw6IGFueSkge1xuICAgIHRoaXMuc2V0U2VsZWN0VmFsdWUodmFsKTtcbiAgICB0aGlzLmNkLm1hcmtGb3JDaGVjaygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHNlbGVjdGVkIGNvbWJvYm94IG9wdGlvbiB0aGF0IG1hdGNoZXMgJ3RleHQnIHBhcmFtZXRlci5cbiAgICogQHBhcmFtIHRleHQgVGV4dCBvZiBvcHRpb24gdG8gbWFyayBhcyBzZWxlY3RlZC5cbiAgICovXG4gIHNldFRleHQodGV4dDogc3RyaW5nKSB7XG4gICAgaWYgKHRleHQgPT0gbnVsbCkge1xuICAgICAgdGhpcy5zZXRTZWxlY3RJdGVtKG51bGwpO1xuICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX2xpc3RJdGVtcyAhPSBudWxsKSB7XG4gICAgICBjb25zdCB0ZW1wID0gXy5maW5kKHRoaXMuX2xpc3RJdGVtcywgKGl0ZW06IFZhbHVlUGFpcikgPT4gaXRlbS50ZXh0ID09IHRleHQpO1xuXG4gICAgICBpZiAodGVtcCAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMuc2V0U2VsZWN0SXRlbSh0ZW1wKTtcbiAgICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgc2VsZWN0ZWQgaXRlbSB2YWx1ZS5cbiAgICogQHJldHVybnMgVmFsdWUgb2YgdGhlIHNlbGVjdGVkIGl0ZW0gaW4gdGhlIGNvbWJvYm94LlxuICAgKi9cbiAgZ2V0VmFsdWUoKTogYW55IHtcbiAgICByZXR1cm4gdGhpcy5zZWxlY3RlZEl0ZW0gPyB0aGlzLnNlbGVjdGVkSXRlbS52YWx1ZSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdGV4dCBvZiB0aGUgc2VsZWN0ZWQgaXRlbS5cbiAgICogQHJldHVybnMgU3RyaW5nIHZhbHVlIG9mIHNlbGVjdGVkIGl0ZW0gdGV4dC5cbiAgICovXG4gIGdldFRleHQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5zZWxlY3RlZEl0ZW0gPyB0aGlzLnNlbGVjdGVkSXRlbS50ZXh0IDogXCJcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb2N1c2VzIHRoZSBuYXRpdmUgaW5wdXQgZWxlbWVudFxuICAgKi9cbiAgc2V0Rm9jdXMoKSB7XG4gICAgdGhpcy5pbnB1dEVsZW1lbnQubmF0aXZlRWxlbWVudC5mb2N1cygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgYmFja2dyb3VuZCBjb2xvciBvZiB0aGUgaW5wdXQgZWxlbWVudC5cbiAgICogQHBhcmFtIGJnQ29sb3IgQSBDU1MgY29sb3Igc3RyaW5nIHZhbHVlLiBTaG91bGQgYmUgaGV4YWRlY2ltYWwgb3IgdmFsaWQgY29sb3IgbmFtZS5cbiAgICovXG4gIHNldEJnQ29sb3IoYmdDb2xvcjogc3RyaW5nKSB7XG4gICAgdGhpcy5pbnB1dEVsZW1lbnQubmF0aXZlRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBiZ0NvbG9yO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmRzIGEgbGlzdCBpdGVtIGJ5IHRleHQuXG4gICAqIEBwYXJhbSB0ZXh0IEl0ZW0gdGV4dCB0byBzZWFyY2ggZm9yXG4gICAqIEByZXR1cm5zIFtbVmFsdWVQYWlyXV0gaW4gW1tfbGlzdEl0ZW1zXV0gdGhhdCBtYXRjaGVzIHRleHRcbiAgICovXG4gIGZpbmRJdGVtQnlUZXh0KHRleHQ6IHN0cmluZykge1xuICAgIHJldHVybiBfLmZpbmQodGhpcy5fbGlzdEl0ZW1zLCAoaXRlbTogVmFsdWVQYWlyKSA9PiBpdGVtLnRleHQgPT0gdGV4dCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBhbGwgbGlzdCBpdGVtcyB0aGF0IGFyZSBjaGlsZHJlbiBvZiB0aGUgY29tYm9ib3ggY29tcG9uZW50LlxuICAgKiBAcmV0dXJucyBDb2xsZWN0aW9uIG9mIGxpc3QgaXRlbXMuXG4gICAqL1xuICBnZXRDaGlsZHJlbigpOiBWZWN0b3I8YW55PiB7XG4gICAgY29uc3QgcmVzdWx0ID0gbmV3IFZlY3Rvcjxhbnk+KCk7XG5cbiAgICBpZiAodGhpcy5fbGlzdEl0ZW1zICE9IG51bGwpIHtcbiAgICAgIF8uZm9yRWFjaCh0aGlzLl9saXN0SXRlbXMsIChpdGVtKSA9PiB7XG4gICAgICAgIHJlc3VsdC5hZGQobmV3IEZhdXhDb21ib0VsZW1lbnQodGhpcywgaXRlbSkpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBPdXRwdXRzIEpTT04gb2JqZWN0IHRoYXQgZGVzY3JpYmVzIGNvbXBvbmVudFxuICAgKiBAcmV0dXJucyBPYmplY3RcbiAgICovXG4gIHRvSnNvbigpIHtcbiAgICBjb25zdCBqc29uOiBhbnkgPSBzdXBlci50b0pzb24oKTtcbiAgICBqc29uLnZhbHVlID0gdGhpcy5nZXRWYWx1ZSgpO1xuXG4gICAgcmV0dXJuIGpzb247XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBzdHJpbmcgbmFtZSBvZiB0aGUgY29tcG9uZW50XG4gICAqIEByZXR1cm5zIFN0cmluZ1xuICAgKi9cbiAgZ2V0TG9jYWxOYW1lKCkge1xuICAgIHJldHVybiBcImNvbWJvQm94XCI7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBzdHJpbmcgdGFnIG5hbWUgb2YgY29tcG9uZW50XG4gICAqL1xuICBwcm90ZWN0ZWQgZ2V0TnhUYWdOYW1lKCkge1xuICAgIHJldHVybiBcImNvbWJvQm94XCI7XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogQHJldHVybnMgW1tDaGFuZ2VEZXRlY3Rvcl1dIGZvciB0aGUgY29tcG9uZW50XG4gICAqL1xuICBwcm90ZWN0ZWQgZ2V0Q2hhbmdlRGV0ZWN0b3IoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2Q7XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogU2V0cyBjb21ib2JveCB2YWx1ZXMgYmFzZWQgb24gZGVmaW5pdGlvbiBtYXBcbiAgICovXG4gIHByaXZhdGUgbG9hZERhdGFGcm9tRGVmKCkge1xuICAgIGxldCBkZWZJZDogc3RyaW5nID0gdGhpcy5nZXRJZCgpO1xuXG4gICAgaWYgKHRoaXMuZWRpdG9yICE9IG51bGwgJiYgdGhpcy5lZGl0b3IubGVuZ3RoID4gMCkge1xuICAgICAgZGVmSWQgPSB0aGlzLmVkaXRvci5zdWJzdHJpbmcoMSk7XG4gICAgfVxuXG4gICAgY29uc3QgZGVmID0gdGhpcy5nZXRTZXNzaW9uKCkuZ2V0RGVmKGRlZklkKTtcblxuICAgIGlmIChkZWYgIT0gbnVsbCAmJiBkZWYudmFsdWVMaXN0ICE9IG51bGwpIHtcbiAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9IGRlZi5hdHRyaWJ1dGU7XG5cbiAgICAgIHRoaXMuaW5pdGlhbGl6ZUNvbWJvYm94VmFsdWVzKF8ubWFwKGRlZi52YWx1ZUxpc3QsIChpdGVtKSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdmFsdWU6IGl0ZW1bXCJ2YWx1ZVwiXSxcbiAgICAgICAgICB0ZXh0OiBpdGVtW1wibmFtZVwiXSxcbiAgICAgICAgICBzZWxlY3RlZDogaXRlbVtcInNlbGVjdEZsZ1wiXSA9PT0gXCJ0cnVlXCIgfHwgaXRlbVtcInNlbGVjdEZsZ1wiXSA9PT0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9KSk7XG5cbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlRnJvbURlZigpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGZvY3VzIGZyb20gaW5wdXQgZWxlbWVudCBhbmQgc2V0cyB1bmZvY3VzIGJhY2tncm91bmRcbiAgICogQGV2ZW50IE9uQmVmb3JlQWN0aXZlTG9zdFxuICAgKi9cbiAgaW5wdXRGb2N1c091dCgpIHtcbiAgICBpZiAoIXRoaXMuaGFzSW5wdXRGb2N1cykgcmV0dXJuOy8vT24gdGhlIElFLCBwcmV2ZW50IHRvIGZpcmUgZm9jdXNvdXQgZXZlbnQgd2l0aG91dCBmb2N1c2luIGV2ZW50Lih0aGlzIG9jY3VycyB3aGVuIGVycm9yLWRpYWxvZyBpcyBzaG93ZWQuKWlzc3VlIzE0MzNORygyKVxuICAgIGlmICh0aGlzLmlucHV0RWxlbWVudC5uYXRpdmVFbGVtZW50Lm93bmVyRG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gdGhpcy5pbnB1dEVsZW1lbnQubmF0aXZlRWxlbWVudCkgcmV0dXJuOy8vcHJldmVudCBmb2N1c2xvc3Qgd2hlbmV2ZXIgYWN0aXZlIHByb2Nlc3MgaXMgY2hhbmdlZC5cbiAgICB0aGlzLnNldEJnQ29sb3IoJycpO1xuICAgIHRoaXMub25CZWZvcmVBY3RpdmVMb3N0LmVtaXQoKTtcbiAgICB0aGlzLmhhc0lucHV0Rm9jdXMgPSBmYWxzZTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGxldCAkYWN0aXZlID0gJChcIjpmb2N1c1wiKTtcbiAgICAgIGlmKCRhY3RpdmUubGVuZ3RoID4gMCAmJiAhJGFjdGl2ZS5pcyhcImJvZHlcIikgJiYgJGFjdGl2ZS5jbG9zZXN0KFwiLnZ0LWNvbWJvLWJveCxbdnQtYXJyb3ctbmF2aWdhdGFibGUtY29udGFpbmVyXVwiKS5sZW5ndGggPT0gMCkge1xuICAgICAgICBpZih0aGlzLmRyb3Bkb3duICYmIHRoaXMuZHJvcGRvd24uaXNPcGVuKSB7XG4gICAgICAgICAgdGhpcy5kcm9wZG93bi5oaWRlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCAxMCk7XG4gIH1cblxuICAvKipcbiAgICogaWYgdGhlIGludGVydmFsIGJldHdlZW4gZm9jdXNpbiBhbmQgZm9jdXNvdXQgZXZlbnQgaXMgbGVzcyB0aGFuIDIwMG1zLCBkb24ndCBmaXJlIGZvY3VzaW4uXG4gICAqL1xuICBpbnB1dEZvY3VzSW4oKSB7XG4gICAgdGhpcy5oYXNJbnB1dEZvY3VzID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxlZ2F0ZSBtZXRob2Qgd3JhcHBlciBmb3IgbmF0aXZlIGJyb3dzZXIgcHJldmVudERlZmF1bHRcbiAgICogQHBhcmFtIGV2ZW50IEV2ZW50IG9iamVjdFxuICAgKi9cbiAgcHJldmVudERlZmF1bHQoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHRoaXMuaW5wdXRFbGVtZW50Lm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgc3Vic2NyaWJlVG9QYXJlbnRTY3JvbGxlcigpIHtcbiAgICBjb25zdCBzY3JvbGxQYXJlbnQgPSAkKHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50KS5zY3JvbGxQYXJlbnQoKTtcblxuICAgIGlmIChzY3JvbGxQYXJlbnQgIT0gbnVsbCAmJiBzY3JvbGxQYXJlbnRbMF0gaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgdGhpcy5wYXJlbnRTY3JvbGxlciA9IHNjcm9sbFBhcmVudFswXTtcblxuICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICB0aGlzLnBhcmVudFNjcm9sbGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcy5wYXJlbnRTY3JvbGxIYW5sZGVyKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgRGlyZWN0aXZlLCBFbGVtZW50UmVmLCBOZ1pvbmUsIE9uRGVzdHJveSwgUmVuZGVyZXIyLCBIb3N0TGlzdGVuZXIsIE91dHB1dCwgRXZlbnRFbWl0dGVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmRlY2xhcmUgdmFyICQ6IGFueTtcblxuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiAnW3Z0LWFycm93LW5hdmlnYXRhYmxlLWl0ZW1dJyxcbn0pXG5leHBvcnQgY2xhc3MgQXJyb3dOYXZpZ2F0YWJsZUl0ZW1EaXJlY3RpdmUgaW1wbGVtZW50cyBPbkRlc3Ryb3kge1xuICBAT3V0cHV0KCkgdnRBcnJvd09uTW91c2VFbnRlcjogRXZlbnRFbWl0dGVyPHZvaWQ+ID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuICBAT3V0cHV0KCkgdnRBcnJvd09uTW91c2VMZWF2ZTogRXZlbnRFbWl0dGVyPHZvaWQ+ID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuXG4gIHBhcmVudDogYW55O1xuICBqcTogYW55O1xuXG4gIEBIb3N0TGlzdGVuZXIoXCJibHVyXCIpXG4gIGhhbmRsZU9uQmx1cigpIHtcbiAgICB0aGlzLmJsdXIoKTtcbiAgfVxuXG4gIEBIb3N0TGlzdGVuZXIoXCJmb2N1c1wiKVxuICBoYW5kbGVPbkZvY3VzKCkge1xuICAgIGlmICh0aGlzLnBhcmVudCAhPSBudWxsKSB7XG4gICAgICB0aGlzLnBhcmVudC5hY3RpdmVJdGVtID0gdGhpcztcbiAgICB9XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgZWxlbWVudDogRWxlbWVudFJlZixcbiAgICBwcml2YXRlIHpvbmU6IE5nWm9uZSxcbiAgICBwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjJcbiAgKSB7XG4gICAgdGhpcy5qcSA9ICQodGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQpO1xuXG4gICAgdGhpcy5yZW5kZXJlci5zZXRBdHRyaWJ1dGUodGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQsIFwidGFiaW5kZXhcIiwgXCItMVwiKTtcbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIHRoaXMuanEgPSBudWxsO1xuICAgIHRoaXMuZWxlbWVudCA9IG51bGw7XG4gICAgdGhpcy56b25lID0gbnVsbDtcbiAgfVxuXG4gIGZvY3VzKCkge1xuICAgIHRoaXMuem9uZS5ydW4oKCk9PntcbiAgICAgIHRoaXMuanEubW91c2VvdmVyKCk7XG4gICAgICB0aGlzLmpxLmZvY3VzKCk7XG4gICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50LCBcIm1vdXNlLWhvdmVyXCIpO1xuICAgIH0pO1xuICB9XG5cbiAgYmx1cigpIHtcbiAgICB0aGlzLnpvbmUucnVuKCgpPT57XG4gICAgICB0aGlzLmpxLm1vdXNlb3V0KCk7XG4gICAgICB0aGlzLmpxLmJsdXIoKTtcbiAgICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQsIFwibW91c2UtaG92ZXJcIik7XG4gICAgfSk7XG4gIH1cblxuICBzZWxlY3QoKSB7XG4gICAgKHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50IGFzIEhUTUxFbGVtZW50KS5jbGljaygpO1xuICB9XG5cbiAgaG92ZXIoKSB7XG4gICAgdGhpcy56b25lLnJ1bigoKT0+e1xuICAgICAgLy8odGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQgYXMgSFRNTEVsZW1lbnQpLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwibW91c2VlbnRlclwiKSk7XG4gICAgICB0aGlzLnZ0QXJyb3dPbk1vdXNlRW50ZXIuZW1pdCgpO1xuICAgIH0pO1xuICB9XG5cbiAgbGVhdmUoKSB7XG4gICAgdGhpcy56b25lLnJ1bigoKT0+e1xuICAgICAgdGhpcy52dEFycm93T25Nb3VzZUxlYXZlLmVtaXQoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgRGlyZWN0aXZlLCBDb250ZW50Q2hpbGRyZW4sIFF1ZXJ5TGlzdCwgTmdab25lLCBFbGVtZW50UmVmLCBPbkRlc3Ryb3ksIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBJbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQXJyb3dOYXZpZ2F0YWJsZUl0ZW1EaXJlY3RpdmUgfSBmcm9tICcuL2Fycm93LW5hdmlnYXRhYmxlLWl0ZW0uZGlyZWN0aXZlJztcblxuaW1wb3J0ICogYXMgXyBmcm9tIFwibG9kYXNoXCI7XG5cbkBEaXJlY3RpdmUoe1xuICBzZWxlY3RvcjogJ1t2dC1hcnJvdy1uYXZpZ2F0YWJsZS1jb250YWluZXJdJ1xufSlcbi8qKlxuICogVXNhZ2UuXG4gKiA8dWwgdnQtYXJyb3ctbmF2aWdhdGFibGUtY29udGFpbmVyIC4uLj5cbiAqICA8bGkgdnQtYXJyb3ctbmF2aWdhdGFibGUtaXRlbSAuLi4+XG4gKiAgPGxpIHZ0LWFycm93LW5hdmlnYXRhYmxlLWl0ZW0gLi4uPlxuICogPC91bD5cbiAqL1xuZXhwb3J0IGNsYXNzIEFycm93TmF2aWdhdGFibGVDb250YWluZXJEaXJlY3RpdmUgaW1wbGVtZW50cyBPbkRlc3Ryb3kge1xuICBASW5wdXQoKSBhY3RpdmVQYXJlbnQ6IEhUTUxFbGVtZW50O1xuICBAT3V0cHV0KCkgb25JdGVtSG92ZXI6IEV2ZW50RW1pdHRlcjxBcnJvd05hdmlnYXRhYmxlSXRlbURpcmVjdGl2ZT4gPSBuZXcgRXZlbnRFbWl0dGVyPEFycm93TmF2aWdhdGFibGVJdGVtRGlyZWN0aXZlPigpO1xuICBAT3V0cHV0KCkgb25UYWI6IEV2ZW50RW1pdHRlcjx2b2lkPiA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcblxuICBAQ29udGVudENoaWxkcmVuKEFycm93TmF2aWdhdGFibGVJdGVtRGlyZWN0aXZlKVxuICBzZXQgbmF2aWdhdGFibGVJdGVtc1F1ZXJ5KGl0ZW1zOiBRdWVyeUxpc3Q8QXJyb3dOYXZpZ2F0YWJsZUl0ZW1EaXJlY3RpdmU+KSB7XG4gICAgaWYgKGl0ZW1zID09IG51bGwpIHtcbiAgICAgIHRoaXMubmF2aWdhdGFibGVJdGVtcyA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubmF2aWdhdGFibGVJdGVtcyA9IGl0ZW1zLnRvQXJyYXkoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGtleWRvd25IYW5kbGVyOiAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpPT52b2lkO1xuXG4gIHByaXZhdGUgYWN0aXZlSXRlbTogQXJyb3dOYXZpZ2F0YWJsZUl0ZW1EaXJlY3RpdmU7XG5cbiAgcHJpdmF0ZSBuYXZpZ2F0YWJsZUl0ZW1zOiBBcnJheTxBcnJvd05hdmlnYXRhYmxlSXRlbURpcmVjdGl2ZT47XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSB6b25lOiBOZ1pvbmUsIHByaXZhdGUgZWxlbWVudDogRWxlbWVudFJlZikge1xuICAgIHRoaXMua2V5ZG93bkhhbmRsZXIgPSAoZXZlbnQpPT50aGlzLmhhbmRsZUtleWRvd24oZXZlbnQpO1xuICAgIHRoaXMuem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKT0+e1xuICAgICAgKGRvY3VtZW50KS5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLmtleWRvd25IYW5kbGVyKTtcbiAgICB9KTtcbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIHRoaXMubmF2aWdhdGFibGVJdGVtcyA9IG51bGw7XG4gICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpPT57XG4gICAgICAoZG9jdW1lbnQpLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMua2V5ZG93bkhhbmRsZXIpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5lbGVtZW50ID0gbnVsbDtcbiAgICB0aGlzLmtleWRvd25IYW5kbGVyID0gbnVsbDtcbiAgICB0aGlzLm5hdmlnYXRhYmxlSXRlbXMgPSBudWxsO1xuICAgIHRoaXMuYWN0aXZlSXRlbSA9IG51bGw7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUtleWRvd24oZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gdGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQgfHwgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gdGhpcy5hY3RpdmVQYXJlbnQgfHwgdGhpcy5pc0FjdGl2ZUVsZW1lbnREaXJlY3RDaGlsZHJlbigpKSB7XG4gICAgICAvL2NoZWNrIGZvciBhcnJvdyBrZXkgYW5kIGRvIHN0dWZmXG4gICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMzggfHwgZXZlbnQua2V5ID09PSBcIkFycm93VXBcIikge1xuICAgICAgICB0aGlzLm1vdmVVcCgpO1xuICAgICAgfSBlbHNlIGlmIChldmVudC5rZXlDb2RlID09PSA0MCB8fCBldmVudC5rZXkgPT09IFwiQXJyb3dEb3dcIikge1xuICAgICAgICB0aGlzLm1vdmVEb3duKCk7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBldmVudC5rZXlDb2RlID09PSAxMyB8fCBldmVudC5rZXkgPT09IFwiRW50ZXJcIiB8fFxuICAgICAgICBldmVudC5rZXlDb2RlID09PSAzMiB8fCBldmVudC5rZXkgPT09IFwiU3BhY2VcIlxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0KCk7XG4gICAgICB9IGVsc2UgaWYgKGV2ZW50LmtleUNvZGUgPT09IDM5IHx8IGV2ZW50LmtleSA9PT0gXCJBcnJvd1JpZ2h0XCIpIHtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlSXRlbSAhPSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5hY3RpdmVJdGVtLmhvdmVyKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMzcgfHwgZXZlbnQua2V5ID09PSBcIkFycm93TGVmdFwiKSB7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZUl0ZW0gIT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMuYWN0aXZlSXRlbS5sZWF2ZSgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGV2ZW50LmtleUNvZGUgPT09IDkgfHwgZXZlbnQua2V5ID09PSBcIlRhYlwiKSB7XG4gICAgICAgIHRoaXMub25UYWIuZW1pdCgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgbW92ZVVwKCkge1xuICAgIC8vY2FuIG9ubHkgZ28gdXAgaWYgdGhlcmUgYXJlIGFueSBpdGVtcyBhYm92ZVxuICAgIGlmICh0aGlzLmhhc0l0ZW1zKCkpIHtcbiAgICAgIGxldCBpZHggPSAwO1xuXG4gICAgICBpZiAodGhpcy5hY3RpdmVJdGVtICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVJdGVtLmJsdXIoKTtcbiAgICAgICAgaWR4ID0gXy5maW5kSW5kZXgodGhpcy5uYXZpZ2F0YWJsZUl0ZW1zLCAoaXRlbSk9Pml0ZW0gPT09IHRoaXMuYWN0aXZlSXRlbSk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXNBY3RpdmVFbGVtZW50RGlyZWN0Q2hpbGRyZW4oKSkge1xuICAgICAgICBpZHggPSBfLmZpbmRJbmRleCh0aGlzLm5hdmlnYXRhYmxlSXRlbXMsIChpdGVtKT0+IGl0ZW0uZWxlbWVudC5uYXRpdmVFbGVtZW50ID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50KTtcblxuICAgICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgICB0aGlzLm5hdmlnYXRhYmxlSXRlbXNbaWR4XS5ibHVyKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGlkeCA8IHRoaXMubmF2aWdhdGFibGVJdGVtcy5sZW5ndGggJiYgaWR4ID4gMCkge1xuICAgICAgICB0aGlzLmFjdGl2ZUl0ZW0gPSB0aGlzLm5hdmlnYXRhYmxlSXRlbXNbaWR4IC0gMV07XG4gICAgICAgIHRoaXMuYWN0aXZlSXRlbS5mb2N1cygpO1xuICAgICAgICB0aGlzLm9uSXRlbUhvdmVyLmVtaXQodGhpcy5hY3RpdmVJdGVtKTtcbiAgICAgIH0gZWxzZSBpZiAoaWR4ID09PSAwKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlSXRlbSA9IHRoaXMubmF2aWdhdGFibGVJdGVtc1t0aGlzLm5hdmlnYXRhYmxlSXRlbXMubGVuZ3RoIC0gMV07XG4gICAgICAgIHRoaXMuYWN0aXZlSXRlbS5mb2N1cygpO1xuICAgICAgICB0aGlzLm9uSXRlbUhvdmVyLmVtaXQodGhpcy5hY3RpdmVJdGVtKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIG1vdmVEb3duKCkge1xuICAgIGlmICh0aGlzLmhhc0l0ZW1zKCkpIHtcbiAgICAgIGxldCBpZHggPSAtMTtcblxuICAgICAgaWYgKHRoaXMuYWN0aXZlSXRlbSAhPSBudWxsKSB7XG4gICAgICAgIGlkeCA9IF8uZmluZEluZGV4KHRoaXMubmF2aWdhdGFibGVJdGVtcywgKGl0ZW0pPT5pdGVtID09PSB0aGlzLmFjdGl2ZUl0ZW0pO1xuXG4gICAgICAgIHRoaXMuYWN0aXZlSXRlbS5ibHVyKCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXNBY3RpdmVFbGVtZW50RGlyZWN0Q2hpbGRyZW4oKSkge1xuICAgICAgICBpZHggPSBfLmZpbmRJbmRleCh0aGlzLm5hdmlnYXRhYmxlSXRlbXMsIChpdGVtKT0+IGl0ZW0uZWxlbWVudC5uYXRpdmVFbGVtZW50ID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlkeCA8IHRoaXMubmF2aWdhdGFibGVJdGVtcy5sZW5ndGggLSAxKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlSXRlbSA9IHRoaXMubmF2aWdhdGFibGVJdGVtc1tpZHggKyAxXTtcbiAgICAgICAgdGhpcy5hY3RpdmVJdGVtLmZvY3VzKCk7XG4gICAgICAgIHRoaXMub25JdGVtSG92ZXIuZW1pdCh0aGlzLmFjdGl2ZUl0ZW0pO1xuICAgICAgfSBlbHNlIGlmIChpZHggPT0gdGhpcy5uYXZpZ2F0YWJsZUl0ZW1zLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVJdGVtID0gdGhpcy5uYXZpZ2F0YWJsZUl0ZW1zWzBdO1xuICAgICAgICB0aGlzLmFjdGl2ZUl0ZW0uZm9jdXMoKTtcbiAgICAgICAgdGhpcy5vbkl0ZW1Ib3Zlci5lbWl0KHRoaXMuYWN0aXZlSXRlbSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzZWxlY3QoKSB7XG4gICAgaWYgKHRoaXMuYWN0aXZlSXRlbSAhPSBudWxsKSB7XG4gICAgICB0aGlzLmFjdGl2ZUl0ZW0uc2VsZWN0KCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBoYXNJdGVtcygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5uYXZpZ2F0YWJsZUl0ZW1zICE9IG51bGwgJiYgdGhpcy5uYXZpZ2F0YWJsZUl0ZW1zLmxlbmd0aCA+IDA7XG4gIH1cblxuICBwcml2YXRlIGlzQWN0aXZlRWxlbWVudERpcmVjdENoaWxkcmVuKCkge1xuICAgIGxldCByZXRWYWw6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ICE9IG51bGwgJiYgdGhpcy5uYXZpZ2F0YWJsZUl0ZW1zICE9IG51bGwgJiYgdGhpcy5uYXZpZ2F0YWJsZUl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldFZhbCA9IF8uZmluZEluZGV4KHRoaXMubmF2aWdhdGFibGVJdGVtcywgKGl0ZW0pPT5pdGVtLmVsZW1lbnQubmF0aXZlRWxlbWVudCA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkgPj0gMDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmV0VmFsO1xuICB9XG59XG4iLCJpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IEFycm93TmF2aWdhdGFibGVDb250YWluZXJEaXJlY3RpdmUgfSBmcm9tICcuL2Fycm93LW5hdmlnYXRhYmxlLWNvbnRhaW5lci5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgQXJyb3dOYXZpZ2F0YWJsZUl0ZW1EaXJlY3RpdmUgfSBmcm9tICcuL2Fycm93LW5hdmlnYXRhYmxlLWl0ZW0uZGlyZWN0aXZlJztcblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogW1xuICAgIENvbW1vbk1vZHVsZVxuICBdLFxuICBkZWNsYXJhdGlvbnM6IFtcbiAgICBBcnJvd05hdmlnYXRhYmxlSXRlbURpcmVjdGl2ZSxcbiAgICBBcnJvd05hdmlnYXRhYmxlQ29udGFpbmVyRGlyZWN0aXZlXG4gIF0sXG4gIGV4cG9ydHM6IFtcbiAgICBBcnJvd05hdmlnYXRhYmxlSXRlbURpcmVjdGl2ZSxcbiAgICBBcnJvd05hdmlnYXRhYmxlQ29udGFpbmVyRGlyZWN0aXZlXG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgS2V5Ym9hcmRNb2R1bGUgeyB9XG4iLCJpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IENvbWJvQm94Q29tcG9uZW50IH0gZnJvbSAnLi9jb21iby1ib3guY29tcG9uZW50JztcbmltcG9ydCB7IExpc3RCb3hEaXJlY3RpdmUgfSBmcm9tICcuL2xpc3QtYm94LmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBMaXN0SXRlbURpcmVjdGl2ZSB9IGZyb20gJy4vbGlzdC1pdGVtLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBCc0Ryb3Bkb3duTW9kdWxlIH0gZnJvbSAnbmd4LWJvb3RzdHJhcCc7XG5pbXBvcnQgeyBLZXlib2FyZE1vZHVsZSB9IGZyb20gJy4uL2tleWJvYXJkL2tleWJvYXJkLm1vZHVsZSc7XG5cbkBOZ01vZHVsZSh7XG4gIGltcG9ydHM6IFtcbiAgICBDb21tb25Nb2R1bGUsXG4gICAgQnNEcm9wZG93bk1vZHVsZS5mb3JSb290KCksXG4gICAgS2V5Ym9hcmRNb2R1bGVcbiAgXSxcbiAgZGVjbGFyYXRpb25zOiBbQ29tYm9Cb3hDb21wb25lbnQsIExpc3RCb3hEaXJlY3RpdmUsIExpc3RJdGVtRGlyZWN0aXZlXSxcbiAgZXhwb3J0czogW1xuICAgIENvbWJvQm94Q29tcG9uZW50LFxuICAgIExpc3RCb3hEaXJlY3RpdmUsXG4gICAgTGlzdEl0ZW1EaXJlY3RpdmUsXG4gICAgQnNEcm9wZG93bk1vZHVsZSxcbiAgICBLZXlib2FyZE1vZHVsZVxuICBdLFxuICBlbnRyeUNvbXBvbmVudHM6IFtcbiAgICBDb21ib0JveENvbXBvbmVudFxuICBdXG59KVxuZXhwb3J0IGNsYXNzIENvbWJvQm94TW9kdWxlIHsgfVxuIiwiaW1wb3J0IHsgRGlyZWN0aXZlLCBFbGVtZW50UmVmLCBJbnB1dCwgUmVuZGVyZXIyLCBBZnRlclZpZXdJbml0LCBPbkRlc3Ryb3ksIEhvc3QsIENvbnRlbnRDaGlsZCwgTmdab25lIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBTZXNzaW9uU2VydmljZSB9IGZyb20gJy4uL3Nlc3Npb24vc2Vzc2lvbi5zZXJ2aWNlJztcbmltcG9ydCB7IFRhYmxlQ29tcG9uZW50IH0gZnJvbSAnLi4vdGFibGUvdGFibGUuY29tcG9uZW50JztcbmltcG9ydCB7IFVpRG9jdW1lbnQgfSBmcm9tICcuLi9iYXNlL3VpLWRvY3VtZW50JztcbmltcG9ydCAqIGFzIF8gZnJvbSAnbG9kYXNoJztcblxuaW50ZXJmYWNlIFBvc2l0aW9uIHtcbiAgeDogbnVtYmVyLFxuICB5OiBudW1iZXJcbn1cblxuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiAnW3Z0RHJhZ2dhYmxlXScsXG4gIGhvc3Q6IHtcbiAgICAvLyAnKGRyYWdzdGFydCknOiAnb25EcmFnU3RhcnQoJGV2ZW50KScsXG4gICAgLy8gJyhkcmFnZW5kKSc6ICdvbkRyYWdFbmQoJGV2ZW50KScsXG4gICAgLy8gJyhkcmFnKSc6ICdvbkRyYWcoJGV2ZW50KScsXG4gICAgJyhjbGljayknOiAnb25DbGljaygkZXZlbnQpJ1xuICB9XG59KVxuZXhwb3J0IGNsYXNzIERyYWdnYWJsZURpcmVjdGl2ZSBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQsIE9uRGVzdHJveSB7XG4gIHB1YmxpYyBwb3NpdGlvbkF0dHJWYWx1ZXM6IEFycmF5PHN0cmluZz4gPSBbJ2Fic29sdXRlJywgJ2ZpeGVkJywgJ3JlbGF0aXZlJ107XG4gIEBJbnB1dCgpIHZ0RHJhZ2dhYmxlOiBib29sZWFuO1xuICBASW5wdXQoXCJtb2RhbFwiKSBtb2RhbDogYm9vbGVhbjtcbiAgQElucHV0KCkgaXNWaWV3OiBib29sZWFuID0gdHJ1ZTtcblxuICBwcml2YXRlIHZpZXdJZDogc3RyaW5nO1xuICBwcml2YXRlIHRhYmxlSWQ6IHN0cmluZzsgLy/Do8KDwqrDo8KCwrXDo8KCwqTDo8KCwrrDpsKZwoLDo8KBwqvDpsKTwo3DpMK9wpzDo8KBwpnDo8KCwovDo8KDwobDo8KDwrzDo8KDwpbDo8KDwqvDo8KCwr/Do8KCwrDDo8KBwq5JRFxuXG4gIHByaXZhdGUgcGFyZW50RWxlbWVudDphbnk7XG5cbiAgQElucHV0KCkgdGl0bGU6IHN0cmluZztcblxuICBzY3JlZW5JbmRleDogbnVtYmVyO1xuXG4gICAgLyoqIEBJbnB1dCAqLyBASW5wdXQoKSBjYW5EcmFnOiBib29sZWFuID0gdHJ1ZTsgLy90aGlzIGlzIGR1bW4gYnV0IHdvcmsgYXJvdW5kIGZvciBub3cgKGZvciBtYWluIG1kaSB3aW5kb3cgd2hlcmUgd2UgZG9uJ3Qgd2FudCB0byBkcmFnKVxuICBAQ29udGVudENoaWxkKCdkcmFnZ2FibGVQYW5lbCcsIHsgcmVhZDogRWxlbWVudFJlZiB9KSBkcmFnZ2FibGVQYW5lbDogRWxlbWVudFJlZjtcbiAgQENvbnRlbnRDaGlsZCgnbXlNb2RhbCcsIHsgcmVhZDogRWxlbWVudFJlZiB9KSBwYXJlbnRQYW5lbDogRWxlbWVudFJlZjtcblxuICBtb3VzZURvd25IYW5kbGVyOiAoZXZlbnQpID0+IHZvaWQ7XG4gIG1vdXNlTW92ZUhhbmRsZXI6IChldmVudCkgPT4gdm9pZDtcbiAgbW91c2VVcEhhbmRsZXI6IChldmVudCkgPT4gdm9pZDtcblxuICBwcml2YXRlIGNhblRyYWNrTW91c2VNb3ZlOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgbW91c2VQb3NpdGlvbjogUG9zaXRpb24gPSB7XG4gICAgeDogMCxcbiAgICB5OiAwXG4gIH07XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIHJlbmRlcmVyOiBSZW5kZXJlcjIsXG4gICAgcHVibGljIG5nWm9uZTogTmdab25lLFxuICAgIHByaXZhdGUgc2Vzc2lvblNlcnZpY2U6IFNlc3Npb25TZXJ2aWNlKSB7XG4gICAgICB0aGlzLm1vdXNlRG93bkhhbmRsZXIgPSAoZXZlbnQpID0+IHRoaXMub25Nb3VzZURvd25IYW5kbGVyKGV2ZW50KTtcbiAgICAgIHRoaXMubW91c2VNb3ZlSGFuZGxlciA9IF8udGhyb3R0bGUoKGV2ZW50KSA9PiB0aGlzLm9uTW91c2VNb3ZlSGFuZGxlcihldmVudCksNzUpO1xuICAgICAgdGhpcy5tb3VzZVVwSGFuZGxlciA9IChldmVudCkgPT4gdGhpcy5vbk1vdXNlVXBIYW5kbGVyKGV2ZW50KTtcbiAgfVxuXG4gIHB1YmxpYyBhZGREcmFnTGlzdGVuZXJzKCkge1xuICAgIGxldCBkcmFnRWxlbWVudDogSFRNTEVsZW1lbnQgPSB0aGlzLmdldERyYWdFbGVtZW50KCk7XG5cbiAgICBpZiAoZHJhZ0VsZW1lbnQpIHtcbiAgICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgICAgICBkcmFnRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm1vdXNlRG93bkhhbmRsZXIsIHRydWUpO1xuICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm1vdXNlVXBIYW5kbGVyLCB0cnVlKTtcbiAgICAgICAgICBkcmFnRWxlbWVudCA9IG51bGw7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVtb3ZlRHJhZ0xpc3RlbmVycygpIHtcbiAgICBsZXQgZHJhZ0VsZW1lbnQ6IEhUTUxFbGVtZW50ID0gdGhpcy5nZXREcmFnRWxlbWVudCgpO1xuXG4gICAgaWYgKGRyYWdFbGVtZW50KSB7XG4gICAgICAgIGRyYWdFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMubW91c2VEb3duSGFuZGxlciwgdHJ1ZSk7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMubW91c2VNb3ZlSGFuZGxlciwgdHJ1ZSk7IC8vIMOlwr/CtcOjwoHCrsOjwoHCn8OjwoLCgcOnwr3CrsOjwoHChMOjwoHCpsOjwoHCisOjwoHCj1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5tb3VzZVVwSGFuZGxlciwgdHJ1ZSk7XG4gICAgICAgIGRyYWdFbGVtZW50ID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xuICAgIHRoaXMuYWRkRHJhZ0xpc3RlbmVycygpO1xuICAgIGlmKHRoaXMuaXNWaWV3KXtcbiAgICAgIHRoaXMucGFyZW50RWxlbWVudCA9IHRoaXMucGFyZW50UGFuZWwubmF0aXZlRWxlbWVudDtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIHRoaXMucGFyZW50RWxlbWVudCA9IHRoaXMucGFyZW50UGFuZWwubmF0aXZlRWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudDsvL2dldCBkaXYoJ21vZGFsLWRpYWxvZycpXG4gICAgfVxuICAgIGlmICh0aGlzLmNhbkRyYWcgJiYgdGhpcy5wYXJlbnRFbGVtZW50ICE9IG51bGwpIHtcbiAgICAgIC8vIGNvbnN0IGJvdW5kID0gdGhpcy5nZXRCb3VuZCgodGhpcy5wYXJlbnRQYW5lbC5uYXRpdmVFbGVtZW50IGFzIEhUTUxFbGVtZW50KS5maXJzdENoaWxkIGFzIEhUTUxFbGVtZW50KTtcbiAgICAgIC8vIGNvbnNvbGUuZXJyb3IoYm91bmQpO1xuICAgICAgLy90aGlzLnBhcmVudFBhbmVsLm5hdGl2ZUVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgICAvL3RoaXMuYXBwbHlUcmFuc2xhdGUoYm91bmQueCwgYm91bmQueSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY2FuRHJhZyA9IGZhbHNlO1xuICAgIH1cblxuICB9XG5cbiAgcHVibGljIG5nT25EZXN0cm95KCk6IHZvaWQge1xuICAgIHRoaXMucmVtb3ZlRHJhZ0xpc3RlbmVycygpO1xuXG4gICAgZGVsZXRlIHRoaXMucmVuZGVyZXI7XG4gICAgZGVsZXRlIHRoaXMubmdab25lO1xuICAgIGRlbGV0ZSB0aGlzLmRyYWdnYWJsZVBhbmVsO1xuICAgIGRlbGV0ZSB0aGlzLm1vdXNlRG93bkhhbmRsZXI7XG4gICAgZGVsZXRlIHRoaXMubW91c2VNb3ZlSGFuZGxlcjtcbiAgICBkZWxldGUgdGhpcy5tb3VzZVVwSGFuZGxlcjtcbiAgICBkZWxldGUgdGhpcy5wYXJlbnRQYW5lbDtcbiAgfVxuXG4gIG9uTW91c2VEb3duSGFuZGxlcihldmVudDogYW55KSB7XG4gICAgbGV0IGRyYWdFbGVtZW50OiBIVE1MRWxlbWVudCA9IHRoaXMuZ2V0RHJhZ0VsZW1lbnQoKTtcblxuICAgIGlmIChkcmFnRWxlbWVudCkge1xuICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMubW91c2VNb3ZlSGFuZGxlciwgdHJ1ZSk7XG4gICAgICAgICAgZHJhZ0VsZW1lbnQgPSBudWxsO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMubW91c2VQb3NpdGlvbiA9IHtcbiAgICAgIHg6IGV2ZW50LnBhZ2VYLFxuICAgICAgeTogZXZlbnQucGFnZVlcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMuY2FuRHJhZykge1xuICAgICAgaWYodGhpcy5pc1ZpZXcpey8vZm9yIG1haW4gZGlhbG9nXG4gICAgICAgIGNvbnN0IGJvdW5kID0gdGhpcy5nZXRCb3VuZCh0aGlzLnBhcmVudEVsZW1lbnQpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMucGFyZW50RWxlbWVudCwgXCJwb3NpdGlvblwiLCBcImFic29sdXRlXCIpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMucGFyZW50RWxlbWVudCwgXCJtYXJnaW5cIiwgXCIwXCIpO1xuICAgICAgICB0aGlzLmFwcGx5VHJhbnNsYXRlKGJvdW5kLngsIGJvdW5kLnkpO1xuICAgICAgICB0aGlzLm1vdmVXaW5kb3dUb1RvcCgpO1xuICAgICAgICB0aGlzLmNhblRyYWNrTW91c2VNb3ZlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGVsc2V7Ly9mb3IgZXJyb3IvaW5mbyBkaWFsb2dcbiAgICAgICAgY29uc3QgYm91bmQgPSB0aGlzLmdldEJvdW5kKHRoaXMucGFyZW50RWxlbWVudCk7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IHRoaXMucGFyZW50RWxlbWVudC5vZmZzZXRIZWlnaHQgKyAncHgnO1xuICAgICAgICBjb25zdCB3aWR0aCA9IHRoaXMucGFyZW50RWxlbWVudC5vZmZzZXRXaWR0aCArICdweCc7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5wYXJlbnRFbGVtZW50LCBcInBvc2l0aW9uXCIsIFwiYWJzb2x1dGVcIik7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5wYXJlbnRFbGVtZW50LCBcIm1hcmdpblwiLCBcIjBcIik7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5wYXJlbnRFbGVtZW50LCdoZWlnaHQnLCBoZWlnaHQpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMucGFyZW50RWxlbWVudCwnd2lkdGgnLCB3aWR0aCk7XG4gICAgICAgIHRoaXMuYXBwbHlUcmFuc2xhdGUoYm91bmQueCwgYm91bmQueSk7XG4gICAgICAgIHRoaXMuY2FuVHJhY2tNb3VzZU1vdmUgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG9uTW91c2VNb3ZlSGFuZGxlcihldmVudDogTW91c2VFdmVudCkge1xuICAgIGlmICh0aGlzLmNhbkRyYWcgJiYgdGhpcy5jYW5UcmFja01vdXNlTW92ZSkge1xuICAgICAgY29uc3QgY3VycmVudE1vdXNlUG9zaXRpb246IFBvc2l0aW9uID0ge1xuICAgICAgICB4OiBldmVudC5wYWdlWCxcbiAgICAgICAgeTogZXZlbnQucGFnZVlcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGlmZlggPSBjdXJyZW50TW91c2VQb3NpdGlvbi54IC0gdGhpcy5tb3VzZVBvc2l0aW9uLng7XG4gICAgICBjb25zdCBkaWZmWSA9IGN1cnJlbnRNb3VzZVBvc2l0aW9uLnkgLSB0aGlzLm1vdXNlUG9zaXRpb24ueTtcblxuICAgICAgY29uc3QgcGFyZW50Qm91bmQgPSB0aGlzLmdldEJvdW5kKHRoaXMucGFyZW50RWxlbWVudCk7XG5cbiAgICAgIGNvbnN0IG5ld1ggPSBwYXJlbnRCb3VuZC54ICsgZGlmZlg7XG4gICAgICBjb25zdCBuZXdZID0gcGFyZW50Qm91bmQueSArIGRpZmZZO1xuICAgICAgdGhpcy5hcHBseVRyYW5zbGF0ZShuZXdYLCBuZXdZKTtcbiAgICAgIHRoaXMubW91c2VQb3NpdGlvbiA9IGN1cnJlbnRNb3VzZVBvc2l0aW9uO1xuICAgIH1cbiAgfVxuXG4gIG9uTW91c2VVcEhhbmRsZXIoZXZlbnQ6IGFueSkge1xuICAgIGxldCBkcmFnRWxlbWVudDogSFRNTEVsZW1lbnQgPSB0aGlzLmdldERyYWdFbGVtZW50KCk7XG5cbiAgICBpZiAoZHJhZ0VsZW1lbnQpIHtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5tb3VzZU1vdmVIYW5kbGVyLCB0cnVlKTtcbiAgICAgICAgZHJhZ0VsZW1lbnQgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNhbkRyYWcgJiYgdGhpcy5jYW5UcmFja01vdXNlTW92ZSkge1xuICAgICAgdGhpcy5jYW5UcmFja01vdXNlTW92ZSA9IGZhbHNlO1xuICAgIH1cblxuICB9XG5cbiAgb25DbGljayhldmVudDogTW91c2VFdmVudCkge1xuICAgIGlmICh0aGlzLmNhbkRyYWcpIHtcbiAgICAgIGlmKHRoaXMuaXNWaWV3KSB0aGlzLm1vdmVXaW5kb3dUb1RvcCgpO1xuICAgIH1cbiAgfVxuXG4gIGFwcGx5VHJhbnNsYXRlKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgaWYgKHkgPiAwKSB7XG4gICAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgIGxldCB0b3A6IG51bWJlciA9IDA7XG4gICAgICAgIC8vIGxldCBsZWZ0OiBudW1iZXIgPSAwO1xuXG4gICAgICAgIC8vIFRoaXMgaXMgaGVpZ2h0IG9mIGFwcCBoZWFkZXJcbiAgICAgICAgbGV0IHRvcE1heCA9IDgyO1xuXG4gICAgICAgIGlmKHRoaXMuaXNWaWV3KSB7XG4gICAgICAgICAgdG9wID0gTWF0aC5tYXgoeSwgdG9wTWF4KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b3AgPSBNYXRoLm1heCh5LCAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnNlc3Npb25TZXJ2aWNlLmRpYWxvZ01heFRvcFBvc2l0aW9uID4gMCAmJiB0b3AgPiB0aGlzLnNlc3Npb25TZXJ2aWNlLmRpYWxvZ01heFRvcFBvc2l0aW9uKSB7XG4gICAgICAgICAgdG9wID0gdGhpcy5zZXNzaW9uU2VydmljZS5kaWFsb2dNYXhUb3BQb3NpdGlvbjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIzE1ODc6IGluIHRoZSBhcy1pcywgdGhlcmUgaXMgbm8gbGltaXQgdG8gd2hlcmUgeW91IGNhbiBkcmFnIHRoZSB3aW5kb3cgdG8gdGhlIGxlZnQvcmlnaHRcbiAgICAgICAgLy9sZWZ0ID0gTWF0aC5tYXgoeCwgMCk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLnBhcmVudEVsZW1lbnQsICd0b3AnLCB0b3AgKyAncHgnKTtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLnBhcmVudEVsZW1lbnQsICdsZWZ0JywgeCArICdweCcpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgbW92ZVdpbmRvd1RvVG9wKCkge1xuICAgIHRoaXMuc2Vzc2lvblNlcnZpY2UuZ2V0TWNvQ29udGFpbmVyKCkucmVTdGFja1ZpZXcodGhpcy52aWV3SWQsIHRoaXMuc2NyZWVuSW5kZXgpO1xuICB9XG5cbiAgc2V0Vmlld0lkKGlkOiBzdHJpbmcpIHtcbiAgICBpZiAoaWQgIT0gbnVsbCkge1xuICAgICAgdGhpcy52aWV3SWQgPSBpZDtcbiAgICB9XG4gIH1cblxuICBzZXRUYWJsZUlkKGlkOiBzdHJpbmcpIHtcbiAgICBpZiAoaWQgIT0gbnVsbCkge1xuICAgICAgdGhpcy50YWJsZUlkID0gaWQ7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXREcmFnRWxlbWVudCgpOiBIVE1MRWxlbWVudCB7XG4gICAgaWYgKHRoaXMudnREcmFnZ2FibGUgPT09IHRydWUgJiYgdGhpcy5kcmFnZ2FibGVQYW5lbCkge1xuICAgICAgcmV0dXJuIHRoaXMuZHJhZ2dhYmxlUGFuZWwubmF0aXZlRWxlbWVudDtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0Qm91bmQoZWw6IEhUTUxFbGVtZW50KTogUG9zaXRpb24ge1xuICAgIGNvbnN0IGJvdW5kID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgYXMgRE9NUmVjdDtcblxuICAgIHJldHVybiB7XG4gICAgICB4OiBib3VuZC54IHx8IGJvdW5kLmxlZnQsXG4gICAgICB5OiBib3VuZC55IHx8IGJvdW5kLnRvcFxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgSW5qZWN0YWJsZSwgVmlld0NvbnRhaW5lclJlZiwgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLCBUeXBlLCBDb21wb25lbnRSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0ICogYXMgXyBmcm9tIFwibG9kYXNoXCI7XG5pbXBvcnQgeyBWaWV3Q29tcG9uZW50IH0gZnJvbSAnLi92aWV3LmNvbXBvbmVudCc7XG5pbXBvcnQgeyBTZXNzaW9uU2VydmljZSB9IGZyb20gJy4uL3Nlc3Npb24vc2Vzc2lvbi5zZXJ2aWNlJztcblxuLyoqXG4gKiBDbGFzcyBmb3IgbWFuYWdpbmcgZHluYW1pYyB2aWV3c1xuICovXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBEeW5hbWljUGFnZXNTZXJ2aWNlIHtcbiAgcHJpdmF0ZSB2aWV3Q29udGFpbmVyOiBWaWV3Q29udGFpbmVyUmVmO1xuICBwcml2YXRlIGR5bmFtaWNWaWV3c01hcDogQXJyYXk8Q29tcG9uZW50UmVmPFZpZXdDb21wb25lbnQ+PiA9IFtdO1xuICBzdGF0aWMgb25DcmVhdGVWaWV3Q2xvc2VyOiAoc2Vzc2lvblNlcnZpY2U6IFNlc3Npb25TZXJ2aWNlLCB2aWV3VHlwZTogVHlwZTxWaWV3Q29tcG9uZW50Piwgcm91dGVJZDogc3RyaW5nKSA9PiB2b2lkID0gbnVsbDtcblxuICAvKipcbiAgICogXG4gICAqIEBwYXJhbSB2aWV3RmFjdG9yeSBcbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgdmlld0ZhY3Rvcnk6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcbiAgICBwcml2YXRlIHNlc3Npb25TZXJ2aWNlOiBTZXNzaW9uU2VydmljZVxuICApIHsgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBTZXQgdGhlIFtbdmlld0NvbnRhaW5lcl1dIHByb3BlcnR5IHRvIHJlZmVyZW5jZSBhIFtbVmlld0NvbnRhaW5lcl1dXG4gICAqIEBwYXJhbSB2aWV3Q29udGFpbmVyIFxuICAgKi9cbiAgcmVnaXN0ZXJWaWV3Q29udGFpbmVyKHZpZXdDb250YWluZXI6IFZpZXdDb250YWluZXJSZWYpIHtcbiAgICB0aGlzLnZpZXdDb250YWluZXIgPSB2aWV3Q29udGFpbmVyO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBbW1ZpZXdDb21wb25lbnRdXSBpbnN0YW5jZVxuICAgKiBAcGFyYW0gdmlld1R5cGUgXG4gICAqIEBwYXJhbSByb3V0ZUlkIFxuICAgKi9cbiAgY3JlYXRlRHluYW1pY1ZpZXcodmlld1R5cGU6IFR5cGU8Vmlld0NvbXBvbmVudD4sIHJvdXRlSWQ6IHN0cmluZyA9IG51bGwpOiBQcm9taXNlPFZpZXdDb21wb25lbnQ+IHtcbiAgICAvLyBGb3Igc3VwcHJlc3Mgd2FybmluZyAoQ2lyY3VsYXIgZGVwZW5kZW5jeSksIGl0IGlzIG5vdCBhYmxlIHRvIGNhbGwgVmlld0NvbXBvbmVudCdzIG1ldGhvZCBkaXJlY3RseSBoZXJlLlxuICAgIGlmKER5bmFtaWNQYWdlc1NlcnZpY2Uub25DcmVhdGVWaWV3Q2xvc2VyKSB7XG4gICAgICBEeW5hbWljUGFnZXNTZXJ2aWNlLm9uQ3JlYXRlVmlld0Nsb3Nlcih0aGlzLnNlc3Npb25TZXJ2aWNlLCB2aWV3VHlwZSwgcm91dGVJZCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc2Vzc2lvblNlcnZpY2UuZ2V0TWVzc2FnaW5nU2VydmljZSgpICE9IG51bGwpIHtcbiAgICAgIHRoaXMuc2Vzc2lvblNlcnZpY2UuZ2V0TWVzc2FnaW5nU2VydmljZSgpLnNldEZyZWV6ZVB1c2hTZXJ2aWNlKHRydWUpO1xuICAgIH1cblxuICAgIGNvbnN0IHZpZXcgPSB0aGlzLnZpZXdDb250YWluZXIuY3JlYXRlQ29tcG9uZW50KHRoaXMudmlld0ZhY3RvcnkucmVzb2x2ZUNvbXBvbmVudEZhY3Rvcnkodmlld1R5cGUpKTtcbiAgICB0aGlzLmR5bmFtaWNWaWV3c01hcC5wdXNoKHZpZXcpO1xuICAgIHZpZXcuaW5zdGFuY2UuaXNEeW5hbWljUGFnZSA9IHRydWU7XG5cbiAgICB2aWV3LmNoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2U8Vmlld0NvbXBvbmVudD4oKHIsIGopPT57XG4gICAgICAvL2hhcyByb3V0ZSBpZD9cbiAgICAgIGlmIChyb3V0ZUlkICE9IG51bGwgJiYgcm91dGVJZCAhPT0gXCJcIikge1xuICAgICAgICB2aWV3Lmluc3RhbmNlW1wicm91dGVJZFwiXSA9IHJvdXRlSWQ7XG4gICAgICB9XG5cbiAgICAgIGlmICh2aWV3Lmluc3RhbmNlLnZpZXdJc0luaXRpYWxpemVkID09PSB0cnVlKSB7XG4gICAgICAgIGlmICh0aGlzLnNlc3Npb25TZXJ2aWNlLmdldE1lc3NhZ2luZ1NlcnZpY2UoKSAhPSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5zZXNzaW9uU2VydmljZS5nZXRNZXNzYWdpbmdTZXJ2aWNlKCkuc2V0RnJlZXplUHVzaFNlcnZpY2UoZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgcih2aWV3Lmluc3RhbmNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHN1YiA9IHZpZXcuaW5zdGFuY2Uudmlld0luaXRpYWxpemVkLnN1YnNjcmliZSgoKT0+e1xuICAgICAgICAgIHN1Yi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmICh0aGlzLnNlc3Npb25TZXJ2aWNlLmdldE1lc3NhZ2luZ1NlcnZpY2UoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnNlc3Npb25TZXJ2aWNlLmdldE1lc3NhZ2luZ1NlcnZpY2UoKS5zZXRGcmVlemVQdXNoU2VydmljZShmYWxzZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcih2aWV3Lmluc3RhbmNlKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogRGVzdHJveSBbW1ZpZXdDb21wb25lbnRdXSBpbnN0YW5jZSByZWZlcmVuY2VcbiAgICogQHBhcmFtIHZpZXdUb1JlbW92ZSBcbiAgICogQHBhcmFtIGltbWVkaWF0ZVxuICAgKi9cbiAgcmVtb3ZlVmlldyh2aWV3VG9SZW1vdmU6IFZpZXdDb21wb25lbnQsIGltbWVkaWF0ZTogYm9vbGVhbikge1xuICAgIGNvbnN0IGRlYWRWaWV3ID0gXy5maW5kKHRoaXMuZHluYW1pY1ZpZXdzTWFwLCAodmlldzogQ29tcG9uZW50UmVmPFZpZXdDb21wb25lbnQ+KT0+e1xuICAgICAgcmV0dXJuIHZpZXcuaW5zdGFuY2UudW5pcXVlSWQgPT0gdmlld1RvUmVtb3ZlLnVuaXF1ZUlkO1xuICAgIH0pO1xuXG4gICAgdGhpcy5keW5hbWljVmlld3NNYXAgPSBfLmZpbHRlcih0aGlzLmR5bmFtaWNWaWV3c01hcCwgKHZpZXc6IENvbXBvbmVudFJlZjxWaWV3Q29tcG9uZW50Pik9PntcbiAgICAgIHJldHVybiB2aWV3Lmluc3RhbmNlLnVuaXF1ZUlkICE9IHZpZXdUb1JlbW92ZS51bmlxdWVJZDtcbiAgICB9KTtcblxuICAgIGlmICh2aWV3VG9SZW1vdmUuaXNEZXN0cm95ZWQgIT09IHRydWUgJiYgZGVhZFZpZXcgIT0gbnVsbCkge1xuICAgICAgaWYoaW1tZWRpYXRlKSB7XG4gICAgICAgIGRlYWRWaWV3LmRlc3Ryb3koKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGRlYWRWaWV3LmRlc3Ryb3koKTtcbiAgICAgICAgfSwgMSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBhcHBJbmplY3RvciB9IGZyb20gXCIuLi9zZXNzaW9uL2FwcC1pbmplY3RvclwiO1xuaW1wb3J0IHsgTWNvQ29udGFpbmVyU2VydmljZSB9IGZyb20gXCIuLi9tY28tY29udGFpbmVyL21jby1jb250YWluZXIuc2VydmljZVwiO1xuaW1wb3J0IHsgQmFzZUNvbXBvbmVudCB9IGZyb20gXCIuLi9iYXNlL2Jhc2UuY29tcG9uZW50XCI7XG5pbXBvcnQgeyBBdHRyaWJ1dGVzRW51bSB9IGZyb20gXCIuL2F0dHJpYnV0ZXMuZW51bVwiO1xuaW1wb3J0IHsgTWVudUl0ZW1Db21wb25lbnQgfSBmcm9tIFwiLi4vcG9wdXAtbWVudS9tZW51LWl0ZW0vbWVudS1pdGVtLmNvbXBvbmVudFwiO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSBcIi4vbG9nZ2VyXCI7XG5pbXBvcnQgeyBDb21ib0JveENvbXBvbmVudCB9IGZyb20gXCIuLi9jb21iby1ib3gvY29tYm8tYm94LmNvbXBvbmVudFwiO1xuaW1wb3J0IHsgVmFsdWVQYWlyIH0gZnJvbSBcIi4uL2NvbWJvLWJveC92YWx1ZS1wYWlyXCI7XG5pbXBvcnQgeyBDb250ZXh0TWVudVNlcnZpY2UgfSBmcm9tIFwiLi4vcG9wdXAtbWVudS9jb250ZXh0LW1lbnUuc2VydmljZVwiO1xuaW1wb3J0IHsgTWVudUl0ZW1CdWlsZGVyIH0gZnJvbSBcIi4uL3BvcHVwLW1lbnUvbWVudS1pdGVtLWJ1aWxkZXJcIjtcbmltcG9ydCB7IE5nWm9uZSB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5cbi8qKlxuICogRG9jdW1lbnQgb2JqZWN0IGNsYXNzIHRvIGFjY2VzcyB2aXJ0dWFsIERPTVxuICovXG5cbi8vIEBkeW5hbWljIC0tIHRoaXMgbGluZSBjb21tZW50IGlzIG5lY2Vzc2FyeSB0byBwcmV2ZW50IHBhY2thZ3IgZXJyb3JcbmV4cG9ydCBjbGFzcyBVaURvY3VtZW50IHtcbiAgc3RhdGljIG1lbnVJdGVtRWxlbWVudE1hcDogTWFwPHN0cmluZywgTWVudUl0ZW1Db21wb25lbnQ+ID0gbnVsbDtcblxuICAvKipcbiAgICogR2V0IFtbTWVudUl0ZW1Db21wb25lbnRdXSBieSBpZCBrZXkgaW4gW1ttZW51SXRlbUVsZW1lbnRNYXBdXVxuICAgKiBAcGFyYW0gaWRcbiAgICovXG4gIHN0YXRpYyBnZXRNZW51Q29tcG9uZW50KGlkOiBzdHJpbmcpOiBhbnkge1xuICAgIGlmICh0aGlzLm1lbnVJdGVtRWxlbWVudE1hcCA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5tZW51SXRlbUVsZW1lbnRNYXAuZ2V0KGlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbGlhcyBmb3IgW1tmaW5kRWxlbWVudEJ5SWRdXVxuICAgKiBAcGFyYW0gaWRcbiAgICovXG4gIHN0YXRpYyBnZXRFbGVtZW50QnlJZChpZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIFVpRG9jdW1lbnQuZmluZEVsZW1lbnRCeUlkKGlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWFyY2ggZm9yIGFuZCByZXR1cm4gYSBjb21wb25lbnQgYnkgaWRcbiAgICogQHBhcmFtIGlkIFZpZXdDb21wb25lbnQgaWRcbiAgICovXG4gIHN0YXRpYyBmaW5kRWxlbWVudEJ5SWQoaWQ6IHN0cmluZyk6IEJhc2VDb21wb25lbnQge1xuICAgIGlmIChpZCA9PSBudWxsKSByZXR1cm4gbnVsbDtcblxuICAgIC8vV0FSTklORzogV2UgY2FuJ3QgY2FjaGUgaGVyZSBhcyB3ZSBkb24ndCBpZCBoZXJlIGlzIE5PVCB1bmlxdWUhIVxuICAgIGxldCBjb21wOiBCYXNlQ29tcG9uZW50ID0gbnVsbDtcblxuICAgIGlmICghYXBwSW5qZWN0b3IoKSkgcmV0dXJuO1xuICAgIGNvbnN0IG1jb0NvbnRhaW5lcjogTWNvQ29udGFpbmVyU2VydmljZSA9IGFwcEluamVjdG9yKCkuZ2V0KE1jb0NvbnRhaW5lclNlcnZpY2UpO1xuXG4gICAgaWYgKG1jb0NvbnRhaW5lciAhPSBudWxsKSB7XG4gICAgICBjb21wID0gbWNvQ29udGFpbmVyLmdldFZpZXdCeUlkKGlkKTtcblxuICAgICAgaWYgKGNvbXAgPT0gbnVsbCAmJiBtY29Db250YWluZXIuYWN0aXZlVmlldygpICE9IG51bGwpIHtcbiAgICAgICAgY29tcCA9IG1jb0NvbnRhaW5lci5hY3RpdmVWaWV3KCkuZmluZEVsZW1lbnRCeUlkKGlkKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNvbXAgPT0gbnVsbCkge1xuICAgICAgICBjb21wID0gdGhpcy5nZXRNZW51Q29tcG9uZW50KGlkKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNvbXAgPT0gbnVsbCkge1xuICAgICAgICBjb25zdCB2aWV3cyA9IG1jb0NvbnRhaW5lci5nZXRWaWV3cygpO1xuXG4gICAgICAgIGZvciAobGV0IHZpZXcgb2Ygdmlld3MpIHtcbiAgICAgICAgICBpZiAodmlldy5pZCA9PT0gaWQpIHtcbiAgICAgICAgICAgIGNvbXAgPSB2aWV3O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb21wID0gdmlldy5maW5kRWxlbWVudEJ5SWQoaWQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChjb21wICE9IG51bGwpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvL291ciBjb21wb25lbnQgaXMgaW4gYSBzdWJ2aWV3P1xuICAgICAgaWYgKGNvbXAgPT0gbnVsbCAmJiBtY29Db250YWluZXIuZ2V0QWN0aW9uRm9yd2FyZEhhbmRsZXJNYXAoKSAhPSBudWxsKSB7XG4gICAgICAgIGNvbnN0IGFjdGlvbkZvcndhcmRJdCA9IG1jb0NvbnRhaW5lci5nZXRBY3Rpb25Gb3J3YXJkSGFuZGxlck1hcCgpLnZhbHVlcygpO1xuICAgICAgICBsZXQgZm9yd2FyZEl0UmVzdWx0ID0gYWN0aW9uRm9yd2FyZEl0Lm5leHQoKTtcblxuICAgICAgICB3aGlsZShmb3J3YXJkSXRSZXN1bHQuZG9uZSAhPT0gdHJ1ZSkge1xuICAgICAgICAgIGNvbXAgPSBmb3J3YXJkSXRSZXN1bHQudmFsdWUuZmluZEVsZW1lbnRCeUlkKGlkKTtcblxuICAgICAgICAgIGlmIChjb21wICE9IG51bGwpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGZvcndhcmRJdFJlc3VsdCA9IGFjdGlvbkZvcndhcmRJdC5uZXh0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29tcCA9IHRoaXMuZ2V0TWVudUNvbXBvbmVudChpZCk7XG4gICAgfVxuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy9XQVJOSU5HISEhISEhISEhISEhISEhISEhISEhISFcbiAgICAvL01lbnVJdGVtPz8/PyBmb3Igc3BlY2lhbCBjYXNlIHdoZXJlIHJpZ2h0IGNsaWNrIGV2ZW50IG9mIGlubmVyIGNvbXAgb2YgdGFibGUgY29sdW1uXG4gICAgLy9pcyB0cmlnZ2VyIGJlZm9yZSByb3cgY29udGV4dCBtZW51IGlzIHRyaWdnZXIgKHJvdyBjb250ZXh0IG1lbnUgZGlzcGxheSBwb3B1cCBtZW51KVxuICAgIC8vdGhpcyBzcGVjaWFsIGNvbXBvbmVudCBpcyBNZW51SXRlbUJ1aWxkZXIgc28gaXQgb25seSBzdXBwb3J0IHNldEF0dHJpYnV0ZVxuICAgIGlmIChjb21wID09IG51bGwpIHtcbiAgICAgIGNvbnN0IG1jb0NvbnRhaW5lcjogTWNvQ29udGFpbmVyU2VydmljZSA9IGFwcEluamVjdG9yKCkuZ2V0KE1jb0NvbnRhaW5lclNlcnZpY2UpO1xuXG4gICAgICBpZiAobWNvQ29udGFpbmVyICE9IG51bGwpIHtcbiAgICAgICAgY29uc3QgYWN0aXZlVmlldyA9IG1jb0NvbnRhaW5lci5hY3RpdmVWaWV3KCk7XG5cbiAgICAgICAgaWYgKGFjdGl2ZVZpZXcgIT0gbnVsbCAmJiBhY3RpdmVWaWV3Lmhhc1BvcHVwTWVudSgpKSB7XG4gICAgICAgICAgY29uc3QgY29udGV4dE1lbnVTZXJ2aWNlID0gYXBwSW5qZWN0b3IoKS5nZXQoQ29udGV4dE1lbnVTZXJ2aWNlKTtcblxuICAgICAgICAgIGlmIChjb250ZXh0TWVudVNlcnZpY2UgIT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3QgcG9wdXBNZW51SXRlbXMgPSBjb250ZXh0TWVudVNlcnZpY2UuZ2V0Q29udGV4dE1lbnVJdGVtcyhhY3RpdmVWaWV3LmdldEZpcnN0UG9wdXBNZW51SWQoKSk7XG5cbiAgICAgICAgICAgIGlmIChwb3B1cE1lbnVJdGVtcyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIGNvbnN0IG1lbnVJdGVtID0gcG9wdXBNZW51SXRlbXMuZmluZChpdGVtPT57XG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uaWQgPT09IGlkO1xuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBpZiAobWVudUl0ZW0gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vZmFrZSBjb21wb25lbnQsIHNwZWNpZmljYWxseSBmb3IgbWVudVxuICAgICAgICAgICAgICAgIGNvbXAgPSBNZW51SXRlbUJ1aWxkZXIuZnJvbU1lbnVJdGVtKG1lbnVJdGVtKSBhcyBhbnk7XG5cbiAgICAgICAgICAgICAgICBjb250ZXh0TWVudVNlcnZpY2UuX3RyYWNrTWVudUl0ZW1CdWlsZGVyRm9yTWVtUmVsZWFzZShjb21wIGFzIGFueSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY29tcDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBjb21wb25lbnRcbiAgICogQHJldHVybnMgT2JqZWN0IEpTT04gbWV0YWRhdGEgZm9yIHRoaXMgY29tcG9uZW50XG4gICAqL1xuICBzdGF0aWMgdG9Kc29uKCk6IHt9IHtcbiAgICBjb25zdCB2aWV3cyA9IGFwcEluamVjdG9yKCkuZ2V0KE1jb0NvbnRhaW5lclNlcnZpY2UpLmdldFZpZXdzKCk7XG4gICAgY29uc3QganNvbiA9IHt9O1xuXG4gICAgZm9yIChsZXQgdmlldyBvZiB2aWV3cykge1xuICAgICAganNvblt2aWV3LmdldElkKCldID0gdmlldy50b0pzb24oKTtcbiAgICB9XG5cbiAgICByZXR1cm4ganNvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgYXR0cmlidXRlIHdpdGggdmFsdWUgb24gY29tcG9uZW50IGJ5IGlkXG4gICAqIEBwYXJhbSBpZCBDb21wb25lbnQgaWRcbiAgICogQHBhcmFtIGF0dHJpYnV0ZU5hbWUgTmFtZSBvZiBhdHRyaWJ1dGUgdG8gc2V0XG4gICAqIEBwYXJhbSB2YWx1ZSBWYWx1ZSBvZiBhdHRyaWJ1dGUgdG8gc2V0XG4gICAqL1xuICBzdGF0aWMgc2V0RWxlbWVudEF0dHJpYnV0ZShpZDogc3RyaW5nLCBhdHRyaWJ1dGVOYW1lOiBzdHJpbmcgfCBBdHRyaWJ1dGVzRW51bSwgdmFsdWU6IGFueSkge1xuICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmdldEVsZW1lbnRCeUlkKGlkKTtcblxuICAgIGlmIChlbGVtZW50ICE9IG51bGwpIHtcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUsIHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgTG9nZ2VyLndhcm4oYFVuYWJsZSB0byBzZXQgYXR0cmlidXRlIHRvIGVsZW1lbnQgaWQ6ICR7aWR9LCBkb2Vzbid0IGV4aXN0c2ApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG9mIGFuIGF0dHJpYnV0ZSBpZiBpdCBleGlzdHMsIG90aGVyd2lzZSByZXR1cm4gbnVsbFxuICAgKiBAcGFyYW0gaWQgQ29tcG9uZW50IGlkXG4gICAqIEBwYXJhbSBhdHRyaWJ1dGVOYW1lIE5hbWUgb2YgYXR0cmlidXRlIHZhbHVlIHRvIGdldFxuICAgKi9cbiAgc3RhdGljIGdldEVsZW1lbnRBdHRyaWJ1dGUoaWQ6IHN0cmluZywgYXR0cmlidXRlTmFtZTogc3RyaW5nIHwgQXR0cmlidXRlc0VudW0pIHtcbiAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5nZXRFbGVtZW50QnlJZChpZCk7XG5cbiAgICBpZiAoZWxlbWVudCAhPSBudWxsKSB7XG4gICAgICByZXR1cm4gZWxlbWVudC5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIExvZ2dlci53YXJuKGBVbmFibGUgdG8gZ2V0IGF0dHJpYnV0ZSB0byBlbGVtZW50IGlkOiAke2lkfSwgZG9lc24ndCBleGlzdHNgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSBbW01lbnVJdGVtQ29tcG9uZW50XV0gdG8gaW50ZXJuYWwgW1ttZW51SXRlbUVsZW1lbnRNYXBdXVxuICAgKiBAcGFyYW0gaWQgS2V5IHRvIHVzZSBpbiBtYXAgZm9yIG1lbnUgaXRlbSBiZWluZyBhZGRlZFxuICAgKiBAcGFyYW0gbWVudUl0ZW1FbGVtZW50IENvbXBvbmVudCB0byBhZGQgdG8gbWFwXG4gICAqL1xuICBzdGF0aWMgcmVnaXN0ZXJNZW51SXRlbUVsZW1lbnQoaWQ6IHN0cmluZywgbWVudUl0ZW1FbGVtZW50OiBNZW51SXRlbUNvbXBvbmVudCkge1xuICAgIGlmICh0aGlzLm1lbnVJdGVtRWxlbWVudE1hcCA9PSBudWxsKSB7XG4gICAgICB0aGlzLm1lbnVJdGVtRWxlbWVudE1hcCA9IG5ldyBNYXAoKTtcbiAgICB9XG5cbiAgICB0aGlzLm1lbnVJdGVtRWxlbWVudE1hcC5zZXQoaWQsIG1lbnVJdGVtRWxlbWVudCk7XG5cbiAgICAvL3RyYWNrIG1lbnUgaXRlbSBmb3Igc2VuZGluZyB0byBzZXJ2ZXJcbiAgICBpZiAobWVudUl0ZW1FbGVtZW50Lml0ZW0gIT0gbnVsbCAmJiBtZW51SXRlbUVsZW1lbnQuaXRlbS5wYXJlbnRTY3JlZW5JZCAhPSBudWxsKSB7XG4gICAgICBjb25zdCBtY29Db250YWluZXI6IE1jb0NvbnRhaW5lclNlcnZpY2UgPSBhcHBJbmplY3RvcigpLmdldChNY29Db250YWluZXJTZXJ2aWNlKTtcblxuICAgICAgaWYgKG1jb0NvbnRhaW5lciAhPSBudWxsKSB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSBtY29Db250YWluZXIuZ2V0Vmlld0J5SWQobWVudUl0ZW1FbGVtZW50Lml0ZW0ucGFyZW50U2NyZWVuSWQpO1xuXG4gICAgICAgIGlmIChhY3RpdmVWaWV3ICE9IG51bGwpIHtcbiAgICAgICAgICBhY3RpdmVWaWV3LnRyYWNrSW5hY3RpdmVNZW51SXRlbShtZW51SXRlbUVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBbW01lbnVJdGVtQ29tcG9uZW50XV0gZnJvbSBpbnRlcm5hbCBbW21lbnVJdGVtRWxlbWVudE1hcF1dXG4gICAqIEBwYXJhbSBpZCBLZXkgb2YgbWVudSBpdGVtIHRvIHJlbW92ZSBmcm9tIG1hcFxuICAgKi9cbiAgc3RhdGljIHVucmVnaXN0ZXJNZW51SXRlbUVsZW1lbnQoaWQ6IHN0cmluZykge1xuICAgIGlmICh0aGlzLm1lbnVJdGVtRWxlbWVudE1hcCAhPSBudWxsKSB7XG4gICAgICB0aGlzLm1lbnVJdGVtRWxlbWVudE1hcC5kZWxldGUoaWQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIFtbQ29tYm9ib3hDb21wb25lbnRdXSB2YWx1ZXNcbiAgICogQHBhcmFtIGlkIENvbWJvYm94IGNvbXBvbmVudCBpZFxuICAgKiBAcGFyYW0gdmFsdWVzIEluaXRpYWwgdmFsdWVzIHRvIHNldCBvbiBjb21ib2JveCBjb21wb25lbnRcbiAgICovXG4gIHN0YXRpYyBpbml0aWFsaXplQ29tYm9Cb3hWYWx1ZXMoaWQ6IHN0cmluZywgdmFsdWVzOiBBcnJheTxWYWx1ZVBhaXI+KSB7XG4gICAgY29uc3QgY29tcDogQ29tYm9Cb3hDb21wb25lbnQgPSB0aGlzLmZpbmRFbGVtZW50QnlJZChpZCkgYXMgYW55O1xuXG4gICAgaWYgKGNvbXAgIT0gbnVsbCkge1xuICAgICAgY29tcC5pbml0aWFsaXplQ29tYm9ib3hWYWx1ZXModmFsdWVzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS53YXJuKFwiVW5hYmxlIHRvIGluaXRpYWxpZSBjb21ibzogXCIgKyBpZCk7XG4gICAgfVxuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIEZvY3VzIHRoZSBwYXJlbnQgdGFiIG9mIHRoaXMgW1tlbGVtZW50SWRdXVxuICAgKiBAcGFyYW0gZWxlbWVudElkIHRoZSBlbGVtZW50IGlkIHdoZXJlIHdlIHdhbnQgaXRzIHBhcmVudCB0YWIgdG8gYmUgZm9jdXNlZFxuICAgKi9cbiAgc3RhdGljIGZvY3VzUGFyZW50VGFiKGVsZW1lbnRJZDogc3RyaW5nKSB7XG4gICAgaWYgKGVsZW1lbnRJZCAhPSBudWxsKSB7XG4gICAgICBjb25zdCBjb21wID0gdGhpcy5maW5kRWxlbWVudEJ5SWQoZWxlbWVudElkKTtcblxuICAgICAgaWYgKGNvbXAgIT0gbnVsbCAmJiB0eXBlb2YgY29tcFtcImZvY3VzUGFyZW50VGFiXCJdID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgY29tcFtcImZvY3VzUGFyZW50VGFiXCJdKCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChjb21wICE9IG51bGwpIHtcbiAgICAgICAgYXBwSW5qZWN0b3IoKS5nZXQoTmdab25lKS5ydW5PdXRzaWRlQW5ndWxhcigoKT0+e1xuICAgICAgICAgIHNldFRpbWVvdXQoKCk9PntcbiAgICAgICAgICAgIGNvbXAuc2V0Rm9jdXMoKTtcbiAgICAgICAgICB9LCAxMDApO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIENvbXBvbmVudCxcbiAgSW5wdXQsXG4gIE9uSW5pdCxcbiAgRWxlbWVudFJlZixcbiAgVmlld0NoaWxkLFxuICBBZnRlclZpZXdJbml0LFxuICBJbmplY3QsXG4gIENoYW5nZURldGVjdG9yUmVmLFxuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgU2tpcFNlbGYsXG4gIE9wdGlvbmFsLFxuICBWaWV3Q29udGFpbmVyUmVmLFxuICBUZW1wbGF0ZVJlZixcbiAgQ29udGVudENoaWxkLFxuICBSZW5kZXJlcjIsXG4gIE91dHB1dCxcbiAgRXZlbnRFbWl0dGVyLFxuICBOZ1pvbmVcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBCYXNlQ29tcG9uZW50IH0gZnJvbSAnLi4vYmFzZS9iYXNlLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBTZXNzaW9uU2VydmljZSB9IGZyb20gJy4uL3Nlc3Npb24vc2Vzc2lvbi5zZXJ2aWNlJztcbmltcG9ydCB7IEluaXRpYWxQb3NpdGlvbiB9IGZyb20gJy4uL2Jhc2UvaW5pdGlhbC1wb3NpdGlvbic7XG5pbXBvcnQgeyBEcmFnZ2FibGVEaXJlY3RpdmUgfSBmcm9tICcuL2RyYWdnYWJsZS5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgRHluYW1pY1BhZ2VzU2VydmljZSB9IGZyb20gJy4uL3ZpZXcvZHluYW1pYy1wYWdlcy5zZXJ2aWNlJztcbmltcG9ydCB7IFRhYmxlQ29tcG9uZW50IH0gZnJvbSAnLi4vdGFibGUvdGFibGUuY29tcG9uZW50JztcbmltcG9ydCB7IFVpRG9jdW1lbnQgfSBmcm9tICcuLi9iYXNlL3VpLWRvY3VtZW50JztcblxuaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gnO1xuXG4vL3RoaXMgc3R1cGlkIHRoaW5nIGlzIG5lZWRlZCBiL2MgbmctcGFja2FnciBpcyBjb21wbGFpbmVkIGFib3V0IG5hbWVzcGFjZVxuaW1wb3J0ICogYXMgdGFiYmFibGVGUm9sbHVwIGZyb20gXCJ0YWJiYWJsZVwiO1xuaW1wb3J0IHsgSmF2YVV0aWxzIH0gZnJvbSAnLi4vamF2YS9qYXZhLXV0aWxzJztcblxuY29uc3QgdGFiYmFibGUgPSB0YWJiYWJsZUZSb2xsdXA7XG5cbmRlY2xhcmUgdmFyICQ6IGFueTtcblxuLypcbiAqIE1vZGFsIG1hcmt1cCBwbGFjZW1lbnQuXG4gKiBBbHdheXMgdHJ5IHRvIHBsYWNlIGEgbW9kYWwncyBIVE1MIGNvZGUgaW4gYSB0b3AtbGV2ZWwgcG9zaXRpb24gaW4geW91ciBkb2N1bWVudCB0b1xuICogYXZvaWQgb3RoZXIgY29tcG9uZW50cyBhZmZlY3RpbmcgdGhlIG1vZGFsJ3MgYXBwZWFyYW5jZSBhbmQvb3IgZnVuY3Rpb25hbGl0eS5cbiovXG5cbi8qKlxuICogQ2xhc3MgZm9yIGRpYWxvZyBjb21wb25lbnRcbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAndnQtZGlhbG9nJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2RpYWxvZy5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2RpYWxvZy5jb21wb25lbnQuY3NzJ10sXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG59KVxuZXhwb3J0IGNsYXNzIERpYWxvZ0NvbXBvbmVudCBleHRlbmRzIEJhc2VDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQge1xuICBAVmlld0NoaWxkKCdtb2RhbEJvZHknKSBib2R5OiBFbGVtZW50UmVmO1xuICBAVmlld0NoaWxkKFwibW9kYWxEaWFsb2dcIikgbW9kYWxEaWFsb2c6IEVsZW1lbnRSZWY7XG4gIEBWaWV3Q2hpbGQoXCJtb2RhbENvbnRlbnRcIikgbW9kYWxDb250ZW50OiBFbGVtZW50UmVmO1xuXG4gIEBJbnB1dCgpIHRpdGxlOiBTdHJpbmc7XG4gIEBJbnB1dCgpIGRyYWdnYWJsZTogYm9vbGVhbiA9IHRydWU7IC8vZGVmYXVsdCB0byB0cnVlXG4gIEBJbnB1dCgpIGluaXRpYWxQb3NpdGlvbjogSW5pdGlhbFBvc2l0aW9uO1xuXG4gIC8vbW9kYWwgaXMgZGVmYXVsdCB0byBmYWxzZSwgd2hlbiB0cnVlLCBpdCBpcyBibG9ja2luZ1xuICBASW5wdXQoKVxuICBzZXQgbW9kYWwobW9kYWw6IHN0cmluZyB8IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9tb2RhbCA9IG1vZGFsO1xuXG4gICAgdGhpcy51cGRhdGVNb2RhbERpYWxvZ1N0eWxlKCk7XG4gIH1cblxuICBnZXQgbW9kYWwoKSB7XG4gICAgcmV0dXJuIHRoaXMuX21vZGFsO1xuICB9XG5cbiAgcHJpdmF0ZSBfbW9kYWw6IHN0cmluZyB8IGJvb2xlYW4gPSBcImZhbHNlXCI7XG5cbiAgQElucHV0KCkgc2V0IGNlbnRlcmVkKGJvbzogYm9vbGVhbiB8IHN0cmluZykge1xuICAgIGlmICh0eXBlb2YgYm9vID09PSAnc3RyaW5nJykge1xuICAgICAgdGhpcy5fY2VudGVyID0gYm9vID09PSAndHJ1ZScgPyB0cnVlIDogZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2NlbnRlciA9IGJvbztcbiAgICB9XG4gIH1cblxuICAvL2FsaWFzXG4gIEBJbnB1dCgpIHNldCB3aW5kb3dUaXRsZSh0aXRsZTogc3RyaW5nKSB7XG4gICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICB9XG5cbiAgX2NlbnRlcjogYm9vbGVhbiA9IGZhbHNlO1xuICBASW5wdXQoKSBtb2RhbFNpemU6IHN0cmluZyA9ICdsYXJnZSc7XG5cbiAgQElucHV0KCkgcmVzaXplYWJsZTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIEBPdXRwdXQoKSBvbkNsb3Npbmc6IEV2ZW50RW1pdHRlcjx2b2lkPiA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcblxuICBAVmlld0NoaWxkKCdteU1vZGFsJywge3JlYWQ6IEVsZW1lbnRSZWZ9KSBtb2RhbEVsZW1lbnQ6IEVsZW1lbnRSZWY7XG4gIEBWaWV3Q2hpbGQoJ3ZpZXdDb250YWluZXInLCB7cmVhZDogVmlld0NvbnRhaW5lclJlZn0pIHZpZXdDb250YWluZXI6IFZpZXdDb250YWluZXJSZWY7XG4gIEBWaWV3Q2hpbGQoJ2RyYWdnYWJsZVBhbmVsJywge3JlYWQ6IFZpZXdDb250YWluZXJSZWZ9KSBkcmFnZ2FibGVQYW5lbDogVmlld0NvbnRhaW5lclJlZjtcbiAgQFZpZXdDaGlsZChEcmFnZ2FibGVEaXJlY3RpdmUpIGRyYWdnYWJsZURpcmVjdGl2ZTogRHJhZ2dhYmxlRGlyZWN0aXZlO1xuXG4gIG1vZGFsV2lkdGg6IG51bWJlciB8IHN0cmluZyA9ICcxMDAlJztcbiAgbW9kYWxIZWlnaHQ6IG51bWJlciB8IHN0cmluZyA9ICcxMDAlJztcbiAgbW9kYWxCb2R5SGVpZ2h0OiBudW1iZXIgfCBzdHJpbmcgPSAnMTAwJSc7XG4gIGlzTWF4aW1pemU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgaXNVbk1heGltaXplOiBib29sZWFuID0gZmFsc2U7XG4gIGNvbnRlbnRXaWR0aDogc3RyaW5nO1xuICBjb250ZW50SGVpZ2h0OiBzdHJpbmc7XG5cbiAgc3RhdGljIHJlYWRvbmx5IFVOTUFYSU1JWkVfSEVHSFQ6IHN0cmluZyA9XCIyMHB4XCI7XG5cbiAgLy8gw6fClMK7w6nCncKiw6PCg8Kqw6PCgsK1w6PCgsKkw6PCgsK6w6XCr8K+w6XCv8KcIFN0YXJ0XG4gIEBJbnB1dCgpIHJlc2l6ZURpYWxvZzogYm9vbGVhbiA9IGZhbHNlO1xuICBtb2RhbEJvZHlNaW5IZWlnaHQ6IHN0cmluZyA9IG51bGw7XG4gIG1vZGFsQm9keURpdkhlaWdodDogc3RyaW5nID0gbnVsbDtcbiAgbW9kYWxCb2R5RGl2V2lkdGg6IHN0cmluZyA9IG51bGw7XG4gIG1vZGFsQm9keVBlcmNlbnRIZWlnaHQ6IHN0cmluZyA9IG51bGw7XG4gIC8vIMOnwpTCu8Opwp3CosOjwoPCqsOjwoLCtcOjwoLCpMOjwoLCusOlwq/CvsOlwr/CnCBFbmRcbiAgcmVzaXplRmxnOiBib29sZWFuID0gZmFsc2U7XG5cbiAgbW9kYWxPcmlnaW5hbExlZnQ6IG51bWJlciA9IDA7XG4gIG1vZGFsT3JpZ2luYWxUb3A6IG51bWJlciA9IDA7XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgYnNNb2RhbENsYXNzID0gW1widnQtZGlhbG9nXCIsIFwibW9kYWxcIiwgXCJmYWRlXCIsIFwiaW5cIl07XG5cbiAgcHJpdmF0ZSB2aWV3Um91dGVVcmw6IHN0cmluZyA9ICcnO1xuXG4gIHByaXZhdGUgdmlld0lkOiBzdHJpbmc7XG4gIEBJbnB1dCgpIHRhYmxlSWQ6IHN0cmluZzsgLy/Do8KDwqrDo8KCwrXDo8KCwqTDo8KCwrrDpsKZwoLDo8KBwqvDpsKTwo3DpMK9wpzDo8KBwpnDo8KCwovDpcKvwr7DqMKxwqHDo8KBwqjDo8KBwqrDo8KCwovDo8KDwobDo8KDwrzDo8KDwpbDo8KDwqvDo8KCwr/Do8KCwrDDo8KBwq5JRFxuXG4gIHNjcmVlbkluZGV4OiBudW1iZXI7XG5cbiAgLy9zb3BoaWEgMTgwMzogdHJhY2sgZGlzYWJsZWQgZWxlbWVudCB0aGF0IGhhcyBlcnJvciBiYWNrZ3JvdW5kXG4gIF9kaXNhYmxlZEVycm9yRWxlbWVudElkOiBBcnJheTxzdHJpbmc+O1xuICBfY2FuVHJhY2tGb2N1c0xvc3RPbkVycm9yRGlzYWJsZWQ6IGJvb2xlYW47XG5cbiAgLy90YWIgY3ljbGluZ1xuICBwcml2YXRlIF90YWJiYWJsZXM6IEFycmF5PEhUTUxFbGVtZW50PjtcbiAgcHJpdmF0ZSB3YXNDbGlja091dHNpZGU6IGJvb2xlYW47XG4gIHByaXZhdGUgZG9jQ2xpY2tIYW5kbGVyOiAoZXZlbnQ6IE1vdXNlRXZlbnQpPT52b2lkO1xuICBwcml2YXRlIG1vZGFsRm9jdXNPdXRIYW5kbGVyOiAoZXZlbnQ6IEZvY3VzRXZlbnQpPT52b2lkO1xuICBwcml2YXRlIGtleWRvd25IYW5kbGVyOiAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpPT52b2lkO1xuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gcGFyZW50IHNlZSBbW0Jhc2VDb21wb25lbnRdXSBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0gc2Vzc2lvblNlcnZpY2Ugc2VlIFtbQmFzZUNvbXBvbmVudF1dIGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSBlbGVtZW50UmVmIHNlZSBbW0Jhc2VDb21wb25lbnRdXSBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0gY2QgW1tDaGFuZ2VEZXRlY3RvclJlZl1dIHRvIGluamVjdFxuICAgKiBAcGFyYW0gcmVuZGVyZXIgc2VlIFtbQmFzZUNvbXBvbmVudF1dXG4gICAqIEBwYXJhbSBkeW5hbWljUGFnZVNlcnZpY2UgW1tEeW5hbWljUGFnZVNlcnZpY2VdXSBpbnN0YW5jZSB0byBpbmplY3RcbiAgICogQHBhcmFtIHpvbmUgQW5ndWxhciB6b25lXG4gICAqL1xuICBjb25zdHJ1Y3RvcihAT3B0aW9uYWwoKSBAU2tpcFNlbGYoKSBwYXJlbnQ6IEJhc2VDb21wb25lbnQsIHNlc3Npb25TZXJ2aWNlOiBTZXNzaW9uU2VydmljZSwgZWxlbWVudFJlZjogRWxlbWVudFJlZiwgcHJpdmF0ZSBjZDogQ2hhbmdlRGV0ZWN0b3JSZWYsIHJlbmRlcmVyOiBSZW5kZXJlcjIsIHByaXZhdGUgZHluYW1pY1BhZ2VTZXJ2aWNlOiBEeW5hbWljUGFnZXNTZXJ2aWNlLCBwcml2YXRlIHpvbmU6IE5nWm9uZSkge1xuICAgIHN1cGVyKHBhcmVudCwgc2Vzc2lvblNlcnZpY2UsIGVsZW1lbnRSZWYsIHJlbmRlcmVyKTtcblxuICAgIHRoaXMuZG9jQ2xpY2tIYW5kbGVyID0gKGV2ZW50OiBNb3VzZUV2ZW50KT0+e1xuICAgICAgdGhpcy5oYW5kbGVEb2NDbGlja0V2ZW50KGV2ZW50KTtcbiAgICB9O1xuXG4gICAgdGhpcy5tb2RhbEZvY3VzT3V0SGFuZGxlciA9IChldmVudDogRm9jdXNFdmVudCk9PntcbiAgICAgIHRoaXMuY2hlY2tGb2N1c091dChldmVudCk7XG4gICAgfTtcblxuICAgIHRoaXMua2V5ZG93bkhhbmRsZXIgPSAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpPT57XG4gICAgICB0aGlzLmNoZWNrS2V5KGV2ZW50KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0IFtbdmlld1JvdXRlVXJsXV0gcHJvcGVydHlcbiAgICogQHBhcmFtIHZpZXdSb3V0ZVVybFxuICAgKi9cbiAgc2V0Vmlld1JvdXRlVXJsKHZpZXdSb3V0ZVVybDogc3RyaW5nKSB7XG4gICAgdGhpcy52aWV3Um91dGVVcmwgPSB2aWV3Um91dGVVcmw7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGRyYWdnYWJsZSBkaXJlY3RpdmUgaWQgYW5kIFtbaWRdXVxuICAgKi9cbiAgcmVzZXRJZCgpIHtcbiAgICB0aGlzLnVwZGF0ZURyYWdnYWJsZURpcmVjdGl2ZUlkKCk7XG4gICAgc3VwZXIucmVzZXRJZCgpO1xuXG4gICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XG4gIH1cblxuICAvKipcbiAgICogw6TCuMKAw6jCpsKnw6fClMK7w6nCncKiw6PCgsKSw6PCg8KGw6PCg8Kzw6PCg8KXw6PCg8Ksw6PCg8K8w6PCg8KIw6PCgsKSw6jCocKow6fCpMK6w6PCgcKXw6PCgcKmw6PCgcKEw6PCgsKLw6fClMK7w6nCncKiw6PCgcKnw6bCqMKqw6PCgsK5w6PCgsKvw6PCg8Ktw6PCg8K8w6PCg8Krw6PCgcKMw6PCgcKnw6PCgcKmw6PCgcKXw6PCgcK+w6PCgcKGw6TCusKLw6jCscKhw6PCgsKSw6XCm8Kew6nCgcK/w6PCgcKZw6PCgsKLw6PCgcKfw6PCgsKBw6PCgcKuw6PCg8Khw6PCgsK9w6PCg8KDw6PCg8KJXG4gICAqIMOlwojCncOlwpvCnsOjwoPCqsOjwoLCtcOjwoLCpMOjwoLCusOjwoHCmcOjwoLCi1xuICAgKi9cbiAgZGlhbG9nUmVzaXplKCkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgaWYgKHRoaXMucmVzaXplRmxnID09PSBmYWxzZSkge1xuICAgICAgLy90aGlzLnJlc2l6ZUV4ZWN1dGUoKTtcbiAgICAgIHRoaXMucmVzaXplRmxnID0gdHJ1ZTtcbiAgICAgIHRoaXMuc2V0RGlzYWJsZWREaWFsb2dXaWR0aCgpO1xuICAgIH1cbiAgfVxuXG4gICAgLyoqXG4gICAqIMOkwrjCgMOowqbCp8OnwpTCu8Opwp3CosOjwoLCksOjwoPChsOjwoPCs8OjwoPCl8OjwoPCrMOjwoPCvMOjwoPCiMOjwoLCksOowqHCqMOnwqTCusOjwoHCl8OjwoHCpsOjwoHChMOjwoLCi8OnwpTCu8Opwp3CosOjwoHCp8OmwqjCqsOjwoLCucOjwoLCr8OjwoPCrcOjwoPCvMOjwoPCq8OjwoHCjMOjwoHCp8OjwoHCpsOjwoHCl8OjwoHCvsOjwoHChsOkwrrCi8OowrHCocOjwoLCksOlwpvCnsOpwoHCv8OjwoHCmcOjwoLCi8OjwoHCn8OjwoLCgcOjwoHCrsOjwoPCocOjwoLCvcOjwoPCg8OjwoPCiVxuICAgKiDDo8KDwqrDo8KCwrXDo8KCwqTDo8KCwrrDo8KCwpLDqMKhwozDo8KBwoZcbiAgICovXG4gIHJlc2l6ZUV4ZWN1dGUoKSB7XG4gICAgY29uc3QgYm91bmQ6IERPTVJlY3QgPSAodGhpcy5tb2RhbEVsZW1lbnQubmF0aXZlRWxlbWVudC5maXJzdENoaWxkLmxhc3RFbGVtZW50Q2hpbGQgYXMgSFRNTEVsZW1lbnQpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIGFzIERPTVJlY3Q7XG4gICAgY29uc3QgbmV3WCA9IGJvdW5kLnJpZ2h0IC0gYm91bmQubGVmdCArIDIwO1xuICAgIHRoaXMuem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMubW9kYWxFbGVtZW50Lm5hdGl2ZUVsZW1lbnQuZmlyc3RDaGlsZC5sYXN0RWxlbWVudENoaWxkLCAnd2lkdGgnLCBuZXdYICsgJ3B4Jyk7XG4gICAgfSk7XG4gICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogSW5pdCBsaWZlY3ljbGUuIFNldHMgW1t2aWV3SWRdXVxuICAgKi9cbiAgbmdPbkluaXQoKSB7XG4gICAgc3VwZXIubmdPbkluaXQoKTtcblxuICAgIHRoaXMudmlld0lkID0gdGhpcy5pZDtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBEZXN0cm95IGxpZmVjeWNsZS4gQ2xlYW5zIHVwIHJlZmVyZW5jZXNcbiAgICovXG4gIG5nT25EZXN0cm95KCkge1xuICAgIHN1cGVyLm5nT25EZXN0cm95KCk7XG5cbiAgICB0aGlzLm1vZGFsRGlhbG9nID0gbnVsbDtcbiAgICB0aGlzLm1vZGFsQ29udGVudCA9IG51bGw7XG5cbiAgICBpZiAodGhpcy52aWV3Q29udGFpbmVyICE9IG51bGwpIHtcbiAgICAgIHRoaXMudmlld0NvbnRhaW5lci5jbGVhcigpO1xuICAgICAgdGhpcy52aWV3Q29udGFpbmVyID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5kcmFnZ2FibGVQYW5lbCAhPSBudWxsKSB7XG4gICAgICB0aGlzLmRyYWdnYWJsZVBhbmVsLmNsZWFyKCk7XG4gICAgICB0aGlzLmRyYWdnYWJsZVBhbmVsID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5kb2NDbGlja0hhbmRsZXIgIT0gbnVsbCkge1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLmRvY0NsaWNrSGFuZGxlcik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubW9kYWxGb2N1c091dEhhbmRsZXIgIT0gbnVsbCkge1xuICAgICAgKHRoaXMubW9kYWxFbGVtZW50Lm5hdGl2ZUVsZW1lbnQgYXMgSFRNTEVsZW1lbnQpLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJmb2N1c291dFwiLCB0aGlzLm1vZGFsRm9jdXNPdXRIYW5kbGVyLCB0cnVlKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5rZXlkb3duSGFuZGxlcikge1xuICAgICAgKHRoaXMubW9kYWxFbGVtZW50Lm5hdGl2ZUVsZW1lbnQgYXMgSFRNTEVsZW1lbnQpLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMua2V5ZG93bkhhbmRsZXIsIHRydWUpO1xuICAgIH1cblxuICAgIHRoaXMuZG9jQ2xpY2tIYW5kbGVyID0gbnVsbDtcbiAgICB0aGlzLm1vZGFsRm9jdXNPdXRIYW5kbGVyID0gbnVsbDtcbiAgICB0aGlzLmtleWRvd25IYW5kbGVyID0gbnVsbDtcblxuICAgIHRoaXMuZHJhZ2dhYmxlRGlyZWN0aXZlID0gbnVsbDtcbiAgICB0aGlzLm1vZGFsRWxlbWVudCA9IG51bGw7XG4gICAgdGhpcy5fdGFiYmFibGVzID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZnRlciB2aWV3IGluaXQgbGlmZWN5Y2xlLiBTZXRzIGluaXRpYWwgZGlhbG9nIGhlaWdodC93aWR0aCBhbmQgcG9zaXRpb25pbmdcbiAgICovXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICBzdXBlci5uZ0FmdGVyVmlld0luaXQoKTtcblxuICAgIC8vYWRkIDgwcHggZm9yIGdyaWQgcGFkZGluZ1xuICAgIHRoaXMubW9kYWxXaWR0aCA9IHBhcnNlSW50KHRoaXMuY29udHJvbFdpZHRoKSArIDgwO1xuICAgIHRoaXMubW9kYWxIZWlnaHQgPSBwYXJzZUludCh0aGlzLmNvbnRyb2xIZWlnaHQpICsgODA7XG5cbiAgICAvLyDDp8KUwrvDqcKdwqLDo8KDwqrDo8KCwrXDo8KCwqTDo8KCwrrDpcKvwr7DpcK/wpwgU3RhcnRcbiAgICBpZiAodGhpcy5yZXNpemVEaWFsb2cpIHtcbiAgICAgIHRoaXMubW9kYWxCb2R5UGVyY2VudEhlaWdodCA9IFwiY2FsYygxMDAlIC0gMjVweClcIjsgLy9tb2RhbC1oZWFkZXLDpcKIwobDo8KCwpLDpcKJworDo8KBwqPDo8KBwqbDqMKowq3DpcKuwppcbiAgICAgIHRoaXMubW9kYWxCb2R5RGl2SGVpZ2h0ID0gXCIxMDAlXCI7XG4gICAgICB0aGlzLm1vZGFsQm9keURpdldpZHRoID0gXCIxMDAlXCI7XG4gICAgICB0aGlzLm1vZGFsQm9keU1pbkhlaWdodCA9IFwiYXV0b1wiO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1vZGFsQm9keUhlaWdodCA9IHBhcnNlSW50KHRoaXMuY29udHJvbEhlaWdodCkgLSAyNTsgLy9tb2RhbC1oZWFkZXLDpcKIwobDo8KCwpLDpcKJworDo8KBwqPDo8KBwqbDqMKowq3DpcKuwppcbiAgICB9XG4gICAgLy8gw6fClMK7w6nCncKiw6PCg8Kqw6PCgsK1w6PCgsKkw6PCgsK6w6XCr8K+w6XCv8KcIEVuZFxuXG4gICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XG5cbiAgICBpZiAodGhpcy5tb2RhbCAhPT0gXCJ0cnVlXCIgJiYgdGhpcy5tb2RhbCAhPT0gdHJ1ZSkge1xuICAgICAgdGhpcy5zZXRNb2RhbExlc3NQb3NpdGlvbigpO1xuICAgICAgdGhpcy5ic01vZGFsQ2xhc3MucHVzaChcIm1vZGFsZXNzXCIpO1xuICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vZGlzYWJsZSBidXR0b25zXG4gICAgICAkKFwiLmhlYWRlclwiKS5hZGRDbGFzcyhcImhlYWRlci1kaXNhYmxlZFwiKTtcbiAgICAgICQoXCIuZm9vdGVyXCIpLmFkZENsYXNzKFwiZm9vdGVyLWRpc2FibGVkXCIpO1xuICAgIH1cblxuICAgIHRoaXMuc2V0SW5pdGlhbFBvc2l0aW9uKHRoaXMuaW5pdGlhbFBvc2l0aW9uKTtcbiAgICB0aGlzLnVwZGF0ZURyYWdnYWJsZURpcmVjdGl2ZUlkKCk7XG5cbiAgICB0aGlzLnNldERpc2FibGVkRGlhbG9nV2lkdGgoKTtcbiAgICAvLyBpZih0aGlzLnJlc2l6ZURpYWxvZyl7IMOkwrjCgMOmwpnCgsOnwprChMOjwoHCq8OjwoLCs8OjwoPCocOjwoPCs8OjwoPCiMOjwoLCosOjwoLCpsOjwoPCiFxuICAgICAgJCh0aGlzLm1vZGFsRWxlbWVudC5uYXRpdmVFbGVtZW50KS5yZXNpemFibGUoe1xuICAgICAgICBoYW5kbGVzOiAnbiwgZSwgcywgdywgbmUsIHNlLCBzdywgbncnLFxuICAgICAgICBtaW5XaWR0aDogMTUwLFxuICAgICAgICBtaW5IZWlnaHQ6IDIwLFxuICAgICAgICByZXNpemU6IChldmVudCwgdWkpPT57XG4gICAgICAgICAgLy90b3DDpcKgwrTDpsKJwoDDpcKIwrbDqcKZwpDDqMKowq3DpcKuwppcbiAgICAgICAgICBpZiAodWkucG9zaXRpb24udG9wIDw9IDgyKXtcbiAgICAgICAgICAgIHVpLnBvc2l0aW9uLnRvcCA9IDgyO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICB1aS5lbGVtZW50LmNzcyhcIm1pbi1oZWlnaHRcIiwgXCJcIik7XG4gICAgICAgICAgdWkuZWxlbWVudC5jc3MoXCJtaW4td2lkdGhcIiwgXCJcIik7XG5cbiAgICAgICAgICAkKHRoaXMubW9kYWxEaWFsb2cubmF0aXZlRWxlbWVudCkuY3NzKFwiaGVpZ2h0XCIsIHVpLnNpemUuaGVpZ2h0KTtcbiAgICAgICAgICAkKHRoaXMubW9kYWxEaWFsb2cubmF0aXZlRWxlbWVudCkuY3NzKFwid2lkdGhcIiwgdWkuc2l6ZS53aWR0aCk7XG5cbiAgICAgICAgICAkKHRoaXMubW9kYWxDb250ZW50Lm5hdGl2ZUVsZW1lbnQpLmNzcyhcImhlaWdodFwiLCB1aS5zaXplLmhlaWdodCk7XG4gICAgICAgICAgJCh0aGlzLm1vZGFsQ29udGVudC5uYXRpdmVFbGVtZW50KS5jc3MoXCJ3aWR0aFwiLCB1aS5zaXplLndpZHRoKTtcblxuICAgICAgICAgICQodGhpcy5ib2R5Lm5hdGl2ZUVsZW1lbnQpLmNzcyhcIm1pbi1oZWlnaHRcIiwgXCJjYWxjKDEwMCUgLSAyNXB4KVwiKTtcblxuICAgICAgICAgIGlmICh0aGlzLnRhYmxlSWQgIT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3QgdGFibGU6IFRhYmxlQ29tcG9uZW50ID0gVWlEb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnRhYmxlSWQpIGFzIFRhYmxlQ29tcG9uZW50O1xuICAgICAgICAgICAgaWYgKHRhYmxlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgdGFibGUudGFibGVSZXNpemUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgJCh0aGlzLm1vZGFsRWxlbWVudC5uYXRpdmVFbGVtZW50KS5vbiggXCJyZXNpemVzdG9wXCIsICgpPT4ge1xuICAgICAgICB0aGlzLnNldERpc2FibGVkRGlhbG9nV2lkdGgoKTtcbiAgICAgIH0pO1xuICAgIC8vIH1cblxuICAgIHRoaXMuX3RhYmJhYmxlcz0gdGFiYmFibGUodGhpcy5ib2R5Lm5hdGl2ZUVsZW1lbnQpO1xuXG4gICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpPT57XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuZG9jQ2xpY2tIYW5kbGVyKTtcbiAgICAgICh0aGlzLm1vZGFsRWxlbWVudC5uYXRpdmVFbGVtZW50IGFzIEhUTUxFbGVtZW50KS5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNvdXRcIiwgdGhpcy5tb2RhbEZvY3VzT3V0SGFuZGxlciwgdHJ1ZSk7XG4gICAgICAodGhpcy5tb2RhbEVsZW1lbnQubmF0aXZlRWxlbWVudCBhcyBIVE1MRWxlbWVudCkuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5rZXlkb3duSGFuZGxlciwgdHJ1ZSk7XG4gICAgfSk7XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogU2V0IHRoZSB3aWR0aCBvZiBkaXNhYmxlZC1kaWFsb2cgd2l0aCB0aGUgd2lkdGggb2YgdGhlIG1vZGFsLWNvbnRlbnRcbiAgICovXG4gIHByaXZhdGUgc2V0RGlzYWJsZWREaWFsb2dXaWR0aCgpe1xuICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLm1vZGFsRWxlbWVudC5uYXRpdmVFbGVtZW50O1xuICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZGlzYWJsZWQtZGlhbG9nJyksJ3dpZHRoJywgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtY29udGVudCcpLm9mZnNldFdpZHRoKydweCcpO1xuICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZGlzYWJsZWQtZGlhbG9nJyksJ2hlaWdodCcsIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRlbnQnKS5vZmZzZXRIZWlnaHQrJ3B4Jyk7XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogU2V0cyB0aGUgW1tkcmFnZ2FibGVEaXJlY3RpdmVdXSB2aWV3IGlkIHRvIHRoZSBkaWFsb2cgaW5zdGFuY2UgW1tpZF1dXG4gICAqL1xuICBwcml2YXRlIHVwZGF0ZURyYWdnYWJsZURpcmVjdGl2ZUlkKCkge1xuICAgIGlmICh0aGlzLmRyYWdnYWJsZURpcmVjdGl2ZSAhPSBudWxsKSB7XG4gICAgICB0aGlzLmRyYWdnYWJsZURpcmVjdGl2ZS5zZXRWaWV3SWQodGhpcy5pZCk7XG4gICAgICB0aGlzLmRyYWdnYWJsZURpcmVjdGl2ZS5zZXRUYWJsZUlkKHRoaXMudGFibGVJZCk7XG4gICAgICB0aGlzLmRyYWdnYWJsZURpcmVjdGl2ZS5zY3JlZW5JbmRleCA9IHRoaXMuc2NyZWVuSW5kZXg7XG4gICAgfVxuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIFNldCBwb3NpdGlvbiBvZiB3aW5kb3cgY29tcG9uZW50XG4gICAqL1xuICBwcml2YXRlIHNldE1vZGFsTGVzc1Bvc2l0aW9uKCkge1xuICAgIGNvbnN0IGJvdW5kOiBET01SZWN0ID0gKHRoaXMubW9kYWxFbGVtZW50Lm5hdGl2ZUVsZW1lbnQuZmlyc3RDaGlsZCBhcyBIVE1MRWxlbWVudCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgYXMgRE9NUmVjdDtcbiAgICBjb25zdCBsZWZ0ID0gKGJvdW5kLnggfHwgYm91bmQubGVmdCkgKyBcInB4XCI7XG4gICAgY29uc3QgdG9wID0gKE1hdGgubWF4KGJvdW5kLnkgfHwgYm91bmQudG9wLCAxMjApKSArIFwicHhcIjtcblxuICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5tb2RhbEVsZW1lbnQubmF0aXZlRWxlbWVudCwgXCJsZWZ0XCIsIGxlZnQpO1xuICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5tb2RhbEVsZW1lbnQubmF0aXZlRWxlbWVudCwgXCJ0b3BcIiwgdG9wKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG5hdGl2ZSBIVE1MIGVsZW1lbnQgb2YgdGhpcyBkaWFsb2dcbiAgICogQHJldHVybnMgRE9NIGVsZW1lbnRcbiAgICovXG4gIGdldEVsZW1lbnQoKTogSFRNTEVsZW1lbnQge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudDtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBFdmVudCBoYW5kbGVyIGZvciBjbGljayBvbiBjbG9zZSBidXR0b24uIENsb3NlcyB0aGUgd2luZG93XG4gICAqIEBwYXJhbSBldmVudFxuICAgKiBAcGFyYW0gaW1tZWRpYXRlXG4gICAqL1xuICBjbG9zZShldmVudDogTW91c2VFdmVudCA9IG51bGwsIGltbWVkaWF0ZTogYm9vbGVhbiA9IGZhbHNlKSB7XG4gICAgLy8gdGhpcy5ic01vZGFsQ2xhc3MgPSBbXCJ2dC1kaWFsb2dcIiwgXCJtb2RhbFwiLCBcImZhZGVcIiwgXCJvdXRcIl07XG5cbiAgICAvL3RoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xuXG4gICAgaWYgKGV2ZW50ICE9IG51bGwpIHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm1vZGFsID09PSBcInRydWVcIiB8fCB0aGlzLm1vZGFsID09PSB0cnVlKSB7XG4gICAgICAkKFwiLmhlYWRlclwiKS5yZW1vdmVDbGFzcyhcImhlYWRlci1kaXNhYmxlZFwiKTtcbiAgICAgICQoXCIuZm9vdGVyXCIpLnJlbW92ZUNsYXNzKFwiZm9vdGVyLWRpc2FibGVkXCIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmdldFBhcmVudCgpICE9IG51bGwgJiYgdGhpcy5nZXRQYXJlbnQoKS5pc1ZpZXcoKSAmJiB0aGlzLmdldFBhcmVudCgpLmlzRHluYW1pY1ZpZXcoKSkge1xuICAgICAgdGhpcy5keW5hbWljUGFnZVNlcnZpY2UucmVtb3ZlVmlldyh0aGlzLmdldFBhcmVudCgpIGFzIGFueSwgaW1tZWRpYXRlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuZ2V0U2Vzc2lvbigpICE9IG51bGwgJiYgdGhpcy5nZXRTZXNzaW9uKCkuZ2V0Um91dGVOYXZpZ2F0b3JTZXJ2aWNlKCkgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLmdldFNlc3Npb24oKS5nZXRSb3V0ZU5hdmlnYXRvclNlcnZpY2UoKS5kZXN0cm95Um91dGUodGhpcy52aWV3Um91dGVVcmwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIlVuYWJsZSB0byBjaGFuZ2Ugcm91dGUsIHNlc3Npb24gb3Igcm91dGUgbmF2aWdhdGlvbiBzZXJ2aWNlIGlzIG5vdCBkZWZpbmVkXCIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBTZXQgW1tkaXNhYmxlZF1dIHByb3BlcnR5IHZhbHVlXG4gICAqIEBwYXJhbSBib28gVmFsdWUgZm9yIGRpc2FibGVkIHByb3BlcnR5XG4gICAqL1xuICBzZXREaXNhYmxlZChib286IGJvb2xlYW4pe1xuICAgIHRoaXMuZGlzYWJsZWQgPSBib287XG4gICAgJCh0aGlzLm1vZGFsRWxlbWVudC5uYXRpdmVFbGVtZW50KS5yZXNpemFibGUoIFwib3B0aW9uXCIsIFwiZGlzYWJsZWRcIiwgYm9vICk7Ly9Eb24ndCByZW1vdmUgdGhpcy4gVGhpcyBtYWtlcyBkaXNhYmxlZC1kaWFsb2cgbm90IHRvIGJlIHJlc2l6YWJsZS5cbiAgICAkKHRoaXMubW9kYWxFbGVtZW50Lm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRlbnQnKSkuZGlzYWJsZWQgPSBib287Ly9JIGFtIG5vdCBzdXJlIHdoeSB0aGlzIGlzIG5lZWRlZC5cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBkaWFsb2dzICd6LWluZGV4JyBDU1MgcHJvcGVydHlcbiAgICogQHBhcmFtIG5ld1pJbmRleFxuICAgKi9cbiAgdXBkYXRlWkluZGV4KG5ld1pJbmRleDogbnVtYmVyKSB7XG4gICAgaWYgKHRoaXMubW9kYWxFbGVtZW50ICE9IG51bGwgJiYgdGhpcy5yZW5kZXJlciAhPSBudWxsKSB7XG4gICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMubW9kYWxFbGVtZW50Lm5hdGl2ZUVsZW1lbnQsIFwiei1pbmRleFwiLCBuZXdaSW5kZXgpO1xuICAgIH1cblxuICAgIHRoaXMuc2V0SW5hY3RpdmVEaWFsb2dTdHlsZSgpO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIFNldCBpbmFjdGl2ZSB3aW5kb3cgc3R5bGUgaWYgdGhpcyBkaWFsb2cgaXMgbm90IHRoZSBjdXJyZW50IGFjdGl2ZSBkaWFsb2dcbiAgICovXG4gIHNldEluYWN0aXZlRGlhbG9nU3R5bGUoKSB7XG4gICAgY29uc3QgaW5hY3RpdmVEaWFsb2dDbGFzcyA9ICdpbmFjdGl2ZS1kaWFsb2cnO1xuXG4gICAgLy8gQXBwbHkgaW5hY3RpdmUgZGlhbG9nIGNsYXNzIHdoZW4gb3RoZXIgd2luZG93IGlzIGZvY3VzZWRcbiAgICBpZiAoXG4gICAgICB0aGlzLmdldFNlc3Npb24oKS5nZXRNY29Db250YWluZXIoKS5hY3RpdmVWaWV3KCkgPT0gbnVsbCB8fFxuICAgICAgdGhpcy5nZXRTZXNzaW9uKCkuZ2V0TWNvQ29udGFpbmVyKCkuYWN0aXZlVmlldygpLmlkICE9IHRoaXMudmlld0lkXG4gICAgKSB7XG4gICAgICB0aGlzLmJzTW9kYWxDbGFzcy5wdXNoKGluYWN0aXZlRGlhbG9nQ2xhc3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmJzTW9kYWxDbGFzcyA9IF8uZmlsdGVyKHRoaXMuYnNNb2RhbENsYXNzLCAoYyk9PiB7XG4gICAgICAgIHJldHVybiBjICE9PSBpbmFjdGl2ZURpYWxvZ0NsYXNzO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy93ZSB1c2VkIE9uUHVzaCBhbmQgY2hhbmdlIGRldGVjdG9yIG9ubHkga25vdyB0aGF0IGl0IG5lZWRzIHRvIGRvIHNvbWV0aGluZyBpZlxuICAgIC8vb3VyIHN0eWxlIGFycmF5IGlzIGltbXV0YWJsZSwgc28gd2UgbmVlZCB0byB0ZWxsIGl0IHRoYXQgY2hhbmdlcyBoYXBwZW4uXG4gICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBTZXQgcG9zaXRpb24gb2YgdGhpcyBkaWFsb2cgd2hlbiBpdCBpcyBmaXJzdCBvcGVuZWRcbiAgICogQHBhcmFtIHBvc2l0aW9uIFdpbmRvdyBwb3NpdGlvblxuICAgKi9cbiAgc2V0SW5pdGlhbFBvc2l0aW9uKHBvc2l0aW9uOiBJbml0aWFsUG9zaXRpb24pIHtcbiAgICBpZiAocG9zaXRpb24gIT0gbnVsbCkge1xuICAgICAgaWYgKHBvc2l0aW9uLmxlZnQgPj0gMCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMubW9kYWxFbGVtZW50Lm5hdGl2ZUVsZW1lbnQsIFwibGVmdFwiLCBwb3NpdGlvbi5sZWZ0ICsgXCJweFwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5tb2RhbEVsZW1lbnQubmF0aXZlRWxlbWVudCwgXCJsZWZ0XCIsIFwiYXV0b1wiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBvc2l0aW9uLnJpZ2h0ID49IDApIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLm1vZGFsRWxlbWVudC5uYXRpdmVFbGVtZW50LCBcInJpZ2h0XCIsIHBvc2l0aW9uLnJpZ2h0ICsgXCJweFwiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBvc2l0aW9uLnRvcCA+PSAwKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5tb2RhbEVsZW1lbnQubmF0aXZlRWxlbWVudCwgXCJ0b3BcIiwgcG9zaXRpb24udG9wICsgXCJweFwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5tb2RhbEVsZW1lbnQubmF0aXZlRWxlbWVudCwgXCJ0b3BcIiwgXCJhdXRvXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAocG9zaXRpb24uYm90dG9tID49IDApIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLm1vZGFsRWxlbWVudC5uYXRpdmVFbGVtZW50LCBcImJvdHRvbVwiLCBwb3NpdGlvbi5ib3R0b20gKyBcInB4XCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLm1vZGFsRWxlbWVudC5uYXRpdmVFbGVtZW50LCBcImJvdHRvbVwiLCBcImF1dG9cIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gaGVhZGVyIGhlaWdodCBhbmQgZm9vdGVyIGhlaWdodFxuICAgIGNvbnN0IGFwcEhlYWRlciA9ICQoXCIuaGVhZGVyXCIpWzBdO1xuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgLy9hcHBIZWFkZXIgY2FuIGJlIG51bGwgKGluIHVuaXQgdGVzdCwgZXRjKVxuICAgIGlmIChhcHBIZWFkZXIpIHtcbiAgICAgIGxldCBoZWFkZXJIID0gYXBwSGVhZGVyLmNsaWVudEhlaWdodCArIGFwcEhlYWRlci5vZmZzZXRUb3A7XG4gICAgICAvLyBpbml0IHBvc2l0aW9uXG4gICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMubW9kYWxFbGVtZW50Lm5hdGl2ZUVsZW1lbnQsIFwidG9wXCIsIGhlYWRlckggKyBcInB4XCIpO1xuICAgICAgaWYgKChwb3NpdGlvbiAhPSBudWxsKSkge1xuICAgICAgICBpZiAoICEocG9zaXRpb24ubGVmdCA+IDApICApIHtcbiAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMubW9kYWxFbGVtZW50Lm5hdGl2ZUVsZW1lbnQsIFwibGVmdFwiLCBcIjBcIik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5tb2RhbEVsZW1lbnQubmF0aXZlRWxlbWVudCwgXCJsZWZ0XCIsIFwiMFwiKTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgJ2NlbnRlcmVkJyBpbnB1dCBpcyB0cnVlLCBvdmVycmlkZSBpbml0aWFsUG9zaXRpb24gYW5kIG1vZGFsTGVzc1Bvc2l0aW9uXG4gICAgICBpZiAodGhpcy5fY2VudGVyKSB7XG4gICAgICAgIGxldCBtb2RlbEggPSAkKHRoaXMubW9kYWxFbGVtZW50Lm5hdGl2ZUVsZW1lbnQpLmhlaWdodCgpO1xuICAgICAgICBsZXQgZm9vdGVySCA9ICQoXCIuZm9vdGVyXCIpWzBdLmNsaWVudEhlaWdodDtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLm1vZGFsRWxlbWVudC5uYXRpdmVFbGVtZW50LCBcInRvcFwiLCBgY2FsYygoKDEwMHZoIC0gJHtoZWFkZXJIfXB4IC0gJHtmb290ZXJIfXB4IC0gJHttb2RlbEh9cHgpIC8gMikgKyAke2hlYWRlckh9cHgpYCk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5tb2RhbEVsZW1lbnQubmF0aXZlRWxlbWVudCwgXCJsZWZ0XCIsIFwiY2FsYygoMTAwdncgLyAyKSAtIFwiICsgKCQodGhpcy5tb2RhbEVsZW1lbnQubmF0aXZlRWxlbWVudCkud2lkdGgoKSAvIDIpICsgXCJweFwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgaGFuZGxlciBmb3IgY2xvc2UgZXZlbnRcbiAgICogQGV2ZW50IE9uQ2xvc2luZ1xuICAgKi9cbiAgaGFuZGxlT25DbG9zaW5nKCkge1xuICAgIHRoaXMub25DbG9zaW5nLmVtaXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIE5leGF3ZWIgdGFnIG5hbWUgb2YgdGhpcyBjb21wb25lbnRcbiAgICovXG4gIHByb3RlY3RlZCBnZXROeFRhZ05hbWUoKSB7XG4gICAgcmV0dXJuIFwiZGlhbG9nXCI7XG4gIH1cblxuICAvKipcbiAgICogR2V0IEpTT04gcmVwcmVzZW50YXRpb24gb2YgZGlhbG9nIHN0YXRlXG4gICAqL1xuICB0b0pzb24oKToge30ge1xuICAgIGNvbnN0IGpzb246IGFueSA9IHN1cGVyLnRvSnNvbigpO1xuICAgIHRoaXMuc2V0SnNvbihqc29uLCBcInRpdGxlXCIsIHRoaXMudGl0bGUpO1xuICAgIHRoaXMuc2V0SnNvbihqc29uLCBcIm1vZGFsXCIsIHRoaXMubW9kYWwpO1xuICAgIHRoaXMuc2V0SnNvbihqc29uLCBcImNlbnRlcmVkXCIsIHRoaXMuX2NlbnRlcik7XG5cbiAgICByZXR1cm4ganNvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayB3aGV0aGVyIG9yIG5vdCB0aGlzIGRpYWxvZyBpcyBhIGNvbnRhaW5lclxuICAgKiBAcmV0dXJucyBCb29sZWFuXG4gICAqL1xuICBwcm90ZWN0ZWQgaXNDb250YWluZXIoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgd2hldGhlciBvciBub3QgdGhpcyBpcyBhIGRpYWxvZy4gSW1wbGVtZW50YXRpb24gb2YgQmFzZUNvbXBvbmVudCBtZXRob2RcbiAgICogQHJldHVybnMgQm9vbGVhblxuICAgKi9cbiAgcHJvdGVjdGVkIGlzRGlhbG9nKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIEdldCB0aGUgW1tjZF1dIChDaGFuZ2VEZXRlY3RvclJlZikgcHJvcGVydHlcbiAgICogQHJldHVybnMgQ2hhbmdlRGV0ZWN0b3JSZWZcbiAgICovXG4gIGdldENoYW5nZURldGVjdG9yKCkge1xuICAgIHJldHVybiB0aGlzLmNkO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIEV2ZW50IGhhbmRsZXIgZm9yIG1pbmltaXplIGJ1dHRvbiBjbGljay4gTWluaW1pemVzIGRpYWxvZ1xuICAgKiBAcGFyYW0gZXZlbnRcbiAgICovXG4gIG1pbmltaXplKGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gICAgaWYgKGV2ZW50ICE9IG51bGwpIHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgICBpZigoSmF2YVV0aWxzLnBhcnNlQm9vbGVhbih0aGlzLm1vZGFsKSkpe1xuICAgICAgaWYgKCF0aGlzLmlzVW5NYXhpbWl6ZSl7XG4gICAgICAgIGxldCBtaW5IZWlnaHRMb2MgPSBEaWFsb2dDb21wb25lbnQuVU5NQVhJTUlaRV9IRUdIVDtcbiAgICAgICAgdGhpcy5pc1VuTWF4aW1pemUgPXRydWU7XG4gICAgICAgIGlmICh0aGlzLmlzTWF4aW1pemUpIHtcbiAgICAgICAgICAkKHRoaXMubW9kYWxFbGVtZW50Lm5hdGl2ZUVsZW1lbnQpLmNzcyhcInRvcFwiLCBgJHt0aGlzLm1vZGFsT3JpZ2luYWxUb3B9cHhgKTtcbiAgICAgICAgICAkKHRoaXMubW9kYWxFbGVtZW50Lm5hdGl2ZUVsZW1lbnQpLmNzcyhcImxlZnRcIiwgYCR7dGhpcy5tb2RhbE9yaWdpbmFsTGVmdH1weGApO1xuICAgICAgICAgIHRoaXMuaXNNYXhpbWl6ZSA9ZmFsc2U7XG4gICAgICAgIH0gICAgICAgIFxuICAgICAgICAkKHRoaXMuYm9keS5uYXRpdmVFbGVtZW50KS5jc3MoXCJtaW4taGVpZ2h0XCIsIFwiXCIpO1xuICAgICAgICAkKHRoaXMuYm9keS5uYXRpdmVFbGVtZW50KS5jc3MoXCJoZWlnaHRcIiwgbWluSGVpZ2h0TG9jKTtcbiAgICAgICAgJCh0aGlzLm1vZGFsRWxlbWVudC5uYXRpdmVFbGVtZW50KS5jc3MoXCJtaW4taGVpZ2h0XCIsIFwiXCIpO1xuICAgICAgICAkKHRoaXMubW9kYWxFbGVtZW50Lm5hdGl2ZUVsZW1lbnQpLmNzcyhcImhlaWdodFwiLCBtaW5IZWlnaHRMb2MpO1xuICAgICAgICAkKHRoaXMubW9kYWxFbGVtZW50Lm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRlbnQnKSkuY3NzKFwiaGVpZ2h0XCIsIG1pbkhlaWdodExvYyk7XG4gICAgICAgIHRoaXMuYnNNb2RhbENsYXNzID0gW1widnQtZGlhbG9nXCIsIFwibW9kYWxcIiwgXCJmYWRlXCIsIFwiaW5cIiwgXCJ1bm1heGltaXplXCJdO1xuICAgICAgfWVsc2V7XG4gICAgICAgIHRoaXMuaXNVbk1heGltaXplID1mYWxzZTtcbiAgICAgICAgbGV0IG1pbkhlaWdodExvYyA9JCh0aGlzLm1vZGFsRWxlbWVudC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1kaWFsb2cnKSkuY3NzKFwiaGVpZ2h0XCIpO1xuICAgICAgICAkKHRoaXMuYm9keS5uYXRpdmVFbGVtZW50KS5jc3MoXCJtaW4taGVpZ2h0XCIsIFwiY2FsYygxMDAlIC0gMjVweFwiKTtcbiAgICAgICAgJCh0aGlzLmJvZHkubmF0aXZlRWxlbWVudCkuY3NzKFwiaGVpZ2h0XCIsIFwiYXV0b1wiKTtcbiAgICAgICAgJCh0aGlzLm1vZGFsRWxlbWVudC5uYXRpdmVFbGVtZW50KS5jc3MoXCJtaW4taGVpZ2h0XCIsIG1pbkhlaWdodExvYyk7XG4gICAgICAgICQodGhpcy5tb2RhbEVsZW1lbnQubmF0aXZlRWxlbWVudCkuY3NzKFwiaGVpZ2h0XCIsIG1pbkhlaWdodExvYyk7XG4gICAgICAgICQodGhpcy5tb2RhbEVsZW1lbnQubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtY29udGVudCcpKS5jc3MoXCJoZWlnaHRcIiwgbWluSGVpZ2h0TG9jKTtcbiAgICAgICAgdGhpcy5ic01vZGFsQ2xhc3MgPSBbXCJ2dC1kaWFsb2dcIiwgXCJtb2RhbFwiLCBcImZhZGVcIiwgXCJpblwiLCBcInVubWF4aW1pemVcIl07ICAgICAgIFxuICAgICAgfVxuICAgIH1lbHNle1xuICAgICAgdGhpcy5pc1VuTWF4aW1pemUgPWZhbHNlO1xuICAgICAgdGhpcy5ic01vZGFsQ2xhc3MgPSBbXCJ2dC1kaWFsb2dcIiwgXCJtb2RhbFwiLCBcImZhZGVcIiwgXCJvdXRcIiwgXCJtaW5pbWl6ZVwiXTtcbiAgICAgIHRoaXMuZ2V0U2Vzc2lvbigpLmdldE1jb0NvbnRhaW5lcigpLm1pbmltaXplVmlldyh0aGlzLnZpZXdJZCk7XG4gICAgfVxuICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIEV2ZW50IGhhbmRsZXIgZm9yIG1heGltaXplIGJ1dHRvbiBjbGljay4gTWF4aW1pemVzIGRpYWxvZ1xuICAgKiBAcGFyYW0gZXZlbnRcbiAgICovXG4gIG1heGltaXplKGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gICAgXG4gICAgaWYgKGV2ZW50ICE9IG51bGwpIHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlzTWF4aW1pemUpIHtcbiAgICAgIHRoaXMuYnNNb2RhbENsYXNzID0gW1widnQtZGlhbG9nXCIsIFwibW9kYWxcIiwgXCJmYWRlXCIsIFwiaW5cIl07XG4gICAgICAkKHRoaXMubW9kYWxFbGVtZW50Lm5hdGl2ZUVsZW1lbnQpLmNzcyhcInRvcFwiLCBgJHt0aGlzLm1vZGFsT3JpZ2luYWxUb3B9cHhgKTtcbiAgICAgICQodGhpcy5tb2RhbEVsZW1lbnQubmF0aXZlRWxlbWVudCkuY3NzKFwibGVmdFwiLCBgJHt0aGlzLm1vZGFsT3JpZ2luYWxMZWZ0fXB4YCk7XG4gICAgICB0aGlzLmlzTWF4aW1pemUgPSBmYWxzZTtcbiAgICAgIGlmKEphdmFVdGlscy5wYXJzZUJvb2xlYW4odGhpcy5tb2RhbCkgJiYgICQodGhpcy5tb2RhbEVsZW1lbnQubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtY29udGVudCcpKVswXS5zdHlsZS5oZWlnaHQgPT09IERpYWxvZ0NvbXBvbmVudC5VTk1BWElNSVpFX0hFR0hUKXtcbiAgICAgICAgdGhpcy5ic01vZGFsQ2xhc3MgPSBbXCJ2dC1kaWFsb2dcIiwgXCJtb2RhbFwiLCBcImZhZGVcIiwgXCJpblwiLCBcInVubWF4aW1pemVcIl07XG4gICAgICAgIHRoaXMuaXNVbk1heGltaXplID10cnVlO1xuICAgICAgfWVsc2V7XG4gICAgICAgIHRoaXMuaXNVbk1heGltaXplID1mYWxzZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICQodGhpcy5ib2R5Lm5hdGl2ZUVsZW1lbnQpLmNzcyhcIm1pbi1oZWlnaHRcIiwgXCJjYWxjKDEwMCUgLSAyNXB4KVwiKTtcbiAgICAgICQodGhpcy5tb2RhbEVsZW1lbnQubmF0aXZlRWxlbWVudCkuY3NzKFwiaGVpZ2h0XCIsIFwiYXV0b1wiKTtcbiAgICAgIHRoaXMubW9kYWxPcmlnaW5hbExlZnQgPSAodGhpcy5tb2RhbEVsZW1lbnQubmF0aXZlRWxlbWVudCBhcyBIVE1MRWxlbWVudCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcbiAgICAgIHRoaXMubW9kYWxPcmlnaW5hbFRvcCA9ICh0aGlzLm1vZGFsRWxlbWVudC5uYXRpdmVFbGVtZW50IGFzIEhUTUxFbGVtZW50KS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XG4gICAgICAkKHRoaXMubW9kYWxFbGVtZW50Lm5hdGl2ZUVsZW1lbnQpLmNzcyhcImxlZnRcIiwgYCR7dGhpcy5tb2RhbE9yaWdpbmFsTGVmdH1weGApO1xuICAgICAgJCh0aGlzLm1vZGFsRWxlbWVudC5uYXRpdmVFbGVtZW50KS5jc3MoXCJ0b3BcIiwgYCR7dGhpcy5tb2RhbE9yaWdpbmFsVG9wfXB4YCk7XG4gICAgICB0aGlzLmJzTW9kYWxDbGFzcyA9IFtcInZ0LWRpYWxvZ1wiLCBcIm1vZGFsXCIsIFwiZmFkZVwiLCBcImluXCIsIFwibWF4aW1pemVcIl07XG4gICAgICB0aGlzLmlzTWF4aW1pemUgPSB0cnVlO1xuICAgICAgdGhpcy5pc1VuTWF4aW1pemUgPWZhbHNlO1xuICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgfVxuICAgIFxuICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICh0aGlzLnRhYmxlSWQgIT0gbnVsbCkge1xuICAgICAgY29uc3QgdGFibGU6IFRhYmxlQ29tcG9uZW50ID0gVWlEb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnRhYmxlSWQpIGFzIFRhYmxlQ29tcG9uZW50O1xuICAgICAgaWYgKHRhYmxlICE9IG51bGwpIHtcbiAgICAgICAgdGFibGUudGFibGVSZXNpemUoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5nZXRTZXNzaW9uKCkuZ2V0TWNvQ29udGFpbmVyKCkuc2hvd1ZpZXcodGhpcy52aWV3SWQpO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIFNob3cgdGhlIHZpZXcgYWZ0ZXIgaXQgaGFzIGJlZW4gaGlkZGVuIHZpYSBtaW5pbWl6ZWRcbiAgICovXG4gIHNob3dWaWV3KCkge1xuICAgIGlmKHRoaXMuZGlzYWJsZWQpIHJldHVybjtcbiAgICBpZiAodGhpcy5pc01heGltaXplKSB7XG4gICAgICB0aGlzLmJzTW9kYWxDbGFzcyA9IFtcInZ0LWRpYWxvZ1wiLCBcIm1vZGFsXCIsIFwiZmFkZVwiLCBcImluXCIsIFwibWF4aW1pemVcIl07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYnNNb2RhbENsYXNzID0gW1widnQtZGlhbG9nXCIsIFwibW9kYWxcIiwgXCJmYWRlXCIsIFwiaW5cIl07XG4gICAgfVxuXG4gICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgdGhpcy5nZXRTZXNzaW9uKCkuZ2V0TWNvQ29udGFpbmVyKCkuc2hvd1ZpZXcodGhpcy52aWV3SWQsIHRoaXMuc2NyZWVuSW5kZXgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IGhhbmRsZXIgZm9yIG1vdXNlZG93biBldmVudC4gUmVzZXRzIGRpYWxvZyB2aWV3IHN0YWNrXG4gICAqL1xuICBoYW5kbGVNb3VzZURvd24oKSB7XG4gICAgLy9tYWtlIHRoaXMgc2NyZWVuIHRvcCBtb3N0LlxuICAgIHRoaXMuZ2V0U2Vzc2lvbigpLmdldE1jb0NvbnRhaW5lcigpLnJlU3RhY2tWaWV3KHRoaXMudmlld0lkLCB0aGlzLnNjcmVlbkluZGV4KTtcbiAgfVxuICAvKipcbiAgICogU3RvcCBwcm9wYWdhdGlvbiBvbiBkaXNhYmxlZCBkaWFsb2dcbiAgICovXG4gIG9uQ2xpY2tEaXNhYmxlQ29udGVudChldmVudCl7XG4gICAgaWYodGhpcy5kaXNhYmxlZCkgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH1cbiAgLyoqXG4gICAqIFN0b3AgcHJvcGFnYXRpb24gb24gbW9kYWwgZGlhbG9nXG4gICAqL1xuICBvbkNsaWNrQmFja2Ryb3AoZXZlbnQpe1xuICAgIGlmKHRoaXMubW9kYWwgPT0gdHJ1ZSB8fCB0aGlzLm1vZGFsID09ICd0cnVlJykgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZU1vZGFsRGlhbG9nU3R5bGUoKSB7XG4gICAgaWYgKHRoaXMucmVuZGVyZXIgIT0gbnVsbCAmJiB0aGlzLmVsZW1lbnRSZWYgIT0gbnVsbCkge1xuICAgICAgaWYgKHRoaXMubW9kYWwgPT09IHRydWUgfHwgdGhpcy5tb2RhbCA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgXCJtb2RhbFwiKTtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgXCJkaXNwbGF5XCIsIFwiaW5saW5lLWJsb2NrXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVDbGFzcyh0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgXCJtb2RhbFwiKTtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVTdHlsZSh0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgXCJkaXNwbGF5XCIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY2hlY2tGb2N1c091dChldmVudDogRm9jdXNFdmVudCkge1xuICAgIGlmICgodGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQgYXMgSFRNTEVsZW1lbnQpLmNvbnRhaW5zKGV2ZW50LnJlbGF0ZWRUYXJnZXQgYXMgSFRNTEVsZW1lbnQpKSB7XG4gICAgICB0aGlzLmdldFNlc3Npb24oKS5fd2luZG93TG9zdEZvY3VzID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgdGhpcy5nZXRTZXNzaW9uKCkuX3dpbmRvd0xvc3RGb2N1cyAhPT0gdHJ1ZSAmJlxuICAgICAgdGhpcy5fdGFiYmFibGVzICYmXG4gICAgICB0aGlzLl90YWJiYWJsZXMubGVuZ3RoID4gMCAmJlxuICAgICAgdGhpcy53YXNDbGlja091dHNpZGUgIT09IHRydWUgJiZcbiAgICAgICEoKHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50IGFzIEhUTUxFbGVtZW50KS5jb250YWlucyhldmVudC5yZWxhdGVkVGFyZ2V0IGFzIEhUTUxFbGVtZW50KSlcbiAgICAgICYmIHRoaXMuZGlzYWJsZWQgIT09IHRydWVcbiAgICApIHtcblxuICAgICAgaWYgKFxuICAgICAgICBldmVudC5yZWxhdGVkVGFyZ2V0ID09IG51bGwgfHxcbiAgICAgICAgKFxuICAgICAgICAgICEoZXZlbnQucmVsYXRlZFRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZHJvcGRvd24taXRlbVwiKSAmJlxuICAgICAgICAgICEoZXZlbnQucmVsYXRlZFRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xhc3NMaXN0LmNvbnRhaW5zKFwibWVudUl0ZW1cIilcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLl90YWJiYWJsZXNbMF0uZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmdldFNlc3Npb24oKS5fd2luZG93TG9zdEZvY3VzID0gZmFsc2U7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZURvY0NsaWNrRXZlbnQoZXZlbnQ6IE1vdXNlRXZlbnQpIHtcbiAgICB0aGlzLndhc0NsaWNrT3V0c2lkZSA9IGZhbHNlO1xuXG4gICAgaWYgKFxuICAgICAgISgodGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQgYXMgSFRNTEVsZW1lbnQpLmNvbnRhaW5zKGV2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudCkpXG4gICAgKSB7XG4gICAgICB0aGlzLndhc0NsaWNrT3V0c2lkZSA9IHRydWU7XG4gICAgfVxuXG4gICAgbGV0IF9sZWZ0RGlzYWJsZWRFcnJvRWxlbWVudElkID0gW107XG4gICAgLy9pZiBkaXNhYmxlZCBlbGVtZW50XG4gICAgaWYgKHRoaXMuX2NhblRyYWNrRm9jdXNMb3N0T25FcnJvckRpc2FibGVkID09PSB0cnVlKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuX2Rpc2FibGVkRXJyb3JFbGVtZW50SWQgIT0gbnVsbCAmJlxuICAgICAgICB0aGlzLl9kaXNhYmxlZEVycm9yRWxlbWVudElkLmxlbmd0aCA+IDBcbiAgICAgICkge1xuXG4gICAgICAgIGZvciAobGV0IGVsSWQgb2YgdGhpcy5fZGlzYWJsZWRFcnJvckVsZW1lbnRJZCkge1xuICAgICAgICAgIGNvbnN0IGRpc2FibGVkRWwgPSBVaURvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsSWQpO1xuICAgICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IGRpc2FibGVkRWwuZ2V0RWxlbWVudCgpLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0Jyk7XG4gICAgICAgICAgaWYgKGRpc2FibGVkRWwgIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYoZXZlbnQudGFyZ2V0ICE9IGlucHV0RWxlbWVudClcbiAgICAgICAgICAgICAgZGlzYWJsZWRFbC5zZXRCZ0NvbG9yKFwiXCIpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICBfbGVmdERpc2FibGVkRXJyb0VsZW1lbnRJZC5wdXNoKGVsSWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYoX2xlZnREaXNhYmxlZEVycm9FbGVtZW50SWQubGVuZ3RoID09IDApe1xuICAgICAgICB0aGlzLl9kaXNhYmxlZEVycm9yRWxlbWVudElkID0gbnVsbDtcbiAgICAgICAgdGhpcy5fY2FuVHJhY2tGb2N1c0xvc3RPbkVycm9yRGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGVsc2V7XG4gICAgICAgIHRoaXMuX2Rpc2FibGVkRXJyb3JFbGVtZW50SWQgPSBfbGVmdERpc2FibGVkRXJyb0VsZW1lbnRJZDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjaGVja0tleShldmVudCl7XG4gICAgaWYgKHRoaXMuZGlzYWJsZWQgPT09IHRydWUpe1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIHRyYWNrRm9jdXNMb3N0T25FcnJvckRpc2FibGVkKCkge1xuICAgIHRoaXMuX2NhblRyYWNrRm9jdXNMb3N0T25FcnJvckRpc2FibGVkID0gdHJ1ZTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBEaWFsb2dDb21wb25lbnQgfSBmcm9tICcuL2RpYWxvZy5jb21wb25lbnQnO1xuaW1wb3J0IHsgTW9kYWxNb2R1bGUgfSBmcm9tICduZ3gtYm9vdHN0cmFwJztcbmltcG9ydCB7IERyYWdnYWJsZURpcmVjdGl2ZSB9IGZyb20gJy4vZHJhZ2dhYmxlLmRpcmVjdGl2ZSc7XG5cbkBOZ01vZHVsZSh7XG4gIGltcG9ydHM6IFtcbiAgICBDb21tb25Nb2R1bGUsXG4gICAgTW9kYWxNb2R1bGUuZm9yUm9vdCgpXG4gIF0sXG4gIGRlY2xhcmF0aW9uczogW1xuICAgIERpYWxvZ0NvbXBvbmVudCxcbiAgICBEcmFnZ2FibGVEaXJlY3RpdmVcbiAgXSxcbiAgZXhwb3J0czogW1xuICAgIERpYWxvZ0NvbXBvbmVudCxcbiAgICBEcmFnZ2FibGVEaXJlY3RpdmUsXG4gICAgTW9kYWxNb2R1bGVcbiAgXVxufSlcbmV4cG9ydCBjbGFzcyBEaWFsb2dNb2R1bGUgeyB9XG4iLCJpbXBvcnQgeyBEaXJlY3RpdmUsIElucHV0LCBFbGVtZW50UmVmLCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiAnW3Z0R3JpZENvbHVtbl0nXG59KVxuZXhwb3J0IGNsYXNzIEdyaWRDb2x1bW5EaXJlY3RpdmUgaW1wbGVtZW50cyBPbkluaXQge1xuICAvLyBDb2x1bW5TcGFuIG9mIGVsZW1lbnRcbiAgQElucHV0KCkgdnRHcmlkQ29sdW1uOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBlbDogRWxlbWVudFJlZikge1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXQgbGlmZWN5Y2xlLiBTZXQgZ3JpZCBjb2x1bW4gY3NzIGNsYXNzXG4gICAqL1xuICBuZ09uSW5pdCgpIHtcbiAgICBsZXQgY3NzQ2xhc3MgPSB0aGlzLnZ0R3JpZENvbHVtbiA/IGBjb2wtc20tJHt0aGlzLnZ0R3JpZENvbHVtbn1gIDogJ2NvbC1zbSc7XG4gICAgdGhpcy5lbC5uYXRpdmVFbGVtZW50LmNsYXNzTGlzdC5hZGQoY3NzQ2xhc3MpO1xuICB9XG5cbn1cbiIsImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBFbGVtZW50UmVmLCBJbnB1dCwgUmVuZGVyZXIyLCBmb3J3YXJkUmVmLCBPcHRpb25hbCwgU2tpcFNlbGYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEJhc2VDb21wb25lbnQgfSBmcm9tICcuLi9iYXNlL2Jhc2UuY29tcG9uZW50JztcbmltcG9ydCB7IFNlc3Npb25TZXJ2aWNlIH0gZnJvbSAnLi4vc2Vzc2lvbi9zZXNzaW9uLnNlcnZpY2UnO1xuXG4vKipcbiAqIENsYXNzIGZvciBIb3Jpem9udGFsIGxpbmUgKEhSKSBjb21wb25lbnRcbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAndnQtaG9yaXpvbnRhbC1zZXBhcmF0b3InLFxuICB0ZW1wbGF0ZVVybDogJy4vaG9yaXpvbnRhbC1zZXBhcmF0b3IuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9ob3Jpem9udGFsLXNlcGFyYXRvci5jb21wb25lbnQuY3NzJ10sXG4gIHByb3ZpZGVyczogW1xuICAgIHtcbiAgICAgIHByb3ZpZGU6IEJhc2VDb21wb25lbnQsXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKT0+SG9yaXpvbnRhbFNlcGFyYXRvckNvbXBvbmVudClcbiAgICB9XG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgSG9yaXpvbnRhbFNlcGFyYXRvckNvbXBvbmVudCBleHRlbmRzIEJhc2VDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICBASW5wdXQoKSBib3JkZXJDb2xvcjogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBcbiAgICogQHBhcmFtIHBhcmVudCBzZWUgW1tCYXNlQ29tcG9uZW50XV1cbiAgICogQHBhcmFtIHNlc3Npb25TZXJ2aWNlIHNlZSBbW0Jhc2VDb21wb25lbnRdXVxuICAgKiBAcGFyYW0gZWxlbWVudFJlZiBzZWUgW1tCYXNlQ29tcG9uZW50XV1cbiAgICogQHBhcmFtIHJlbmRlcmVyIHNlZSBbW0Jhc2VDb21wb25lbnRdXVxuICAgKi9cbiAgY29uc3RydWN0b3IoQE9wdGlvbmFsKCkgQFNraXBTZWxmKCkgcGFyZW50OiBCYXNlQ29tcG9uZW50LCBzZXNzaW9uU2VydmljZTogU2Vzc2lvblNlcnZpY2UsIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsIHJlbmRlcmVyOiBSZW5kZXJlcjIpIHtcbiAgICBzdXBlcihwYXJlbnQsIHNlc3Npb25TZXJ2aWNlLCBlbGVtZW50UmVmLCByZW5kZXJlcik7XG4gIH1cblxuICAvKipcbiAgICogSW5pdCBsaWZlY3ljbGUgbWV0aG9kXG4gICAqL1xuICBuZ09uSW5pdCgpIHtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgSlNPTiByZXByZXNlbnRhdGlvbiBmb3IgdGhpcyBjb21wb25lbnRcbiAgICovXG4gIHRvSnNvbigpIHtcbiAgICBjb25zdCBqc29uOiBhbnkgPSBzdXBlci50b0pzb24oKTtcbiAgICB0aGlzLnNldEpzb24oanNvbiwgXCJib3JkZXJDb2xvclwiLCB0aGlzLmJvcmRlckNvbG9yKTtcblxuICAgIHJldHVybiBqc29uO1xuICB9XG5cbn1cbiIsImltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgSG9yaXpvbnRhbFNlcGFyYXRvckNvbXBvbmVudCB9IGZyb20gJy4vaG9yaXpvbnRhbC1zZXBhcmF0b3IuY29tcG9uZW50JztcblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogW1xuICAgIENvbW1vbk1vZHVsZVxuICBdLFxuICBkZWNsYXJhdGlvbnM6IFtIb3Jpem9udGFsU2VwYXJhdG9yQ29tcG9uZW50XSxcbiAgZXhwb3J0czogW0hvcml6b250YWxTZXBhcmF0b3JDb21wb25lbnRdXG59KVxuZXhwb3J0IGNsYXNzIEhvcml6b250YWxTZXBhcmF0b3JNb2R1bGUgeyB9XG4iLCJleHBvcnQgY2xhc3MgSW50ZWdlciB7XG4gIHN0YXRpYyB0b1N0cmluZyhudW06IHN0cmluZykge1xuICAgIHJldHVybiBudW0gKyAnJztcbiAgfVxufVxuIiwiaW1wb3J0ICogYXMgbW9tZW50SW1wb3J0ZWQgZnJvbSAnbW9tZW50JztcblxuY29uc3QgbW9tZW50ID0gbW9tZW50SW1wb3J0ZWQ7XG5cbi8qKlxuICogSmF2YSBEYXRlRm9ybWF0XG4gKi9cbmV4cG9ydCBjbGFzcyBEYXRlRm9ybWF0IHtcbiAgICBzdGF0aWMgcmVhZG9ubHkgU0hPUlQ6IHN0cmluZyA9ICdNL0QvWVknO1xuICAgIHN0YXRpYyByZWFkb25seSBNRURJVU06IHN0cmluZyA9ICdNTU0gRCwgWVlZWSc7XG4gICAgc3RhdGljIHJlYWRvbmx5IExPTkc6IHN0cmluZyA9ICdNTU1NIEQsIFlZWVknO1xuXG4gICAgcHJpdmF0ZSBjYWxlbmRhcjogbW9tZW50SW1wb3J0ZWQuTW9tZW50O1xuXG4gICAgc3RhdGljIGdldERhdGVJbnN0YW5jZShwYXR0ZXJuOiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlRm9ybWF0KHBhdHRlcm4pO1xuICAgIH1cblxuICAgIC8vaWYgbm90IGxlbmllbnQgYW5kIGRhdGUgaXMgaW52YWxpZCBhZnRlciBiZWluZyBwYXJzZWQsIHdlIHRocm93IGVycm9yXG4gICAgcHJpdmF0ZSBpc0xlbmllbnQ6IGJvb2xlYW4gPSB0cnVlO1xuXG4gICAgY29uc3RydWN0b3IocHVibGljIGZvcm1hdFBhdHRlcm46IHN0cmluZyA9IG51bGwpIHtcbiAgICB9XG5cbiAgICBzdGF0aWMgamF2YVRvTW9tZW50RGF0ZUZvcm1hdChmbTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgcyA9IGZtLnJlcGxhY2UoL3kvZywgJ1knKTtcbiAgICAgICAgcmV0dXJuIHMucmVwbGFjZSgvZC9nLCAnRCcpO1xuICAgICAgICAvL3RoZSBhYm92ZSBpcyBuZWVkZWQgYi9jIG5nLXBhY2thZ3IgaXMgYmVpbmcgYSBiKioqXG4gICAgICAgIC8vaXQgZG9lc24ndCBsaWtlIHJldHVybiBmbS5yZXBsYWNlKC95L2csICdZJykucmVwbGFjZSgvZC9nLCAnRCcpO1xuICAgIH1cblxuICAgIHN0YXRpYyBub3coKTogbW9tZW50SW1wb3J0ZWQuTW9tZW50IHtcbiAgICAgIHJldHVybiBtb21lbnQoKTtcbiAgICB9XG5cbiAgICBmb3JtYXQoZGF0ZTogRGF0ZSB8IG1vbWVudEltcG9ydGVkLk1vbWVudCk6IHN0cmluZyB7XG4gICAgICAgIGlmIChkYXRlID09PSBudWxsKSByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKGRhdGUgPT09IHVuZGVmaW5lZCkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0UGF0dGVybiA9PSBudWxsID8gbW9tZW50KGRhdGUpLmZvcm1hdCgpOiBtb21lbnQoZGF0ZSkuZm9ybWF0KHRoaXMuZm9ybWF0UGF0dGVybik7XG4gICAgfVxuXG4gICAgcGFyc2UoZGF0ZVN0cmluZzogc3RyaW5nKTogbW9tZW50SW1wb3J0ZWQuTW9tZW50IHtcbiAgICAgICAgbGV0IG1vbWVudERhdGU6IG1vbWVudEltcG9ydGVkLk1vbWVudCA9IHRoaXMuZm9ybWF0UGF0dGVybiA/IG1vbWVudChkYXRlU3RyaW5nLCB0aGlzLmZvcm1hdFBhdHRlcm4pIDogbW9tZW50KGRhdGVTdHJpbmcpO1xuXG4gICAgICAgIGlmICh0aGlzLmlzTGVuaWVudCA9PT0gZmFsc2UgJiYgbW9tZW50RGF0ZS5pc1ZhbGlkKCkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBwYXJzZSBkYXRlIHN0cmluZzogJHtkYXRlU3RyaW5nfSwgdXNpbmcgZm9ybWF0OiAke3RoaXMuZm9ybWF0UGF0dGVybn1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2FsZW5kYXIgPSBtb21lbnREYXRlO1xuXG4gICAgICAgIHJldHVybiBtb21lbnREYXRlO1xuICAgIH1cblxuICAgIHNldExlbmllbnQobGVuaWVudDogYm9vbGVhbikge1xuICAgICAgICB0aGlzLmlzTGVuaWVudCA9IGxlbmllbnQ7XG4gICAgfVxuXG4gICAgc2V0Q2FsZW5kYXIoZGF0ZTogRGF0ZSB8IG1vbWVudEltcG9ydGVkLk1vbWVudCkge1xuICAgICAgdGhpcy5jYWxlbmRhciA9IG1vbWVudChkYXRlKTtcbiAgICB9XG5cbiAgICBnZXRDYWxlbmRhcigpOiBtb21lbnRJbXBvcnRlZC5Nb21lbnQge1xuICAgICAgcmV0dXJuIHRoaXMuY2FsZW5kYXI7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIElucHV0LCBFbGVtZW50UmVmLCBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgU2tpcFNlbGYsIE9wdGlvbmFsLCBDaGFuZ2VEZXRlY3RvclJlZiwgRXZlbnRFbWl0dGVyLCBPdXRwdXQsIFJlbmRlcmVyMiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQmFzZUNvbXBvbmVudCB9IGZyb20gJy4uL2Jhc2UvYmFzZS5jb21wb25lbnQnO1xuaW1wb3J0IHsgU2Vzc2lvblNlcnZpY2UgfSBmcm9tICcuLi9zZXNzaW9uL3Nlc3Npb24uc2VydmljZSc7XG5pbXBvcnQgeyBBbGlnbkhvcml6b250YWwgfSBmcm9tICcuLi9iYXNlL3N0eWxlLWxpdGVyYWxzJztcblxuLyoqXG4gKiBDbGFzcyBmb3IgbGFiZWwgY29tcG9uZW50LiBSZW5kZXJzIHRleHRcbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAndnQtbGFiZWwsdnQtY2VsbCcsXG4gIHRlbXBsYXRlVXJsOiAnLi9sYWJlbC5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2xhYmVsLmNvbXBvbmVudC5jc3MnXSxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gIHByb3ZpZGVyczogW1xuICAgIHtcbiAgICAgIHByb3ZpZGU6IEJhc2VDb21wb25lbnQsXG4gICAgICB1c2VFeGlzdGluZzogTGFiZWxDb21wb25lbnRcbiAgICB9XG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgTGFiZWxDb21wb25lbnQgZXh0ZW5kcyBCYXNlQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgQElucHV0KCkgYWxpZ25Ib3Jpem9udGFsOiBBbGlnbkhvcml6b250YWw7XG4gIEBJbnB1dCgpIHNldCB0b29sdGlwKHRvb2x0aXA6IHN0cmluZykge1xuICAgIGlmICh0b29sdGlwID09IG51bGwgfHwgdG9vbHRpcCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdGhpcy5fdG9vbHRpcCA9IFwiXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3Rvb2x0aXAgPSB0b29sdGlwO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBY2Nlc3NvciBtZXRob2QgZm9yIGludGVybmFsIFtbX3Rvb3RpcF1dIHByb3BlcnR5XG4gICAqL1xuICBnZXQgdG9vbHRpcCgpIHtcbiAgICByZXR1cm4gdGhpcy5fdG9vbHRpcDtcbiAgfVxuXG4gIHByaXZhdGUgX3Rvb2x0aXA6IHN0cmluZyA9ICcnO1xuXG4gIEBPdXRwdXQoKSBvbkNvbW1hbmQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSBwYXJlbnQgU2VlIFtbQmFzZUNvbXBvbmVudF1dXG4gICAqIEBwYXJhbSBzZXNzaW9uU2VydmljZSBzZWUgW1tCYXNlQ29tcG9uZW50XV1cbiAgICogQHBhcmFtIGVsZW1lbnRSZWYgc2VlIFtbQmFzZUNvbXBvbmVudF1dXG4gICAqIEBwYXJhbSBjZCBDaGFuZ2UgZGV0ZWN0b3IgcmVmXG4gICAqIEBwYXJhbSByZW5kZXJlciBzZWUgW1tCYXNlQ29tcG9uZW50XV1cbiAgICovXG4gIGNvbnN0cnVjdG9yKEBPcHRpb25hbCgpIEBTa2lwU2VsZigpIHBhcmVudDogQmFzZUNvbXBvbmVudCwgc2Vzc2lvblNlcnZpY2U6IFNlc3Npb25TZXJ2aWNlLCBlbGVtZW50UmVmOiBFbGVtZW50UmVmLCBwcml2YXRlIGNkOiBDaGFuZ2VEZXRlY3RvclJlZiwgcmVuZGVyZXI6IFJlbmRlcmVyMikge1xuXHRcdHN1cGVyKHBhcmVudCwgc2Vzc2lvblNlcnZpY2UsIGVsZW1lbnRSZWYsIHJlbmRlcmVyKTtcblx0fVxuXG4gIC8qKlxuICAgKiBJbml0IGxpZmVjeWNsZSBtZXRob2QuIFJ1bnMgd2hlbiBjb21wb25lbnQgaXMgY3JlYXRlZFxuICAgKi9cbiAgbmdPbkluaXQoKSB7XG4gICAgc3VwZXIubmdPbkluaXQoKTtcblxuICAgIGlmKHRoaXMuY29udHJvbFdpZHRoKSB7XG4gICAgICB0aGlzLmNvbnRyb2xXaWR0aCA9IHRoaXMuY29udHJvbFdpZHRoICsgJ3B4JztcbiAgICB9XG5cbiAgICBpZih0aGlzLm1hcmdpblJpZ2h0KSB7XG4gICAgICB0aGlzLm1hcmdpblJpZ2h0ID0gdGhpcy5tYXJnaW5SaWdodCArICdweCc7XG4gICAgfVxuXG4gICAgaWYodGhpcy5tYXJnaW5MZWZ0KSB7XG4gICAgICB0aGlzLm1hcmdpbkxlZnQgPSB0aGlzLm1hcmdpbkxlZnQgKyAncHgnO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZnRlciB2aWV3IGluaXQgbGlmZWN5Y2xlIG1ldGhvZC4gUnVucyBhZnRlciBjb21wb25lbnQgdmlldyBpcyBjcmVhdGVkXG4gICAqL1xuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgc3VwZXIubmdBZnRlclZpZXdJbml0KCk7XG5cbiAgICBpZiAodGhpcy5jb250cm9sSGVpZ2h0ICE9IG51bGwgJiYgdGhpcy5jb250cm9sSGVpZ2h0ICE9PSBcIlwiKSB7XG4gICAgICB0aGlzLnN0eWxlc1tcImhlaWdodFwiXSA9IHRoaXMuY29udHJvbEhlaWdodCArIFwicHhcIjtcbiAgICB9XG5cbiAgICB0aGlzLnNldEF0dHJpYnV0ZUZyb21EZWYoKTtcblxuICAgIC8vZml4IGV4cHJlc3Npb24gaGFzIGNoYW5nZWQgYmxhaCBibGFoIGJsYWhcbiAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBjb21wb25lbnRcbiAgICovXG4gIHRvSnNvbigpOiB7fSB7XG4gICAgY29uc3QganNvbjogYW55ID0gc3VwZXIudG9Kc29uKCk7XG4gICAgdGhpcy5zZXRKc29uKGpzb24sIFwiYWxpZ25Ib3Jpem9udGFsXCIsIHRoaXMuYWxpZ25Ib3Jpem9udGFsKTtcblxuICAgIHJldHVybiBqc29uO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB2YWx1ZSBvZiBbW3Rvb2x0aXBdXSBwcm9wZXJ0eVxuICAgKiBAcGFyYW0gdG9vbHRpcFxuICAgKi9cbiAgc2V0VG9vbHRpcCh0b29sdGlwOiBzdHJpbmcpIHtcbiAgICB0aGlzLnRvb2x0aXAgPSB0b29sdGlwO1xuICAgIHRoaXMuY2QubWFya0ZvckNoZWNrKCk7XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgaGFuZGxlciBmb3IgbW91c2Vkb3duIGV2ZW50LiBDYWxsIHBhcmVudCBjbGFzcyBbW2hhbmRsZU1vdXNlRG93bl1dXG4gICAqIEBwYXJhbSBlIE1vdXNlIGNsaWNrIGV2ZW50XG4gICAqL1xuICBvbk1vdXNlRG93bihlOiBNb3VzZUV2ZW50KSB7XG4gICAgdGhpcy5oYW5kbGVNb3VzZURvd24oZSlcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmVudCBoYW5kbGVyIGZvciBjbGljayBldmVudC5cbiAgICogQGV2ZW50IE9uQ29tbWFuZFxuICAgKi9cbiAgaGFuZGxlT25DbGljaygpIHtcbiAgICBpZiAodGhpcy5lbWl0SW50ZXJuYWxPbkNvbW1hbmQoKSA9PT0gZmFsc2UpIHtcbiAgICAgIHRoaXMub25Db21tYW5kLmVtaXQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHZhbHVlIG9mIFtbY2RdXSAoQ2hhbmdlRGV0ZWN0b3JSZWYpIHByb3BlcnR5XG4gICAqIEByZXR1cm5zIFRoZSBjb21wb25lbnQncyBjaGFuZ2UgZGV0ZWN0b3JcbiAgICovXG4gIHByb3RlY3RlZCBnZXRDaGFuZ2VEZXRlY3RvcigpIHtcbiAgICByZXR1cm4gdGhpcy5jZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgTmV4YVdlYiB0YWcgbmFtZVxuICAgKiBAcmV0dXJucyBOYW1lIG9mIHRhZ1xuICAgKi9cbiAgcHJvdGVjdGVkIGdldE54VGFnTmFtZSgpIHtcbiAgICByZXR1cm4gXCJsYWJlbFwiO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZSB0ZXh0IGlzIGFsbCBzcGFjZSBjaGFyYWN0ZXJzXG4gICAqIEByZXR1cm5zIElmIHRleHQgaXMganVzdCBzcGFjZSBjaGFyYWN0ZXJzIFRSVUUsIG90aGVyd2lzZSBGQUxTRVxuICAgKi9cbiAgZ2V0IHNwYWNlVGV4dCgpIHtcbiAgICByZXR1cm4gdGhpcy50ZXh0ICYmIHRoaXMudGV4dC5sZW5ndGggPiAwICYmIHRoaXMudGV4dC50cmltKCkubGVuZ3RoID09PSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBbW3Zpc2libGVdXSBwcm9wZXJ0eSB2YWx1ZVxuICAgKiBAb3ZlcnJpZGVcbiAgICogQHBhcmFtIHZhbHVlIFRvZ2dsZSB2aXNpYmlsaXR5XG4gICAqL1xuICBzZXRWaXNpYmxlKHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy52aXNpYmxlID0gdmFsdWU7XG4gICAgaWYgKHRoaXMudmlzaWJsZSkge1xuICAgICAgdGhpcy5yZW1vdmVDc3NDbGFzcygnaGlkZGVuJyk7XG4gICAgICB0aGlzLmdldEVsZW1lbnQoKS5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFkZENzc0NsYXNzKCdoaWRkZW4nKTtcbiAgICAgIHRoaXMuZ2V0RWxlbWVudCgpLnNldEF0dHJpYnV0ZSgnaGlkZGVuJywgJycpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBMYWJlbENvbXBvbmVudCB9IGZyb20gJy4vbGFiZWwuY29tcG9uZW50JztcbmltcG9ydCB7IEJhc2VNb2R1bGUgfSBmcm9tICcuLi9iYXNlL2Jhc2UubW9kdWxlJztcblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogW1xuICAgIENvbW1vbk1vZHVsZSxcblx0XHRCYXNlTW9kdWxlXG4gIF0sXG4gIGRlY2xhcmF0aW9uczogW0xhYmVsQ29tcG9uZW50XSxcbiAgZXhwb3J0czogW0xhYmVsQ29tcG9uZW50XSxcbiAgZW50cnlDb21wb25lbnRzOiBbXG4gICAgTGFiZWxDb21wb25lbnRcbiAgXVxufSlcbmV4cG9ydCBjbGFzcyBMYWJlbE1vZHVsZSB7IH1cbiIsImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCwgT3B0aW9uYWwsIFNraXBTZWxmLCBFbGVtZW50UmVmLCBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgZm9yd2FyZFJlZiwgVmlld0NvbnRhaW5lclJlZiwgQ29udGVudENoaWxkcmVuLCBRdWVyeUxpc3QsIENoYW5nZURldGVjdG9yUmVmLCBSZW5kZXJlcjIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEJhc2VDb21wb25lbnQgfSBmcm9tICcuLi9iYXNlL2Jhc2UuY29tcG9uZW50JztcbmltcG9ydCB7IFNlc3Npb25TZXJ2aWNlIH0gZnJvbSAnLi4vc2Vzc2lvbi9zZXNzaW9uLnNlcnZpY2UnO1xuaW1wb3J0IHsgQm9yZGVyUG9zaXRpb24sIExheW91dCB9IGZyb20gJy4uL2Jhc2Uvc3R5bGUtbGl0ZXJhbHMnO1xuaW1wb3J0IHsgQXR0cmlidXRlc0VudW0gfSBmcm9tICcuLi9iYXNlL2F0dHJpYnV0ZXMuZW51bSc7XG5pbXBvcnQgKiBhcyBfIGZyb20gXCJsb2Rhc2hcIjtcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAndnQtcGFuZWwnLFxuICB0ZW1wbGF0ZVVybDogJy4vcGFuZWwuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9wYW5lbC5jb21wb25lbnQuY3NzJ10sXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICBwcm92aWRlcnM6IFtcbiAgICB7XG4gICAgICBwcm92aWRlOiBCYXNlQ29tcG9uZW50LFxuICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCk9PlBhbmVsQ29tcG9uZW50KVxuICAgIH1cbiAgXVxufSlcbmV4cG9ydCBjbGFzcyBQYW5lbENvbXBvbmVudCBleHRlbmRzIEJhc2VDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICBASW5wdXQoKSBsYXlvdXQ6IExheW91dDtcbiAgQElucHV0KCkgY2FwdGlvbjogU3RyaW5nO1xuICBASW5wdXQoKSBldmVubHlTcGFjZTogYm9vbGVhbjsgLy9UT0RPIG5vdCBzdXJlIHdoYXQgdGhpcyBpcyBmb3JcbiAgLyoqXG4gICAqIEZvciBlc2NhcGluZyB1bm5lZWRlZCByb3cgJiBmbHVpZCBjb250YWluZXIuIFRoaXMgaXMgYSB0cmlrY3kgb3B0aW9uLlxuICAgKiBBbG1vc3QgY2FzZSwgZmx1aWQgY29udGFpbmVyIGlzIG5vdCBuZWVkZWQuIGl0J3MgdG9vIGxhdGUuLi5cbiAgICogQHByb3BlcnR5IHtib29sZWFufVxuICAgKi9cbiAgQElucHV0KCkgbm9HdXR0ZXI6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICAvKipcbiAgICogRm9yIGVzY2FwaW5nIGZsdWlkIGNvbnRhaW5lci4gVGhpcyBpcyBhIHRyaWtjeSBvcHRpb24uXG4gICAqIHNob3VsZCBiZSB2YWxpZGF0ZWQgYnkgYChsYXlvdXQgIT09ICdncmlkJylgIC4gaXQncyB0b28gbGF0ZS4uLlxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59XG4gICAqL1xuICBASW5wdXQoKSBub0dyaWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgLy9jaGlsZHJlbiBsaXN0IHRvIGtlZXAgaW5kZXhlc1xuICBAQ29udGVudENoaWxkcmVuKEJhc2VDb21wb25lbnQpIHNldCBjaGlsZHJlbkxpc3QoY2hpbGRyZW46IFF1ZXJ5TGlzdDxCYXNlQ29tcG9uZW50Pikge1xuICAgIHRoaXMucmVzZXRDaGlsZEluZGV4ZXMoY2hpbGRyZW4uZmlsdGVyKGNoaWxkPT5jaGlsZCAhPT0gdGhpcykpO1xuICB9XG5cbiAgcGFuZWxDbGFzc2VzOiBBcnJheTxzdHJpbmc+ID0gWyd2dC1wYW5lbCddO1xuICBwYW5lbFN0eWxlczoge1tuYW1lOiBzdHJpbmddOiBzdHJpbmd9ID0ge307XG5cbiAgLy8gw6fClMK7w6nCncKiw6PCg8Kqw6PCgsK1w6PCgsKkw6PCgsK6w6XCr8K+w6XCv8KcIFN0YXJ0XG4gIEBJbnB1dCgpIHJlc2l6ZUNvbXBvbmVudDogYm9vbGVhbiA9IGZhbHNlO1xuICBASW5wdXQoKSByZXNpemVNYXJnaW5Ub3A6IHN0cmluZyA9IG51bGw7XG4gIHJlc2l6ZUhlaWdodDogc3RyaW5nID0gbnVsbDtcbiAgZGl2SGVpZ2h0OiBzdHJpbmcgPSBudWxsO1xuICAvLyDDp8KUwrvDqcKdwqLDo8KDwqrDo8KCwrXDo8KCwqTDo8KCwrrDpcKvwr7DpcK/wpwgRW5kXG5cbiAgLy8gw6fClMK7w6nCncKiw6PCgcKuw6PCg8Ksw6PCgsKkw6PCgsKiw6PCgsKmw6PCg8KIw6XCm8K6w6XCrsKaw6XCjMKWw6XCr8K+w6XCv8KcIFN0YXJ0XG4gIEBJbnB1dCgpIGNvbnRlbnREaXNwbGF5V2lkdGg6IHN0cmluZyA9IG51bGw7XG4gIC8vIMOnwpTCu8Opwp3CosOjwoHCrsOjwoPCrMOjwoLCpMOjwoLCosOjwoLCpsOjwoPCiMOlwpvCusOlwq7CmsOlwozClsOlwq/CvsOlwr/CnCBFbmRcblxuICBjb25zdHJ1Y3RvcihAT3B0aW9uYWwoKSBAU2tpcFNlbGYoKSBwYXJlbnQ6IEJhc2VDb21wb25lbnQsIHNlc3Npb25TZXJ2aWNlOiBTZXNzaW9uU2VydmljZSwgZWxlbWVudFJlZjogRWxlbWVudFJlZiwgcHJpdmF0ZSBjZDogQ2hhbmdlRGV0ZWN0b3JSZWYsIHJlbmRlcmVyOiBSZW5kZXJlcjIpIHtcbiAgICBzdXBlcihwYXJlbnQsIHNlc3Npb25TZXJ2aWNlLCBlbGVtZW50UmVmLCByZW5kZXJlcik7XG4gIH1cblxuICAvKipcbiAgICogSW5pdCBsaWZlY3ljbGUuIFNldCBkaW1lbnNpb25zIGFuZCBjc3Mgc3R5bGVzXG4gICAqL1xuICBuZ09uSW5pdCgpIHtcbiAgICBzdXBlci5uZ09uSW5pdCgpO1xuXG4gICAgaWYgKHRoaXMuY3NzQ2xhc3MgIT0gbnVsbCkge1xuICAgICAgdGhpcy5jc3NDbGFzcy5zcGxpdCgnICcpLmZvckVhY2goY3NzPT50aGlzLnBhbmVsQ2xhc3Nlcy5wdXNoKGNzcykpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbnRhaW5lckxheW91dCA9PT0gdHJ1ZSAmJiAhdGhpcy5ub0dyaWQgJiYgIXRoaXMubm9HdXR0ZXIpIHtcbiAgICAgIHRoaXMucGFuZWxDbGFzc2VzLnB1c2goJ2NvbnRhaW5lci1mbHVpZCcpO1xuICAgIH1cblxuICAgIC8qaWYgKCF0aGlzLmJvcmRlckNvbG9yKSB7XG4gICAgICB0aGlzLmJvcmRlckNvbG9yID0gJ3RyYW5zcGFyZW50JztcbiAgICB9Ki9cblxuICAgIGlmICh0aGlzLmJvcmRlcldpZHRoKSB7XG4gICAgICB0aGlzLmJvcmRlcldpZHRoID0gdGhpcy5ib3JkZXJXaWR0aCArICdweCc7XG4gICAgICB0aGlzLmJvcmRlclN0eWxlID0gJ3NvbGlkJztcblxuICAgICAgIGlmKHRoaXMuYm9yZGVyQ29sb3IgPT0gbnVsbCl7XG4gICAgICAgICB0aGlzLmJvcmRlckNvbG9yID0gJyNmZmZmZmYnO1xuICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuY29udHJvbEhlaWdodCA9PSBudWxsKSB7XG4gICAgICB0aGlzLmNvbnRyb2xIZWlnaHQgPSAnMTAwJSc7XG4gICAgfVxuXG4gICAgdGhpcy5zZXRWaXNpYmxlKHRoaXMudmlzaWJsZSk7XG5cbiAgICAvLyDDp8KUwrvDqcKdwqLDo8KDwqrDo8KCwrXDo8KCwqTDo8KCwrrDpcKvwr7DpcK/wpwgU3RhcnRcbiAgICBpZiAodGhpcy5yZXNpemVDb21wb25lbnQpIHtcbiAgICAgIHRoaXMucmVzaXplSGVpZ2h0ID0gXCJjYWxjKDEwMCUgLSBcIiArIHRoaXMucmVzaXplTWFyZ2luVG9wICsgXCJweClcIjtcbiAgICAgIHRoaXMuZGl2SGVpZ2h0ID0gXCIxMDAlXCI7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubWFyZ2luTGVmdCkge1xuICAgICAgdGhpcy5tYXJnaW5MZWZ0ID0gdGhpcy5tYXJnaW5MZWZ0ICsgJ3B4JztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWZ0ZXIgdmlldyBpbml0IGxpZmVjeWNsZS4gU2V0IGRpbWVuc2lvbnMgYW5kIHRyaWdnZXIgY2hhbmdlIGRldGVjdGlvblxuICAgKi9cbiAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgIHN1cGVyLm5nQWZ0ZXJWaWV3SW5pdCgpO1xuXG4gICAgdGhpcy5pbml0V2lkdGhIZWlnaHRTdHlsZSgpO1xuXG4gICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIGNoaWxkcmVuTGlzdCBVcGRhdGUgbGlzdCBvZiBjaGlsZHJlbiBpZHNcbiAgICovXG4gIHByaXZhdGUgcmVzZXRDaGlsZEluZGV4ZXMoY2hpbGRyZW5MaXN0OiBBcnJheTxCYXNlQ29tcG9uZW50Pikge1xuICAgIGlmIChjaGlsZHJlbkxpc3QgIT0gbnVsbCAmJiBjaGlsZHJlbkxpc3QubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKHRoaXMuX2NoaWxkcmVuSW5kZXggIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5fY2hpbGRyZW5JbmRleCA9IF8udW5pcShfLmNvbmNhdChjaGlsZHJlbkxpc3QubWFwKGNoaWxkPT5jaGlsZC5nZXRJZCgpKSwgdGhpcy5fY2hpbGRyZW5JbmRleCkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgZGltZW5zaW9ucyBvZiBwYW5lbCBiYXNlZCBvbiBbW2NvbnRyb2xIZWlnaHRdXSBhbmQgW1tjb250cm9sV2lkdGhdXSBwcm9wZXJ0aWVzXG4gICAqIEBwYXJhbSBoZWlnaHRTdHlsZU5hbWVcbiAgICogQHBhcmFtIHdpZHRoU3R5bGVOYW1lXG4gICAqL1xuICBwcm90ZWN0ZWQgaW5pdFdpZHRoSGVpZ2h0U3R5bGUoaGVpZ2h0U3R5bGVOYW1lOiBzdHJpbmcgPSAnaGVpZ2h0Jywgd2lkdGhTdHlsZU5hbWU6IHN0cmluZyA9ICdtYXgtd2lkdGgnKSB7XG4gICAgaWYgKHRoaXMuY29udHJvbEhlaWdodCAhPSBudWxsICYmIHRoaXMuY29udHJvbEhlaWdodCAhPSBcIlwiICYmIHBhcnNlSW50KHRoaXMuY29udHJvbEhlaWdodCkgPiAwKSB7XG4gICAgICB0aGlzLnBhbmVsU3R5bGVzW1wiaGVpZ2h0XCJdID0gcGFyc2VJbnQodGhpcy5jb250cm9sSGVpZ2h0KSArIFwicHhcIjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb250cm9sV2lkdGggIT0gbnVsbCAmJiB0aGlzLmNvbnRyb2xXaWR0aCAhPSBcIlwiICYmIHBhcnNlSW50KHRoaXMuY29udHJvbFdpZHRoKSA+IDApIHtcbiAgICAgIHRoaXMucGFuZWxTdHlsZXNbd2lkdGhTdHlsZU5hbWVdID0gcGFyc2VJbnQodGhpcy5jb250cm9sV2lkdGgpICsgXCJweFwiO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgW1tkaXNhYmxlZF1dIHByb3BlcnR5IHZhbHVlXG4gICAqIEBwYXJhbSBib28gVG9nZ2xlIGRpc2FibGVkXG4gICAqL1xuICBzZXREaXNhYmxlZChib286IGJvb2xlYW4pe1xuICAgIHRoaXMuZGlzYWJsZWQgPSBib287XG4gICAgdGhpcy5nZXRDaGlsZHJlbigpLnRvQXJyYXkoKS5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgaXRlbS5zZXRBdHRyaWJ1dGUoQXR0cmlidXRlc0VudW0uRElTQUJMRUQsIGJvbyk7XG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgW1t2aXNpYmxlXV0gcHJvcGVydHkgdmFsdWVcbiAgICogQHBhcmFtIGJvbyBUb2dnbGUgdmlzaWJpbGl0eVxuICAgKi9cbiAgc2V0VmlzaWJsZShib286IGJvb2xlYW4pIHtcbiAgICB0aGlzLnZpc2libGUgPSBib287XG4gICAgaWYgKHRoaXMudmlzaWJsZSkge1xuICAgICAgdGhpcy5yZW1vdmVDc3NDbGFzcygnaGlkZGVuJyk7XG4gICAgICB0aGlzLmdldEVsZW1lbnQoKS5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFkZENzc0NsYXNzKCdoaWRkZW4nKTtcbiAgICAgIHRoaXMuZ2V0RWxlbWVudCgpLnNldEF0dHJpYnV0ZSgnaGlkZGVuJywgJycpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBbW2NhcHRpb25dXSBwcm9wZXJ0eSBleGlzdHMgYW5kIGlzIHNldFxuICAgKiBAcmV0dXJucyBUcnVlIGlmIGNhcHRpb24gZXhpc3RzIGFuZCBoYXMgY29udGVudCwgb3RoZXJ3aXNlIGZhbHNlXG4gICAqL1xuICBnZXQgaGFzQ2FwdGlvbigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jYXB0aW9uICE9IG51bGwgJiYgdGhpcy5jYXB0aW9uLmxlbmd0aCA+IDA7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgW1tsYXlvdXRdXSBwcm9wZXJ0eSBleGlzdHNcbiAgICogQHJldHVybnMgVHJ1ZSBpZiBsYXlvdXQgZXhpc3RzLCBvdGhlcndpc2UgZmFsc2VcbiAgICovXG4gIGdldCBjb250YWluZXJMYXlvdXQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubGF5b3V0ICE9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBbW2NkXV0gKENoYW5nZURldGVjdG9yUmVmKSBwcm9wZXJ0eVxuICAgKiBAcmV0dXJucyBDaGFuZ2UgZGV0ZWN0b3IgZm9yIHRoaXMgcGFuZWxcbiAgICovXG4gIHByb3RlY3RlZCBnZXRDaGFuZ2VEZXRlY3RvcigpOiBDaGFuZ2VEZXRlY3RvclJlZiB7XG4gICAgcmV0dXJuIHRoaXMuY2Q7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgd2hldGhlciBvciBub3QgdGhpcyBjb21wb25lbnQgaXMgYSBjb250YWluZXJcbiAgICogQHJldHVybnMgVHJ1ZSBzaW5jZSBwYW5lbHMgYXJlIGFsd2F5cyBjb250YWluZXJzXG4gICAqL1xuICBwcm90ZWN0ZWQgaXNDb250YWluZXIoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0TnhUYWdOYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwicGFuZWxcIjtcbiAgfVxufVxuIiwiaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBQYW5lbENvbXBvbmVudCB9IGZyb20gJy4vcGFuZWwuY29tcG9uZW50JztcbmltcG9ydCB7IEdyaWRDb2x1bW5EaXJlY3RpdmUgfSBmcm9tICcuL2dyaWQtY29sdW1uLmRpcmVjdGl2ZSc7XG5cbkBOZ01vZHVsZSh7XG4gIGltcG9ydHM6IFtcbiAgICBDb21tb25Nb2R1bGVcbiAgXSxcbiAgZGVjbGFyYXRpb25zOiBbXG4gICAgR3JpZENvbHVtbkRpcmVjdGl2ZSxcbiAgICBQYW5lbENvbXBvbmVudFxuICBdLFxuICBleHBvcnRzOiBbXG4gICAgR3JpZENvbHVtbkRpcmVjdGl2ZSxcbiAgICBQYW5lbENvbXBvbmVudFxuICBdXG59KVxuZXhwb3J0IGNsYXNzIExheW91dE1vZHVsZSB7IH1cbiIsImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIEVsZW1lbnRSZWYsIFNraXBTZWxmLCBPcHRpb25hbCwgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENoYW5nZURldGVjdG9yUmVmLCBSZW5kZXJlcjIsIGZvcndhcmRSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEJhc2VDb21wb25lbnQgfSBmcm9tICcuLi9iYXNlL2Jhc2UuY29tcG9uZW50JztcbmltcG9ydCB7IFNlc3Npb25TZXJ2aWNlIH0gZnJvbSAnLi4vc2Vzc2lvbi9zZXNzaW9uLnNlcnZpY2UnO1xuXG4vKipcbiAqIENsYXNzIGZvciBhIGxpbmsgY29tcG9uZW50XG4gKi9cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3Z0LWxpbmsnLFxuICB0ZW1wbGF0ZVVybDogJy4vbGluay5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2xpbmsuY29tcG9uZW50LmNzcyddLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgcHJvdmlkZXJzOiBbXG4gICAge1xuICAgICAgcHJvdmlkZTogQmFzZUNvbXBvbmVudCxcbiAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpPT5MaW5rQ29tcG9uZW50KVxuICAgIH1cbiAgXVxufSlcbmV4cG9ydCBjbGFzcyBMaW5rQ29tcG9uZW50IGV4dGVuZHMgQmFzZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIEBJbnB1dCgpIGlkTmFtZTogc3RyaW5nO1xuICBAT3V0cHV0KCkgb25Db21tYW5kID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gcGFyZW50IHNlZSBbW0Jhc2VDb21wb25lbnRdXSBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0gc2Vzc2lvblNlcnZpY2Ugc2VlIFtbQmFzZUNvbXBvbmVudF1dIGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSBlbGVtZW50UmVmIHNlZSBbW0Jhc2VDb21wb25lbnRdXSBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0gY2QgQ2hhbmdlIGRldGVjdG9yIHJlZmVyZW5jZSBmb3IgdGhpcyBjb21wb25lbnRcbiAgICogQHBhcmFtIHJlbmRlcmVyIHNlZSBbW0Jhc2VDb21wb25lbnRdXSBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3IoQE9wdGlvbmFsKCkgQFNraXBTZWxmKCkgcGFyZW50OiBCYXNlQ29tcG9uZW50LCBzZXNzaW9uU2VydmljZTogU2Vzc2lvblNlcnZpY2UsIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsIHByaXZhdGUgY2Q6IENoYW5nZURldGVjdG9yUmVmLCByZW5kZXJlcjogUmVuZGVyZXIyKSB7XG4gICAgc3VwZXIocGFyZW50LCBzZXNzaW9uU2VydmljZSwgZWxlbWVudFJlZiwgcmVuZGVyZXIpO1xuICB9XG5cbiAgLyogw6PCgsKrw6PCg8Ksw6PCg8Kzw6PCg8KAw6PCg8K8w6PCg8Kcw6PCgsK/w6PCg8Kzw6bCtMK7w6bCgMKnL8Opwp3CnsOmwrTCu8OmwoDCp8OjwoHCrsOowonCssOmwozCh8Olwq7CmiAqL1xuICBfZGlzYWJsZWQ6Ym9vbGVhbjtcbiAgZ2V0IGRpc2FibGVkKCl7cmV0dXJuIHRoaXMuX2Rpc2FibGVkOyB9XG4gIEBJbnB1dCgnZGlzYWJsZWQnKVxuICBzZXQgZGlzYWJsZWQodmFsdWUpe1xuICAgIHRoaXMub3BhY2l0eSA9IHZhbHVlID8gJzAuMyc6JzEuMCc7XG4gICAgdGhpcy5fZGlzYWJsZWQgPSB2YWx1ZTtcbiAgfVxuICBASW5wdXQoJ2lubmVyaHRtbCcpIGlubmVyaHRtbDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBJbml0IGxpZmVjeWNsZS4gQ2FsbHMgcGFyZW50IGluaXQgbWV0aG9kXG4gICAqL1xuICBuZ09uSW5pdCgpIHtcbiAgICBzdXBlci5uZ09uSW5pdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IGhhbmRsZXIgZm9yIGNsaWNrIGV2ZW50LiBEb2VzIG5vdCBlbWl0IGV2ZW50IGlmIHRoZSBwYW5lbCBpcyBkaXNhYmxlZFxuICAgKiBAZXZlbnQgT25Db21tYW5kXG4gICAqL1xuICBvbkNsaWNrKCkge1xuICAgIGlmICghdGhpcy5kaXNhYmxlZClcbiAgICAgIHRoaXMub25Db21tYW5kLmVtaXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmVudCBoYW5kbGVyIGZvciBrZXlkb3duIGV2ZW50LiBFeGVjdXRlIGNsaWNrIGhhbmRsZXIgaWYgaXQncyB0aGUgZW50ZXIga2V5XG4gICAqIEBwYXJhbSBlIEtleWJvYXJkIEV2ZW50XG4gICAqL1xuICBvbktleVVwKGU6IEtleWJvYXJkRXZlbnQpIHtcbiAgICAvLyBpZiBFTlRFUiBrZXlcbiAgICBpZiAoZS5rZXlDb2RlID09PSAxMykge1xuICAgICAgdGhpcy5vbkNsaWNrKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgSlNPTiByZXByZXNlbnRhdGlvbiBmb3IgcGFuZWxcbiAgICovXG4gIHRvSnNvbigpOiB7fSB7XG4gICAgY29uc3QganNvbjogYW55ID0gc3VwZXIudG9Kc29uKCk7XG5cbiAgICBpZiAoanNvbltcImN1c3RvbUF0dHJpYnV0ZXNcIl0gPT0gbnVsbCkge1xuICAgICAganNvbltcImN1c3RvbUF0dHJpYnV0ZXNcIl0gPSB7fTtcbiAgICB9XG5cbiAgICB0aGlzLnNldEpzb24oanNvbltcImN1c3RvbUF0dHJpYnV0ZXNcIl0sIFwiaWROYW1lXCIsIHRoaXMuaWROYW1lKTtcblxuICAgIHJldHVybiBqc29uO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgW1tjZF1dIChDaGFuZ2VEZXRlY3RvcikgcHJvcGVydHlcbiAgICogQHJldHVybnMgVmFsdWUgb2YgW1tjZF1dIHByb3BlcnR5XG4gICAqL1xuICBwcm90ZWN0ZWQgZ2V0Q2hhbmdlRGV0ZWN0b3IoKTogQ2hhbmdlRGV0ZWN0b3JSZWYge1xuICAgIHJldHVybiB0aGlzLmNkO1xuICB9XG59XG4iLCJpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IExpbmtDb21wb25lbnQgfSBmcm9tICcuL2xpbmsuY29tcG9uZW50JztcblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogW1xuICAgIENvbW1vbk1vZHVsZVxuICBdLFxuICBkZWNsYXJhdGlvbnM6IFtMaW5rQ29tcG9uZW50XSxcbiAgZXhwb3J0czogW0xpbmtDb21wb25lbnRdXG59KVxuZXhwb3J0IGNsYXNzIExpbmtNb2R1bGUgeyB9XG4iLCJleHBvcnQgY2xhc3MgTG9uZyB7XG4gIHN0YXRpYyB0b1N0cmluZyhudW06IG51bWJlcik6IHN0cmluZyB7XG4gICAgcmV0dXJuIG51bSArICcnO1xuICB9XG59XG4iLCJpbXBvcnQgKiBhcyBtb21lbnRJbXBvcnRlZCBmcm9tICdtb21lbnQtdGltZXpvbmUnO1xuXG4vLyBOZWVkIHRvIGRvIHRoaXMgdG8gcHJldmVudCBwYWNrYWdyIG5hbWVzcGFjZSBlcnJvclxuLy8gaHR0cHM6Ly9naXRodWIuY29tL25nLXBhY2thZ3IvbmctcGFja2Fnci9pc3N1ZXMvMjE3XG5jb25zdCBtb21lbnQgPSBtb21lbnRJbXBvcnRlZDtcblxuLyoqXG4gKiBTaW1wbGUgdXRpbCB0byBwYXJzZSBtb21lbnQgaW50byBwcm9wZXIgem9uZSAoaWYgbmVlZGVkKVxuICovXG4vLyBAZHluYW1pYyAtLSB0aGlzIGxpbmUgY29tbWVudCBpcyBuZWNlc3NhcnkgdG8gcHJldmVudCBwYWNrYWdyIGVycm9yXG5leHBvcnQgY2xhc3MgTW9tZW50VXRpbHMge1xuICBzdGF0aWMgdGltZVpvbmU6IHN0cmluZztcblxuICBzdGF0aWMgbW9tZW50KGRhdGVTdHJpbmc6IHN0cmluZywgZm9ybWF0Pzogc3RyaW5nKTogbW9tZW50SW1wb3J0ZWQuTW9tZW50IHtcbiAgICBpZiAoZm9ybWF0ICE9IG51bGwgJiYgZm9ybWF0ICE9ICcnKSB7XG4gICAgICBpZiAoTW9tZW50VXRpbHMudGltZVpvbmUgIT0gbnVsbCAmJiBNb21lbnRVdGlscy50aW1lWm9uZSAhPSAnJykge1xuICAgICAgICByZXR1cm4gbW9tZW50LnR6KGRhdGVTdHJpbmcsIGZvcm1hdCwgTW9tZW50VXRpbHMudGltZVpvbmUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbW9tZW50KGRhdGVTdHJpbmcsIGZvcm1hdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChNb21lbnRVdGlscy50aW1lWm9uZSAhPSBudWxsICYmIE1vbWVudFV0aWxzLnRpbWVab25lICE9ICcnKSB7XG4gICAgICAgIHJldHVybiBtb21lbnQudHooZGF0ZVN0cmluZywgTW9tZW50VXRpbHMudGltZVpvbmUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbW9tZW50KGRhdGVTdHJpbmcpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgVmlld0NoaWxkLCBDaGFuZ2VEZXRlY3RvclJlZiwgQWZ0ZXJWaWV3SW5pdCwgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgRHluYW1pY0VsZW1lbnQgfSBmcm9tIFwiLi9keW5hbWljLWVsZW1lbnRcIjtcbmltcG9ydCB7IEJhc2VDb21wb25lbnQgfSBmcm9tIFwiLi4vYmFzZS9iYXNlLmNvbXBvbmVudFwiO1xuaW1wb3J0IHsgQXBwVXRpbHMgfSBmcm9tIFwiLi4vYmFzZS9hcHAtdXRpbHNcIjtcbmltcG9ydCB7IEF0dHJpYnV0ZXNFbnVtIH0gZnJvbSBcIi4uL2Jhc2UvYXR0cmlidXRlcy5lbnVtXCI7XG5pbXBvcnQgKiBhcyBfIGZyb20gXCJsb2Rhc2hcIjtcblxuLyoqXG4gKiBEeW5hbWljQ29tcG9uZW50IGNsYXNzLiBSZW5kZXJzIGNvbXBvbmVudHMgYXQgcnVudGltZSBieSBkZWZpbml0aW9uXG4gKi9cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiBcInZ0LWR5bmFtaWMtY29tcG9uZW50XCIsXG4gICAgdGVtcGxhdGVVcmw6IFwiLi9keW5hbWljLmNvbXBvbmVudC5odG1sXCIsXG4gICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbn0pXG5leHBvcnQgY2xhc3MgRHluYW1pY0NvbXBvbmVudCBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQge1xuICAgIC8qKlxuICAgICAqIERlZmluaXRpb24gb2YgY29tcG9uZW50IHRvIHJlbmRlclxuICAgICAqL1xuICAgIEBJbnB1dCgpIGVsZW1lbnREZWY6IER5bmFtaWNFbGVtZW50O1xuICAgIEBWaWV3Q2hpbGQoXCJteUNvbXBvbmVudFwiLCB7IHJlYWQ6IEJhc2VDb21wb25lbnQgfSkgbXlDb21wb25lbnQ6IEJhc2VDb21wb25lbnQ7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNkOiBDaGFuZ2VEZXRlY3RvclJlZikge1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWZ0ZXIgaW5pdCBsaWZlY3ljbGUuXG4gICAgICovXG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgICAgICB0aGlzLmNsZWFuQ2xhc3MoKTtcblxuICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBlbGVtZW50IGlzIHZpc2libGVcbiAgICAgKiBAcmV0dXJucyBWYWx1ZSBvZiBbW0R5bmFtaWNFbGVtZW50XV0gdmlzaWJsZSBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBpc1Zpc2libGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnREZWYudmlzaWJsZSAhPT0gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGNvbXBvbmVudCBJRCBpZiBpdCBleGlzdHMsIG90aGVyd2lzZSBnZW5lcmF0ZSBhIHVuaXF1ZSBpZFxuICAgICAqIEByZXR1cm5zIENvbXBvbmVudCdzIGlkIHZhbHVlXG4gICAgICovXG4gICAgZ2V0SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnREZWYuaWQgPT0gbnVsbCA/IEJhc2VDb21wb25lbnQuZ2VuZXJhdGVVbmlxdWVJZCgpIDogdGhpcy5lbGVtZW50RGVmLmlkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV2ZW50IGhhbmRsZXIgZm9yIE9uQ29tbWFuZCBldmVudC4gQ2FsbCBydW50aW1lIGNvbXBvbmVudCdzIG9uQ29tbWFuZCBoYW5kbGVyXG4gICAgICovXG4gICAgaGFuZGxlT25Db21tYW5kKCkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuZWxlbWVudERlZi5vbkNvbW1hbmQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50RGVmLm9uQ29tbWFuZCh0aGlzLm15Q29tcG9uZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV2ZW50IGhhbmRsZXIgZm9yIE9uQ29udGV4dE1lbnUgKGkuZS4gcmlnaHQgY2xpY2ssIGN0cmwgY2xpY2spIGV2ZW50LiBDYWxsIHJ1bnRpbWUgY29tcG9uZW50J3Mgb25Db250ZXh0TWVudSBIYW5kbGVyXG4gICAgICovXG4gICAgaGFuZGxlT25Db250ZXh0TWVudSgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmVsZW1lbnREZWYub25Db250ZXh0TWVudSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnREZWYub25Db250ZXh0TWVudSh0aGlzLm15Q29tcG9uZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBydW50aW1lIGNvbXBvbmVudCdzICdlbmFibGVkJyBwcm9wZXJ0eSB2YWx1ZSBiYXNlZCBvbiBjc3NDbGFzcyBhbmQgY2FsbCBwYXJlbnQgY2xhc3MgY2xlYW5Dc3MgbWV0aG9kXG4gICAgICovXG4gICAgY2xlYW5DbGFzcygpIHtcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudERlZi5jc3NDbGFzcyAhPSBudWxsICYmIHRoaXMuZWxlbWVudERlZi5jc3NDbGFzcyAhPT0gXCJcIikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBBcHBVdGlscy5hdHRyaWJ1dGVPdmVycmlkZUNsYXNzID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhdHRycyA9IEFwcFV0aWxzLmF0dHJpYnV0ZU92ZXJyaWRlQ2xhc3ModGhpcy5lbGVtZW50RGVmLmNzc0NsYXNzKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoYXR0cnMgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBfLmZvckVhY2goYXR0cnMsICh2YWwpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsICE9IG51bGwgJiYgdmFsLmF0dHJpYnV0ZU5hbWUgPT09IEF0dHJpYnV0ZXNFbnVtLkVOQUJMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnREZWYuZW5hYmxlZCA9IHZhbC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnREZWYuY3NzQ2xhc3MgPSBCYXNlQ29tcG9uZW50LmNsZWFuQ3NzKHRoaXMuZWxlbWVudERlZi5jc3NDbGFzcyk7XG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT25Jbml0LCBPdXRwdXQsIEVsZW1lbnRSZWYsIEV2ZW50RW1pdHRlciwgQ2hhbmdlRGV0ZWN0b3JSZWYsIEFmdGVyVmlld0luaXQgLCBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgU2tpcFNlbGYsIE9wdGlvbmFsLCBWaWV3Q2hpbGQsIGZvcndhcmRSZWYsIFJlbmRlcmVyMn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBCYXNlQ29tcG9uZW50IH0gZnJvbSAnLi4vYmFzZS9iYXNlLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBTZXNzaW9uU2VydmljZSB9IGZyb20gJy4uL3Nlc3Npb24vc2Vzc2lvbi5zZXJ2aWNlJztcbmltcG9ydCB7IEF0dHJpYnV0ZXNFbnVtIH0gZnJvbSAnLi4vYmFzZS9hdHRyaWJ1dGVzLmVudW0nXG5cbmRlY2xhcmUgdmFyICQgOiBhbnk7XG5cbi8qKlxuICogQ2xhc3MgZm9yIHRleHQgZmllbGQgY29tcG9uZW50XG4gKi9cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3Z0LXRleHQtZmllbGQnLFxuICB0ZW1wbGF0ZVVybDogJy4vdGV4dC1maWVsZC5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL3RleHQtZmllbGQuY29tcG9uZW50LmNzcyddLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgcHJvdmlkZXJzOiBbXG4gICAge1xuICAgICAgcHJvdmlkZTogQmFzZUNvbXBvbmVudCxcbiAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpPT5UZXh0RmllbGRDb21wb25lbnQpXG4gICAgfVxuICBdXG59KVxuZXhwb3J0IGNsYXNzIFRleHRGaWVsZENvbXBvbmVudCBleHRlbmRzIEJhc2VDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQge1xuICBzdGF0aWMgcmVhZG9ubHkgTUFYX0xFTkdUSDogbnVtYmVyID0gOTk5OTsgLy9zaG91bGQgYmUgNTIzLi4uYnV0IDk5OTkgc2hvdWxkIGJlIGdvb2QgZW5vdWdoXG5cbiAgLyoqXG4gICAqIElucHV0IGVsZW1lbnQncyB2YWx1ZVxuICAgKi9cbiAgQElucHV0KCkgdmFsdWU6IHN0cmluZztcblxuICAvKipcbiAgICogV2hldGhlciBvciBub3QgdGV4dCBmaWVsZCBpcyBlZGl0YWJsZVxuICAgKi9cbiAgQElucHV0KCkgZWRpdGFibGU6IGJvb2xlYW4gfCBzdHJpbmcgPSB0cnVlO1xuXG4gIC8qKlxuICAgKiBNYXggaW5wdXQgYWxsb3dlZCBmb3IgY2hhcmFjdGVyc1xuICAgKi9cbiAgQElucHV0KCkgc2V0IG1heExlbmd0aChtYXg6IG51bWJlcikge1xuICAgIHRoaXMuX21heExlbmd0aCA9IG1heDtcbiAgfVxuXG4gIC8qKlxuICAgKiBIVE1MIGlucHV0IGVsZW1lbnQgdHlwZSBhdHRyaWJ1dGUuIERlZmF1bHRzIHRvICd0ZXh0J1xuICAgKi9cbiAgQElucHV0KCkgdHlwZTogc3RyaW5nID0gJ3RleHQnO1xuXG4gIEBPdXRwdXQoKSBvblRleHRDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gIEBPdXRwdXQoKSBvbkVkaXQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gIEBPdXRwdXQoKSBvbk1vdXNlVXAgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgZ2V0IG1heExlbmd0aCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9tYXhMZW5ndGggPiAwID8gdGhpcy5fbWF4TGVuZ3RoIDogVGV4dEZpZWxkQ29tcG9uZW50Lk1BWF9MRU5HVEg7XG4gIH1cblxuICBwcml2YXRlIF9tYXhMZW5ndGg6IG51bWJlciA9IFRleHRGaWVsZENvbXBvbmVudC5NQVhfTEVOR1RIO1xuICBwcml2YXRlIF90ZXh0QmVmb3JlRm9jdXNJbjpzdHJpbmc7Ly9mb3Igb25FZGl0KClcbiAgcHJpdmF0ZSBfdGV4dFByZXZpb3VzS2V5SW5wdXQ6c3RyaW5nOy8vZm9yIG9uVGV4dENoYW5nZSgpXG4gIEBWaWV3Q2hpbGQoJ2lucHV0JykgaW5wdXQ6IEVsZW1lbnRSZWY7XG5cbiAgc3R5bGVWYXI6IHtba2V5OiBzdHJpbmddOiBzdHJpbmd9ID0ge307XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSBwYXJlbnQgc2VlIFtbQmFzZUNvbXBvbmVudF1dIGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSBzZXNzaW9uU2VydmljZSBzZWUgW1tCYXNlQ29tcG9uZW50XV0gY29uc3RydWN0b3JcbiAgICogQHBhcmFtIGVsZW1lbnRSZWYgc2VlIFtbQmFzZUNvbXBvbmVudF1dIGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSBjZCBDaGFuZ2UgZGV0ZWN0b3IgZm9yIHRoaXMgY29tcG9uZW50XG4gICAqIEBwYXJhbSByZW5kZXJlciBzZWUgW1tCYXNlQ29tcG9uZW50XV0gY29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKEBPcHRpb25hbCgpIEBTa2lwU2VsZigpIHBhcmVudDogQmFzZUNvbXBvbmVudCwgc2Vzc2lvblNlcnZpY2U6IFNlc3Npb25TZXJ2aWNlLCBlbGVtZW50UmVmOiBFbGVtZW50UmVmLCBwcml2YXRlIGNkOiBDaGFuZ2VEZXRlY3RvclJlZiwgcmVuZGVyZXI6IFJlbmRlcmVyMikge1xuICAgIHN1cGVyKHBhcmVudCwgc2Vzc2lvblNlcnZpY2UsIGVsZW1lbnRSZWYsIHJlbmRlcmVyKTtcblxuICB9XG5cbiAgLyoqXG4gICAqIEluaXQgbGlmZWN5Y2xlLiBTZXQgZGltZW5zaW9ucyBhbmQgc3R5bGUgcHJvcGVydGllc1xuICAgKi9cbiAgbmdPbkluaXQoKSB7XG4gICAgc3VwZXIubmdPbkluaXQoKTtcbiAgICBpZiAodGhpcy5kaXNhYmxlZCAmJiB0aGlzLmZvbnRDb2xvckRpc2FibGVkKSB7XG4gICAgICB0aGlzLnN0eWxlVmFyW1wiY29sb3JcIl0gPSB0aGlzLmZvbnRDb2xvckRpc2FibGVkO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0eWxlVmFyW1wiY29sb3JcIl0gPSB0aGlzLmZvbnRDb2xvciB8fCAnaW5oZXJpdCc7XG4gICAgfVxuICAgIC8vIHRoaXMuc3R5bGVWYXJbXCJtYXJnaW4tbGVmdFwiXSA9IFwiMXB4XCI7XG4gICAgdGhpcy5zdHlsZVZhcltcIm1hcmdpbi1yaWdodFwiXSA9IFwiNXB4XCI7XG5cbiAgICAvLyB0aGlzLnN0eWxlc1tcIm1hcmdpbi1sZWZ0XCJdID0gXCIxcHhcIjtcbiAgICB0aGlzLnN0eWxlc1tcIm1hcmdpbi1yaWdodFwiXSA9IFwiNXB4XCI7XG5cbiAgICBpZih0aGlzLmNvbnRyb2xXaWR0aCl7XG4gICAgICB0aGlzLmNvbnRyb2xXaWR0aCA9IHRoaXMuY29udHJvbFdpZHRoICsgJ3B4JztcbiAgICB9XG5cbiAgICBpZih0aGlzLmNvbnRyb2xIZWlnaHQpe1xuICAgICAgdGhpcy5jb250cm9sSGVpZ2h0ID0gdGhpcy5jb250cm9sSGVpZ2h0ICsgJ3B4JztcbiAgICB9XG5cbiAgICBpZih0aGlzLm1hcmdpbkxlZnQpe1xuICAgICAgdGhpcy5tYXJnaW5MZWZ0ID0gdGhpcy5tYXJnaW5MZWZ0ICsgJ3B4JztcbiAgICB9XG5cbiAgICBpZih0aGlzLm1hcmdpblRvcCl7XG4gICAgICB0aGlzLm1hcmdpblRvcCA9IHRoaXMubWFyZ2luVG9wICsgJ3B4JztcbiAgICB9XG5cbiAgfVxuXG4gIC8qKlxuICAgKiBBZnRlciB2aWV3IGluaXQgbGlmZWN5Y2xlLiBTZXQgZGltZW5zaW9ucywgZm9jdXMgdGV4dCBmaWVsZFxuICAgKi9cbiAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgIHN1cGVyLm5nQWZ0ZXJWaWV3SW5pdCgpO1xuXG4gICAgdGhpcy5pbml0V2lkdGhIZWlnaHRTdHlsZSgpO1xuXG4gICAgdGhpcy5zZXRBdHRyaWJ1dGVGcm9tRGVmKCk7XG4gICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XG5cbiAgICBpZiAodGhpcy5mb2N1c09uQWN0aXZhdGlvbikge1xuICAgICAgdGhpcy5pbnB1dC5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudHlwZSA9PT0gJ2RhdGUnKSB7XG4gICAgICAvLyBSZW1vdmUgbmF0aXZlIGRhdGVwaWNrZXIgY29udHJvbHMgYXBwbGllZCBieSBDaHJvbWVcbiAgICAgIHRoaXMucmVuZGVyZXIuc2V0UHJvcGVydHkodGhpcy5pbnB1dC5uYXRpdmVFbGVtZW50LCAndHlwZScsICd0ZXh0Jyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IGhhbmRsZXIgZm9yIGJsdXIgKHVuZm9jdXMpIGV2ZW50XG4gICAqIEBwYXJhbSBlIElucHV0IGJsdXIgZXZlbnRcbiAgICovXG4gIG9uQmx1cihlLCB2YWx1ZSkge1xuICAgIGlmKCFkb2N1bWVudC5oYXNGb2N1cygpICYmICQoXCI6Zm9jdXNcIikubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMudGV4dCA9IHZhbHVlOy8vd2hlbiB0aGUgbGFzdCBjaGFyIGlzIFplbmtha3UgYW5kIHRoZSB1c2VyIGRvZXNuJ3QgcHJlc3MgJ0VudGVyJywgdGhpcyBpcyBuZWVkZWQuXG4gICAgaWYodGhpcy50ZXh0ICE9IHRoaXMuX3RleHRCZWZvcmVGb2N1c0luKVxuICAgICAgdGhpcy5vbkVkaXQuZW1pdCgpO1xuICAgIC8vIENoZWNrcyBmb3IgbnVtZXJpYyBkYXRlIGVudHJ5IHdpdGhvdXQgc2xhc2hlczogZS5nIDIwMTkwMTA0XG5cbiAgICAvLyBJZiB0aGUgdXNlciBlbnRlcnMgbnVtYmVycyB3aXRob3V0IHNsYXNoZXMgYXV0byBmb3JtYXQgYXMgZGF0ZVxuICAgIGlmICh0aGlzLnR5cGU9PT0nZGF0ZScgJiYgL15cXGR7OH0kL20udGVzdCh0aGlzLnRleHQpKSB7XG4gICAgICBsZXQgZm9ybWF0dGVkRGF0ZVN0cmluZyA9IFt0aGlzLnRleHQuc3Vic3RyKDAsNCksIHRoaXMudGV4dC5zdWJzdHIoNCwyKSwgdGhpcy50ZXh0LnN1YnN0cig2LDIpXS5qb2luKCcvJyk7XG4gICAgICB0aGlzLnRleHQgPSBmb3JtYXR0ZWREYXRlU3RyaW5nO1xuICAgIH1cblxuICAgIHRoaXMudmFsaWRhdGVGaWVsZChlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmVudCBoYW5kbGVyIGZvciBmb2N1cyBldmVudFxuICAgKiBAcGFyYW0gZSBJbnB1dCBmb2N1cyBldmVudFxuICAgKi9cbiAgb25Gb2N1cyhlKSB7XG4gICAgdGhpcy5pbnB1dC5uYXRpdmVFbGVtZW50LnNlbGVjdGlvblN0YXJ0ID0gdGhpcy50ZXh0Lmxlbmd0aDtcbiAgICB0aGlzLmlucHV0Lm5hdGl2ZUVsZW1lbnQuc2VsZWN0aW9uRW5kID0gdGhpcy50ZXh0Lmxlbmd0aDtcblxuICAgIGlmKCF0aGlzLmN1c3RvbUF0dHJpYnV0ZXMpXG4gICAgICByZXR1cm47XG4gICAgbGV0IGZvcm1hdE5hbWU6c3RyaW5nPSB0aGlzLmN1c3RvbUF0dHJpYnV0ZXNbJ2Zvcm1hdCddO1xuICAgIGlmIChmb3JtYXROYW1lICYmIGZvcm1hdE5hbWUuaW5kZXhPZihcImFkZF9jb21tYVwiKSA+PSAwKSB7XG4gICAgICBsZXQgdHh0TW91bnQgPSB0aGlzLnRleHQucmVwbGFjZSgvLC9nLFwiXCIpXG4gICAgICB0aGlzLnRleHQgPSB0eHRNb3VudDtcbiAgICB9XG4gICAgdGhpcy5fdGV4dEJlZm9yZUZvY3VzSW4gPSB0aGlzLnRleHQ7XG4gICAgdGhpcy5fdGV4dFByZXZpb3VzS2V5SW5wdXQgPSB0aGlzLnRleHQ7XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgaGFuZGxlciBmb3IgdGV4dCBpbnB1dFxuICAgKiBFbWl0IG9uVGV4dENoYW5nZSBiL2MgdXNlciBrZWVwIHR5cGluZyAoaW5wdXQgc3RpbGwgaGFzIGZvY3VzKVxuICAgKiBAcGFyYW0gZXZlbnRcbiAgICogQHBhcmFtIHZhbHVlXG4gICAqIEBldmVudCBvblRleHRDaGFuZ2VcbiAgICovXG4gIG9uSW5wdXQoZXZlbnQ6IEtleWJvYXJkRXZlbnQsIHZhbHVlOiBzdHJpbmcpIHtcbiAgICBpZihldmVudC5rZXlDb2RlID09IDggfHwgZXZlbnQua2V5Q29kZSA9PSA0NikvL0JhY2tzcGFjZSB8fCBEZWxldGVcbiAgICB7XG4gICAgICBsZXQgcG9zID0gdGhpcy5pbnB1dC5uYXRpdmVFbGVtZW50LnNlbGVjdGlvblN0YXJ0O1xuICAgICAgdGhpcy50ZXh0ID0gdmFsdWU7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5pbnB1dC5uYXRpdmVFbGVtZW50LnNlbGVjdGlvblN0YXJ0ID0gcG9zO1xuICAgICAgICB0aGlzLmlucHV0Lm5hdGl2ZUVsZW1lbnQuc2VsZWN0aW9uRW5kID0gcG9zO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmKHRoaXMuX3RleHRQcmV2aW91c0tleUlucHV0ICE9IHRoaXMudGV4dClcbiAgICAgIHRoaXMub25UZXh0Q2hhbmdlLmVtaXQoKTtcbiAgICB0aGlzLl90ZXh0UHJldmlvdXNLZXlJbnB1dCA9IHRoaXMudGV4dDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb2N1cyB0aGUgaW5wdXQgZWxlbWVudFxuICAgKi9cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgc2V0Rm9jdXMoKXtcbiAgICB0aGlzLmlucHV0Lm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgYmFja2dyb3VuZCBjb2xvciBDU1MgZm9yIHRoZSB0ZXh0IGlucHV0XG4gICAqIEBwYXJhbSBiZ0NvbG9yIENTUyBjb2xvciBzdHJpbmcgdmFsdWUgZm9yIGJhY2tncm91bmRcbiAgICovXG4gIHNldEJnQ29sb3IoYmdDb2xvcjogc3RyaW5nKVxuICB7XG4gICAgdGhpcy5pbnB1dC5uYXRpdmVFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGJnQ29sb3I7XG4gIH1cblxuICAvKipcbiAgICogR2V0IFtbX21heExlbmd0aF1dIHByb3BlcnR5IHZhbHVlXG4gICAqL1xuICBnZXRNYXhMZW5ndGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX21heExlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgW1tfbWF4TGVuZ3RoXV0gcHJvcGVydHkgdmFsdWVcbiAgICogQHBhcmFtIG1heCBNYXhpbXVtIGxlbmd0aCBvZiBjaGFyYWN0ZXIgaW5wdXRcbiAgICovXG4gIHNldE1heExlbmd0aChtYXg6IG51bWJlciB8IHN0cmluZykge1xuICAgIGlmICh0eXBlb2YgbWF4ID09PSBcIm51bWJlclwiKSB7XG4gICAgICB0aGlzLl9tYXhMZW5ndGggPSBtYXg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX21heExlbmd0aCA9IHBhcnNlSW50KG1heCk7XG4gICAgfVxuXG4gICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgSlNPTiByZXByZXNlbnRhdGlvbiBmb3IgdGhpcyB0ZXh0LWZpZWxkXG4gICAqL1xuICB0b0pzb24oKToge30ge1xuICAgIGNvbnN0IGpzb246IGFueSA9IHN1cGVyLnRvSnNvbigpO1xuICAgIHRoaXMuc2V0SnNvbihqc29uLCBcImVkaXRhYmxlXCIsIHRoaXMuZWRpdGFibGUpO1xuXG4gICAgaWYgKHRoaXMudmFsdWUgIT0gbnVsbCkge1xuICAgICAgdGhpcy5zZXRKc29uKGpzb24sIFwidmFsdWVcIiwgdGhpcy52YWx1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGpzb247XG4gIH1cblxuICAvKipcbiAgICogR2V0IGNvbXBvbmVudCBuYW1lXG4gICAqL1xuICBnZXRMb2NhbE5hbWUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJ0ZXh0RmllbGRcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHRleHQgY29udGVudCB2YWx1ZSBvZiB0aGUgaW5wdXQgZWxlbWVudFxuICAgKi9cbiAgZ2V0VmFsdWUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5nZXRUZXh0KCk7XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgaGFuZGxlciBmb3IgbW91c2V1cFxuICAgKiBAZXZlbnQgT25Nb3VzZVVwXG4gICAqL1xuICBoYW5kbGVNb3VzZVVwKCkge1xuICAgIHRoaXMub25Nb3VzZVVwLmVtaXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyBTdHJpbmcgVGFnIG5hbWVcbiAgICovXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIHByb3RlY3RlZCBnZXROeFRhZ05hbWUoKSB7XG4gICAgcmV0dXJuIFwidGV4dEZpZWxkXCI7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBbW2NkXV0gKENoYW5nZURldGVjdG9yKSBwcm9wZXJ0eVxuICAgKiBAcmV0dXJucyBDaGFuZ2UgZGV0ZWN0b3JcbiAgICovXG4gIHByb3RlY3RlZCBnZXRDaGFuZ2VEZXRlY3RvcigpOiBDaGFuZ2VEZXRlY3RvclJlZiB7XG4gICAgcmV0dXJuIHRoaXMuY2Q7XG4gIH1cblxuICAvL2FuZ3VsYXIgZG9lc24ndCBsaWtlIGFjY2Vzc2luZyBwcml2YXRlL3B1YmxpYyBtZXRob2RcbiAgX25vdGlmeUludGVybmFsQ2hhbmdlQ2IoKSB7XG4gICAgc3VwZXIuX25vdGlmeUludGVybmFsQ2hhbmdlQ2IoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3QgYWxsIHRleHRcbiAgICovXG4gIHNlbGVjdFRleHQoKXtcbiAgICB0aGlzLmlucHV0Lm5hdGl2ZUVsZW1lbnQuc2VsZWN0KCk7XG4gIH1cbiAgLyoqXG4gICAqIFNldCBbW3Zpc2libGVdXSBwcm9wZXJ0eSB2YWx1ZVxuICAgKiBAb3ZlcnJpZGVcbiAgICogQHBhcmFtIHZhbHVlIFRvZ2dsZSB2aXNpYmlsaXR5XG4gICAqL1xuICBzZXRWaXNpYmxlKHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy52aXNpYmxlID0gdmFsdWU7XG4gICAgaWYgKHRoaXMudmlzaWJsZSkge1xuICAgICAgdGhpcy5yZW1vdmVDc3NDbGFzcygnaGlkZGVuJyk7XG4gICAgICB0aGlzLmdldEVsZW1lbnQoKS5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFkZENzc0NsYXNzKCdoaWRkZW4nKTtcbiAgICAgIHRoaXMuZ2V0RWxlbWVudCgpLnNldEF0dHJpYnV0ZSgnaGlkZGVuJywgJycpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBUZXh0RmllbGRDb21wb25lbnQgfSBmcm9tICcuL3RleHQtZmllbGQuY29tcG9uZW50JztcbmltcG9ydCB7IEZvcm1zTW9kdWxlLCBSZWFjdGl2ZUZvcm1zTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuXG5ATmdNb2R1bGUoe1xuICBpbXBvcnRzOiBbXG4gICAgQ29tbW9uTW9kdWxlLFxuICAgIEZvcm1zTW9kdWxlLFxuICAgIFJlYWN0aXZlRm9ybXNNb2R1bGUsXG4gIF0sXG4gIGRlY2xhcmF0aW9uczogW1RleHRGaWVsZENvbXBvbmVudF0sXG4gIGV4cG9ydHM6IFtcbiAgICBUZXh0RmllbGRDb21wb25lbnQsXG4gICAgRm9ybXNNb2R1bGUsXG4gICAgUmVhY3RpdmVGb3Jtc01vZHVsZSxcbiAgXSxcbiAgZW50cnlDb21wb25lbnRzOiBbXG4gICAgVGV4dEZpZWxkQ29tcG9uZW50XG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgVGV4dEZpZWxkTW9kdWxlIHsgfVxuIiwiaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBEeW5hbWljQ29tcG9uZW50IH0gZnJvbSAnLi9keW5hbWljLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBCdXR0b25Nb2R1bGUgfSBmcm9tICcuLi9idXR0b24vYnV0dG9uLm1vZHVsZSc7XG5pbXBvcnQgeyBUZXh0RmllbGRNb2R1bGUgfSBmcm9tICcuLi90ZXh0LWZpZWxkL3RleHQtZmllbGQubW9kdWxlJztcbmltcG9ydCB7IExheW91dE1vZHVsZSB9IGZyb20gJy4uL2xheW91dC9sYXlvdXQubW9kdWxlJztcbmltcG9ydCB7IExhYmVsTW9kdWxlIH0gZnJvbSAnLi4vbGFiZWwvbGFiZWwubW9kdWxlJztcbmltcG9ydCB7IEhvcml6b250YWxTZXBhcmF0b3JNb2R1bGUgfSBmcm9tICcuLi9ob3Jpem9udGFsLXNlcGFyYXRvci9ob3Jpem9udGFsLXNlcGFyYXRvci5tb2R1bGUnO1xuXG5ATmdNb2R1bGUoe1xuICBpbXBvcnRzOiBbXG4gICAgQ29tbW9uTW9kdWxlLFxuICAgIEJ1dHRvbk1vZHVsZSxcbiAgICBMYWJlbE1vZHVsZSxcbiAgICBUZXh0RmllbGRNb2R1bGUsXG4gICAgTGF5b3V0TW9kdWxlLFxuICAgIEhvcml6b250YWxTZXBhcmF0b3JNb2R1bGVcbiAgXSxcbiAgZGVjbGFyYXRpb25zOiBbXG4gICAgRHluYW1pY0NvbXBvbmVudFxuICBdLFxuICBleHBvcnRzOiBbXG4gICAgRHluYW1pY0NvbXBvbmVudCxcbiAgICBCdXR0b25Nb2R1bGUsXG4gICAgTGFiZWxNb2R1bGUsXG4gICAgVGV4dEZpZWxkTW9kdWxlLFxuICAgIExheW91dE1vZHVsZSxcbiAgICBIb3Jpem9udGFsU2VwYXJhdG9yTW9kdWxlXG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgRHluYW1pY01vZHVsZSB7IH1cbiIsImltcG9ydCB7IER5bmFtaWNFbGVtZW50IH0gZnJvbSBcIi4vZHluYW1pYy1lbGVtZW50XCI7XG5cbmV4cG9ydCBjbGFzcyBEeW5hbWljRWxlbWVudEJ1aWxkZXIge1xuICAgIHByaXZhdGUgZHluYW1pY0VsZW1lbnQ6IER5bmFtaWNFbGVtZW50O1xuICAgIHByaXZhdGUgZHJvcFNoYWRvd0NvbG9yOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBkcm9wU2hhZG93T2Zmc2V0OiBzdHJpbmc7XG5cbiAgICBzdGF0aWMgY3JlYXRlTGFiZWxFbGVtZW50KHdoaXRlU3BhY2VXcmFwOiBib29sZWFuID0gZmFsc2UsIHBhZGRpbmc6IHN0cmluZyA9IG51bGwpIHtcbiAgICAgICAgY29uc3QgZWwgPSBuZXcgRHluYW1pY0VsZW1lbnRCdWlsZGVyKCk7XG4gICAgICAgIGVsLmR5bmFtaWNFbGVtZW50ID0ge1xuICAgICAgICAgICAgdHlwZTogXCJsYWJlbFwiXG4gICAgICAgIH07XG5cbiAgICAgICAgZWwuaW5pdFN0eWxlKCk7XG5cbiAgICAgICAgaWYgKHdoaXRlU3BhY2VXcmFwID09PSB0cnVlKSB7XG4gICAgICAgICAgICBlbC5keW5hbWljRWxlbWVudC5zdHlsZXNbXCJ3aGl0ZS1zcGFjZVwiXSA9IFwibm93cmFwXCI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGFkZGluZyAhPSBudWxsICYmIHBhZGRpbmcgIT09ICcnKSB7XG4gICAgICAgICAgICBlbC5keW5hbWljRWxlbWVudC5zdHlsZXNbXCJwYWRkaW5nXCJdID0gcGFkZGluZztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBlbDtcbiAgICB9XG5cbiAgICB0b0R5bmFtaWNFbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5keW5hbWljRWxlbWVudDtcbiAgICB9XG5cbiAgICBzZXRJZChpZDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuZHluYW1pY0VsZW1lbnQuaWQgPSBpZDtcbiAgICB9XG5cbiAgICBzZXRUZXh0KHRleHQ6IHN0cmluZykge1xuICAgICAgICB0aGlzLmR5bmFtaWNFbGVtZW50LnRleHQgPSB0ZXh0O1xuICAgIH1cblxuICAgIHNldFRleHQyKHRleHQ6IHN0cmluZykge1xuICAgICAgICAvL25vdCBzdXJlIHdoYXQgdGhpcyBpcywgZm9yIG5vdywgY3VzdG9tIGF0dHJpYnV0ZVxuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShcInRleHQyXCIsIHRleHQpO1xuICAgIH1cblxuICAgIHNldFZhbHVlKHZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5keW5hbWljRWxlbWVudC52YWx1ZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIHNldFRvb2x0aXAodG9vbHRpcDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuZHluYW1pY0VsZW1lbnQudG9vbHRpcCA9IHRvb2x0aXA7XG4gICAgfVxuXG4gICAgc2V0VmlzaWJsZSh2aXNpYmxlOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuZHluYW1pY0VsZW1lbnQudmlzaWJsZSA9IHZpc2libGU7XG4gICAgfVxuXG4gICAgc2V0RW5hYmxlZChlbmFibGVkOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuZHluYW1pY0VsZW1lbnQuZW5hYmxlZCA9IGVuYWJsZWQ7XG4gICAgfVxuXG4gICAgc2V0UG9wdXAocG9wdXBNZW51SWQ6IHN0cmluZykge1xuICAgICAgICB0aGlzLmR5bmFtaWNFbGVtZW50LnBvcHVwTWVudUlkID0gcG9wdXBNZW51SWQ7XG4gICAgfVxuXG4gICAgc2V0QmdDb2xvcihiZ0NvbG9yOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5pbml0U3R5bGUoKTtcbiAgICAgICAgdGhpcy5keW5hbWljRWxlbWVudC5zdHlsZXNbXCJiYWNrZ3JvdW5kLWNvbG9yXCJdID0gdGhpcy5jaGVja0N1c3RvbUNvbG9yKGJnQ29sb3IpO1xuICAgIH1cblxuICAgIGFkZENzc0NsYXNzKGNzc0NsYXNzOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5pbml0U3R5bGUoKTtcbiAgICAgICAgaWYgKHRoaXMuZHluYW1pY0VsZW1lbnQuY3NzQ2xhc3MgPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgIHRoaXMuZHluYW1pY0VsZW1lbnQuY3NzQ2xhc3MgPSBjc3NDbGFzcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZHluYW1pY0VsZW1lbnQuY3NzQ2xhc3MgPSB0aGlzLmR5bmFtaWNFbGVtZW50LmNzc0NsYXNzICsgXCIgXCIgKyBjc3NDbGFzcztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldEJvcmRlckNvbG9yKGJvcmRlckNvbG9yOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5pbml0U3R5bGUoKTtcbiAgICAgICAgdGhpcy5keW5hbWljRWxlbWVudC5zdHlsZXNbXCJib3JkZXItY29sb3JcIl0gPSB0aGlzLmNoZWNrQ3VzdG9tQ29sb3IoYm9yZGVyQ29sb3IpO1xuICAgICAgICB0aGlzLmluaXRCb3JkZXJTdHlsZSgpO1xuICAgIH1cblxuICAgIHNldEJvcmRlcldpZHRoKGJvcmRlcldpZHRoOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5pbml0U3R5bGUoKTtcbiAgICAgICAgdGhpcy5keW5hbWljRWxlbWVudC5zdHlsZXNbXCJib3JkZXItd2lkdGhcIl0gPSB0aGlzLmNvbnZlcnRTdHlsZVVuaXQoYm9yZGVyV2lkdGgpO1xuICAgICAgICB0aGlzLmluaXRCb3JkZXJTdHlsZSgpO1xuICAgIH1cblxuICAgIHNldEJvcmRlclN0eWxlKGJvcmRlclN0eWxlOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5pbml0U3R5bGUoKTtcbiAgICAgICAgdGhpcy5keW5hbWljRWxlbWVudC5zdHlsZXNbXCJib3JkZXItc3R5bGVcIl0gPSBib3JkZXJTdHlsZTtcbiAgICB9XG5cbiAgICBzZXRIZWlnaHQoaGVpZ2h0OiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5pbml0U3R5bGUoKTtcbiAgICAgICAgdGhpcy5keW5hbWljRWxlbWVudC5zdHlsZXNbXCJoZWlnaHRcIl0gPSBoZWlnaHQgKyBcInB4XCI7XG4gICAgfVxuXG4gICAgc2V0V2lkdGgod2lkdGg6IHN0cmluZykge1xuICAgICAgICB0aGlzLmluaXRTdHlsZSgpO1xuICAgICAgICB0aGlzLmR5bmFtaWNFbGVtZW50LnN0eWxlc1tcIndpZHRoXCJdID0gd2lkdGggKyBcInB4XCI7XG4gICAgfVxuXG4gICAgc2V0WCh4OiBzdHJpbmcgfCBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5pbml0U3R5bGUoKTtcbiAgICAgICAgdGhpcy5keW5hbWljRWxlbWVudC5zdHlsZXNbXCJwb3NpdGlvblwiXSA9IFwiYWJzb2x1dGVcIjtcbiAgICAgICAgdGhpcy5keW5hbWljRWxlbWVudC5zdHlsZXNbXCJsZWZ0XCJdID0geCArIFwicHhcIjtcbiAgICB9XG5cbiAgICBzZXRZKHk6IHN0cmluZyB8IG51bWJlcikge1xuICAgICAgICB0aGlzLmluaXRTdHlsZSgpO1xuICAgICAgICB0aGlzLmR5bmFtaWNFbGVtZW50LnN0eWxlc1tcInBvc2l0aW9uXCJdID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgICB0aGlzLmR5bmFtaWNFbGVtZW50LnN0eWxlc1tcInRvcFwiXSA9IHkgKyBcInB4XCI7XG4gICAgfVxuXG4gICAgc2V0Wih6OiBzdHJpbmcgfCBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5pbml0U3R5bGUoKTtcbiAgICAgICAgdGhpcy5keW5hbWljRWxlbWVudC5zdHlsZXNbXCJ6LWluZGV4XCJdID0geiA7XG4gICAgfVxuXG5cbiAgICBzZXRGb250Qm9sZChib286IHN0cmluZyB8IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5pbml0U3R5bGUoKTtcblxuICAgICAgICBpZiAoYm9vID09PSBcInRydWVcIiB8fCBib28gPT09IHRydWUpIHtcbiAgICAgICAgICAgIHRoaXMuZHluYW1pY0VsZW1lbnQuc3R5bGVzW1wiZm9udC13ZWlnaHRcIl0gPSBcImJvbGRcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZHluYW1pY0VsZW1lbnQuc3R5bGVzW1wiZm9udC13ZWlnaHRcIl0gPSBcIm5vcm1hbFwiO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0Rm9udFNpemUoc2l6ZTogc3RyaW5nIHwgbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuaW5pdFN0eWxlKCk7XG4gICAgICAgIHRoaXMuZHluYW1pY0VsZW1lbnQuc3R5bGVzW1wiZm9udC1zaXplXCJdID0gc2l6ZSArIFwicHhcIjtcbiAgICB9XG5cbiAgICBzZXRGb250Q29sb3IoY29sb3I6IHN0cmluZykge1xuICAgICAgICB0aGlzLmluaXRTdHlsZSgpO1xuICAgICAgICB0aGlzLmR5bmFtaWNFbGVtZW50LnN0eWxlc1tcImNvbG9yXCJdID0gdGhpcy5jaGVja0N1c3RvbUNvbG9yKGNvbG9yKTtcbiAgICB9XG5cbiAgICBzZXRNYXJnaW4obWFyZ2luOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5pbml0U3R5bGUoKTtcbiAgICAgICAgdGhpcy5keW5hbWljRWxlbWVudC5zdHlsZXNbXCJtYXJnaW5cIl0gPSB0aGlzLmNvbnZlcnRTdHlsZVVuaXQobWFyZ2luKTtcbiAgICB9XG5cbiAgICBzZXRBbGlnblZlcnRpY2FsKGFsaWduOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5pbml0U3R5bGUoKTtcblxuICAgICAgICBpZiAoYWxpZ24gPT09IFwiY2VudGVyXCIpIHtcbiAgICAgICAgICAgIGFsaWduID0gXCJtaWRkbGVcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZHluYW1pY0VsZW1lbnQuc3R5bGVzW1widmVydGljYWwtYWxpZ25cIl0gPSBhbGlnbjtcbiAgICB9XG5cbiAgICBzZXRBbGlnbkhvcml6b250YWwoYWxpZ246IHN0cmluZykge1xuICAgICAgICB0aGlzLmluaXRTdHlsZSgpO1xuICAgICAgICB0aGlzLmR5bmFtaWNFbGVtZW50LnN0eWxlc1tcInRleHQtYWxpZ25cIl0gPSBhbGlnbjtcbiAgICB9XG5cbiAgICBzZXRCb3JkZXJDb3JuZXIoYm9yZGVyQ29ybmVyOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5pbml0U3R5bGUoKTtcbiAgICAgICAgdGhpcy5keW5hbWljRWxlbWVudC5zdHlsZXNbXCJib3JkZXItcmFkaXVzXCJdID0gdGhpcy5jb252ZXJ0U3R5bGVVbml0KGJvcmRlckNvcm5lcik7XG4gICAgfVxuXG4gICAgc2V0RHJvcFNoYWRvd0NvbG9yKGRyb3BTaGFkb3dDb2xvcjogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuZHJvcFNoYWRvd0NvbG9yID0gdGhpcy5jaGVja0N1c3RvbUNvbG9yKGRyb3BTaGFkb3dDb2xvcik7XG4gICAgICAgIHRoaXMuc2V0Qm94U2hhZG93KCk7XG4gICAgfVxuXG4gICAgc2V0RHJvcFNoYWRvd09mZnNldChkcm9wU2hhZG93T2Zmc2V0OiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5kcm9wU2hhZG93T2Zmc2V0ID0gZHJvcFNoYWRvd09mZnNldDtcbiAgICAgICAgdGhpcy5zZXRCb3hTaGFkb3coKTtcbiAgICB9XG5cbiAgICBzZXRPbkNvbnRleHRNZW51KGZuOiAodGhpc0FyZz86IGFueSk9PnZvaWQpIHtcbiAgICAgICAgdGhpcy5keW5hbWljRWxlbWVudC5vbkNvbnRleHRNZW51ID0gZm47XG4gICAgfVxuXG4gICAgc2V0T25Db21tYW5kKGZuOiAodGhpc0FyZz86IGFueSk9PnZvaWQpIHtcbiAgICAgICAgdGhpcy5keW5hbWljRWxlbWVudC5vbkNvbW1hbmQgPSBmbjtcbiAgICB9XG5cbiAgICBzZXRBdHRyaWJ1dGUobmFtZTogc3RyaW5nLCB2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5keW5hbWljRWxlbWVudC5jdXN0b21BdHRyaWJ1dGVzID09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuZHluYW1pY0VsZW1lbnQuY3VzdG9tQXR0cmlidXRlcyA9IHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5keW5hbWljRWxlbWVudC5jdXN0b21BdHRyaWJ1dGVzW25hbWVdID0gdmFsdWU7XG4gICAgfVxuXG4gICAgc2V0UmljaFRleHQoc3RyOiBzdHJpbmcgfCBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuZHluYW1pY0VsZW1lbnQucmljaFRleHQgPSBzdHIgPT09IHRydWUgfHwgc3RyID09PSBcInRydWVcIjtcbiAgICB9XG5cbiAgICBhcHBlbmRDaGlsZChjaGlsZDogRHluYW1pY0VsZW1lbnRCdWlsZGVyKSB7XG4gICAgICAgIGlmICh0aGlzLmR5bmFtaWNFbGVtZW50LmNoaWxkcmVuID09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuZHluYW1pY0VsZW1lbnQuY2hpbGRyZW4gPSBbY2hpbGQuZHluYW1pY0VsZW1lbnRdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5keW5hbWljRWxlbWVudC5jaGlsZHJlbi5wdXNoKGNoaWxkLmR5bmFtaWNFbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdFN0eWxlKCkge1xuICAgICAgICBpZiAodGhpcy5keW5hbWljRWxlbWVudC5zdHlsZXMgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5keW5hbWljRWxlbWVudC5zdHlsZXMgPSB7fTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdEJvcmRlclN0eWxlKCkge1xuICAgICAgICBpZiAodGhpcy5keW5hbWljRWxlbWVudC5zdHlsZXNbXCJib3JkZXItc3R5bGVcIl0gPT0gbnVsbCB8fCB0aGlzLmR5bmFtaWNFbGVtZW50LnN0eWxlc1tcImJvcmRlci1zdHlsZVwiXSA9PSBcIlwiKSB7XG4gICAgICAgICAgICB0aGlzLmR5bmFtaWNFbGVtZW50LnN0eWxlc1tcImJvcmRlci1zdHlsZVwiXSA9IFwic29saWRcIjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgY29udmVydFN0eWxlVW5pdCh1bml0OiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKHVuaXQgIT0gbnVsbCAmJiB1bml0LmluZGV4T2YoXCIsXCIpID4gMCkge1xuICAgICAgICAgICAgdW5pdCA9IHVuaXQuc3BsaXQoXCIsXCIpLm1hcChtPT5tICsgXCJweFwiKS5qb2luKFwiIFwiKTtcbiAgICAgICAgfSBlbHNlIGlmICh1bml0ICE9IG51bGwgJiYgdW5pdCAhPT0gXCJcIikge1xuICAgICAgICAgICAgdW5pdCA9IHVuaXQgKyBcInB4XCI7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdW5pdDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldEJveFNoYWRvdygpIHtcbiAgICAgICAgaWYgKHRoaXMuZHJvcFNoYWRvd0NvbG9yICE9IG51bGwgJiYgdGhpcy5kcm9wU2hhZG93T2Zmc2V0ICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdFN0eWxlKCk7XG4gICAgICAgICAgICB0aGlzLmR5bmFtaWNFbGVtZW50LnN0eWxlc1tcImJveC1zaGFkb3dcIl0gPSBgJHt0aGlzLmRyb3BTaGFkb3dPZmZzZXR9cHggJHt0aGlzLmRyb3BTaGFkb3dPZmZzZXR9cHggJHt0aGlzLmRyb3BTaGFkb3dPZmZzZXR9cHggJHt0aGlzLmRyb3BTaGFkb3dDb2xvcn1gO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjaGVja0N1c3RvbUNvbG9yKGNvbG9yOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKGNvbG9yICE9IG51bGwgJiYgY29sb3IuaW5kZXhPZihcIiNcIikgPT09IDAgJiYgY29sb3IubGVuZ3RoID4gNykge1xuICAgICAgICAgICAgY29sb3IgPSBcInZhcihcIiArIGNvbG9yLnJlcGxhY2UoXCIjXCIsIFwiLS1cIikgKyBcIilcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjb2xvcjtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBPbkluaXQsIE91dHB1dCwgRWxlbWVudFJlZiwgRXZlbnRFbWl0dGVyLCBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgU2tpcFNlbGYsIE9wdGlvbmFsLCBDaGFuZ2VEZXRlY3RvclJlZiwgUmVuZGVyZXIyLCBmb3J3YXJkUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBCYXNlQ29tcG9uZW50IH0gZnJvbSAnLi4vYmFzZS9iYXNlLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBTZXNzaW9uU2VydmljZSB9IGZyb20gJy4uL3Nlc3Npb24vc2Vzc2lvbi5zZXJ2aWNlJztcbmltcG9ydCB7IGVsZW1lbnQgfSBmcm9tICdwcm90cmFjdG9yJztcbmltcG9ydCB7IFVpRG9jdW1lbnQgfSBmcm9tICcuLi9iYXNlL3VpLWRvY3VtZW50JztcblxuLyoqXG4gKiBDbGFzcyBmb3IgcmFkaW8gYnV0dG9uIGlucHV0IGNvbnRyb2xcbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAndnQtcmFkaW8tYnV0dG9uJyxcbiAgdGVtcGxhdGVVcmw6ICcuL3JhZGlvLWJ1dHRvbi5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL3JhZGlvLWJ1dHRvbi5jb21wb25lbnQuY3NzJ10sXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICBwcm92aWRlcnM6IFtcbiAgICB7XG4gICAgICBwcm92aWRlOiBCYXNlQ29tcG9uZW50LFxuICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCk9PlJhZGlvQnV0dG9uQ29tcG9uZW50KVxuICAgIH1cbiAgXVxufSlcbmV4cG9ydCBjbGFzcyBSYWRpb0J1dHRvbkNvbXBvbmVudCBleHRlbmRzIEJhc2VDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICBASW5wdXQoKSBncm91cDogc3RyaW5nO1xuICBASW5wdXQoKSBpZE5hbWU6IHN0cmluZztcbiAgQElucHV0KCkgdmFsdWU6IGFueTtcbiAgQElucHV0KCkgc2V0IGlzQ2hlY2tlZChib286IGJvb2xlYW4pIHtcbiAgICB0aGlzLmNoZWNrZWQgPSBib287XG4gIH1cblxuICBASW5wdXQoKSBjaGVja2VkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBfaW50ZXJuYWxDaGFuZ2VUcmFja2luZzogYm9vbGVhbjtcblxuICBAT3V0cHV0KCkgb25Db21tYW5kID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIC8qKlxuICAgKiBcbiAgICogQHBhcmFtIHBhcmVudCBzZWUgW1tCYXNlQ29tcG9uZW50XV0gY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHNlc3Npb25TZXJ2aWNlIHNlZSBbW0Jhc2VDb21wb25lbnRdXSBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0gZWxlbWVudFJlZiBzZWUgW1tCYXNlQ29tcG9uZW50XV0gY29uc3RydWN0b3JcbiAgICogQHBhcmFtIGNkIENoYW5nZSBkZXRlY3RvciBmb3IgdGhpcyBwYW5lbFxuICAgKiBAcGFyYW0gcmVuZGVyZXIgc2VlIFtbQmFzZUNvbXBvbmVudF1dIGNvbnN0cnVjdG9yXG4gICAqL1xuICBjb25zdHJ1Y3RvcihAT3B0aW9uYWwoKSBAU2tpcFNlbGYoKSBwYXJlbnQ6IEJhc2VDb21wb25lbnQsIHNlc3Npb25TZXJ2aWNlOiBTZXNzaW9uU2VydmljZSwgZWxlbWVudFJlZjogRWxlbWVudFJlZiwgcHJpdmF0ZSBjZDogQ2hhbmdlRGV0ZWN0b3JSZWYsIHJlbmRlcmVyOiBSZW5kZXJlcjIpIHtcbiAgICBzdXBlcihwYXJlbnQsIHNlc3Npb25TZXJ2aWNlLCBlbGVtZW50UmVmLCByZW5kZXJlcik7XG4gIH1cblxuICAvKipcbiAgICogSW5pdCBsaWZlY3ljbGUuIENhbGwgcGFyZW50IGluaXQgbWV0aG9kLlxuICAgKi9cbiAgbmdPbkluaXQoKSB7XG4gICAgc3VwZXIubmdPbkluaXQoKTtcblxuICAgIGlmICh0aGlzLmlkTmFtZSAhPSBudWxsKSB7XG4gICAgICB0aGlzLnNldEN1c3RvbUF0dHJpYnV0ZSgnaWROYW1lJywgdGhpcy5pZE5hbWUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZnRlciB2aWV3IGluaXQgbGlmZWN5Y2xlLiBTZXQgdGhlIHJhZGlvYnV0dG9uIGdyb3VwIGFuZCBhdHRyaWJ1dGVzLlxuICAgKiBDYWxscyBwYXJlbnQgbmdBZnRlclZpZXdJbnRpIG1ldGhvZFxuICAgKi9cbiAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgIHN1cGVyLm5nQWZ0ZXJWaWV3SW5pdCgpO1xuXG4gICAgaWYgKHRoaXMuZ2V0UGFyZW50KCkgIT0gbnVsbCkge1xuICAgICAgdGhpcy5nZXRQYXJlbnQoKS5hZGRSYWRpb0J1dHRvbkdyb3VwKHRoaXMpO1xuICAgIH1cblxuICAgIHRoaXMuc2V0QXR0cmlidXRlRnJvbURlZigpO1xuICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xuICAgIHRoaXMuX2ludGVybmFsQ2hhbmdlVHJhY2tpbmcgPSB0aGlzLmNoZWNrZWQ7XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgaGFuZGxlciBmb3IgY2hhbmdlIGV2ZW50XG4gICAqIEBldmVudCBPbkNvbW1hbmRcbiAgICovXG4gIG9uQ2hhbmdlKCkge1xuICAgIHRoaXMub25Db21tYW5kLmVtaXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFdmVudCBoYW5kbGVyIGZvciBjbGljayBldmVudC4gVXBkYXRlcyByYWRpbyBidXR0b24gc3RhdGVcbiAgICogQHBhcmFtIGV2ZW50IE1vdXNlIGNsaWNrIGV2ZW50XG4gICAqL1xuICBvbkNsaWNrKGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgXG4gICAgbGV0IGZpcmVPbkNoYW5nZSA9IGZhbHNlO1xuXG4gICAgLy9zYXZlIGN1cnJlbnQgdmFsdWUgYmVmb3JlIHJlc2V0XG4gICAgY29uc3QgdGVtcENoZWNrID0gdGhpcy5jaGVja2VkO1xuXG4gICAgdGhpcy5yZXNldEdyb3VwUmFkaW9zKCk7XG5cbiAgICAvL3Jlc2V0IGN1cnJlbnQgdmFsdWUgYmFjayBmb3Igb25DaGFuZ2VcbiAgICB0aGlzLl9pbnRlcm5hbENoYW5nZVRyYWNraW5nID0gdGVtcENoZWNrO1xuXG4gICAgLy9yZWdpc3RlciBjbGljayBmb3IgbWNvXG4gICAgdGhpcy5jaGVja2VkID0gdHJ1ZTtcbiAgICB0aGlzLmhhbmRsZUNsaWNrKGV2ZW50KTtcblxuICAgIGlmICh0aGlzLl9pbnRlcm5hbENoYW5nZVRyYWNraW5nICE9PSB0aGlzLmNoZWNrZWQpIHtcbiAgICAgIHRoaXMub25DaGFuZ2UoKTtcbiAgICAgIHRoaXMuX2ludGVybmFsQ2hhbmdlVHJhY2tpbmcgPSB0aGlzLmNoZWNrZWQ7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IGhhbmRsZXIgZm9yIG1vdXNlZG93biBldmVudFxuICAgKiBAcGFyYW0gZSBNb3VzZURvd24gZXZlbnRcbiAgICovXG4gIG9uTW91c2VEb3duKGU6IE1vdXNlRXZlbnQpIHtcbiAgICB0aGlzLmhhbmRsZU1vdXNlRG93bihlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGNvbXBvbmVudCBuYW1lXG4gICAqL1xuICBnZXRMb2NhbE5hbWUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJyYWRpb0J1dHRvblwiO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgW1t2YWx1ZV1dIHByb3BlcnR5XG4gICAqL1xuICBnZXRWYWx1ZSgpOiBhbnkge1xuICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgW1tjaGVja2VkXV0gcHJvcGVydHlcbiAgICovXG4gIGdldENoZWNrZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY2hlY2tlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB2YWx1ZSBmb3IgW1tjaGVja2VkXV0gcHJvcGVydHkgYW5kIHVwZGF0ZWQgW1tfaW50ZXJuYWxDaGFuZ2VUcmFja2luZ11dIHZhbHVlXG4gICAqIEBwYXJhbSBzaG91bGRDaGVja2VkIFRvZ2dsZSBjaGVja2VkXG4gICAqL1xuICBzZXRDaGVja2VkKHNob3VsZENoZWNrZWQ6IGJvb2xlYW4gfCBzdHJpbmcsIHNraXBJbnRlcm5hbENoYW5nZTogYm9vbGVhbiA9IGZhbHNlKSB7XG4gICAgaWYgKHNob3VsZENoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgIHRoaXMucmVzZXRHcm91cFJhZGlvcygpO1xuICAgIH1cblxuICAgIHRoaXMuY2hlY2tlZCA9IHNob3VsZENoZWNrZWQgPT09IHRydWUgfHwgc2hvdWxkQ2hlY2tlZCA9PT0gJ3RydWUnO1xuICAgIHRoaXMuX2ludGVybmFsQ2hhbmdlVHJhY2tpbmcgPSB0aGlzLmNoZWNrZWQ7XG4gICAgdGhpcy5tYXJrRm9yQ2hlY2soKTtcblxuICAgIC8vbm90aWZ5IGludGVybmFsIGNoYW5nZXMgKGZvciBpbnRlcm5hbCB1c2Ugb25seSlcbiAgICBpZiAoc2tpcEludGVybmFsQ2hhbmdlICE9PSB0cnVlKSB7XG4gICAgICB0aGlzLl9ub3RpZnlJbnRlcm5hbENoYW5nZUNiKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIHRoZSByYWRpbyBidXR0b24gb2YgdGhlIHBhcmVudCBncm91cCB0aGF0IG1hdGNoZXMgW1t2YWx1ZV1dXG4gICAqIEBwYXJhbSB2YWx1ZSBcbiAgICovXG4gIHNldFNlbGVjdGVkKHZhbHVlOiBhbnkpIHtcbiAgICBpZiAodmFsdWUgPT09IHRydWUgfHwgdmFsdWUgPT09IFwidHJ1ZVwiKSB7XG4gICAgICB0aGlzLnNldENoZWNrZWQodHJ1ZSk7XG4gICAgfSBlbHNlIGlmICh2YWx1ZSA9PSB0aGlzLnZhbHVlKSB7XG4gICAgICB0aGlzLnNldENoZWNrZWQodHJ1ZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRoaXMuZ2V0UGFyZW50KCkgIT0gbnVsbCkge1xuICAgICAgY29uc3QgZ3JvdXAgPSB0aGlzLmdldFBhcmVudCgpLmdldFJhZGlvQnV0dG9uR3JvdXAodGhpcy5ncm91cCk7XG5cbiAgICAgIGlmIChncm91cCAhPSBudWxsKSB7XG4gICAgICAgIGZvciAobGV0IHJhZGlvIG9mIGdyb3VwKSB7XG4gICAgICAgICAgaWYgKHJhZGlvLmdldFZhbHVlKCkgPT0gdmFsdWUpIHtcbiAgICAgICAgICAgIHJhZGlvLnNldENoZWNrZWQodHJ1ZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IEpTT04gcmVwcmVzZW50YXRpb24gZm9yIHRoZSByYWRpb2J1dHRvbiBjb21wb25lbnRcbiAgICogQHJldHVybnMgSlNPTlxuICAgKi9cbiAgdG9Kc29uKCk6IHt9IHtcbiAgICBjb25zdCBqc29uID0gc3VwZXIudG9Kc29uKCk7XG5cbiAgICBqc29uW1wiZ3JvdXBcIl0gPSB0aGlzLmdyb3VwO1xuICAgIGpzb25bXCJzZWxlY3RlZFwiXSA9IHRoaXMuY2hlY2tlZCA9PT0gdHJ1ZSA/IFwidHJ1ZVwiIDogXCJmYWxzZVwiO1xuXG4gICAgcmV0dXJuIGpzb247XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBOZXhhV2ViIHRhZyBuYW1lXG4gICAqIEByZXR1cm4gVGFnIG5hbWVcbiAgICovXG4gIHByb3RlY3RlZCBnZXROeFRhZ05hbWUoKSB7XG4gICAgcmV0dXJuIFwicmFkaW9CdXR0b25cIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBVbmNoZWNrIGFsbCByYWRpbyBidXR0b25zIGluIHRoZSByYWRpbyBidXR0b24ncyBncm91cFxuICAgKi9cbiAgcHJpdmF0ZSByZXNldEdyb3VwUmFkaW9zKCkge1xuICAgIGNvbnN0IGdyb3VwID0gdGhpcy5nZXRQYXJlbnQoKS5nZXRSYWRpb0J1dHRvbkdyb3VwKHRoaXMuZ3JvdXApO1xuXG4gICAgaWYgKGdyb3VwICE9IG51bGwpIHtcbiAgICAgIGZvciAobGV0IHJhZGlvIG9mIGdyb3VwKSB7XG4gICAgICAgIHJhZGlvLnNldENoZWNrZWQoZmFsc2UpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgW1tjZF1dIChDaGFuZ2VEZXRlY3Rvcikgb2YgdGhpcyBjb21wb25lbnRcbiAgICovXG4gIHByb3RlY3RlZCBnZXRDaGFuZ2VEZXRlY3RvcigpOiBDaGFuZ2VEZXRlY3RvclJlZiB7XG4gICAgcmV0dXJuIHRoaXMuY2Q7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhpcyBjb21wb25lbnQgaXMgYSByYWRpb2J1dHRvblxuICAgKiBAcmV0dXJucyBUcnVlXG4gICAqL1xuICBwcm90ZWN0ZWQgaXNSYWRpb0J1dHRvbigpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBSYWRpb0J1dHRvbkNvbXBvbmVudCB9IGZyb20gJy4vcmFkaW8tYnV0dG9uLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBGb3Jtc01vZHVsZSwgUmVhY3RpdmVGb3Jtc01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogW1xuICAgIENvbW1vbk1vZHVsZSxcbiAgICBGb3Jtc01vZHVsZSxcbiAgICBSZWFjdGl2ZUZvcm1zTW9kdWxlLFxuICBdLFxuICBkZWNsYXJhdGlvbnM6IFtSYWRpb0J1dHRvbkNvbXBvbmVudF0sXG4gIGV4cG9ydHM6IFtcbiAgICBSYWRpb0J1dHRvbkNvbXBvbmVudCxcbiAgICBGb3Jtc01vZHVsZSxcbiAgICBSZWFjdGl2ZUZvcm1zTW9kdWxlLFxuICBdLFxuICBlbnRyeUNvbXBvbmVudHM6IFtcbiAgICBSYWRpb0J1dHRvbkNvbXBvbmVudFxuICBdXG59KVxuZXhwb3J0IGNsYXNzIFJhZGlvQnV0dG9uTW9kdWxlIHsgfVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIEVsZW1lbnRSZWYsIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBTa2lwU2VsZiwgT3B0aW9uYWwsIGZvcndhcmRSZWYsIFJlbmRlcmVyMiwgQ2hhbmdlRGV0ZWN0b3JSZWYsIElucHV0LCBWaWV3Q2hpbGQsIE5nWm9uZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQmFzZUNvbXBvbmVudCB9IGZyb20gJy4uL2Jhc2UvYmFzZS5jb21wb25lbnQnO1xuaW1wb3J0IHsgU2Vzc2lvblNlcnZpY2UgfSBmcm9tICcuLi9zZXNzaW9uL3Nlc3Npb24uc2VydmljZSc7XG5cbi8qKlxuICogQ2xhc3MgZm9yIHNjcm9sbCBwYW5lIGNvbXBvbmVudFxuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICd2dC1zY3JvbGwtcGFuZScsXG4gIHRlbXBsYXRlVXJsOiAnLi9zY3JvbGwtcGFuZS5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL3Njcm9sbC1wYW5lLmNvbXBvbmVudC5jc3MnXSxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gIHByb3ZpZGVyczogW1xuICAgIHtcbiAgICAgIHByb3ZpZGU6IEJhc2VDb21wb25lbnQsXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKT0+U2Nyb2xsUGFuZUNvbXBvbmVudClcbiAgICB9XG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgU2Nyb2xsUGFuZUNvbXBvbmVudCBleHRlbmRzIEJhc2VDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuXG4gIC8vw6bCjMKHw6XCrsKaw6PCgcKVw6PCgsKMw6PCgcKfw6XCiMKGw6PCgcKgw6PCgcKRw6XCm8K6w6XCrsKaw6nCg8Kow6XCiMKGw6PCgcKow6PCgcKXw6PCgcKmw6nCmcKkw6PCgcKNw6PCgMKBw6PCgcKdw6PCgsKMw6TCu8Klw6XCpMKWw6PCgsKSw6XCj8Kvw6XCpMKJw6nCoMKYw6XCn8Kfw6PCgcKow6PCgcKZw6PCgsKLXG4gIEBJbnB1dCgpIHJlc2l6ZUhlaWdodDogc3RyaW5nO1xuICBASW5wdXQoKSBza2lwU2Nyb2xsQWRqdXN0bWVudDogYm9vbGVhbjtcblxuICBAVmlld0NoaWxkKCdzY3JvbGxEaXYnKSBzY3JvbGxEaXZFbGVtZW50OiBFbGVtZW50UmVmO1xuXG4gIHByaXZhdGUgX3Njcm9sbGVySGFuZGxlcjogKGV2ZW50KT0+dm9pZDtcblxuICBwcml2YXRlIF9zY3JvbGxWZXJ0aWNhbFBvcyA9IDA7XG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gcGFyZW50IHNlZSBbW0Jhc2VDb21wb25lbnRdXSBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0gc2Vzc2lvblNlcnZpY2Ugc2VlIFtbQmFzZUNvbXBvbmVudF1dIGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSBlbGVtZW50UmVmIHNlZSBbW0Jhc2VDb21wb25lbnRdXSBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0gcmVuZGVyZXIgc2VlIFtbQmFzZUNvbXBvbmVudF1dIGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSBjZCBDaGFuZ2UgZGV0ZWN0b3IgZm9yIHRoaXMgY29tcG9uZW50IGluc3RhbmNlXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBAT3B0aW9uYWwoKSBAU2tpcFNlbGYoKSBwYXJlbnQ6IEJhc2VDb21wb25lbnQsXG4gICAgc2Vzc2lvblNlcnZpY2U6IFNlc3Npb25TZXJ2aWNlLFxuICAgIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsXG4gICAgcmVuZGVyZXI6IFJlbmRlcmVyMixcbiAgICBwcml2YXRlIGNkOiBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICBwcml2YXRlIHpvbmU6IE5nWm9uZVxuICApIHtcbiAgICBzdXBlcihwYXJlbnQsIHNlc3Npb25TZXJ2aWNlLCBlbGVtZW50UmVmLCByZW5kZXJlcik7XG5cbiAgICB0aGlzLl9zY3JvbGxlckhhbmRsZXIgPSAoZXZlbnQpPT57XG4gICAgICB0aGlzLmhhbmRsZU9uU2Nyb2xsKGV2ZW50KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IFtbY2RdXSAoQ2hhbmdlIGRldGVjdG9yKSBwcm9wZXJ0eSB2YWx1ZVxuICAgKiBAcmV0dXJucyBDaGFuZ2UgZGV0ZWN0b3IgcmVmZXJlbmNlXG4gICAqL1xuICBnZXRDaGFuZ2VEZXRlY3RvcigpIHtcbiAgICByZXR1cm4gdGhpcy5jZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZnRlciB2aWV3IGluaXQgbGlmZWN5Y2xlLiBTZXQgZGltZW5zaW9ucyBhbmQgdHJpZ2dlciBjaGFuZ2UgZGV0ZWN0aW9uXG4gICAqL1xuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgc3VwZXIubmdBZnRlclZpZXdJbml0KCk7XG4gICAgaWYgKHRoaXMuY29udHJvbEhlaWdodCA9PSBudWxsKSB7XG4gICAgICB0aGlzLmNvbnRyb2xIZWlnaHQgPSAnMTAwJSc7XG4gICAgfVxuICAgIGlmICh0aGlzLmNvbnRyb2xIZWlnaHQgIT0gbnVsbCAmJiB0aGlzLmNvbnRyb2xIZWlnaHQgIT09IFwiXCIpIHtcbiAgICAgIHRoaXMuc3R5bGVzW1wiaGVpZ2h0XCJdID0gdGhpcy5jb250cm9sSGVpZ2h0ICsgXCJweFwiO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbnRyb2xXaWR0aCAhPSBudWxsICYmIHRoaXMuY29udHJvbFdpZHRoICE9PSBcIlwiKSB7XG4gICAgICB0aGlzLnN0eWxlc1tcIm1heC13aWR0aFwiXSA9IHRoaXMuY29udHJvbFdpZHRoICsgXCJweFwiO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm1heEhlaWdodCAhPSBudWxsICYmIHRoaXMubWF4SGVpZ2h0ICE9PSBcIlwiKSB7XG4gICAgICB0aGlzLnN0eWxlc1tcIm1heC1oZWlnaHRcIl0gPSB0aGlzLm1heEhlaWdodCArIFwicHhcIjtcbiAgICB9XG4gICAgaWYgKHRoaXMucmVzaXplSGVpZ2h0ICE9IG51bGwgJiYgdGhpcy5yZXNpemVIZWlnaHQgIT09IFwiXCIpIHtcbiAgICAgIHRoaXMuc3R5bGVzW1wiaGVpZ2h0XCJdID0gXCJjYWxjKDEwMCUgLSBcIiArIHRoaXMucmVzaXplSGVpZ2h0ICsgXCJweClcIjtcbiAgICB9XG5cbiAgICB0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCk9PntcbiAgICAgIC8vZm9yIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWF2ZWlvL25nbnNvcGhpYS9pc3N1ZXMvMTM5MiwgdHJhY2sgcG9zaXRpb24gb2Ygc2Nyb2xsIHBhbmVcbiAgICAgIC8vc28gaXQgY2FuIGJlIHJlc2V0IGJhY2sgd2hlbiB1c2VyIHN3aXRjaGluZyB0YWJzXG4gICAgICBpZiAodGhpcy5za2lwU2Nyb2xsQWRqdXN0bWVudCAhPT0gdHJ1ZSkge1xuICAgICAgICAodGhpcy5zY3JvbGxEaXZFbGVtZW50Lm5hdGl2ZUVsZW1lbnQgYXMgSFRNTEVsZW1lbnQpLmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcy5fc2Nyb2xsZXJIYW5kbGVyLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgc3VwZXIubmdPbkRlc3Ryb3koKTtcblxuICAgICh0aGlzLnNjcm9sbERpdkVsZW1lbnQubmF0aXZlRWxlbWVudCBhcyBIVE1MRWxlbWVudCkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCB0aGlzLl9zY3JvbGxlckhhbmRsZXIsIHRydWUpO1xuICAgIHRoaXMuX3Njcm9sbGVySGFuZGxlciA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xsIGV2ZW50IG9mIGRpdlxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVPblNjcm9sbChldmVudCkge1xuICAgIHRoaXMuX3Njcm9sbFZlcnRpY2FsUG9zID0gZXZlbnQuc3JjRWxlbWVudC5zY3JvbGxUb3A7XG4gIH1cblxuICByZXNldFNjcm9sbFRvcFRvUHJldmlvdXNQb3NpdGlvbigpIHtcbiAgICB0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCk9PntcbiAgICAgIHNldFRpbWVvdXQoKCk9PntcbiAgICAgICAgaWYodGhpcy5zY3JvbGxEaXZFbGVtZW50Lm5hdGl2ZUVsZW1lbnQuc2Nyb2xsVG9wICE9IHRoaXMuX3Njcm9sbFZlcnRpY2FsUG9zKSB7XG4gICAgICAgICAgdGhpcy5zY3JvbGxEaXZFbGVtZW50Lm5hdGl2ZUVsZW1lbnQuc2Nyb2xsVG9wID0gdGhpcy5fc2Nyb2xsVmVydGljYWxQb3M7XG4gICAgICAgIH1cbiAgICAgIH0sIDMwMCk7XG4gICAgfSk7XG4gIH1cblxuICByZXNldFNjcm9sbFRvcFBvc2l0aW9uKCkge1xuICAgIHRoaXMuem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKT0+e1xuICAgICAgc2V0VGltZW91dCgoKT0+e1xuICAgICAgICB0aGlzLl9zY3JvbGxWZXJ0aWNhbFBvcyA9IDA7XG4gICAgICAgIHRoaXMuc2Nyb2xsRGl2RWxlbWVudC5uYXRpdmVFbGVtZW50LnNjcm9sbFRvcCA9IHRoaXMuX3Njcm9sbFZlcnRpY2FsUG9zO1xuICAgICAgfSwgMzAwKTtcbiAgICB9KTtcbiAgfVxuXG4gIGlzU2Nyb2xsVmlldygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGlzU2Nyb2xsUGFuZSgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBTY3JvbGxQYW5lQ29tcG9uZW50IH0gZnJvbSAnLi9zY3JvbGwtcGFuZS5jb21wb25lbnQnO1xuXG5ATmdNb2R1bGUoe1xuICBpbXBvcnRzOiBbXG4gICAgQ29tbW9uTW9kdWxlXG4gIF0sXG4gIGRlY2xhcmF0aW9uczogW1Njcm9sbFBhbmVDb21wb25lbnRdLFxuICBleHBvcnRzOiBbXG4gICAgU2Nyb2xsUGFuZUNvbXBvbmVudFxuICBdXG59KVxuZXhwb3J0IGNsYXNzIFNjcm9sbFBhbmVNb2R1bGUgeyB9XG4iLCJpbXBvcnQgKiBhcyBfIGZyb20gXCJsb2Rhc2hcIjtcblxuZXhwb3J0IGNsYXNzIFN0cmluZ0J1aWxkZXIge1xuICBwcml2YXRlIF9pbnRlcm5hbFN0cmluZzogc3RyaW5nID0gXCJcIjtcblxuICBjb25zdHJ1Y3Rvcihpbml0aWFsPzogc3RyaW5nKSB7XG4gICAgaWYgKGluaXRpYWwgIT0gbnVsbCkge1xuICAgICAgdGhpcy5hcHBlbmQoaW5pdGlhbCk7XG4gICAgfVxuICB9XG5cbiAgYXBwZW5kKHN0cjogc3RyaW5nIHwgU3RyaW5nQnVpbGRlcikge1xuICAgIGlmIChzdHIgaW5zdGFuY2VvZiBTdHJpbmdCdWlsZGVyKSB7XG4gICAgICB0aGlzLl9pbnRlcm5hbFN0cmluZyA9IHRoaXMuX2ludGVybmFsU3RyaW5nICsgc3RyLnRvU3RyaW5nKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2ludGVybmFsU3RyaW5nID0gdGhpcy5faW50ZXJuYWxTdHJpbmcgKyBzdHI7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ludGVybmFsU3RyaW5nO1xuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgdGhpcy5faW50ZXJuYWxTdHJpbmcgPSBcIlwiO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLmNsZWFyKCk7XG4gIH1cblxuICBpbmRleE9mKHN0cjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5faW50ZXJuYWxTdHJpbmcuaW5kZXhPZihzdHIpO1xuICB9XG5cbiAgc3Vic3RyaW5nKHN0YXJ0SWR4OiBudW1iZXIsIGVuZElkeD86IG51bWJlcik6IHN0cmluZyB7XG4gICAgaWYgKGVuZElkeCAhPSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhpcy5faW50ZXJuYWxTdHJpbmcuc3Vic3RyaW5nKHN0YXJ0SWR4LCBlbmRJZHgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9pbnRlcm5hbFN0cmluZy5zdWJzdHJpbmcoc3RhcnRJZHgpO1xuICB9XG5cbiAgcmVwbGFjZShzdGFydElkeDogbnVtYmVyLCBlbmRJZGV4OiBudW1iZXIsIHJlcGxhY2VTdHI6IHN0cmluZyk6IFN0cmluZ0J1aWxkZXIge1xuICAgIGNvbnN0IGIgPSB0aGlzLl9pbnRlcm5hbFN0cmluZy5zdWJzdHJpbmcoMCwgc3RhcnRJZHgpO1xuICAgIGNvbnN0IGUgPSB0aGlzLl9pbnRlcm5hbFN0cmluZy5zdWJzdHJpbmcoZW5kSWRleCk7XG5cbiAgICB0aGlzLl9pbnRlcm5hbFN0cmluZyA9IGIgKyByZXBsYWNlU3RyICsgZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGxlbmd0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW50ZXJuYWxTdHJpbmcubGVuZ3RoO1xuICB9XG5cbiAgY2hhckF0KGk6IG51bWJlcik6IHN0cmluZyB7XG4gICAgaWYgKGkgPCB0aGlzLl9pbnRlcm5hbFN0cmluZy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9pbnRlcm5hbFN0cmluZy5jaGFyQXQoaSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBzZXRDaGFyQXQoaWR4OiBudW1iZXIsIHZhbDogbnVtYmVyIHwgc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHR5cGVvZiB2YWwgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHRoaXMuaW5zZXJ0KGlkeCwgU3RyaW5nLmZyb21DaGFyQ29kZSh2YWwpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pbnNlcnQoaWR4LCB2YWwpO1xuICAgIH1cbiAgfVxuXG4gIGRlbGV0ZUNoYXJBdChpOiBudW1iZXIpOiBTdHJpbmdCdWlsZGVyIHtcbiAgICB0aGlzLnJlcGxhY2UoaSwgaSwgJycpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgaW5zZXJ0KGluZGV4OiBudW1iZXIsIHN0cjogc3RyaW5nKTogU3RyaW5nQnVpbGRlciB7XG4gICAgaWYgKGluZGV4IDw9IHRoaXMuX2ludGVybmFsU3RyaW5nLmxlbmd0aCkge1xuICAgICAgdGhpcy5faW50ZXJuYWxTdHJpbmcgPSB0aGlzLl9pbnRlcm5hbFN0cmluZy5zdWJzdHJpbmcoMCwgaW5kZXggLSAxKSArIHN0ciArIHRoaXMuX2ludGVybmFsU3RyaW5nLnN1YnN0cmluZyhpbmRleCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBsYXN0SW5kZXhPZihjaHI6IHN0cmluZykge1xuICAgIGlmICh0aGlzLl9pbnRlcm5hbFN0cmluZyAhPSBudWxsKSB7XG4gICAgICByZXR1cm4gXy5sYXN0SW5kZXhPZih0aGlzLl9pbnRlcm5hbFN0cmluZywgY2hyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gLTE7XG4gIH1cbn1cbiIsImltcG9ydCB7IERpcmVjdGl2ZSwgVGVtcGxhdGVSZWYsIElucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbi8qKlxuICogVGhpcyBkaXJlY3RpdmUgc2VydmUgYXMgYSB0ZW1wbGF0ZSBmb3IgcmVuZGVyaW5nIHRhYmxlIGNlbGwuXG4gKi9cbkBEaXJlY3RpdmUoe1xuICAgIHNlbGVjdG9yOiAnW3Z0LXRhYmxlLWNlbGxdJ1xufSlcbmV4cG9ydCBjbGFzcyBUYWJsZUNlbGxEaXJlY3RpdmUge1xuICAgIEBJbnB1dCgpIG9uQ29udGV4dE1lbnVDYjogKHBhcmVudFZpZXc6IGFueSk9PnZvaWQ7XG5cbiAgICAvKipcbiAgICAgKiBIb3Jpem9udGFsIGFsaWdubWVudCAoY2VudGVyLCBsZWZ0LCByaWdodClcbiAgICAgKi9cbiAgICBASW5wdXQoKSBhbGlnbkhvcml6b250YWw6IHN0cmluZztcbiAgICBcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gdGVtcGxhdGUgVGVtcGxhdGUgb24gaG93IHRvIHJlbmRlciB0aGUgY2VsbCwgd2Ugd2lsbCBmb3J3YXJkIHJvdywgY29sdW1uLCBldGMgdG8gdGhlIHRlbXBsYXRlXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocHVibGljIHRlbXBsYXRlOiBUZW1wbGF0ZVJlZjxhbnk+KSB7XG5cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBEaXJlY3RpdmUsIFRlbXBsYXRlUmVmLCBJbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG4vKipcbiAqIFRoaXMgdGVtcGxhdGUgaXMgdXNlZCB0byByZW5kZXIgaGVhZGVyIGlmIGEgY3VzdG9tZXIgcmVuZGVyaW5nIGlzIG5lZWRlZCwgYnkgZGVmYXVsdCwgaGVhZGVyIGNhbiBiZSBwYXNzZWQgaW5cbiAqIHRvIHRoZSBUYWJsZUNvbHVtbkRpcmVjdGl2ZSBhcyBhIHN0cmluZ1xuICovXG5ARGlyZWN0aXZlKHtcbiAgICBzZWxlY3RvcjogJ1t2dC10YWJsZS1oZWFkZXJdJ1xufSlcbmV4cG9ydCBjbGFzcyBUYWJsZUhlYWRlckRpcmVjdGl2ZSB7XG4gICAgQElucHV0KCkgaWQ6IHN0cmluZztcbiAgICBASW5wdXQoKSBhdXRvV3JhcDogYm9vbGVhbiB8IHN0cmluZztcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gdGVtcGxhdGUgVGVtcGxhdGUgb24gaG93IHRvIHJlbmRlciB0aGUgaGVhZGVyLCB3ZSB3aWxsIGZvcndhcmQgcm93LCBjb2x1bW4sIGV0YyB0byB0aGUgdGVtcGxhdGVcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgdGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT4pIHtcbiAgICAgICAgXG4gICAgfVxufVxuIiwiaW1wb3J0IHsgRGlyZWN0aXZlLCBJbnB1dCwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBCYXNlQ29tcG9uZW50IH0gZnJvbSAnLi4vYmFzZS9iYXNlLmNvbXBvbmVudCc7XG5cbkBEaXJlY3RpdmUoe1xuICBzZWxlY3RvcjogJ3Z0LWhlYWRlcidcbn0pXG5leHBvcnQgY2xhc3MgSGVhZGVyRGlyZWN0aXZlIGltcGxlbWVudHMgT25Jbml0IHtcbiAgQElucHV0KCkgdGV4dDogc3RyaW5nO1xuICBASW5wdXQoKSBjc3NDbGFzczogc3RyaW5nO1xuICBASW5wdXQoKSBjb250cm9sSGVpZ2h0OiBzdHJpbmc7XG4gIEBJbnB1dCgpIGNvbnRyb2xXaWR0aDogc3RyaW5nO1xuICBASW5wdXQoKSBoZWFkZXJIZWlnaHQ6IHN0cmluZztcbiAgQElucHV0KCkgYXV0b1dyYXA6IGJvb2xlYW4gfCBzdHJpbmc7XG4gIEBJbnB1dCgpIGlkOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoKSB7IH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICBpZiAodGhpcy5pZCA9PSBudWxsKSB7XG4gICAgICB0aGlzLmlkID0gQmFzZUNvbXBvbmVudC5nZW5lcmF0ZVVuaXF1ZUlkKFwiaGVhZGVyXCIpO1xuICAgIH1cbiAgfVxuXG59XG4iLCJpbXBvcnQgeyBEaXJlY3RpdmUsIElucHV0LCBUZW1wbGF0ZVJlZiwgQ29udGVudENoaWxkLCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgVGFibGVDZWxsRGlyZWN0aXZlIH0gZnJvbSAnLi90YWJsZS1jZWxsLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBUYWJsZUhlYWRlckRpcmVjdGl2ZSB9IGZyb20gJy4vdGFibGUtaGVhZGVyLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBIZWFkZXJEaXJlY3RpdmUgfSBmcm9tICcuL2hlYWRlci5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgQ2VsbERlZmluaXRpb24gfSBmcm9tICcuL2NlbGwtZGVmaW5pdGlvbic7XG5pbXBvcnQgeyBCYXNlQ29tcG9uZW50IH0gZnJvbSAnLi4vYmFzZS9iYXNlLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBBdHRyaWJ1dGVzRW51bSB9IGZyb20gJy4uL2Jhc2UvYXR0cmlidXRlcy5lbnVtJztcbmltcG9ydCB7IEphdmFVdGlscyB9IGZyb20gJy4uL2phdmEvamF2YS11dGlscyc7XG5cbkBEaXJlY3RpdmUoe1xuICAgIHNlbGVjdG9yOiAndnQtdGFibGUtY29sdW1uJ1xufSlcbmV4cG9ydCBjbGFzcyBUYWJsZUNvbHVtbkRpcmVjdGl2ZSBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gICAgLy9UT0RPXG4gICAgQElucHV0KCkgbG9ja2VkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAvL1RPRE9cbiAgICBASW5wdXQoKSBlbmFibGVkOiBib29sZWFuID0gdHJ1ZTtcblxuICAgIEBJbnB1dCgpIHNvcnRhYmxlOiBib29sZWFuID0gdHJ1ZTtcblxuICAgIEBJbnB1dCgpIGlzQ2hlY2tlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogSG9yaXpvbnRhbCBhbGlnbm1lbnQgKGNlbnRlciwgbGVmdCwgcmlnaHQpXG4gICAgICovXG4gICAgQElucHV0KCkgYWxpZ25Ib3Jpem9udGFsOiBzdHJpbmc7XG5cbiAgICBASW5wdXQoKSBpZDogc3RyaW5nO1xuXG4gICAgLy9jZWxsIHRlbXBsYXRlXG4gICAgQENvbnRlbnRDaGlsZChUYWJsZUNlbGxEaXJlY3RpdmUsIHtyZWFkOiBUYWJsZUNlbGxEaXJlY3RpdmV9KVxuICAgIGNlbGxUZW1wbGF0ZTogVGFibGVDZWxsRGlyZWN0aXZlO1xuXG4gICAgLy9oZWFkZXIgdGVtcGxhdGUgaWYgd2Ugd2FudCB0byByZW5kZXIgdGhlIGhlYWRlciBkaWZmZXJlbnRseSAoaS5lLiBjaGVja2JveCwgZXRjKVxuICAgIEBDb250ZW50Q2hpbGQoVGFibGVIZWFkZXJEaXJlY3RpdmUsIHtyZWFkOiBUZW1wbGF0ZVJlZn0pXG4gICAgaGVhZGVyVGVtcGxhdGU6IFRlbXBsYXRlUmVmPGFueT47XG5cbiAgICAvL2hlYWRlciB0YWc/XG4gICAgQENvbnRlbnRDaGlsZChIZWFkZXJEaXJlY3RpdmUpIGhlYWRlckRpcmVjdGl2ZTogSGVhZGVyRGlyZWN0aXZlO1xuXG4gICAgLy9kZWZhdWx0LCB1c2UgdGhlIHtoZWFkZXJ9IGFzIHRoZSBoZWFkZXIgZm9yIHRoZSBjZWxsXG4gICAgQElucHV0KCkgc2V0IGhlYWRlciAoaGVhZGVyOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5faGVhZGVyID0gaGVhZGVyO1xuICAgIH1cblxuICAgIGdldCBoZWFkZXIoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGVhZGVyRGlyZWN0aXZlID8gdGhpcy5oZWFkZXJEaXJlY3RpdmUudGV4dCA6IHRoaXMuX2hlYWRlcjtcbiAgICB9XG5cbiAgICBASW5wdXQoKSBhdXRvV3JhcDogYm9vbGVhbjtcblxuICAgIF9oZWFkZXI6IHN0cmluZztcblxuICAgIHNvcnREaXJlY3Rpb246IHN0cmluZztcblxuICAgIG9yaWdpbmFsQ29sdW1uSW5kZXg6IG51bWJlcjtcblxuICAgIEBJbnB1dCgpIGNvbnRyb2xXaWR0aDogc3RyaW5nIHwgbnVtYmVyO1xuICAgIEBJbnB1dCgpIGNvbnRyb2xIZWlnaHQ6IHN0cmluZyB8IG51bWJlcjtcblxuICAgIEBJbnB1dCgpIGNlbGxIZWlnaHQ6IHN0cmluZyB8IG51bWJlcjtcblxuICAgIEBJbnB1dCgpIGhlYWRlckhlaWdodDogc3RyaW5nIHwgbnVtYmVyO1xuXG4gICAgQElucHV0KCkgc2V0IHZpc2libGUodmlzOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuX3Zpc2libGUgPSB2aXM7XG5cbiAgICAgICAgaWYgKHRoaXMuX3Zpc2libGUgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0eWxlcykge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnN0eWxlc1tcImRpc3BsYXlcIl07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdHlsZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlc1tcImRpc3BsYXlcIl0gPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZXMgPSB7XG4gICAgICAgICAgICAgICAgICAgIFwiZGlzcGxheVwiOiBcIm5vbmVcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCB2aXNpYmxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmlzaWJsZTtcbiAgICB9XG5cbiAgICBfdmlzaWJsZTogYm9vbGVhbiA9IHRydWU7XG5cbiAgICBASW5wdXQoKSBjdXN0b21BdHRyaWJ1dGVzOiB7W25hbWU6IHN0cmluZ106IGFueX07XG5cbiAgICBzdHlsZXM6IHtbbmFtZTogc3RyaW5nXTogc3RyaW5nfTtcblxuICAgIGdldCBpc0hlYWRlclRlbXBsYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oZWFkZXJUZW1wbGF0ZSA9PT0gbnVsbCB8fCB0aGlzLmhlYWRlclRlbXBsYXRlID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRG9uJ3QgdHJhY2sgdGhpcyBjb2x1bW4gKHRoYXQgaXMsIHVzZSBmb3IgZGlzcGxheSBvbmx5KS5cbiAgICAgKi9cbiAgICBASW5wdXQoKSBza2lwVHJhY2tpbmc6IGJvb2xlYW47XG5cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgIGlmICh0aGlzLmhlYWRlckRpcmVjdGl2ZSAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMuaGVhZGVyID0gdGhpcy5oZWFkZXJEaXJlY3RpdmUudGV4dDtcblxuICAgICAgICBpZiAodGhpcy5hdXRvV3JhcCA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmF1dG9XcmFwID0gdGhpcy5oZWFkZXJEaXJlY3RpdmUuYXV0b1dyYXAgPT09IHRydWUgfHwgdGhpcy5oZWFkZXJEaXJlY3RpdmUuYXV0b1dyYXAgPT09IFwidHJ1ZVwiXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuaWQgPT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMuaWQgPSBCYXNlQ29tcG9uZW50LmdlbmVyYXRlVW5pcXVlSWQoXCJjb2x1bW5cIik7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmhlYWRlckhlaWdodCAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMuaGVhZGVySGVpZ2h0ID0gdGhpcy5oZWFkZXJIZWlnaHQ7XG4gICAgICB9XG5cbiAgICB9XG5cbiAgICBzZXRBdHRyaWJ1dGUobmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gXCJudW1iZXJcIiAmJiBuYW1lID09PSBBdHRyaWJ1dGVzRW51bS5WSVNJQkxFKSB7XG4gICAgICAgICAgICB0aGlzLnZpc2libGUgPSBKYXZhVXRpbHMucGFyc2VCb29sZWFuKHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmN1c3RvbUF0dHJpYnV0ZXMgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9tQXR0cmlidXRlcyA9IHt9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmN1c3RvbUF0dHJpYnV0ZXNbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldEF0dHJpYnV0ZShuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBpZiAodHlwZW9mIG5hbWUgPT09IFwibnVtYmVyXCIgJiYgbmFtZSA9PT0gQXR0cmlidXRlc0VudW0uVklTSUJMRSkgcmV0dXJuIHRoaXMudmlzaWJsZSBhcyBhbnk7XG4gICAgICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gXCJudW1iZXJcIiAmJiBuYW1lID09PSBBdHRyaWJ1dGVzRW51bS5JRCkgcmV0dXJuIHRoaXMuaWQ7XG5cbiAgICAgICAgbGV0IHJldFZhbCA9IHRoaXMuY3VzdG9tQXR0cmlidXRlcyAhPSBudWxsID8gdGhpcy5jdXN0b21BdHRyaWJ1dGVzW25hbWVdIDogbnVsbDtcblxuICAgICAgICBpZiAodHlwZW9mIHJldFZhbCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIHJldFZhbCA9IHJldFZhbCArIFwiXCI7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmV0VmFsO1xuICAgIH1cblxuICAgIHNldFZpc2libGUodmlzOiBib29sZWFuKSB7XG4gICAgICB0aGlzLnZpc2libGUgPSB2aXM7XG4gICAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFRhYmxlU2VsZWN0aW9uRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgcm93czogQXJyYXk8YW55PlxuICAgICl7fVxufSIsImltcG9ydCB7IEJhc2VDb21wb25lbnQgfSBmcm9tIFwiLi4vYmFzZS9iYXNlLmNvbXBvbmVudFwiO1xuaW1wb3J0IHsgUmVuZGVyZXIyIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcbmltcG9ydCB7IFNlc3Npb25TZXJ2aWNlIH0gZnJvbSBcIi4uL3Nlc3Npb24vc2Vzc2lvbi5zZXJ2aWNlXCI7XG5pbXBvcnQgeyBDbGllbnRFdmVudCB9IGZyb20gXCIuLi9ldmVudC1oYW5kbGVyL2NsaWVudC1ldmVudFwiO1xuaW1wb3J0IHsgQXBwVXRpbHMgfSBmcm9tIFwiLi4vYmFzZS9hcHAtdXRpbHNcIjtcbmltcG9ydCAqIGFzIF8gZnJvbSBcImxvZGFzaFwiO1xuaW1wb3J0IHsgTGFiZWxDb21wb25lbnQgfSBmcm9tIFwiLi4vbGFiZWwvbGFiZWwuY29tcG9uZW50XCI7XG5pbXBvcnQgeyBBdHRyaWJ1dGVDaGFuZ2VMaXN0ZW5lciB9IGZyb20gXCIuLi9iYXNlL2F0dHJpYnV0ZS1jaGFuZ2UtbGlzdGVuZXJcIjtcbmltcG9ydCB7IEF0dHJpYnV0ZUNoYW5nZUV2ZW50IH0gZnJvbSBcIi4uL2Jhc2UvYXR0cmlidXRlLWNoYW5nZS1ldmVudFwiO1xuZGVjbGFyZSB2YXIgalF1ZXJ5OiBhbnk7XG5cbmV4cG9ydCBjbGFzcyBIVE1MRWxlbWVudFdyYXBwZXIgaW1wbGVtZW50cyBBdHRyaWJ1dGVDaGFuZ2VMaXN0ZW5lciB7XG4gIC8vIGF0dHJpYnV0ZXM6IE1hcDxzdHJpbmcsIHN0cmluZz47XG4gIC8vIHRleHQ6IGFueTtcbiAgLy8gZHJhZ2dhYmxlOiBzdHJpbmc7XG4gIC8vIGNzc0NsYXNzOiBzdHJpbmc7XG4gIC8vIG9uRG91YmxlQ2xpY2s6IHN0cmluZztcbiAgLy8gb25Db250ZXh0TWVudTogc3RyaW5nO1xuICAvLyBvbk1vdXNlRG93bjogc3RyaW5nO1xuICAvLyBwb3B1cE5hbWU6IHN0cmluZztcblxuICBwcml2YXRlIHBhcmVudDogSFRNTEVsZW1lbnRXcmFwcGVyO1xuICBwcml2YXRlIGxvY2FsTmFtZTogc3RyaW5nO1xuICBwYXJlbnRUYWJsZUlkOiBzdHJpbmc7XG4gIHBhcmVudFNjcmVlbklkOiBzdHJpbmc7XG4gIHBhcmVudFRhYmxlOiBhbnk7XG5cbiAgX3VuaXF1ZUlkOiBzdHJpbmc7XG4gIGh0bWxFbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgY29tcG9uZW50OiBCYXNlQ29tcG9uZW50O1xuXG4gIC8vZm9yIG5vbmUgZHluYW1pYyBzdHVmXG4gIGNoaWxkTm9kZXM6IEFycmF5PEhUTUxFbGVtZW50V3JhcHBlcj4gPSBbXTtcblxuICAvL2ZvciB0cmVlIHRhYmxlXG4gIGR5bmFtaWNDaGlsZE5vZGVzOiBBcnJheTxIVE1MRWxlbWVudFdyYXBwZXI+O1xuXG4gIG9uQ29udGV4dEhhbmRsZXI6IChldmVudCkgPT4gYW55O1xuICBvbk1vdXNlRG93bkhhbmRsZXI6IChldmVudCkgPT4gYW55O1xuICBvbkRvdWJsZUNsaWNrSGFuZGxlcjogKGV2ZW50KSA9PiBhbnk7XG5cbiAgLy9pbmRpY2F0ZSB0aGF0IGNvbXBvbmVudCBjcmVhdGUgZHluYW1pY2FsbHkgKHZpYSBjcmVhdGVFbGVtZW50KVxuICBwcml2YXRlIF9keW5hbWljQ29tcG9uZW50OiBib29sZWFuO1xuXG4gIHBvcHVwTmFtZTogc3RyaW5nO1xuICBjb250ZXh0TWVudUFjdGlvbjogc3RyaW5nIHwgKChhbnkpID0+IGFueSk7XG4gIG1vdXNlRG93bkFjdGlvbjogc3RyaW5nIHwgKCgpID0+IGFueSk7XG4gIGRvdWJsZUNsaWNrQWN0aW9uOiBzdHJpbmcgfCAoKCkgPT4gYW55KTtcbiAgcm93TnVtYmVyOiBudW1iZXI7XG4gIGV4cGFuZGVkOiBzdHJpbmc7XG5cbiAgcHJpdmF0ZSBjaGlsZFJvd3M6IEFycmF5PEhUTUxFbGVtZW50V3JhcHBlcj47XG5cbiAgZ2V0IGlkKCkge1xuICAgIHJldHVybiB0aGlzLmdldElkKCk7XG4gIH1cbiAgcHJpdmF0ZSBjdXN0b21BdHRyaWJ1dGVzOiB7W25hbWU6IHN0cmluZ106IGFueX0gPSBudWxsO1xuICBwcml2YXRlIGF0dHJpYnV0ZXNOYW1lOiBBcnJheTxzdHJpbmc+O1xuXG4gIHByaXZhdGUgZmF1eEVsZW1lbnRBdHRyaWJ1dGVzOiBNYXA8c3RyaW5nLCBzdHJpbmc+O1xuXG4gIHByaXZhdGUgZHJhZ2dhYmxlQXBwbGllZDogYm9vbGVhbjtcblxuICBjdXN0b21EYXRhOiBhbnk7XG5cbiAgc3RhdGljIGNyZWF0ZVZpcnR1YWxFbGVtZW50KHR5cGU6IHN0cmluZyk6IEhUTUxFbGVtZW50V3JhcHBlciB7XG4gICAgcmV0dXJuIG5ldyBIVE1MRWxlbWVudFdyYXBwZXIobnVsbCwgdHlwZSwgbnVsbCwgdHJ1ZSk7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjIsIHR5cGU6IHN0cmluZywgcHJpdmF0ZSBzZXNzaW9uU2VydmljZTogU2Vzc2lvblNlcnZpY2UsIHZpcnR1YWw6IGJvb2xlYW4gPSBmYWxzZSwgZG9jRnJhZ21lbnQ6IERvY3VtZW50RnJhZ21lbnQgPSBudWxsKSB7XG4gICAgdGhpcy5fdW5pcXVlSWQgPSBCYXNlQ29tcG9uZW50LmdlbmVyYXRlVW5pcXVlSWQodHlwZSk7XG5cbiAgICB0aGlzLmxvY2FsTmFtZSA9IHR5cGU7XG5cbiAgICBpZiAodHlwZSA9PT0gXCJyb3dcIiAmJiB2aXJ0dWFsICE9PSB0cnVlKSB7XG4gICAgICB0aGlzLmh0bWxFbGVtZW50ID0gdGhpcy5yZW5kZXJlci5jcmVhdGVFbGVtZW50KFwidHJcIik7XG4gICAgICB0aGlzLl9keW5hbWljQ29tcG9uZW50ID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFwiY2VsbFwiICYmIHZpcnR1YWwgIT09IHRydWUpIHtcbiAgICAgIHRoaXMuaHRtbEVsZW1lbnQgPSB0aGlzLnJlbmRlcmVyLmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcbiAgICAgIHRoaXMuX2R5bmFtaWNDb21wb25lbnQgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJsYWJlbFwiIHx8IHR5cGUgPT09IFwibWVudUl0ZW1cIiB8fCB2aXJ0dWFsID09PSB0cnVlKSB7XG4gICAgICB0aGlzLmZhdXhFbGVtZW50QXR0cmlidXRlcyA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmc+KCk7XG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZShcImlkXCIsIHRoaXMuX3VuaXF1ZUlkKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fZHluYW1pY0NvbXBvbmVudCA9PT0gdHJ1ZSkge1xuICAgICAgaWYgKHRoaXMuaHRtbEVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MVGFibGVSb3dFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuaHRtbEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS10dC1pZFwiLCB0aGlzLl91bmlxdWVJZCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMub25Db250ZXh0SGFuZGxlciA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCBjbGllbnRFdmVudCA9IG5ldyBDbGllbnRFdmVudCh0aGlzLCBldmVudCk7XG5cbiAgICAgICAgaWYgKEFwcFV0aWxzLmN1c3RvbWl6ZUNsaWVudEV2ZW50ICE9IG51bGwpIHtcbiAgICAgICAgICBBcHBVdGlscy5jdXN0b21pemVDbGllbnRFdmVudCh0aGlzLCBjbGllbnRFdmVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5wYXJlbnRTY3JlZW5JZCAhPSBudWxsKSB7XG4gICAgICAgICAgY2xpZW50RXZlbnQuc2V0UGFyYW1ldGVyKFwic2NyZWVuSWRcIiwgdGhpcy5wYXJlbnRTY3JlZW5JZCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNlc3Npb25TZXJ2aWNlLmdldEV2ZW50SGFuZGxlcigpLnNldENsaWVudEV2ZW50KGNsaWVudEV2ZW50KTtcblxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuY29udGV4dE1lbnVBY3Rpb24gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICB0aGlzLmludm9rZU1jb0FjdGlvbih0aGlzLmNvbnRleHRNZW51QWN0aW9uKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5jb250ZXh0TWVudUFjdGlvbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgdGhpcy5jb250ZXh0TWVudUFjdGlvbi5hcHBseSh0aGlzLCBbdGhpc10pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zaG93UG9wdXBNZW51KGV2ZW50KTtcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuaHRtbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZlbnQpID0+IHRoaXMub25Nb3VzZURvd25IYW5kbGVyKGV2ZW50KSwgdHJ1ZSk7XG4gICAgICB0aGlzLmh0bWxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkYmxjbGlja1wiLCAoZXZlbnQpID0+IHRoaXMub25Eb3VibGVDbGlja0hhbmRsZXIoZXZlbnQpLCB0cnVlKTtcblxuICAgICAgdGhpcy5vbk1vdXNlRG93bkhhbmRsZXIgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5oYW5kbGVPbk1vdXNlRG93bihldmVudCk7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLm9uRG91YmxlQ2xpY2tIYW5kbGVyID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIHRoaXMuaGFuZGxlRG91YmxlQ2xpY2soZXZlbnQpO1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBkZXN0cm95KHNraXBEZXN0cm95Q2hpbGQ6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIGlmICh0aGlzLl9keW5hbWljQ29tcG9uZW50ID09PSB0cnVlICYmIHRoaXMuaHRtbEVsZW1lbnQgIT0gbnVsbCkge1xuICAgICAgdGhpcy5odG1sRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIiwgdGhpcy5vbkNvbnRleHRIYW5kbGVyLCB0cnVlKTtcbiAgICAgIHRoaXMuaHRtbEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLm9uTW91c2VEb3duSGFuZGxlciwgdHJ1ZSk7XG4gICAgICB0aGlzLmh0bWxFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkYmxjbGlja1wiLCB0aGlzLm9uRG91YmxlQ2xpY2tIYW5kbGVyLCB0cnVlKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jaGlsZE5vZGVzICE9IG51bGwgJiYgc2tpcERlc3Ryb3lDaGlsZCAhPT0gdHJ1ZSkge1xuICAgICAgbGV0IHN0YWNrID0gdGhpcy5jaGlsZE5vZGVzO1xuXG4gICAgICB3aGlsZSAoc3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBub2RlID0gc3RhY2sucG9wKCk7XG5cbiAgICAgICAgaWYgKG5vZGUuY2hpbGROb2RlcyAhPSBudWxsKSB7XG4gICAgICAgICAgc3RhY2sgPSBzdGFjay5jb25jYXQobm9kZS5jaGlsZE5vZGVzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG5vZGUuZGVzdHJveSh0cnVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5keW5hbWljQ2hpbGROb2RlcyAhPSBudWxsICYmIHNraXBEZXN0cm95Q2hpbGQgIT09IHRydWUpIHtcbiAgICAgIGxldCBzdGFjayA9IHRoaXMuZHluYW1pY0NoaWxkTm9kZXM7XG5cbiAgICAgIHdoaWxlIChzdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBzdGFjay5wb3AoKTtcblxuICAgICAgICBpZiAobm9kZS5keW5hbWljQ2hpbGROb2RlcyAhPSBudWxsKSB7XG4gICAgICAgICAgc3RhY2sgPSBzdGFjay5jb25jYXQobm9kZS5keW5hbWljQ2hpbGROb2Rlcyk7XG4gICAgICAgIH1cblxuICAgICAgICBub2RlLmRlc3Ryb3kodHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY2hpbGRSb3dzICE9IG51bGwgJiYgc2tpcERlc3Ryb3lDaGlsZCAhPT0gdHJ1ZSkge1xuICAgICAgbGV0IHN0YWNrID0gdGhpcy5jaGlsZFJvd3M7XG5cbiAgICAgIHdoaWxlIChzdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBzdGFjay5wb3AoKTtcblxuICAgICAgICBpZiAobm9kZS5jaGlsZFJvd3MgIT0gbnVsbCkge1xuICAgICAgICAgIHN0YWNrID0gc3RhY2suY29uY2F0KG5vZGUuY2hpbGRSb3dzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG5vZGUuZGVzdHJveSh0cnVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb21wb25lbnQgIT0gbnVsbCkge1xuICAgICAgdGhpcy5jb21wb25lbnQucmVtb3ZlQXR0cmlidXRlQ2hhbmdlTGlzdGVuZXIodGhpcyk7XG4gICAgfVxuXG4gICAgdGhpcy5odG1sRWxlbWVudCA9IG51bGw7XG4gICAgdGhpcy5wYXJlbnQgPSBudWxsO1xuICAgIHRoaXMuX3VuaXF1ZUlkID0gbnVsbDtcbiAgICB0aGlzLmNvbXBvbmVudCA9IG51bGw7XG4gICAgdGhpcy5jaGlsZE5vZGVzID0gbnVsbDtcbiAgICB0aGlzLmF0dHJpYnV0ZXNOYW1lID0gbnVsbDtcbiAgICB0aGlzLmZhdXhFbGVtZW50QXR0cmlidXRlcyA9IG51bGw7XG4gICAgdGhpcy5jaGlsZFJvd3MgPSBudWxsO1xuICB9XG5cbiAgc2V0VGV4dCh0ZXh0OiBhbnkpIHtcbiAgICBpZiAodGhpcy5fZHluYW1pY0NvbXBvbmVudCA9PT0gdHJ1ZSkge1xuICAgICAgdGhpcy5yZW5kZXJlci5zZXRQcm9wZXJ0eSh0aGlzLmh0bWxFbGVtZW50LCBcImlubmVySFRNTFwiLCB0ZXh0KTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuY29tcG9uZW50ICE9IG51bGwpIHtcbiAgICAgIHRoaXMuY29tcG9uZW50LnNldFRleHQodGV4dCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmZhdXhFbGVtZW50QXR0cmlidXRlcyAhPSBudWxsKSB7XG4gICAgICB0aGlzLmZhdXhFbGVtZW50QXR0cmlidXRlcy5zZXQoXCJ0ZXh0XCIsIHRleHQpO1xuICAgIH1cbiAgfVxuXG4gIHNldEZvbnRTaXplKHNpemU6IGFueSkge1xuICAgIGlmICh0aGlzLl9keW5hbWljQ29tcG9uZW50ID09PSB0cnVlKSB7XG4gICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMuaHRtbEVsZW1lbnQsIFwiZm9udC1zaXplXCIsIHNpemUgKyBcInB4XCIpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5jb21wb25lbnQgIT0gbnVsbCkge1xuICAgICAgdGhpcy5jb21wb25lbnQuc2V0Rm9udFNpemUoc2l6ZSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmZhdXhFbGVtZW50QXR0cmlidXRlcyAhPSBudWxsKSB7XG4gICAgICB0aGlzLmZhdXhFbGVtZW50QXR0cmlidXRlcy5zZXQoXCJmb250U2l6ZVwiLCBzaXplKTtcbiAgICB9XG4gIH1cblxuICBzZXRGb250Qm9sZChib2xkOiBhbnkpIHtcbiAgICBpZiAodGhpcy5fZHluYW1pY0NvbXBvbmVudCA9PT0gdHJ1ZSkge1xuICAgICAgaWYgKGJvbGQgPT09IFwidHJ1ZVwiIHx8IGJvbGQgPT09IHRydWUpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLmh0bWxFbGVtZW50LCBcImZvbnQtd2VpZ2h0XCIsIFwiYm9sZFwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5odG1sRWxlbWVudCwgXCJmb250LXdlaWdodFwiLCBcIm5vcm1hbFwiKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuY29tcG9uZW50ICE9IG51bGwpIHtcbiAgICAgIHRoaXMuY29tcG9uZW50LnNldEZvbnRCb2xkKGJvbGQpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5mYXV4RWxlbWVudEF0dHJpYnV0ZXMgIT0gbnVsbCkge1xuICAgICAgdGhpcy5mYXV4RWxlbWVudEF0dHJpYnV0ZXMuc2V0KFwiZm9udEJvbGRcIiwgYm9sZCk7XG4gICAgfVxuICB9XG5cbiAgc2V0Q2xhc3MoY3NzOiBzdHJpbmcpIHtcbiAgICBpZiAoY3NzICE9IG51bGwgJiYgY3NzLmluZGV4T2YoXCIuXCIpID49IDApIHtcbiAgICAgIGNvbnN0IHRlbXAgPSBjc3Muc3BsaXQoXCJcXC5cIik7XG5cbiAgICAgIGxldCBjc3NDbGFzcyA9IHRlbXAuam9pbihcIi1cIik7XG5cbiAgICAgIGlmICh0ZW1wWzBdID09PSBcIlwiKSB7XG4gICAgICAgIGNzcyA9IGNzc0NsYXNzLnN1YnN0cmluZygxKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuaHRtbEVsZW1lbnQgIT0gbnVsbCkge1xuICAgICAgdGhpcy5yZW5kZXJlci5zZXRBdHRyaWJ1dGUodGhpcy5odG1sRWxlbWVudCwgXCJjbGFzc1wiLCBjc3MpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5jb21wb25lbnQgIT0gbnVsbCkge1xuICAgICAgdGhpcy5jb21wb25lbnQuYWRkQ3NzQ2xhc3MoY3NzKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuZmF1eEVsZW1lbnRBdHRyaWJ1dGVzICE9IG51bGwpIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgY3NzKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSW5zZXJ0IGEgY2hpbGQgcm93IGF0IHNwZWNpZmljIGxvY2F0aW9uXG4gICAqIEBwYXJhbSBpZHhcbiAgICogQHBhcmFtIGNoaWxkXG4gICAqL1xuICBpbnNlcnRDaGlsZFJvd0F0KGlkeDogbnVtYmVyLCBjaGlsZDogSFRNTEVsZW1lbnRXcmFwcGVyKSB7XG4gICAgaWYgKGNoaWxkLmh0bWxFbGVtZW50IGluc3RhbmNlb2YgSFRNTFRhYmxlUm93RWxlbWVudCAhPT0gdHJ1ZSAmJiB0aGlzLl9keW5hbWljQ29tcG9uZW50ID09PSB0cnVlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGluc2VydGlvbiwgb25seSBIVE1MVGFibGVSb3dFbGVtZW50IGlzIGFsbG93ZWRcIik7XG4gICAgfVxuXG4gICAgaWYgKGlkeCA+IDAgJiYgKHRoaXMuY2hpbGRSb3dzID09IG51bGwgfHwgdGhpcy5jaGlsZFJvd3MubGVuZ3RoIDw9IGlkeCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byBpbnNlcnQgY2hpbGQgcm93IGF0IHRoaXMgc3BlY2lmaWMgbG9jYXRpb24gKGluZGV4IG92ZXJmbG93KVwiKTtcbiAgICB9IGVsc2UgaWYgKGlkeCA+PSAwICYmICh0aGlzLmNoaWxkUm93cyAhPSBudWxsICYmIHRoaXMuY2hpbGRSb3dzLmxlbmd0aCA+IGlkeCkpIHtcbiAgICAgIC8vdHJhY2sgY2hpbGQgcm93cyBzbyB3ZSBjYW4gdXNlZCBpbnNlcnRDaGlsZFJvd0F0XG4gICAgICBpZiAodGhpcy5jaGlsZFJvd3MgPT0gbnVsbCkge1xuICAgICAgICB0aGlzLmNoaWxkUm93cyA9IFtdO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5wYXJlbnRUYWJsZS51c2VEb2NGcmFnbWVudCA9PT0gdHJ1ZSkge1xuICAgICAgICAodGhpcy5wYXJlbnRUYWJsZS5fYm9keUZyYWdtZW50IGFzIERvY3VtZW50RnJhZ21lbnQpLmluc2VydEJlZm9yZShjaGlsZC5odG1sRWxlbWVudCwgdGhpcy5jaGlsZFJvd3NbaWR4XS5odG1sRWxlbWVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLmluc2VydEJlZm9yZSh0aGlzLnBhcmVudFRhYmxlLnRhYmxlQm9keS5uYXRpdmVFbGVtZW50LCBjaGlsZC5odG1sRWxlbWVudCwgdGhpcy5jaGlsZFJvd3NbaWR4XS5odG1sRWxlbWVudCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY2hpbGRSb3dzLnNwbGljZShpZHgsIDAsIGNoaWxkKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlbmRlcmVyLnNldEF0dHJpYnV0ZShjaGlsZC5odG1sRWxlbWVudCwgXCJkYXRhLXR0LXBhcmVudC1pZFwiLCB0aGlzLl91bmlxdWVJZCk7XG5cbiAgICBjaGlsZC5wYXJlbnQgPSB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGVuZCBhIGNoaWxkIHRvIHRoaXMgZWxlbWVudC4gSWYgdGhpcyBpcyBhIHJvdyBhbmQgd2UgYXBwZW5kIGEgcm93LCBzZXQge0AgYXBwZW5kVG9UYWJsZX0gdG8gdHJ1ZVxuICAgKiB3aWxsIGFsc28gYXBwZW5kIHRoZSBhY3R1YWwgdGFibGUgcm93ICh0cikgdG8gdGhlIHRhYmxlLlxuICAgKlxuICAgKiBAcGFyYW0gY2hpbGQgY2hpbGQgdG8gYmUgYXBwZW5kZWRcbiAgICogQHBhcmFtIGFwcGVuZFRvVGFibGVcbiAgICovXG4gIGFwcGVuZENoaWxkKGNoaWxkOiBIVE1MRWxlbWVudFdyYXBwZXIsIGFwcGVuZFRvVGFibGVJZlJvdzogYm9vbGVhbiA9IGZhbHNlKSB7XG4gICAgaWYgKHRoaXMuX2R5bmFtaWNDb21wb25lbnQgPT09IHRydWUpIHtcbiAgICAgIGlmIChjaGlsZC5odG1sRWxlbWVudCBpbnN0YW5jZW9mIEhUTUxUYWJsZVJvd0VsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRBdHRyaWJ1dGUoY2hpbGQuaHRtbEVsZW1lbnQsIFwiZGF0YS10dC1wYXJlbnQtaWRcIiwgdGhpcy5fdW5pcXVlSWQpO1xuXG4gICAgICAgIGlmIChhcHBlbmRUb1RhYmxlSWZSb3cgPT09IHRydWUpIHtcbiAgICAgICAgICBpZiAodGhpcy5wYXJlbnRUYWJsZS51c2VEb2NGcmFnbWVudCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgKHRoaXMucGFyZW50VGFibGUuX2JvZHlGcmFnbWVudCBhcyBEb2N1bWVudEZyYWdtZW50KS5hcHBlbmRDaGlsZChjaGlsZC5odG1sRWxlbWVudCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYXBwZW5kQ2hpbGQodGhpcy5wYXJlbnRUYWJsZS50YWJsZUJvZHkubmF0aXZlRWxlbWVudCwgY2hpbGQuaHRtbEVsZW1lbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vdHJhY2sgY2hpbGQgcm93cyBzbyB3ZSBjYW4gdXNlZCBpbnNlcnRDaGlsZFJvd0F0XG4gICAgICAgIGlmICh0aGlzLmNoaWxkUm93cyA9PSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5jaGlsZFJvd3MgPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2hpbGRSb3dzLnB1c2goY2hpbGQpO1xuICAgICAgfSBlbHNlIGlmIChjaGlsZC5odG1sRWxlbWVudCBpbnN0YW5jZW9mIEhUTUxUYWJsZUNlbGxFbGVtZW50KSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuYXBwZW5kQ2hpbGQodGhpcy5odG1sRWxlbWVudCwgY2hpbGQuaHRtbEVsZW1lbnQpO1xuXG4gICAgICAgIGlmICh0aGlzLmR5bmFtaWNDaGlsZE5vZGVzID09IG51bGwpIHtcbiAgICAgICAgICB0aGlzLmR5bmFtaWNDaGlsZE5vZGVzID0gW107XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmR5bmFtaWNDaGlsZE5vZGVzLnB1c2goY2hpbGQpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNoaWxkTm9kZXMucHVzaChjaGlsZCk7XG4gICAgfVxuXG4gICAgY2hpbGQucGFyZW50ID0gdGhpcztcbiAgfVxuXG4gIGFwcGVuZEN1c3RvbUF0dHJpYnV0ZXMoY3VzdDogeyBbbmFtZTogc3RyaW5nXTogc3RyaW5nIH0pIHtcbiAgICBpZiAoY3VzdCAhPSBudWxsKSB7XG4gICAgICBjb25zdCBrZXlzID0gXy5rZXlzKGN1c3QpO1xuXG4gICAgICBmb3IgKGxldCBrZXkgb2Yga2V5cykge1xuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShrZXksIGN1c3Rba2V5XSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy9OU0Qgd2lsbCBvdmVycmlkZSB0aGlzLCBhZGRlZCB0byBmaXggZXJyb3JcbiAgLy8gc2V0Q3VzdG9tQXR0cmlidXRlKG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZykge1xuICAvLyAgIHRoaXMuc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcbiAgLy8gfVxuXG4gIHNldEF0dHJpYnV0ZShuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpIHtcbiAgICBpZihuYW1lID09PSAnc2VsZWN0ZWQnICYmIHRoaXMubG9jYWxOYW1lID09ICdyb3cnKXtcbiAgICAgIGlmKHRoaXMucGFyZW50VGFibGUgIT0gbnVsbCl7XG4gICAgICAgIGlmKHZhbHVlID09ICd0cnVlJylcbiAgICAgICAgICB0aGlzLnBhcmVudFRhYmxlLnNlbGVjdFJvdyh0aGlzLCB0cnVlKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHRoaXMucGFyZW50VGFibGUuc2VsZWN0Um93KHRoaXMsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5wYXJlbnRUYWJsZS5tYXJrRm9yQ2hlY2soKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG5hbWUgPT09IFwiZXhwYW5kZWRcIikge1xuICAgICAgdGhpcy5leHBhbmROb2RlKHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuY29tcG9uZW50ICE9IG51bGwpIHtcbiAgICAgIHRoaXMuY29tcG9uZW50LnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gICAgICB0aGlzLnRyYWNrQXR0cmlidXRlTmFtZShuYW1lKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaHRtbEVsZW1lbnQgIT0gbnVsbCkge1xuICAgICAgaWYgKG5hbWUgPT09IFwiaXNMb2NrZWRDb2x1bW5cIikge1xuICAgICAgICBpZiAodGhpcy5mYXV4RWxlbWVudEF0dHJpYnV0ZXMgPT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMuZmF1eEVsZW1lbnRBdHRyaWJ1dGVzID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZz4oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZmF1eEVsZW1lbnRBdHRyaWJ1dGVzLnNldChuYW1lLCB2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEF0dHJpYnV0ZSh0aGlzLmh0bWxFbGVtZW50LCBuYW1lLCB2YWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMudHJhY2tBdHRyaWJ1dGVOYW1lKG5hbWUpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5mYXV4RWxlbWVudEF0dHJpYnV0ZXMgIT0gbnVsbCkge1xuICAgICAgdGhpcy5mYXV4RWxlbWVudEF0dHJpYnV0ZXMuc2V0KG5hbWUsIHZhbHVlKTtcbiAgICAgIHRoaXMudHJhY2tBdHRyaWJ1dGVOYW1lKG5hbWUpO1xuICAgIH1cbiAgfVxuXG4gIGdldEF0dHJpYnV0ZShuYW1lOiBhbnksIHNraXBRdWVyeURPTUlmTm90RXhpc3RzOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICBpZiAobmFtZSA9PT0gXCJleHBhbmRlZFwiKSB7XG4gICAgICByZXR1cm4gdGhpcy5leHBhbmRlZCA9PT0gXCJ0cnVlXCIgPyBcInRydWVcIiA6IFwiZmFsc2VcIjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb21wb25lbnQgIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50LmdldEF0dHJpYnV0ZShuYW1lLCBza2lwUXVlcnlET01JZk5vdEV4aXN0cyk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmh0bWxFbGVtZW50ICE9IG51bGwgJiYgc2tpcFF1ZXJ5RE9NSWZOb3RFeGlzdHMgIT09IHRydWUpIHtcbiAgICAgIGlmIChuYW1lID09PSBcInRleHRcIikge1xuICAgICAgICBsZXQgdGV4dCA9IHRoaXMuaHRtbEVsZW1lbnQuZ2V0QXR0cmlidXRlKG5hbWUpO1xuXG4gICAgICAgIGlmICh0ZXh0ID09IG51bGwpIHtcbiAgICAgICAgICB0ZXh0ID0gdGhpcy5odG1sRWxlbWVudC5pbm5lclRleHQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGV4dCA9PSBudWxsIHx8IHRleHQgPT09IFwiXCIpIHtcbiAgICAgICAgICB0ZXh0ID0gKHRoaXMuaHRtbEVsZW1lbnQgYXMgSFRNTFRhYmxlQ2VsbEVsZW1lbnQpLnRleHRDb250ZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiB0ZXh0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgdGV4dCA9IHRleHQudHJpbSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRleHQ7XG4gICAgICB9IGVsc2UgaWYgKG5hbWUgPT09IFwiaXNMb2NrZWRDb2x1bW5cIiAmJiB0aGlzLmZhdXhFbGVtZW50QXR0cmlidXRlcyAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZhdXhFbGVtZW50QXR0cmlidXRlcy5nZXQobmFtZSk7XG4gICAgICB9IGVsc2UgaWYgKG5hbWUgPT09IFwiaXNMb2NrZWRDb2x1bW5cIikge1xuICAgICAgICByZXR1cm4gXCJmYWxzZVwiO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5odG1sRWxlbWVudC5nZXRBdHRyaWJ1dGUobmFtZSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmZhdXhFbGVtZW50QXR0cmlidXRlcyAhPSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhpcy5mYXV4RWxlbWVudEF0dHJpYnV0ZXMuZ2V0KG5hbWUpO1xuICAgIH1cbiAgfVxuXG4gIGdldFRleHQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKFwidGV4dFwiKTtcbiAgfVxuXG4gIGdldElkKCkge1xuICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZShcImlkXCIpO1xuICB9XG5cbiAgc2V0RHJhZ2dhYmxlKGRyYWdnYWJsZTogc3RyaW5nKSB7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJkcmFnZ2FibGVcIiwgZHJhZ2dhYmxlKTtcblxuICAgIGlmIChkcmFnZ2FibGUgPT0gXCJ0cnVlXCIpIHtcbiAgICAgIHRoaXMuYXBwbHlEcmFnZ2FibGUoKTtcbiAgICB9XG4gIH1cblxuICBnZXRFeHBhbmRlZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZShcImV4cGFuZGVkXCIpO1xuICB9XG5cbiAgc2V0RXhwYW5kZWQoc3RyOiBzdHJpbmcpIHtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZShcImV4cGFuZGVkXCIsIHN0cik7XG4gIH1cblxuICBzZXRPbkNvbnRleHRNZW51KGFjdGlvbjogc3RyaW5nIHwgKCgpID0+IGFueSkpIHtcbiAgICBpZiAodGhpcy5odG1sRWxlbWVudCAhPSBudWxsKSB7XG4gICAgICB0aGlzLmNvbnRleHRNZW51QWN0aW9uID0gYWN0aW9uO1xuICAgICAgdGhpcy5odG1sRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIiwgKGV2ZW50KSA9PiB0aGlzLm9uQ29udGV4dEhhbmRsZXIoZXZlbnQpLCB0cnVlKTtcbiAgICB9XG4gIH1cblxuICBzZXRPbk1vdXNlRG93bihhY3Rpb246IHN0cmluZyB8ICgoKSA9PiBhbnkpKSB7XG4gICAgdGhpcy5tb3VzZURvd25BY3Rpb24gPSBhY3Rpb247XG4gIH1cblxuICBzZXRPbkRvdWJsZUNsaWNrKGFjdGlvbjogc3RyaW5nIHwgKCgpID0+IGFueSkpIHtcbiAgICB0aGlzLmRvdWJsZUNsaWNrQWN0aW9uID0gYWN0aW9uO1xuICB9XG5cbiAgc2V0UG9wdXAocG9wdXBOYW1lOiBzdHJpbmcpIHtcbiAgICB0aGlzLnBvcHVwTmFtZSA9IHBvcHVwTmFtZS5yZXBsYWNlKFwiI1wiLCBcIlwiKTtcbiAgfVxuXG4gIGdldFBhcmVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJlbnQ7XG4gIH1cblxuICBnZXRMb2NhbE5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMubG9jYWxOYW1lO1xuICB9XG5cbiAgc2V0TG9jYWxlTmFtZShsb2NhbE5hbWU6IHN0cmluZykge1xuICAgIHRoaXMubG9jYWxOYW1lID0gbG9jYWxOYW1lO1xuICB9XG5cbiAgZ2V0Q2hpbGRyZW4oKSB7XG4gICAgbGV0IGNoaWxkcmVuOiBBcnJheTxIVE1MRWxlbWVudFdyYXBwZXI+ID0gdGhpcy5jaGlsZE5vZGVzO1xuXG4gICAgaWYgKChjaGlsZHJlbiA9PSBudWxsIHx8IGNoaWxkcmVuLmxlbmd0aCA9PT0gMCkgJiYgKHRoaXMuZHluYW1pY0NoaWxkTm9kZXMgIT0gbnVsbCkpIHtcbiAgICAgIGNoaWxkcmVuID0gdGhpcy5keW5hbWljQ2hpbGROb2RlcztcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICB0aGlzLmdldExvY2FsTmFtZSgpID09PSBcInJvd1wiICYmXG4gICAgICBjaGlsZHJlbiAhPSBudWxsICYmXG4gICAgICB0aGlzLnBhcmVudFRhYmxlICE9IG51bGwgJiZcbiAgICAgIHRoaXMucGFyZW50VGFibGUuZ2V0TG9jYWxOYW1lKCkgPT09IFwidGFibGVcIiAmJlxuICAgICAgdGhpcy5wYXJlbnRUYWJsZS5jb2x1bW5zSGFzQmVlblN3YXBwZWQgPT09IHRydWVcbiAgICApIHtcbiAgICAgIGNoaWxkcmVuID0gXy5vcmRlckJ5KGNoaWxkcmVuLCAoY2hpbGQ6IEhUTUxFbGVtZW50V3JhcHBlcik9PiB7XG4gICAgICAgIHJldHVybiBjaGlsZFtcIm9yaWdpbmFsQ29sdW1uSW5kZXhcIl07XG4gICAgICB9KSBhcyBhbnk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoaWxkcmVuO1xuICB9XG5cbiAgZ2V0Q2hpbGRDb3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNoaWxkTm9kZXMgIT0gbnVsbCA/IHRoaXMuY2hpbGROb2Rlcy5sZW5ndGggOiAwO1xuICB9XG5cbiAgZ2V0Q2hpbGRBdChpZHg6IG51bWJlcik6IEhUTUxFbGVtZW50V3JhcHBlciB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q2hpbGRDb3VudCgpID4gaWR4ID8gdGhpcy5jaGlsZE5vZGVzW2lkeF0gOiBudWxsO1xuICB9XG5cbiAgc2V0Q29tcG9uZW50KGNvbXBvbmVudDogQmFzZUNvbXBvbmVudCwgZnJvbVZpcnR1YWxUYWJsZTogYm9vbGVhbiA9IGZhbHNlKSB7XG4gICAgdGhpcy5jb21wb25lbnQgPSBjb21wb25lbnQ7XG4gICAgdGhpcy5jb21wb25lbnQucGFyZW50VGFibGVSb3cgPSB0aGlzLnBhcmVudDtcblxuICAgIGlmIChjb21wb25lbnQgIT0gbnVsbCAmJiBmcm9tVmlydHVhbFRhYmxlID09PSB0cnVlKSB7XG4gICAgICBjb21wb25lbnQuYWRkQXR0cmlidXRlQ2hhbmdlTGlzdGVuZXIodGhpcyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBpbnZva2VNY29BY3Rpb24oYWN0aW9uOiBzdHJpbmcgfCAoKCkgPT4gYW55KSkge1xuICAgIGlmICh0eXBlb2YgYWN0aW9uID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIGFjdGlvbigpO1xuICAgIH0gZWxzZSBpZiAoYWN0aW9uLmluZGV4T2YoXCJtY286Ly9cIikgPT09IDApIHtcbiAgICAgIGNvbnN0IG1jb05hbWUgPSBhY3Rpb24uc3Vic3RyaW5nKDYsIGFjdGlvbi5pbmRleE9mKFwiLlwiKSk7XG4gICAgICBjb25zdCBtZXRob2ROYW1lID0gYWN0aW9uLnN1YnN0cmluZyhhY3Rpb24uaW5kZXhPZihcIi5cIikgKyAxLCBhY3Rpb24uaW5kZXhPZihcIihcIikpO1xuICAgICAgY29uc3QgYXJnID0gYWN0aW9uLnN1YnN0cmluZyhhY3Rpb24uaW5kZXhPZihcIihcIikgKyAxLCBhY3Rpb24uaW5kZXhPZihcIilcIikpO1xuXG4gICAgICBpZiAoYXJnICE9IG51bGwgJiYgYXJnLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgbWNvID0gdGhpcy5zZXNzaW9uU2VydmljZS5nZXRNY29Db250YWluZXIoKS5nZXRNY28obWNvTmFtZSk7XG5cbiAgICAgICAgaWYgKG1jbyAhPSBudWxsKSB7XG4gICAgICAgICAgaWYgKGFyZyA9PT0gXCJ0aGlzXCIpIHtcbiAgICAgICAgICAgIG1jb1ttZXRob2ROYW1lXS5hcHBseShtY28sIFt0aGlzXSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1jb1ttZXRob2ROYW1lXS5hcHBseShtY28sIFthcmddKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIlVuYWJsZSB0byBleGVjdXRlIE1DTyBhY3Rpb24sIG1jbyBub3QgZm91bmQ6IFwiICsgbWNvTmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IG1jbyA9IHRoaXMuc2Vzc2lvblNlcnZpY2UuZ2V0TWNvQ29udGFpbmVyKCkuZ2V0TWNvKG1jb05hbWUpO1xuXG4gICAgICAgIGlmIChtY28gIT0gbnVsbCkge1xuICAgICAgICAgIG1jb1ttZXRob2ROYW1lXS5hcHBseShtY28pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJVbmFibGUgdG8gZXhlY3V0ZSBNQ08gYWN0aW9uLCBtY28gbm90IGZvdW5kOiBcIiArIG1jb05hbWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0Q29tcG9uZW50KCk6IEJhc2VDb21wb25lbnQge1xuICAgIHJldHVybiB0aGlzLmNvbXBvbmVudDtcbiAgfVxuXG4gIHByaXZhdGUgc2hvd1BvcHVwTWVudShldmVudDogTW91c2VFdmVudCkge1xuICAgIHRoaXMuc2Vzc2lvblNlcnZpY2Uuc2V0TW91c2VQb3NpdGlvbihldmVudCk7XG5cbiAgICBpZiAodGhpcy5wb3B1cE5hbWUgIT0gbnVsbCkge1xuICAgICAgY29uc3QgY29udGV4dE1lbnUgPSB0aGlzLnNlc3Npb25TZXJ2aWNlLnNob3dDb250ZXh0TWVudSh0aGlzLnBvcHVwTmFtZSk7XG5cbiAgICAgIGlmIChjb250ZXh0TWVudSA9PT0gdHJ1ZSkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAvLyBjb250ZXh0TWVudS5zaG93KHRoaXMuaHRtbEVsZW1lbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGNsaWVudEV2ZW50ID0gbmV3IENsaWVudEV2ZW50KHRoaXMsIGV2ZW50KTtcblxuICAgIGlmIChBcHBVdGlscy5jdXN0b21pemVDbGllbnRFdmVudCAhPSBudWxsKSB7XG4gICAgICBBcHBVdGlscy5jdXN0b21pemVDbGllbnRFdmVudCh0aGlzLCBjbGllbnRFdmVudCk7XG4gICAgfVxuXG4gICAgY2xpZW50RXZlbnQuc2V0UGFyYW1ldGVyKFwic2NyZWVuSWRcIiwgdGhpcy5wYXJlbnRTY3JlZW5JZCk7XG5cbiAgICB0aGlzLnNlc3Npb25TZXJ2aWNlLmdldEV2ZW50SGFuZGxlcigpLnNldENsaWVudEV2ZW50KGNsaWVudEV2ZW50KTtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlT25Nb3VzZURvd24oZXZlbnQpIHtcbiAgICBpZih0aGlzLnBhcmVudFRhYmxlICE9IG51bGwpe1xuICAgICAgbGV0IHRhYmxlID0gdGhpcy5wYXJlbnRUYWJsZS5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQ7XG4gICAgICBsZXQgdGRzOiBOb2RlTGlzdCA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkJyk7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICh0ZHNbaV0gYXMgYW55KS5zdHlsZS5jb2xvciA9ICcnO1xuICAgICAgfVxuXG4gICAgICB0ZHMgPSB0aGlzLmh0bWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkJyk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAodGRzW2ldIGFzIGFueSkuc3R5bGUuY29sb3IgPSAnYmx1ZSc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubW91c2VEb3duQWN0aW9uICE9IG51bGwpIHtcbiAgICAgIGNvbnN0IGNsaWVudEV2ZW50ID0gbmV3IENsaWVudEV2ZW50KHRoaXMsIGV2ZW50KTtcblxuICAgICAgaWYgKEFwcFV0aWxzLmN1c3RvbWl6ZUNsaWVudEV2ZW50ICE9IG51bGwpIHtcbiAgICAgICAgQXBwVXRpbHMuY3VzdG9taXplQ2xpZW50RXZlbnQodGhpcywgY2xpZW50RXZlbnQpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5wYXJlbnRTY3JlZW5JZCAhPSBudWxsKSB7XG4gICAgICAgIGNsaWVudEV2ZW50LnNldFBhcmFtZXRlcihcInNjcmVlbklkXCIsIHRoaXMucGFyZW50U2NyZWVuSWQpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNlc3Npb25TZXJ2aWNlLmdldEV2ZW50SGFuZGxlcigpLnNldENsaWVudEV2ZW50KGNsaWVudEV2ZW50KTtcblxuICAgICAgdGhpcy5pbnZva2VNY29BY3Rpb24odGhpcy5tb3VzZURvd25BY3Rpb24pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlRG91YmxlQ2xpY2soZXZlbnQpIHtcbiAgICBjb25zdCBjbGllbnRFdmVudCA9IG5ldyBDbGllbnRFdmVudCh0aGlzLCBldmVudCk7XG5cbiAgICBpZiAoQXBwVXRpbHMuY3VzdG9taXplQ2xpZW50RXZlbnQgIT0gbnVsbCkge1xuICAgICAgQXBwVXRpbHMuY3VzdG9taXplQ2xpZW50RXZlbnQodGhpcywgY2xpZW50RXZlbnQpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnBhcmVudFNjcmVlbklkICE9IG51bGwpIHtcbiAgICAgIGNsaWVudEV2ZW50LnNldFBhcmFtZXRlcihcInNjcmVlbklkXCIsIHRoaXMucGFyZW50U2NyZWVuSWQpO1xuICAgIH1cblxuICAgIHRoaXMuc2Vzc2lvblNlcnZpY2UuZ2V0RXZlbnRIYW5kbGVyKCkuc2V0Q2xpZW50RXZlbnQoY2xpZW50RXZlbnQpO1xuXG4gICAgaWYgKHRoaXMuZG91YmxlQ2xpY2tBY3Rpb24gIT0gbnVsbCkge1xuICAgICAgdGhpcy5pbnZva2VNY29BY3Rpb24odGhpcy5kb3VibGVDbGlja0FjdGlvbik7XG4gICAgfVxuICB9XG5cbiAgZXhwYW5kTm9kZShpc0V4cGFuZGVkOiBib29sZWFuIHwgc3RyaW5nLCBqdXN0VXBkYXRlQXR0cmlidXRlOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICB0aGlzLmV4cGFuZGVkID0gdHlwZW9mIGlzRXhwYW5kZWQgPT09IFwic3RyaW5nXCIgPyBpc0V4cGFuZGVkIDogaXNFeHBhbmRlZCArICcnO1xuXG4gICAgaWYgKGp1c3RVcGRhdGVBdHRyaWJ1dGUgIT09IHRydWUgJiYgdGhpcy5wYXJlbnRUYWJsZUlkICE9IG51bGwgJiYgdGhpcy5wYXJlbnRUYWJsZUlkICE9PSBcIlwiKSB7XG4gICAgICBjb25zdCBqcSA9IGpRdWVyeShgIyR7dGhpcy5wYXJlbnRUYWJsZUlkfSAuanEtdHJlZS10YWJsZWApO1xuXG4gICAgICBpZiAoanEgIT0gbnVsbCkge1xuICAgICAgICBsZXQgbm9kZUlkOiBzdHJpbmcgPSB0aGlzLmdldEF0dHJpYnV0ZShcImRhdGEtdHQtaWRcIik7XG5cbiAgICAgICAgaWYgKG5vZGVJZCAhPSBudWxsKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChpc0V4cGFuZGVkID09PSBcInRydWVcIiB8fCBpc0V4cGFuZGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgIGpxLnRyZWV0YWJsZShcImV4cGFuZE5vZGVcIiwgbm9kZUlkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGpxLnRyZWV0YWJsZShcImNvbGxhcHNlTm9kZVwiLCBub2RlSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJVbmFibGUgdG8gZXhwYW5kIG5vZGUgZHVlIHRvIGVycm9yXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIlVuYWJsZSB0byBleHBhbmQgbm9kZSwgdHJlZSB0YWJsZSBpcyBudWxsXCIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdHJhY2tBdHRyaWJ1dGVOYW1lKG5hbWU6IHN0cmluZykge1xuICAgIGlmICh0aGlzLmF0dHJpYnV0ZXNOYW1lID09IG51bGwpIHtcbiAgICAgIHRoaXMuYXR0cmlidXRlc05hbWUgPSBbXTtcbiAgICB9XG5cbiAgICB0aGlzLmF0dHJpYnV0ZXNOYW1lLnB1c2gobmFtZSk7XG4gIH1cblxuICB0b0pzb24oKToge30ge1xuICAgIGxldCByZXRWYWwgPSB7fTtcblxuICAgIGlmICh0aGlzLmNvbXBvbmVudCAhPSBudWxsKSB7XG4gICAgICByZXRWYWwgPSB0aGlzLmNvbXBvbmVudC50b0pzb24oKTtcblxuICAgICAgaWYgKHRoaXMuY29tcG9uZW50IGluc3RhbmNlb2YgTGFiZWxDb21wb25lbnQpIHtcbiAgICAgICAgcmV0VmFsW1wibnhUYWdOYW1lXCJdID0gdGhpcy5nZXRMb2NhbE5hbWUoKTtcbiAgICAgICAgcmV0VmFsW1widGFnTmFtZVwiXSA9IHRoaXMuZ2V0TG9jYWxOYW1lKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldFZhbFtcIm54VGFnTmFtZVwiXSA9IHRoaXMuZ2V0TG9jYWxOYW1lKCk7XG4gICAgICByZXRWYWxbXCJ0YWdOYW1lXCJdID0gdGhpcy5nZXRMb2NhbE5hbWUoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb21wb25lbnQgPT0gbnVsbCkge1xuICAgICAgcmV0VmFsW1wiaWRcIl0gPSB0aGlzLmdldElkKCkgfHwgdGhpcy5fdW5pcXVlSWQ7XG4gICAgICByZXRWYWxbXCJ0ZXh0XCJdID0gdGhpcy5nZXRUZXh0KCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYXR0cmlidXRlc05hbWUgIT0gbnVsbCkge1xuICAgICAgdGhpcy5hdHRyaWJ1dGVzTmFtZS5mb3JFYWNoKG5hbWUgPT4ge1xuICAgICAgICByZXRWYWxbbmFtZV0gPSB0aGlzLmdldEF0dHJpYnV0ZShuYW1lKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vYW55IGNoaWxkcmVuP1xuICAgIGxldCBjaGlsZHJlbjogQXJyYXk8SFRNTEVsZW1lbnRXcmFwcGVyPjtcbiAgICBpZiAodGhpcy5jaGlsZE5vZGVzICE9IG51bGwgJiYgdGhpcy5jaGlsZE5vZGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNoaWxkcmVuID0gdGhpcy5jaGlsZE5vZGVzO1xuICAgIH0gZWxzZSBpZiAodGhpcy5keW5hbWljQ2hpbGROb2RlcyAhPSBudWxsICYmIHRoaXMuZHluYW1pY0NoaWxkTm9kZXMubGVuZ3RoID4gMCkge1xuICAgICAgY2hpbGRyZW4gPSB0aGlzLmR5bmFtaWNDaGlsZE5vZGVzO1xuICAgIH1cblxuICAgIGlmIChjaGlsZHJlbiAhPSBudWxsKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZ2V0TG9jYWxOYW1lKCkgPT09IFwicm93XCIgJiZcbiAgICAgICAgdGhpcy5wYXJlbnRUYWJsZSAhPSBudWxsICYmXG4gICAgICAgIHRoaXMucGFyZW50VGFibGUuZ2V0TG9jYWxOYW1lKCkgPT09IFwidGFibGVcIiAmJlxuICAgICAgICB0aGlzLnBhcmVudFRhYmxlLmNvbHVtbnNIYXNCZWVuU3dhcHBlZCA9PT0gdHJ1ZVxuICAgICAgKSB7XG4gICAgICAgIGNoaWxkcmVuID0gXy5vcmRlckJ5KGNoaWxkcmVuLCAoY2hpbGQ6IEhUTUxFbGVtZW50V3JhcHBlcik9PiB7XG4gICAgICAgICAgcmV0dXJuIGNoaWxkW1wib3JpZ2luYWxDb2x1bW5JbmRleFwiXTtcbiAgICAgICAgfSkgYXMgYW55O1xuICAgICAgfVxuXG4gICAgICByZXRWYWxbXCJjaGlsZHJlblwiXSA9IGNoaWxkcmVuLm1hcChjaGlsZD0+Y2hpbGQudG9Kc29uKCkpO1xuICAgIH1cbiAgICBpZih0aGlzLmN1c3RvbUF0dHJpYnV0ZXMpXG4gICAgICByZXRWYWxbJ2N1c3RvbUF0dHJpYnV0ZXMnXSA9IHRoaXMuY3VzdG9tQXR0cmlidXRlcztcbiAgICByZXR1cm4gcmV0VmFsO1xuICB9XG5cbiAgaXNWaWV3KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlzRGlhbG9nKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlzRHluYW1pY1ZpZXcoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaXNGYXV4RWxlbWVudCgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHNldENoZWNrZWQoY2hrOiBzdHJpbmcgfCBib29sZWFuKSB7XG4gICAgaWYgKHR5cGVvZiBjaGsgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgICBjaGsgPSBjaGsgKyBcIlwiO1xuICAgIH1cblxuICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiLCBjaGspO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlYXJjaCBmb3IgY2hpbGQgdXNpbmcgdGhlIHByb3ZpZGVkIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBwYXJhbSBmbiBmdW5jdGlvbiB0byBleGVjdXRlIHdoaWxlIGl0ZXJhdGluZyBjaGlsZCBsb29rdXBcbiAgICovXG4gIGZpbmRDaGlsZEJ5Rm4oZm46IChlbGVtZW50OiBIVE1MRWxlbWVudFdyYXBwZXIpPT5ib29sZWFuKSB7XG4gICAgbGV0IHJldFZhbDogSFRNTEVsZW1lbnRXcmFwcGVyO1xuXG4gICAgbGV0IGNoaWxkcmVuOiBBcnJheTxIVE1MRWxlbWVudFdyYXBwZXI+ID0gdGhpcy5jb25jYXROb2RlKFtdIGFzIGFueSwgdGhpcyk7XG5cbiAgICB3aGlsZShjaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuLnBvcCgpO1xuXG4gICAgICBpZiAoY2hpbGQgIT0gbnVsbCkge1xuICAgICAgICBpZiAoZm4oY2hpbGQpID09PSB0cnVlKSB7XG4gICAgICAgICAgcmV0VmFsID0gY2hpbGQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hpbGRyZW4gPSB0aGlzLmNvbmNhdE5vZGUoY2hpbGRyZW4sIGNoaWxkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXRWYWw7XG4gIH1cblxuICAvKipcbiAgICogQ29uY2F0ZSB7ZnJvbU5vZGV9IHRvIHt0b05vZGV9XG4gICAqXG4gICAqIEBwYXJhbSB0b05vZGUgYXJyYXkgb2Ygbm9kZXMgdG8gYmUgY29uY2F0ZWQgdG9cbiAgICogQHBhcmFtIGZyb21Ob2RlIG5vZGUgdG8gYmUgY29uY2F0ZWQgZnJvbVxuICAgKiBAcmV0dXJucyB0aGUgY29uY2F0ZWQgbm9kZVxuICAgKi9cbiAgcHJpdmF0ZSBjb25jYXROb2RlKHRvTm9kZTogQXJyYXk8SFRNTEVsZW1lbnRXcmFwcGVyPiwgZnJvbU5vZGU6IEhUTUxFbGVtZW50V3JhcHBlcik6IEFycmF5PEhUTUxFbGVtZW50V3JhcHBlcj4ge1xuICAgIGxldCByZXRWYWwgPSB0b05vZGU7XG5cbiAgICBpZiAoZnJvbU5vZGUgIT0gbnVsbCkge1xuICAgICAgaWYgKGZyb21Ob2RlLmNoaWxkTm9kZXMgIT0gbnVsbCkge1xuICAgICAgICByZXRWYWwgPSByZXRWYWwuY29uY2F0KGZyb21Ob2RlLmNoaWxkTm9kZXMpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZnJvbU5vZGUuY2hpbGRSb3dzICE9IG51bGwpIHtcbiAgICAgICAgcmV0VmFsID0gcmV0VmFsLmNvbmNhdChmcm9tTm9kZS5jaGlsZFJvd3MpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZnJvbU5vZGUuZHluYW1pY0NoaWxkTm9kZXMgIT0gbnVsbCkge1xuICAgICAgICByZXRWYWwgPSByZXRWYWwuY29uY2F0KGZyb21Ob2RlLmR5bmFtaWNDaGlsZE5vZGVzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmV0VmFsO1xuICB9XG5cbiAgLy9hdHRyaWJ1dGUgY2hhbmdlIGxpc3RlbmVyXG4gIF9pbnRlcm5hbElkOiBzdHJpbmc7XG5cbiAgYmVmb3JlQXR0cmlidXRlUmVtb3ZlZChldnQ6IEF0dHJpYnV0ZUNoYW5nZUV2ZW50KTogdm9pZCB7XG5cbiAgfVxuXG4gIGJlZm9yZUF0dHJpYnV0ZVNldChldnQ6IEF0dHJpYnV0ZUNoYW5nZUV2ZW50KTogdm9pZCB7XG5cbiAgfVxuXG4gIG9uQXR0cmlidXRlUmVtb3ZlZChldnQ6IEF0dHJpYnV0ZUNoYW5nZUV2ZW50KTogdm9pZCB7XG5cbiAgfVxuXG4gIG9uQXR0cmlidXRlU2V0KGV2dDogQXR0cmlidXRlQ2hhbmdlRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoZXZ0LmdldE5hbWUoKSA9PT0gXCJzb3J0VmFsdWVcIiAmJiB0aGlzLmh0bWxFbGVtZW50ICE9IG51bGwpIHtcbiAgICAgIHRoaXMudXBkYXRlU29ydFZhbHVlKGV2dC5nZXROZXdWYWx1ZSgpKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVNvcnRWYWx1ZSh2YWx1ZSkge1xuICAgIGlmICh0aGlzLnJlbmRlcmVyICE9IG51bGwpIHtcbiAgICAgIHRoaXMucmVuZGVyZXIuc2V0QXR0cmlidXRlKHRoaXMuaHRtbEVsZW1lbnQsIFwiZGF0YS10ZXh0XCIsIHZhbHVlKTtcblxuICAgICAgaWYgKHRoaXMuY29tcG9uZW50ICE9IG51bGwgJiYgdGhpcy5jb21wb25lbnQuZ2V0UGFyZW50KCkgIT0gbnVsbCAmJiB0eXBlb2YgKHRoaXMuY29tcG9uZW50LmdldFBhcmVudCgpIGFzIGFueSkucmVmcmVzaFRhYmxlU29ydGVyQ2FjaGUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAodGhpcy5jb21wb25lbnQuZ2V0UGFyZW50KCkgYXMgYW55KS5yZWZyZXNoVGFibGVTb3J0ZXJDYWNoZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlzRHJhZ2dhYmxlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZShcImRyYWdnYWJsZVwiKSA9PT0gXCJ0cnVlXCI7XG4gIH1cblxuICBhcHBseURyYWdnYWJsZSgpIHtcbiAgICBpZiAodGhpcy5pc0RyYWdnYWJsZSgpICYmIHRoaXMuZHJhZ2dhYmxlQXBwbGllZCAhPT0gdHJ1ZSAmJiB0aGlzLmh0bWxFbGVtZW50ICE9IG51bGwpIHtcbiAgICAgIGpRdWVyeSh0aGlzLmh0bWxFbGVtZW50KS5kcmFnZ2FibGUoe1xuICAgICAgICBhcHBlbmRUbzogXCJib2R5XCIsXG4gICAgICAgIGFkZENsYXNzZXM6IGZhbHNlLFxuICAgICAgICBoZWxwZXI6ICgpPT57XG4gICAgICAgICAgY29uc3QgaGVscGVyOiBIVE1MRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgaGVscGVyLmNsYXNzTGlzdC5hZGQoXCJkcmFnZ2FibGUtcm93LWhlbHBlclwiKTtcbiAgICAgICAgICBoZWxwZXIuaWQgPSBcImRyYWdnYWJsZVJvd0hlbHBlckludGVybmFsXCI7XG5cbiAgICAgICAgICAvLyBpZiAodGhpcy5wYXJlbnRUYWJsZSAhPSBudWxsICYmIHRoaXMucGFyZW50VGFibGUuc2VsZWN0ZWRSb3dzICE9IG51bGwgJiYgdGhpcy5wYXJlbnRUYWJsZS5zZWxlY3RlZFJvd3MubGVuZ3RoID4gMSkge1xuICAgICAgICAgIC8vICAgaGVscGVyLmNsYXNzTGlzdC5hZGQoXCJkcmFnLXJvdy1oZWxwZXItY29udGFpbmVyXCIpO1xuXG4gICAgICAgICAgLy8gICBjb25zdCBjID0gdGhpcy5wYXJlbnRUYWJsZS5zZWxlY3RlZFJvd3MubGVuZ3RoO1xuICAgICAgICAgIC8vICAgY29uc3QgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblxuICAgICAgICAgIC8vICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjOyBpKyspIHtcbiAgICAgICAgICAvLyAgICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAvLyAgICAgcm93LmNsYXNzTGlzdC5hZGQoXCJkcmFnLXJvdy1oZWxwZXItcm93XCIpO1xuICAgICAgICAgIC8vICAgICBmcmFnLmFwcGVuZENoaWxkKHJvdyk7XG4gICAgICAgICAgLy8gICB9XG5cbiAgICAgICAgICAvLyAgIGhlbHBlci5hcHBlbmRDaGlsZChmcmFnKTtcbiAgICAgICAgICAvLyB9XG5cbiAgICAgICAgICByZXR1cm4gaGVscGVyO1xuICAgICAgICB9LFxuICAgICAgICBzdGFydDogKCk9PntcbiAgICAgICAgICBjb25zdCBjbGllbnRFdmVudCA9IG5ldyBDbGllbnRFdmVudCh0aGlzLCBldmVudCk7XG4gICAgICAgICAgY2xpZW50RXZlbnQuc2V0UGFyYW1ldGVyKFwiZHJhZ0lkXCIsIHRoaXMucGFyZW50VGFibGVJZCk7XG5cbiAgICAgICAgICBpZiAoQXBwVXRpbHMuY3VzdG9taXplQ2xpZW50RXZlbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgQXBwVXRpbHMuY3VzdG9taXplQ2xpZW50RXZlbnQodGhpcywgY2xpZW50RXZlbnQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0aGlzLnBhcmVudFNjcmVlbklkICE9IG51bGwpIHtcbiAgICAgICAgICAgIGNsaWVudEV2ZW50LnNldFBhcmFtZXRlcihcInNjcmVlbklkXCIsIHRoaXMucGFyZW50U2NyZWVuSWQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuc2Vzc2lvblNlcnZpY2UuZ2V0RXZlbnRIYW5kbGVyKCkuc2V0Q2xpZW50RXZlbnQoY2xpZW50RXZlbnQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmRyYWdnYWJsZUFwcGxpZWQgPSB0cnVlO1xuICB9XG5cbiAgaXNEcmFnZ2FibGVBcHBsaWVkKCkge1xuICAgIHJldHVybiB0aGlzLmRyYWdnYWJsZUFwcGxpZWQ7XG4gIH1cbiAgLyoqXG4gICAqIHJvd8OjwoHCqsOjwoHCqUJhc2VDb21wb25lbnTDo8KBwqjDo8KBwpfDo8KBwqbDpcKtwpjDpcKcwqjDo8KBwpfDo8KBwqrDo8KBwoR3cmFwcGVyw6PCgcKrY3VzdG9tQXR0cmlidXRlc8OjwoLCksOowqjCrcOlwq7CmsOjwoHCl8OjwoHCvsOjwoHCmcOjwoDCglxuICAgKiBAcGFyYW0gbmFtZVxuICAgKiBAcGFyYW0gdmFsdWVcbiAgICovXG4gIHNldEN1c3RvbUF0dHJpYnV0ZShuYW1lOiBzdHJpbmcsIHZhbHVlOiBhbnkpIHtcbiAgICBpZighdGhpcy5jdXN0b21BdHRyaWJ1dGVzKVxuICAgICAgdGhpcy5jdXN0b21BdHRyaWJ1dGVzID0ge307XG4gICAgdGhpcy5jdXN0b21BdHRyaWJ1dGVzW25hbWVdID0gdmFsdWU7XG4gIH1cbn1cbiIsImltcG9ydCB7IERpcmVjdGl2ZSwgSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiAndnQtdGFibGUtcm93LWRlZidcbn0pXG5leHBvcnQgY2xhc3MgVGFibGVSb3dEZWZEaXJlY3RpdmUge1xuICBASW5wdXQoKSBjdXN0b21BdHRyaWJ1dGVzOiB7W25hbWU6IHN0cmluZ106IHN0cmluZ307XG4gIFxuICBjb25zdHJ1Y3RvcigpIHsgfVxuXG59XG4iLCJpbXBvcnQgeyBEaXJlY3RpdmUsIFRlbXBsYXRlUmVmLCBDb250ZW50Q2hpbGQsIENvbnRlbnRDaGlsZHJlbiwgUXVlcnlMaXN0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBUYWJsZUNlbGxEaXJlY3RpdmUgfSBmcm9tICcuL3RhYmxlLWNlbGwuZGlyZWN0aXZlJztcblxuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiAndnQtZm9vdGVyLXJvdydcbn0pXG5leHBvcnQgY2xhc3MgRm9vdGVyUm93RGlyZWN0aXZlIHtcblxuICBAQ29udGVudENoaWxkcmVuKFRhYmxlQ2VsbERpcmVjdGl2ZSwge3JlYWQ6IFRhYmxlQ2VsbERpcmVjdGl2ZX0pXG4gIGNlbGxUZW1wbGF0ZXM6IFF1ZXJ5TGlzdDxUYWJsZUNlbGxEaXJlY3RpdmU+O1xuXG59XG4iLCJpbXBvcnQgeyBEaXJlY3RpdmUsIFRlbXBsYXRlUmVmLCBDb250ZW50Q2hpbGQsIENvbnRlbnRDaGlsZHJlbiwgUXVlcnlMaXN0LCBJbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgVGFibGVDZWxsRGlyZWN0aXZlIH0gZnJvbSAnLi90YWJsZS1jZWxsLmRpcmVjdGl2ZSc7XG5cbkBEaXJlY3RpdmUoe1xuICBzZWxlY3RvcjogJ3Z0LXJvdydcbn0pXG5leHBvcnQgY2xhc3MgUm93RGlyZWN0aXZlIHtcbiAgQElucHV0KCkgY3VzdG9tQXR0cmlidXRlczoge1tuYW1lOiBzdHJpbmddOiBzdHJpbmd9O1xuICBASW5wdXQoKSBpZDogc3RyaW5nO1xuICBASW5wdXQoKSBjc3NDbGFzczogc3RyaW5nO1xuXG4gIEBDb250ZW50Q2hpbGRyZW4oVGFibGVDZWxsRGlyZWN0aXZlLCB7cmVhZDogVGFibGVDZWxsRGlyZWN0aXZlfSlcbiAgY2VsbFRlbXBsYXRlczogUXVlcnlMaXN0PFRhYmxlQ2VsbERpcmVjdGl2ZT47XG59XG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlLCBJbmplY3QgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCAqIGFzIGNsaXBib2FyZCBmcm9tIFwiY2xpcGJvYXJkLXBvbHlmaWxsXCI7XG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuLyoqXG4gKiBDbGlwYm9hcmQgc2VydmljZSB0aGF0IHVzZSB0aGUgbW9kZXJuIGltcGxlbWVudGF0aW9uIG9mIGNsaWJvYXJkLiBGb3Igb2xkZXIgYnJvd3NlciwgYSBwb2x5ZmlsbFxuICogaXMgdXNlZCBpbnN0ZWFkLlxuICovXG5leHBvcnQgY2xhc3MgQ2xpcGJvYXJkU2VydmljZSB7XG5cbiAgLy9jb25zdHJ1Y3RvcihASW5qZWN0KFwiQ2xpcGJvYXJkUG9seWZpbGxcIikgcHJpdmF0ZSBjbGlwYm9hcmQ6IGFueSkgeyB9XG5cbiAgLyoqXG4gICAqIENvcHkgdGhlIHt0eHR9IHRleHQgaW50byB0aGUgY2xpcGJvYXJkXG4gICAqIFxuICAgKiBAcGFyYW0gdHh0IHRleHQgdG8gYmUgY29waWVkIGludG8gdGhlIGNsaXBib2FyZFxuICAgKi9cbiAgY29weSh0eHQ6IHN0cmluZykge1xuICAgIHJldHVybiBjbGlwYm9hcmQud3JpdGVUZXh0KHR4dCk7XG4gIH1cbn1cbiIsIi8vY29weSBmcm9tIGRyYWduZHJvcFxuZXhwb3J0IGZ1bmN0aW9uIGlzSUUoKSB7XG4gICAgdmFyIG5hdiA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcbiAgICByZXR1cm4gbmF2LmluZGV4T2YoXCJtc2llXCIpICE9PSAtMSA/IHBhcnNlSW50KG5hdi5zcGxpdChcIm1zaWVcIilbMV0pIDogZmFsc2U7XG59IiwiaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgQ29tcG9uZW50LCBDb250ZW50Q2hpbGRyZW4sIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uSW5pdCwgT3V0cHV0LCBRdWVyeUxpc3QsIEVsZW1lbnRSZWYsIENoYW5nZURldGVjdG9yUmVmLCBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgVmlld0NoaWxkLCBTa2lwU2VsZiwgT3B0aW9uYWwsIGZvcndhcmRSZWYsIFJlbmRlcmVyMiwgQ29udGVudENoaWxkLCBOZ1pvbmUsIEl0ZXJhYmxlRGlmZmVycywgSXRlcmFibGVEaWZmZXIsIERvQ2hlY2sgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEJhc2VDb21wb25lbnQgfSBmcm9tICcuLi9iYXNlL2Jhc2UuY29tcG9uZW50JztcbmltcG9ydCB7IFNlc3Npb25TZXJ2aWNlIH0gZnJvbSAnLi4vc2Vzc2lvbi9zZXNzaW9uLnNlcnZpY2UnO1xuaW1wb3J0IHsgVGFibGVDb2x1bW5EaXJlY3RpdmUgfSBmcm9tICcuL3RhYmxlLWNvbHVtbi5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgVGFibGVTZWxlY3Rpb25FdmVudCB9IGZyb20gJy4vdGFibGUtc2VsZWN0aW9uLWV2ZW50JztcbmltcG9ydCB7IEhUTUxFbGVtZW50V3JhcHBlciB9IGZyb20gJy4uL3RyZWUtdGFibGUvaHRtbC1lbGVtZW50LXdyYXBwZXInO1xuaW1wb3J0IHsgT25DcmVhdGVFdmVudCB9IGZyb20gJy4uL2Jhc2Uvb24tY3JlYXRlLWV2ZW50JztcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gJy4uL2phdmEvdmVjdG9yJztcbmltcG9ydCB7IFRhYmxlUm93RGVmRGlyZWN0aXZlIH0gZnJvbSAnLi90YWJsZS1yb3ctZGVmLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBGb290ZXJSb3dEaXJlY3RpdmUgfSBmcm9tICcuL2Zvb3Rlci1yb3cuZGlyZWN0aXZlJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiwgU3ViamVjdCwgdGltZXIgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSBcInJ4anMvb3BlcmF0b3JzXCI7XG5pbXBvcnQgeyBSb3dEaXJlY3RpdmUgfSBmcm9tICcuL3Jvdy5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgQ2xpZW50RXZlbnQgfSBmcm9tICcuLi9ldmVudC1oYW5kbGVyL2NsaWVudC1ldmVudCc7XG5pbXBvcnQgeyBBcHBVdGlscyB9IGZyb20gJy4uL2Jhc2UvYXBwLXV0aWxzJztcbmltcG9ydCB7IFZpZXdDb21wb25lbnQgfSBmcm9tICcuLi92aWV3L3ZpZXcuY29tcG9uZW50JztcbmltcG9ydCB7IENsaXBib2FyZFNlcnZpY2UgfSBmcm9tICcuLi9jbGlwYm9hcmQvY2xpcGJvYXJkLnNlcnZpY2UnO1xuaW1wb3J0IHsgVGFibGVDZWxsRGlyZWN0aXZlIH0gZnJvbSAnLi90YWJsZS1jZWxsLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBDaGVja2JveENvbXBvbmVudCB9IGZyb20gJy4uL2NoZWNrYm94L2NoZWNrYm94LmNvbXBvbmVudCc7XG5pbXBvcnQgeyBSYWRpb0J1dHRvbkNvbXBvbmVudCB9IGZyb20gJy4uL3JhZGlvLWJ1dHRvbi9yYWRpby1idXR0b24uY29tcG9uZW50JztcbmltcG9ydCB7IFRleHRGaWVsZENvbXBvbmVudCB9IGZyb20gJy4uL3RleHQtZmllbGQvdGV4dC1maWVsZC5jb21wb25lbnQnO1xuaW1wb3J0IHsgQ29tYm9Cb3hDb21wb25lbnQgfSBmcm9tICcuLi9jb21iby1ib3gvY29tYm8tYm94LmNvbXBvbmVudCc7XG5pbXBvcnQgeyBLZXlVdGlscyB9IGZyb20gJy4uL2Jhc2Uva2V5LXV0aWxzJztcbmltcG9ydCB7IGlzSUUgfSBmcm9tICcuLi8uLi9mdW5jdGlvbnMvaXMtaWUnO1xuXG5kZWNsYXJlIHZhciBqUXVlcnk6IGFueTtcblxuZGVjbGFyZSB2YXIgJDtcblxuZGVjbGFyZSB0eXBlIFNlbGVjdGlvbk1vZGUgPSBcIm5vbmVcIiB8IFwic2luZ2xlUm93XCIgfCBcIm11bHRpUm93XCIgfCBcInNpbmdsZUNlbGxcIiB8IFwibXVsdGlDZWxsXCIgfCBcInNpbmdsZUNvbHVtblwiIHwgXCJtdWx0aUNvbHVtblwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFZpcnR1YWxDb2x1bW5DaGFuZ2VEYXRhIHtcbiAgICB0ZXh0OiBzdHJpbmcsXG4gICAgY2hlY2tlZDogYm9vbGVhblxufVxuLyoqXG4gKiBDbGFzcyBmb3IgdGFibGUgY29tcG9uZW50XG4gKi9cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAndnQtdGFibGUnLFxuICAgIHRlbXBsYXRlVXJsOiAnLi90YWJsZS5jb21wb25lbnQuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbJy4vdGFibGUuY29tcG9uZW50LmNzcyddLFxuICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICAgIHByb3ZpZGVyczogW1xuICAgICAge1xuICAgICAgICBwcm92aWRlOiBCYXNlQ29tcG9uZW50LFxuICAgICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKT0+VGFibGVDb21wb25lbnQpXG4gICAgICB9XG4gICAgXVxufSlcbmV4cG9ydCBjbGFzcyBUYWJsZUNvbXBvbmVudCBleHRlbmRzIEJhc2VDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIERvQ2hlY2sge1xuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IElOVEVSTkFMX1ZJUlRVQUxfT1JJR0lOQUxfSU5ERVg6IHN0cmluZyA9IFwiJCRJTlRFUk5BTF9WSVJUVUFMX09SSUdJTkFMX0lOREVYJCRcIjtcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBJTlRFUk5BTF9WSVJUVUFMX1JPV19EQVRBIDogc3RyaW5nID0gXCIkJElOVEVSTkFMX1ZJUlRVQUxfUk9XX0RBVEEkJFwiO1xuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IElOVEVSTkFMX1JPV19ESUZGRVJfSUQgOiBzdHJpbmcgPSBcIiQkSU5URVJOQUxfVklSVFVBTF9ST1dfRElGRkVSX0lEJCRcIjtcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBJTlRFUk5BTF9ST1dfSUQgOiBzdHJpbmcgPSBcIiQkSU5URVJOQUxfVklSVFVBTF9ST1dfSUQkJFwiO1xuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IElOVEVSTkFMX0NPTFVNTl9IRUFERVJfSUQgPSBcIiQkSU5URVJOQUxfQ09MVU1OX0hFQURFUl9JRCQkXCI7XG5cbiAgICBASW5wdXQoKSBzZWxlY3Rpb25Nb2RlOiBTZWxlY3Rpb25Nb2RlID0gXCJzaW5nbGVSb3dcIjtcbiAgICBASW5wdXQoKSByb3dDdXN0b21BdHRyaWJ1dGVCdWlsZGVyOiAocm93OmFueSwgcm93TnVtYmVyPzogbnVtYmVyLCB2aWV3PzogVmlld0NvbXBvbmVudCk9Pnt9O1xuICAgIEBJbnB1dCgpIHJvd0lkQnVpbGRlcjogKHJvdzphbnksIHJvd051bWJlcj86IG51bWJlcik9PnN0cmluZztcbiAgICBASW5wdXQoKSByb3dTdHlsZUZuOiAocm93OmFueSk9PnN0cmluZztcblxuICAgIC8qKiBFbmFibGUgdXNlIG9mIHZpcnR1YWwgc2Nyb2xsaW5nLCBpZiB0aGlzIGlzIG9uLCBjb250cm9sV2lkdGggYW5kIGNvbnRyb2xIZWlnaHQgbXVzdCBiZSBkZWZpbmVkICovXG4gICAgQElucHV0KCkgdmlydHVhbFNjcm9sbDogYm9vbGVhbjtcblxuICAgIC8vY3VzdG9tIHNvcnQgZnVuY3Rpb24gZm9yIHZpcnR1YWwgc2Nyb2xsXG4gICAgQElucHV0KCkgdmlydHVhbFNjcm9sbFNvcnRGbjogKHZpZXc6IEJhc2VDb21wb25lbnQsIGNvbHVtbkluZGV4OiBudW1iZXIpPT5zdHJpbmc7XG5cbiAgICAvL2N1c3RvbSBmdW5jdGlvbiB0byBcInJlbmRlclwiIHRoZSBpbnZpc2libGUgcm93IChmb3IgdmlydHVhbCBzY3JvbGwpXG4gICAgQElucHV0KCkgdmlydHVhbFNjcm9sbEludmlzaWJsZVJvd0J1aWxkZXI6ICh2aWV3OiBCYXNlQ29tcG9uZW50LCByb3dEYXRhOiBhbnkpPT5IVE1MRWxlbWVudFdyYXBwZXI7XG5cbiAgICAvL3VzZSBmb3IgdmlydHVhbCBzY3JvbGxpbmdcbiAgICBASW5wdXQoKSByb3dIZWlnaHQ6IG51bWJlciA9IDI0O1xuXG4gICAgQElucHV0KCkgc2Nyb2xsVGltZW91dDogbnVtYmVyID0gMjAwO1xuXG4gICAgLy9zaG93IGJsYW5rIHJvdyBpZiB3ZSBkb24ndCBoYXZlIGVub3VnaCBkYXRhXG4gICAgc2hvd0JsYW5rUm93OiBib29sZWFuO1xuXG4gICAgQElucHV0KCkgc2V0IGRhdGFTb3VyY2UoZHM6IEFycmF5PGFueT4pIHtcbiAgICAgICAgLy9kYXRhIGhhcyBjaGFuZ2VzLCB3ZSBuZWVkIHRvIGRvIHNvbWUgY2xlYW4gdXAuXG4gICAgICAgIHRoaXMuY2xlYW5VcENoaWxkTm9kZXMoKTtcblxuICAgICAgICB0aGlzLnJlc2V0VGFibGVDb2x1bW5zKCk7XG4gICAgICAgIHRoaXMuX2RhdGFTb3VyY2UgPSB0aGlzLmJ1aWxkUm93SWRlbnRpdHkoZHMpO1xuXG4gICAgICAgIHRoaXMuY2hlY2tTaG93QmxhbmtSb3coKTtcbiAgICAgICAgdGhpcy5wcmV2aW91c1Jvd0luZGV4ID0gbnVsbDtcbiAgICAgICAgdGhpcy5tb2RpZmllZFZpcnR1YWxSb3dzID0gbnVsbDtcbiAgICAgICAgdGhpcy5tb2RpZmllZFZpcnR1YWxSb3dzSnNvbiA9IG51bGw7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dzID0gW107XG5cbiAgICAgICAgdGhpcy5jYWxjVmlydHVhbFNjcm9sbEhlaWdodCgpO1xuICAgICAgICB0aGlzLmNhbGNWaXJ0dWFsU2Nyb2xsVmlld1BvcnQoKTtcbiAgICB9XG5cbiAgICBnZXQgZGF0YVNvdXJjZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlydHVhbFNjcm9sbCA9PT0gdHJ1ZSA/IHRoaXMuX3ZpcnR1YWxWaWV3UG9ydCA6IHRoaXMuX2RhdGFTb3VyY2U7XG4gICAgfVxuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAvL3ZpcnR1YWwgZGF0YXNvdXJjZVxuICAgIHByaXZhdGUgX3ZpcnR1YWxWaWV3UG9ydDogQXJyYXk8YW55PjtcblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgcHJpdmF0ZSBfZGF0YVNvdXJjZTogQXJyYXk8YW55PjtcblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgLyoqIFdlYXRoZXIgb3Igbm90IHNob3VsZCBlbmFibGVkIHNvcnQsIGRlZmF1bHQgdG8gZW5hYmxlZCAobnVsbC91bmRlZmluZWQvdHJ1ZSBtZWFuIGVuYWJsZWQpICovXG4gICAgQElucHV0KCkgZW5hYmxlU29ydDogYm9vbGVhbjtcblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgLyoqIFdlYXRoZXIgb3Igbm90IHNob3VsZCBhbGxvdyBjb2x1bW4gZHJhZy9kcm9wLCBkZWZhdWx0IHRvIGVuYWJsZWQgKG51bGwvdW5kZWZpbmVkL3RydWUgbWVhbiBlbmFibGVkKSAqL1xuICAgIEBJbnB1dCgpIGVuYWJsZUNvbHVtbkRyYWdnaW5nOiBib29sZWFuXG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIC8qKiBXZWF0aGVyIG9yIG5vdCBzaG91bGQgYWxsb3cgY29sdW1uIHJlc2l6ZSwgZGVmYXVsdCB0byBlbmFibGVkIChudWxsL3VuZGVmaW5lZC90cnVlIG1lYW4gZW5hYmxlZCkgKi9cbiAgICBASW5wdXQoKSBlbmFibGVDb2x1bW5SZXNpemU6IGJvb2xlYW47XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIC8qKiBXaGV0aGVyIHJvdyBjYW4gYmUgZHJvcHBlZCBpbnRvIHRoaXMgdGFibGUgKi9cbiAgICBASW5wdXQoKSBkcm9wcGFibGU6IGJvb2xlYW4gfCBzdHJpbmc7XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIC8qKlxuICAgICAqIFJlc3RyaWN0ZWQgcmlnaHQgY2xpY2sgcG9wdXAgbWVudSBvbmx5IHRvIGNlbGwgd2hlcmUgcG9wdXAgaXMgZGVmaW5lZFxuICAgICAqIDxuZy10ZW1wbGF0ZSAuLi4+PHZ0LWxhYmVsIC4uLnBvcHVwPVwiYWJjXCI+PC92dC1sYWJlbD48L25nLXRlbXBsYXRlPlxuICAgICAqICovXG4gICAgQElucHV0KCkgcmVzdHJpY3RDZWxsUG9wdXA6IGJvb2xlYW47XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIEBPdXRwdXQoKSBvbkNoYW5nZTogRXZlbnRFbWl0dGVyPFRhYmxlU2VsZWN0aW9uRXZlbnQ+ID0gbmV3IEV2ZW50RW1pdHRlcjxUYWJsZVNlbGVjdGlvbkV2ZW50PigpO1xuICAgIEBPdXRwdXQoKSBvblN0YXRlQ2hhbmdlOiBFdmVudEVtaXR0ZXI8dm9pZD4gPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG4gICAgQE91dHB1dCgpIG9uRG91YmxlQ2xpY2s6IEV2ZW50RW1pdHRlcjxUYWJsZVNlbGVjdGlvbkV2ZW50PiA9IG5ldyBFdmVudEVtaXR0ZXI8VGFibGVTZWxlY3Rpb25FdmVudD4oKTtcbiAgICBAT3V0cHV0KCkgb25EcmFnRHJvcDogRXZlbnRFbWl0dGVyPHZvaWQ+ID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuXG4gICAgQFZpZXdDaGlsZCgndGFibGUnKSB0YWJsZTogRWxlbWVudFJlZjtcbiAgICBAVmlld0NoaWxkKFwidGFibGVDb250YWluZXJcIiwge3JlYWQ6IEVsZW1lbnRSZWZ9KSB0YWJsZUNvbnRhaW5lcjogRWxlbWVudFJlZjtcbiAgICBAVmlld0NoaWxkKFwidGFibGVXcmFwcGVyXCIsIHtyZWFkOiBFbGVtZW50UmVmfSkgdGFibGVXcmFwcGVyOiBFbGVtZW50UmVmO1xuICAgIEBWaWV3Q2hpbGQoXCJ0YWJsZUhlYWRcIiwge3JlYWQ6IEVsZW1lbnRSZWZ9KSB0YWJsZUhlYWQ6IEVsZW1lbnRSZWY7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICBAVmlld0NoaWxkKFwidGFibGVGb290XCIsIHtyZWFkOiBFbGVtZW50UmVmfSkgdGFibGVGb290OiBFbGVtZW50UmVmO1xuXG4gICAgLy8gQFZpZXdDaGlsZChcImZha2VUYWJsZVwiLCB7cmVhZDogRWxlbWVudFJlZn0pIGZha2VUYWJsZTogRWxlbWVudFJlZjtcbiAgICBAVmlld0NoaWxkKFwiZ2hvc3RIZWFkZXJcIiwge3JlYWQ6IEVsZW1lbnRSZWZ9KSBnaG9zdEhlYWRlcjogRWxlbWVudFJlZjtcblxuICAgIEBDb250ZW50Q2hpbGRyZW4oVGFibGVDb2x1bW5EaXJlY3RpdmUpXG4gICAgc2V0IHRhYmxlQ29sdW1ucyhjb2x1bW5zOiBRdWVyeUxpc3Q8VGFibGVDb2x1bW5EaXJlY3RpdmU+KSB7XG4gICAgICB0aGlzLmNsZWFySGVhZGVyTm9kZXMoKTtcbiAgICAgIHRoaXMuY29sdW1ucyA9IHRoaXMudG9Db2x1bW5zKGNvbHVtbnMpO1xuXG4gICAgICBpZiAodGhpcy5faXNWaWV3SW5pdCA9PT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLmluaXRQbHVnaW5zKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29sdW1uczogQXJyYXk8VGFibGVDb2x1bW5EaXJlY3RpdmU+O1xuXG4gICAgQENvbnRlbnRDaGlsZChUYWJsZVJvd0RlZkRpcmVjdGl2ZSkgdGFibGVSb3dEZWY6IFRhYmxlUm93RGVmRGlyZWN0aXZlO1xuICAgIEBDb250ZW50Q2hpbGQoRm9vdGVyUm93RGlyZWN0aXZlKSBmb290ZXJSb3c6IEZvb3RlclJvd0RpcmVjdGl2ZTtcblxuICAgIC8vdGFibGUgd2l0aCBubyBkYXRhc291cmNlXG4gICAgQENvbnRlbnRDaGlsZHJlbihSb3dEaXJlY3RpdmUpIHNldCB0YWJsZVJvd1F1ZXJ5KHJvd3M6IFF1ZXJ5TGlzdDxSb3dEaXJlY3RpdmU+KSB7XG4gICAgICAgIHRoaXMuY2xlYW5VcENoaWxkTm9kZXMoKTtcbiAgICAgICAgdGhpcy5fdGFibGVSb3cgPSBbXTtcbiAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XG5cbiAgICAgICAgdGhpcy5fdGFibGVSb3cgPSByb3dzLnRvQXJyYXkoKTtcbiAgICB9XG5cbiAgICBnZXQgdGFibGVSb3coKTogQXJyYXk8Um93RGlyZWN0aXZlPiB7XG4gICAgICAgIHJldHVybiB0aGlzLl90YWJsZVJvdztcbiAgICB9XG5cbiAgICBwcml2YXRlIF90YWJsZVJvdzogQXJyYXk8Um93RGlyZWN0aXZlPjtcblxuICAgIC8vY3VzdG9tIHNvcnQgZnVuY3Rpb24gZm9yIHZpcnR1YWwgc2Nyb2xsXG4gICAgQElucHV0KCkgZm9yY2VGaXhXaWR0aDogYm9vbGVhbiA9IHRydWU7XG4gICAgQElucHV0KCkgaXNIZWFkZXJQYWRkaW5nOiBib29sZWFuID0gZmFsc2U7XG4gICAgQElucHV0KCkgaXNIZWFkZXJBdXRvOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBASW5wdXQoKSBza2lwUm93c0FkanVzdG1lbnQ6IGJvb2xlYW47XG5cbiAgICAvL2ZvcmNlIHJlc2V0IGNvbHVtbnMgd2hlbiBkYXRhU291cmNlIGNoYW5nZXNcbiAgICBASW5wdXQoKSBmb3JjZVJlc2V0Q29sdW1uczogYm9vbGVhbjtcblxuICAgIC8vdGFibGUtbGF5b3V0IGRlZmF1bHQgZml4ZWRcbiAgICBASW5wdXQoKSB0YWJsZUxheW91dDogc3RyaW5nID0gXCJmaXhlZFwiO1xuXG4gICAgLy90cmFjayBkeW5hbWljIHJvd3Mgc28gd2UgY2FuIHF1ZXJ5IGZvciBjaGlsZCBsYXRlclxuICAgIG5vZGVzOiBBcnJheTxIVE1MRWxlbWVudFdyYXBwZXI+ID0gW107XG4gICAgaGVhZE5vZGU6IEhUTUxFbGVtZW50V3JhcHBlcjtcbiAgICBzZWxlY3RlZFJvd3M6IEFycmF5PG51bWJlcj4gPSBbXTtcbiAgICBsYXN0U2VsZWN0ZWRSb3dJbmRleDogbnVtYmVyO1xuICAgIHByaXZhdGUgX3ByZXZTZWxlY3RlZFJvd3MgPSBbXTtcbiAgICBwcml2YXRlIGdldCBST1dfSU5ERVhfS0VZKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiAnJCQkJHJvd0luZGV4JCQkJCc7XG4gICAgfVxuICAgIHByaXZhdGUgJGNvbFJlc2l6YWJsZTogSlF1ZXJ5IHwgYW55O1xuICAgIHByaXZhdGUgJGRyYWdhYmxlQ29sdW1uczogSlF1ZXJ5IHwgYW55O1xuICAgIHByaXZhdGUgJHRhYmxlc29ydGVyOiBKUXVlcnkgfCBhbnk7XG4gICAgcHJpdmF0ZSBzY3JvbGxIYW5kbGVyOiBGdW5jdGlvbiA9IG51bGw7XG4gICAgcHJpdmF0ZSBtb2RpZmllZFZpcnR1YWxSb3dzOiB7W25hbWU6IHN0cmluZ106IHtbbmFtZTogc3RyaW5nXTogVmlydHVhbENvbHVtbkNoYW5nZURhdGF9fTtcbiAgICBwcml2YXRlIG1vZGlmaWVkVmlydHVhbFJvd3NKc29uOiB7W25hbWU6IHN0cmluZ106IHt9fTtcbiAgICAvLyBtb3VzZVVwSGFuZGxlcjogRnVuY3Rpb24gPSBudWxsO1xuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICBwcml2YXRlIGRhdGFTb3VyY2VEaWZmZXI6IEl0ZXJhYmxlRGlmZmVyPEFycmF5PGFueT4+O1xuICAgIHByaXZhdGUgY29sdW1uc0RpZmZlcjogSXRlcmFibGVEaWZmZXI8QXJyYXk8YW55Pj47XG4gICAgcHJpdmF0ZSBjdXN0b21Sb3dEaWZmZXI6IEl0ZXJhYmxlRGlmZmVyPEFycmF5PGFueT4+O1xuXG4gICAgLy92aXJ0dWFsIHNjcm9sbFxuICAgIHByaXZhdGUgdmlydHVhbFNjcm9sbERhdGFTb3VyY2VEaWZmZXI6IEl0ZXJhYmxlRGlmZmVyPEFycmF5PGFueT4+O1xuXG4gICAgcHJpdmF0ZSBwcmV2aW91c1Jvd0luZGV4OiBudW1iZXIgPSBudWxsO1xuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICBwcml2YXRlIHNjcm9sbFN1YmNyaXB0aW9uOiBTdWJzY3JpcHRpb247XG4gICAgcHJpdmF0ZSBzY3JvbGxTdWJqZWN0OiBTdWJqZWN0PGFueT4gPSBuZXcgU3ViamVjdDxhbnk+KCk7XG4gICAgcHJpdmF0ZSBrZXl1cEhhbmRsZXI6IChldnQ6IEtleWJvYXJkRXZlbnQpPT52b2lkO1xuXG4gICAgLy8gVmlydHVhbCBzY3JpcHQgaGVpZ2h0LCB1c2UgaW50ZXJuYWxseVxuICAgIF92aXJ0dWFsU2Nyb2xsRGl2SGVpZ2h0OiBudW1iZXI7XG5cbiAgICBwcml2YXRlIF92aXJ0dWFsU2Nyb2xsUm93UGVyVmlldzogbnVtYmVyO1xuXG4gICAgcHJpdmF0ZSBfaXNWaWV3SW5pdDogYm9vbGVhbjtcblxuICAgIHByaXZhdGUgbWF4U2Nyb2xsVG9wOiBudW1iZXI7XG5cbiAgICB0YWJsZVN0eWxlczoge1tuYW1lOiBzdHJpbmddOiBzdHJpbmd9O1xuICAgIHNjcm9sbENvbnRhaW5lclN0eWxlczoge1tuYW1lOiBzdHJpbmddOiBzdHJpbmd9O1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgdmlydHVhbFNjcm9sbFByb2dyZXNzU3R5bGVzOiB7W25hbWU6IHN0cmluZ106IHN0cmluZ307XG4gICAgdmlydHVhbFNjcm9sbFNvcnRLZXlzOiBBcnJheTxzdHJpbmc+O1xuICAgIHByZXZTY3JvbGxUb3A6IG51bWJlciA9IDA7XG4gICAgcHJldlNjcm9sbFRvcEZvckhpZGRlbkhlYWRlcjogbnVtYmVyID0gMDtcblxuICAgIHNvcnREaXJlY3Rpb246c3RyaW5nID0gXCJcIjsgICAvLyBSWEMgQWRkXG4gICAgc29ydENvbHVtbklkOm51bWJlciA9IDA7ICAgIC8vIFJYQyBBZGRcblxuICAgIHByaXZhdGUgX2Rpc2FibGVkU2Nyb2xsaW5nOiBib29sZWFuO1xuXG4gICAgcHJpdmF0ZSBfdGFibGVTb3J0ZXJSZWZyZXNoVG06IGFueTtcblxuICAgIHByaXZhdGUgX3RhYmxlU29ydGVyQ2FjaGVSZWZyZXNoVG06IGFueTtcblxuICAgIHByaXZhdGUgX2lzSGVhZGVyQ2VsbDogYm9vbGVhbjtcblxuICAgIHByaXZhdGUgYW5pbWF0aW9uRnJhbWVJZDogYW55O1xuXG4gICAgcHJpdmF0ZSB0aGVhZEhlaWdodDogbnVtYmVyID0gMDtcblxuICAgIHByaXZhdGUgc2Nyb2xsTGVmdDogbnVtYmVyID0gMDtcblxuICAgIHByaXZhdGUgY29sdW1uc0hhc0JlZW5Td2FwcGVkOiBib29sZWFuO1xuXG4gICAgLy9pbml0IHBsdWdpbnMgdGltZXJcbiAgICBwcml2YXRlIGluaXRUbTogYW55O1xuXG4gICAgcHJpdmF0ZSBkcmFnZ2FibGVSb3dzOiBib29sZWFuO1xuICAgIHByaXZhdGUgc2hvdWxkSGFuZGxlTW91c2VVcDogYm9vbGVhbjtcbiAgICBwcml2YXRlIGlzSGVhZGVyQXBwZW5kVG9GYWtlVGFibGU6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBhZGp1c3RlZFJvd3M6IG51bWJlciA9IDA7XG4gICAgcHJpdmF0ZSBza2lwR2hvc3RIZWFkZXI6IGJvb2xlYW47XG5cbiAgICBwcml2YXRlIGNsaWVudEhlaWdodFZpcnR1YWxTY3JvbGw6IG51bWJlcjtcblxuICAgIHByaXZhdGUgcHJlTW91c2VFdmVudDogTW91c2VFdmVudCA9IG51bGw7XG5cbiAgICBwcml2YXRlIGlzSUU5OiBib29sZWFuO1xuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXJlbnQgc2VlIFtbQmFzZUNvbXBvbmVudF1dIGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHNlc3Npb25TZXJ2aWNlIHNlZSBbW0Jhc2VDb21wb25lbnRdXSBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSBlbCBzZWUgW1tCYXNlQ29tcG9uZW50XV0gY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0gY2hhbmdlRGV0ZWN0b3JSZWYgSW5qZWN0IENoYW5nZURldGVjdG9yXG4gICAgICogQHBhcmFtIHJlbmRlcmVyIHNlZSBbW0Jhc2VDb21wb25lbnRdXSBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB6b25lIEluamVjdCBOZ1pvbmVcbiAgICAgKiBAcGFyYW0gZGlmZmVycyBJbmplY3QgSW50ZXJhYmxlRGlmZmVyc1xuICAgICAqIEBwYXJhbSBjbGlwYm9hcmRTZXJ2aWNlIEluamVjdCBbW0NsaXBib2FyZFNlcnZpY2VdXVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBAT3B0aW9uYWwoKSBAU2tpcFNlbGYoKSBwYXJlbnQ6IEJhc2VDb21wb25lbnQsXG4gICAgICAgIHNlc3Npb25TZXJ2aWNlOiBTZXNzaW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBlbDogRWxlbWVudFJlZixcbiAgICAgICAgcHJpdmF0ZSBjaGFuZ2VEZXRlY3RvclJlZjogQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgICAgIHJlbmRlcmVyOiBSZW5kZXJlcjIsXG4gICAgICAgIHByaXZhdGUgem9uZTogTmdab25lLFxuICAgICAgICBkaWZmZXJzOiBJdGVyYWJsZURpZmZlcnMsXG4gICAgICAgIHByaXZhdGUgY2xpcGJvYXJkU2VydmljZTogQ2xpcGJvYXJkU2VydmljZVxuICAgICkge1xuICAgICAgICBzdXBlcihwYXJlbnQsIHNlc3Npb25TZXJ2aWNlLCBlbCwgcmVuZGVyZXIpO1xuXG4gICAgICAgIHRoaXMuZGF0YVNvdXJjZURpZmZlciA9IGRpZmZlcnMuZmluZChbXSkuY3JlYXRlKCk7XG4gICAgICAgIHRoaXMuY29sdW1uc0RpZmZlciA9IGRpZmZlcnMuZmluZChbXSkuY3JlYXRlKCk7XG4gICAgICAgIHRoaXMuY3VzdG9tUm93RGlmZmVyID0gZGlmZmVycy5maW5kKFtdKS5jcmVhdGUoKTtcblxuICAgICAgICB0aGlzLmlzSUU5ID0gaXNJRSgpID09IDk7XG5cbiAgICAgICAgLy9mb3IgdmlydHVhbCBzY3JvbGxcbiAgICAgICAgdGhpcy52aXJ0dWFsU2Nyb2xsRGF0YVNvdXJjZURpZmZlciA9IGRpZmZlcnMuZmluZChbXSkuY3JlYXRlKCk7XG5cbiAgICAgICAgdGhpcy5rZXl1cEhhbmRsZXIgPSAoZXZ0OiBLZXlib2FyZEV2ZW50KT0+IHRoaXMuaGFuZGxlS2V5VXAoZXZ0KTtcbiAgICAgICAgdGhpcy5zY3JvbGxIYW5kbGVyID0gKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5fZGlzYWJsZWRTY3JvbGxpbmcgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMucHJldlNjcm9sbFRvcEZvckhpZGRlbkhlYWRlciAhPT0gZXZlbnQuc3JjRWxlbWVudC5zY3JvbGxUb3ApIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2tpcEdob3N0SGVhZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5naG9zdEhlYWRlci5uYXRpdmVFbGVtZW50LCBcImRpc3BsYXlcIiwgXCJpbmxpbmUtYmxvY2tcIik7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbnRyb2xXaWR0aCA9PT0gXCIxMDAlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5naG9zdEhlYWRlci5uYXRpdmVFbGVtZW50LCBcIndpZHRoXCIsIFwiMTAwJVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMudGFibGVIZWFkLm5hdGl2ZUVsZW1lbnQsIFwidmlzaWJpbGl0eVwiLCBcImhpZGRlblwiKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vICAgaWYodGhpcy5mb3JjZUZpeFdpZHRoKXtcbiAgICAgICAgICAgIC8vICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMuZmFrZVRhYmxlLm5hdGl2ZUVsZW1lbnQsIFwidGFibGUtbGF5b3V0XCIsIFwiZml4ZWRcIik7XG4gICAgICAgICAgICAvLyAgIH1cblxuICAgICAgICAgICAgICBpZih0aGlzLnRhYmxlRm9vdCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLnRhYmxlRm9vdC5uYXRpdmVFbGVtZW50LCBcInZpc2liaWxpdHlcIiwgXCJoaWRkZW5cIik7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gICB0aGlzLmFwcGVuZEhlYWRlclRvRmFrZVRhYmxlKCk7XG4gICAgICAgICAgICBcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpcnR1YWxTY3JvbGwgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYW5pbWF0aW9uRnJhbWVJZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGlvbkZyYW1lSWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGp1c3RUYWJsZUhlYWQoZXZlbnQsIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMucHJldlNjcm9sbFRvcEZvckhpZGRlbkhlYWRlciA9IGV2ZW50LnNyY0VsZW1lbnQuc2Nyb2xsVG9wO1xuXG4gICAgICAgICAgICAvL2Rpc2FibGVkIGZvciBJRTExL0lFOSAodG9vIHNsb3cpXG4gICAgICAgICAgICAvLyBlbHNlIHtcbiAgICAgICAgICAgIC8vICAgICBpZiAodGhpcy5hbmltYXRpb25GcmFtZUlkICE9IG51bGwpIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRpb25GcmFtZUlkKTtcbiAgICAgICAgICAgIC8vICAgIH1cblxuICAgICAgICAgICAgLy8gICAgIHRoaXMuYW5pbWF0aW9uRnJhbWVJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKT0+dGhpcy5hZGp1c3RUYWJsZUhlYWQoZXZlbnQsIHRydWUpKTtcbiAgICAgICAgICAgIC8vIH1cblxuICAgICAgICAgICAgdGhpcy5zY3JvbGxTdWJqZWN0Lm5leHQoZXZlbnQpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgLyoqXG4gICAgICogw6fClMK7w6nCncKiw6PCgcKMw6PCg8Kqw6PCgsK1w6PCgsKkw6PCgsK6w6PCgcKVw6PCgsKMw6PCgcKfw6nCmsKbw6PCgcKrw6XCi8KVw6PCgcKLw6PCgcKZw6PCgsKkw6PCg8KZw6PCg8Kzw6PCg8KIXG4gICAgICovXG4gICAgdGFibGVSZXNpemUoKSB7XG4gICAgICAgIHRoaXMuYWRqdXN0VGFibGVGb290ZXIoKTtcbiAgICB9XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIC8qKlxuICAgICAqIERvIGNoZWNrIGxpZmVjeWNsZVxuICAgICAqL1xuICAgIG5nRG9DaGVjaygpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5kYXRhU291cmNlRGlmZmVyLmRpZmYodGhpcy5fZGF0YVNvdXJjZSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAodGhpcy52aXJ0dWFsU2Nyb2xsID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYWxjVmlydHVhbFNjcm9sbEhlaWdodCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FsY1ZpcnR1YWxTY3JvbGxWaWV3UG9ydCh0aGlzLnByZXZTY3JvbGxUb3ApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmNoZWNrU2hvd0JsYW5rUm93KCk7XG4gICAgICAgICAgICB0aGlzLm1hcmtGb3JDaGVjaygpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVGFibGVTb3J0ZXIoKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnZpcnR1YWxTY3JvbGwgPT09IHRydWUgJiYgdGhpcy52aXJ0dWFsU2Nyb2xsRGF0YVNvdXJjZURpZmZlci5kaWZmKHRoaXMuX3ZpcnR1YWxWaWV3UG9ydCkpIHtcbiAgICAgICAgICB0aGlzLmNoZWNrU2hvd0JsYW5rUm93KCk7XG4gICAgICAgICAgICB0aGlzLm1hcmtGb3JDaGVjaygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuY2hlY2tDdXN0b21Sb3dzRm9yQ2hhbmdlZCgpO1xuICAgICAgICAgIHRoaXMuY2hlY2tDb2x1bW5zRm9yQ2hhbmdlZCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5pdCBsaWZlY3ljbGUuIENhbGwgcGFyZW50IGNsYXNzIG5nT25Jbml0XG4gICAgICovXG4gICAgbmdPbkluaXQoKSB7XG4gICAgICBzdXBlci5uZ09uSW5pdCgpO1xuICAgIH1cblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgLyoqXG4gICAgICogQWZ0ZXIgdmlldyBpbml0IGxpZmVjeWNsZS4gQXBwbHkgalF1ZXJ5IHBsdWdpbiBhbmQgZXZlbnQgbGlzdGVuZXJzXG4gICAgICovXG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgICAgICBzdXBlci5uZ0FmdGVyVmlld0luaXQoKTtcblxuICAgICAgICAvLzE3MjY6IEl0IGxvb2tzIGxpa2Ugc29waGlhIGFsc28gcXVlcnlpbmcgZm9yIHRhYmxlIGNvbHVtbiBkZWYgc28gd2UgbmVlZCB0byBzdG9yZSB0byBvdXIgcGFyZW50XG4gICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLl9nZXROb25lQWN0aXZlVmlld1BhcmVudCgpIHx8IHRoaXMuZ2V0UGFyZW50VmlldygpO1xuXG4gICAgICAgIGlmICh2aWV3ICE9IG51bGwgJiYgdGhpcy5jb2x1bW5zICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucy5maWx0ZXIoY29sPT5jb2wuaWQgIT0gbnVsbCAmJiBjb2wuaWQgIT09IFwiXCIpLmZvckVhY2goY29sPT57XG4gICAgICAgICAgICAgIGlmICh2aWV3W1wiX3RhYmxlQ29sdW1uc01hcFwiXSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdmlld1tcIl90YWJsZUNvbHVtbnNNYXBcIl0gPSBuZXcgTWFwPHN0cmluZywgQmFzZUNvbXBvbmVudD4oKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHZpZXdbXCJfdGFibGVDb2x1bW5zTWFwXCJdLnNldChLZXlVdGlscy50b01hcEtleShjb2wuaWQpLCBjb2wgYXMgYW55KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9kcm9wcGFibGU/XG4gICAgICAgIGlmICh0aGlzLmRyb3BwYWJsZSA9PT0gdHJ1ZSB8fCB0aGlzLmRyb3BwYWJsZSA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgICAgICQodGhpcy50YWJsZUNvbnRhaW5lci5uYXRpdmVFbGVtZW50KS5kcm9wcGFibGUoe1xuICAgICAgICAgICAgICAgIGNsYXNzZXM6IHtcbiAgICAgICAgICAgICAgICAgIFwidWktZHJvcHBhYmxlLWhvdmVyXCI6IFwidWktc3RhdGUtaG92ZXJcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaG92ZXJDbGFzczogXCJ1aS1zdGF0ZS1ob3ZlclwiLFxuICAgICAgICAgICAgICAgIGFjY2VwdDogXCJ0clwiLFxuICAgICAgICAgICAgICAgIGRyb3A6IChldmVudCwgdWkpPT57XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25EcmFnRHJvcC5lbWl0KCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB0b2xlcmFuY2U6IFwicG9pbnRlclwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2Nyb2xsU3ViY3JpcHRpb24gPSB0aGlzLnNjcm9sbFN1YmplY3QucGlwZShkZWJvdW5jZSgoKT0+dGltZXIodGhpcy5zY3JvbGxUaW1lb3V0KSkpLnN1YnNjcmliZSgoZXZlbnQpPT57XG4gICAgICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVBdHRyaWJ1dGUodGhpcy5naG9zdEhlYWRlci5uYXRpdmVFbGVtZW50LCBcImRpc3BsYXlcIik7XG5cbiAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgICAgIGlmICh0aGlzLnZpcnR1YWxTY3JvbGwgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgdGhpcy5yZWNhbGN1bGF0ZVZpcnR1YWxTY3JvbGxEYXRhKGV2ZW50KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLmFkanVzdFRhYmxlSGVhZChldmVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnNjcm9sbENvbnRhaW5lclN0eWxlcyA9IHtcbiAgICAgICAgICAgIFwib3ZlcmZsb3cteVwiOiBcImF1dG9cIixcbiAgICAgICAgICAgIFwib3ZlcmZsb3cteFwiOiBcInZpc2libGVcIixcbiAgICAgICAgICAgIFwicG9zaXRpb25cIjogXCJyZWxhdGl2ZVwiXG4gICAgICAgIH1cblxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgICBpZiAodGhpcy52aXJ0dWFsU2Nyb2xsID09PSB0cnVlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmKHRoaXMuY29udHJvbEhlaWdodCA9PSBudWxsIHx8IHRoaXMuY29udHJvbEhlaWdodCA9PSBcIjEwMCVcIilcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGllbnRIZWlnaHRWaXJ0dWFsU2Nyb2xsID0gKHRoaXMudGFibGVDb250YWluZXIubmF0aXZlRWxlbWVudCBhcyBIVE1MRWxlbWVudCkuY2xpZW50SGVpZ2h0O1xuICAgICAgICAgICAgICAgIGVsc2UgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50SGVpZ2h0VmlydHVhbFNjcm9sbCA9IHBhcnNlSW50KHRoaXMuY29udHJvbEhlaWdodCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoaXNOYU4odGhpcy5jbGllbnRIZWlnaHRWaXJ0dWFsU2Nyb2xsKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWNDYWxjTm9WaXJ0dWFsUm93KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2lzVmlld0luaXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnRhYmxlU3R5bGVzID0ge1xuICAgICAgICAgICAgICAgIFwidG9wXCI6IFwiMHB4XCIsXG4gICAgICAgICAgICAgICAgXCJsZWZ0XCI6IFwiMHB4XCIsXG4gICAgICAgICAgICAgICAgXCJwb3NpdGlvblwiOiBcImFic29sdXRlXCIsXG4gICAgICAgICAgICAgICAgXCJ3aWR0aFwiOiBcIjEwMCVcIixcbiAgICAgICAgICAgICAgICBcImhlaWdodFwiOiBcImNhbGMoMTAwJSAtIDE3cHgpXCIsXG4gICAgICAgICAgICAgICAgXCJtYXgtd2lkdGhcIjogXCIxMDB2d1wiLFxuICAgICAgICAgICAgICAgIFwibWF4LWhlaWdodFwiOiBcIjEwMHZoXCJcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy52aXJ0dWFsU2Nyb2xsUHJvZ3Jlc3NTdHlsZXMgPSB7XG4gICAgICAgICAgICAgICAgXCJ0b3BcIjogXCIwcHhcIixcbiAgICAgICAgICAgICAgICBcImRpc3BsYXlcIjogXCJub25lXCIsXG4gICAgICAgICAgICAgICAgXCJwb3NpdGlvblwiOiBcImFic29sdXRlXCJcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5jYWxjVmlydHVhbFRhYmxlUG9zaXRpb24oMCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgICAgLy9maXggZXhwcmVzc2lvbiBoYXMgY2hhbmdlZCBibGFoIGJsYWggYmxhaFxuICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcblxuICAgICAgICBpZiAodGhpcy52aXJ0dWFsU2Nyb2xsID09PSB0cnVlKSB7XG4gICAgICAgICAgICB0aGlzLmNhbGNWaXJ0dWFsU2Nyb2xsSGVpZ2h0KCk7XG4gICAgICAgICAgICB0aGlzLmNhbGNWaXJ0dWFsU2Nyb2xsVmlld1BvcnQoMCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCk9PiB7XG4gICAgICAgICAgICB0aGlzLl9pc1ZpZXdJbml0ID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuaW5pdFBsdWdpbnMoKTtcblxuICAgICAgICAgICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpPT57XG4gICAgICAgICAgICAgICAgdGhpcy5lbC5uYXRpdmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsSGFuZGxlciwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgLy8gdGhpcy5lbC5uYXRpdmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMubW91c2VVcEhhbmRsZXIsIHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWwubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5rZXl1cEhhbmRsZXIsIHRydWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgcHJpdmF0ZSBpbml0UGx1Z2lucygpIHtcbiAgICAgICAgaWYgKHRoaXMuJGRyYWdhYmxlQ29sdW1ucykge1xuICAgICAgICAgICAgdGhpcy4kZHJhZ2FibGVDb2x1bW5zLmRlc3Ryb3koKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmluaXRUbSAhPSBudWxsKSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaW5pdFRtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmICh0aGlzLnRhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMudGFibGUubmF0aXZlRWxlbWVudCwgXCJ2aXNpYmlsaXR5XCIsIFwiaGlkZGVuXCIpO1xuXG4gICAgICAgICAgICB0aGlzLmluaXRUbSA9IHNldFRpbWVvdXQoKCk9PntcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMudGFibGUubmF0aXZlRWxlbWVudCwgXCJ2aXNpYmlsaXR5XCIsIFwiaGlkZGVuXCIpO1xuICAgICAgICAgICAgICAgICAgICAvLyDDpcKGwo3DqMKhwqjDp8KkwrrDpsKZwoLDo8KBwqvDo8KCwrnDo8KCwq/Do8KDwq3Do8KDwrzDo8KDwqvDo8KDwpDDo8KDwrzDo8KBwq7DpMK9wo3Dp8K9wq7Do8KCwpLDpsKIwrvDo8KBwplcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YWJsZUNvbnRhaW5lci5uYXRpdmVFbGVtZW50LnNjcm9sbExlZnQgPSAwO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGpRdWVyeVRhYmxlID0galF1ZXJ5KHRoaXMudGFibGUubmF0aXZlRWxlbWVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlQ29sdW1uRHJhZ2dpbmcgPT0gbnVsbCB8fCB0aGlzLmVuYWJsZUNvbHVtbkRyYWdnaW5nID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRkcmFnYWJsZUNvbHVtbnMgPSBqUXVlcnlUYWJsZS5kcmFnYWJsZUNvbHVtbnMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyb3BDYWxsYmFjazogKGZyb21JbmRleCwgdG9JbmRleCk9PnRoaXMuc3dhcENvbHVtbnMoZnJvbUluZGV4LCB0b0luZGV4KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnRW5kQ2FsbGJhY2s6ICgpPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNraXBHaG9zdEhlYWRlciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbENvbnRhaW5lclN0eWxlc1tcIm92ZXJmbG93LXlcIl0gPSBcImF1dG9cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2Rpc2FibGVkU2Nyb2xsaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnU3RhcnRDYWxsYmFjazogKGNvbElkeCk9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2tpcEdob3N0SGVhZGVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNhbkRyYWcgPSB0aGlzLmNhbkRyYWdDb2x1bW4oY29sSWR4KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FuRHJhZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxDb250YWluZXJTdHlsZXNbXCJvdmVyZmxvdy15XCJdID0gXCJoaWRkZW5cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGlzYWJsZWRTY3JvbGxpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbkRyYWc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnRW50ZXJDYWxsYmFjazogKGNvbElkeCk9PntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FuRHJhZ0NvbHVtbihjb2xJZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCh0aGlzLmVuYWJsZVNvcnQgPT0gbnVsbCB8fCB0aGlzLmVuYWJsZVNvcnQgPT09IHRydWUpICYmIHRoaXMuJHRhYmxlc29ydGVyID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpcnR1YWxTY3JvbGwgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiR0YWJsZXNvcnRlciA9IGpRdWVyeVRhYmxlLnRhYmxlc29ydGVyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0cyAgICAgICAgOiBbJ3plYnJhJywgJ2NvbHVtbnMnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNOdW1iZXJGb3JtYXQgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXggOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydFJlc2V0IDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRSZXN0YXJ0IDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydFN0YWJsZSA6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5SW5pdDogdHJ1ZSAvLyBtb3ZlIHRoZSBpbml0aWFsIHBlcmZvcm1hbmNlIGhpdCB0byBmaXJzdCBzb3J0IHNvIHRoZSB0YWJsZSB3b3VsZCBsb2FkIGZhc3RlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudmlydHVhbFNjcm9sbCAhPT0gdHJ1ZSAmJiB0aGlzLiR0YWJsZXNvcnRlciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiR0YWJsZXNvcnRlci50cmlnZ2VyKFwidXBkYXRlSGVhZGVyc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0SGVhZGVyV2lkdGhIZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lbmFibGVDb2x1bW5SZXNpemUgPT0gbnVsbCB8fCB0aGlzLmVuYWJsZUNvbHVtblJlc2l6ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRhcmdldF9jb2x1bW5zID0gbmV3IEFycmF5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgb3JpZ2luYWxfY29sdW1uV2lkdGhzID0gbmV3IEFycmF5KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbHVtbnMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb2x1bW4gPSB0aGlzLmNvbHVtbnMuZmluZCgoaXRlbSwgaWR4KT0+aWR4ID09PSBpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjb2x1bW4gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRDaGlsZHJlbiA9IHRoaXMudGFibGVIZWFkLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcigndGg6bnRoLWNoaWxkKCcgKyAoaSsxKSArICcpJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldF9jb2x1bW5zLnB1c2goaGVhZENoaWxkcmVuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxfY29sdW1uV2lkdGhzLnB1c2goaGVhZENoaWxkcmVuLnN0eWxlLndpZHRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvL3Jlc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jbGVhbnVwQ29sUmVzaXplKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRjb2xSZXNpemFibGUgPSBqUXVlcnlUYWJsZS5jb2xSZXNpemFibGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpdmVEcmFnOiBmYWxzZSwgLy90dXJuaW5nIHRoaXMgb24gd2lsbCBpbmN1cnJlZCBhIHNldmVyZSBwZXJmb3JtYW5jZSBwZW5hbHR5IG9uIElFIHNvIGxlYXZlIGl0IG9mZlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6ZU1vZGU6ICdvdmVyZmxvdycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydGlhbFJlZnJlc2g6IHRydWUsIC8vQWZ0ZXIgY2xvc2luZyB0aGUgd2luZG93IGFuZCBvcGVuaW5nIGFnYWluLCBjb2x1bW5SZXNpemVyIGNhbid0IHdvcmsuIFRvIGZpeCB0aGF0LCB0aGlzIHZhbHVlIGlzIG5lZWRlZC4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyT25seTogdHJ1ZSAvL2FsbG93IGRyYWdnaW5nIHVzaW5nIGhlYWRlciBvbmx5XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRhcmdldF9jb2x1bW5zLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRDb2x1bW4gPSB0YXJnZXRfY29sdW1uc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkQ2hpbGRyZW5fd2lkdGggPSB0aGlzLnRvV2hvbGVOdW1iZXIodGFyZ2V0Q29sdW1uLnN0eWxlLndpZHRoLnNsaWNlKDAsLTIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbENoaWxkcmVuX3dpZHRoID0gdGhpcy50b1dob2xlTnVtYmVyKG9yaWdpbmFsX2NvbHVtbldpZHRoc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYoaGVhZENoaWxkcmVuX3dpZHRoIDwgb3JpZ2luYWxDaGlsZHJlbl93aWR0aCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGFyZ2V0Q29sdW1uLCBcIndpZHRoXCIsIG9yaWdpbmFsX2NvbHVtbldpZHRoc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0X2NvbHVtbnMgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxfY29sdW1uV2lkdGhzID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRqdXN0VGFibGVGb290ZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLnRhYmxlLm5hdGl2ZUVsZW1lbnQsIFwidGFibGUtbGF5b3V0XCIsIHRoaXMudGFibGVMYXlvdXQpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRhYmxlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVTdHlsZSh0aGlzLnRhYmxlLm5hdGl2ZUVsZW1lbnQsIFwidmlzaWJpbGl0eVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAyMDApO1xuICAgICAgICAvL31cbiAgICB9XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIC8qKlxuICAgICAqIERlc3Ryb3kgbGlmZWN5Y2xlLiBSZW1vdmUgZXZlbnQgbGlzdGVuZXJzXG4gICAgICovXG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHN1cGVyLm5nT25EZXN0cm95KCk7XG4gICAgICAgIHRoaXMuY2xlYW5VcENoaWxkTm9kZXModHJ1ZSk7XG4gICAgICAgIHRoaXMuY2xlYXJIZWFkZXJOb2Rlcyh0cnVlKTtcblxuICAgICAgICAvLzE3MjY6IEl0IGxvb2tzIGxpa2Ugc29waGlhIGFsc28gcXVlcnlpbmcgZm9yIHRhYmxlIGNvbHVtbiBkZWYgc28gd2UgbmVlZCB0byBzdG9yZSB0byBvdXIgcGFyZW50XG4gICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLl9nZXROb25lQWN0aXZlVmlld1BhcmVudCgpIHx8IHRoaXMuZ2V0UGFyZW50VmlldygpO1xuXG4gICAgICAgIGlmICh2aWV3ICE9IG51bGwgJiYgdmlld1tcIl90YWJsZUNvbHVtbnNNYXBcIl0gIT0gbnVsbCkge1xuICAgICAgICAgIHZpZXdbXCJfdGFibGVDb2x1bW5zTWFwXCJdLmNsZWFyKCk7XG4gICAgICAgICAgdmlld1tcIl90YWJsZUNvbHVtbnNNYXBcIl0gPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2NoaWxkcmVuICE9IG51bGwpIHtcbiAgICAgICAgICB0aGlzLl9jaGlsZHJlbi5jbGVhcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fY2hpbGRyZW4gPSBudWxsO1xuXG4gICAgICAgIGlmICh0aGlzLl92aWV3Q2hpbGRyZW5NYXAgIT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMuX3ZpZXdDaGlsZHJlbk1hcC5jbGVhcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fdmlld0NoaWxkcmVuTWFwID0gbnVsbDtcblxuICAgICAgICBpZiAodGhpcy5zY3JvbGxTdWJjcmlwdGlvbiAhPSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5zY3JvbGxTdWJjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5tb2RpZmllZFZpcnR1YWxSb3dzID0gbnVsbDtcbiAgICAgICAgdGhpcy5tb2RpZmllZFZpcnR1YWxSb3dzSnNvbiA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5zY3JvbGxTdWJqZWN0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5zY3JvbGxTdWJjcmlwdGlvbiA9IG51bGw7XG5cbiAgICAgICAgaWYodGhpcy5zY3JvbGxIYW5kbGVyKSB7XG4gICAgICAgICAgICB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5zY3JvbGxIYW5kbGVyLCB0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsSGFuZGxlciA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiAodGhpcy5tb3VzZVVwSGFuZGxlcikge1xuICAgICAgICAvLyAgICAgdGhpcy5lbC5uYXRpdmVFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMubW91c2VVcEhhbmRsZXIsIHRydWUpO1xuICAgICAgICAvLyAgICAgdGhpcy5tb3VzZVVwSGFuZGxlciA9IG51bGw7XG4gICAgICAgIC8vIH1cblxuICAgICAgICBpZiAodGhpcy5rZXl1cEhhbmRsZXIpIHtcbiAgICAgICAgICAgIHRoaXMudGFibGUubmF0aXZlRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5rZXl1cEhhbmRsZXIsIHRydWUpO1xuICAgICAgICAgICAgdGhpcy5rZXl1cEhhbmRsZXIgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuJGRyYWdhYmxlQ29sdW1ucyAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLiRkcmFnYWJsZUNvbHVtbnMuZGVzdHJveSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgKHRoaXMuY29sdW1uc0NoYW5nZVN1YnNjcmlwdGlvbiAhPSBudWxsKSB7XG4gICAgICAgIC8vICAgICB0aGlzLmNvbHVtbnNDaGFuZ2VTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgLy8gfVxuXG4gICAgICAgIC8vIHRoaXMuY29sdW1uc0NoYW5nZVN1YnNjcmlwdGlvbiA9IG51bGw7XG4gICAgICAgIHRoaXMuZGF0YVNvdXJjZURpZmZlciA9IG51bGw7XG4gICAgICAgIHRoaXMuY29sdW1uc0RpZmZlciA9IG51bGw7XG4gICAgICAgIHRoaXMuY3VzdG9tUm93RGlmZmVyID0gbnVsbDtcbiAgICAgICAgdGhpcy52aXJ0dWFsU2Nyb2xsRGF0YVNvdXJjZURpZmZlciA9IG51bGw7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dzID0gbnVsbDtcbiAgICAgICAgdGhpcy50YWJsZUhlYWQgPSBudWxsO1xuICAgICAgICB0aGlzLnRhYmxlV3JhcHBlciA9IG51bGw7XG4gICAgICAgIHRoaXMudGFibGVDb250YWluZXIgPSBudWxsO1xuICAgICAgICB0aGlzLnRhYmxlID0gbnVsbDtcbiAgICAgICAgdGhpcy5wcmVNb3VzZUV2ZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5zY3JvbGxDb250YWluZXJTdHlsZXMgPSBudWxsO1xuICAgIH1cblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgLyoqXG4gICAgICogQ2hlY2sgdG8gc2VlIGlmIGNvbHVtbnMgaGF2ZSBjaGFuZ2VzXG4gICAgICovXG4gICAgcHJpdmF0ZSBjaGVja0NvbHVtbnNGb3JDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy5jb2x1bW5zICE9IG51bGwgJiYgdGhpcy5jb2x1bW5zRGlmZmVyLmRpZmYodGhpcy5jb2x1bW5zLm1hcDxhbnk+KGl0ZW09PntcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdmlzaWJsZTogaXRlbS52aXNpYmxlLFxuICAgICAgICAgICAgICAgIGhlYWRlcjogaXRlbS5oZWFkZXIsXG4gICAgICAgICAgICAgICAgY29udHJvbFdpZHRoOiBpdGVtLmNvbnRyb2xXaWR0aCxcbiAgICAgICAgICAgICAgICBsb2NrZWQ6IGl0ZW0ubG9ja2VkLFxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IGl0ZW0uZW5hYmxlZCxcbiAgICAgICAgICAgICAgICBzb3J0YWJsZTogaXRlbS5zb3J0YWJsZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBQSzogRE8gTk9UIFJFTU9WRURcbiAgICAgICAgICAgIC8vIENvbW1lbnQgdGhpcyBvdXQgZm9yIG5vdyBhbmQgcmV2ZXJ0IHRvIHByZXZpb3VzLCB3aWxsIGJyaW5nIHRoaXMgYmFja1xuICAgICAgICAgICAgLy8gd2hlbiB3ZSBhZGRlZCBhIGRpZmYgdG8gY2hlY2sgZm9yIGNoYW5nZXMgaW4gdnQtcm93XG4gICAgICAgICAgICAvLyByZXR1cm4gaXRlbS52aXNpYmxlICtcbiAgICAgICAgICAgIC8vICAgICBpdGVtLmhlYWRlciArXG4gICAgICAgICAgICAvLyAgICAgaXRlbS5jb250cm9sV2lkdGggK1xuICAgICAgICAgICAgLy8gICAgIGl0ZW0ubG9ja2VkICtcbiAgICAgICAgICAgIC8vICAgICBpdGVtLmVuYWJsZWQgK1xuICAgICAgICAgICAgLy8gICAgIGl0ZW0uc29ydGFibGU7XG4gICAgICAgIH0pKSl7XG4gICAgICAgICAgLy90aGlzLmNsZWFuVXBDaGlsZE5vZGVzKCk7XG4gICAgICAgICAgdGhpcy5tYXJrRm9yQ2hlY2soKTtcbiAgICAgICAgICB0aGlzLnJlY0NhbGNOb1ZpcnR1YWxSb3coKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgcHJpdmF0ZSBjaGVja0N1c3RvbVJvd3NGb3JDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy5fdGFibGVSb3cgIT0gbnVsbCAmJiB0aGlzLmN1c3RvbVJvd0RpZmZlci5kaWZmKHRoaXMuX3RhYmxlUm93IGFzIGFueSkpIHtcbiAgICAgICAgICB0aGlzLmNoZWNrU2hvd0JsYW5rUm93KCk7XG4gICAgICAgICAgICB0aGlzLm1hcmtGb3JDaGVjaygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICBwcml2YXRlIGNsZWFySGVhZGVyTm9kZXMobnVsbE91dEhlYWROb2RlOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICAgIGlmICh0aGlzLmhlYWROb2RlICE9IG51bGwpIHtcbiAgICAgICAgaWYgKHRoaXMuaGVhZE5vZGUuY2hpbGROb2RlcyAhPSBudWxsICYmIHRoaXMuaGVhZE5vZGUuY2hpbGROb2Rlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgZm9yIChsZXQgbm9kZSBvZiB0aGlzLmhlYWROb2RlLmNoaWxkTm9kZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudFZpZXcgPSB0aGlzLmdldFBhcmVudFZpZXcoKTtcblxuICAgICAgICAgICAgaWYgKHBhcmVudFZpZXcgIT0gbnVsbCkge1xuICAgICAgICAgICAgICBwYXJlbnRWaWV3LnJlbW92ZVZpZXdDaGlsZEZyb21NYXAobm9kZS5nZXRJZCgpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbm9kZS5kZXN0cm95KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5oZWFkTm9kZS5jaGlsZE5vZGVzID0gW107XG4gICAgICB9XG5cbiAgICAgIGlmIChudWxsT3V0SGVhZE5vZGUgPT09IHRydWUpIHtcbiAgICAgICAgdGhpcy5oZWFkTm9kZSA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAvKipcbiAgICAgKiBDbGVhbiB1cCBvdXIgZmF1eCB0YWJsZSBjaGlsZHJlblxuICAgICAqL1xuICAgIHByaXZhdGUgY2xlYW5VcENoaWxkTm9kZXMoc2tpcFRyYWNraW5nVmlydHVhbFJvdzogYm9vbGVhbiA9IGZhbHNlKSB7XG4gICAgICAgIGlmICh0aGlzLm5vZGVzICE9IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudFZpZXcgPSB0aGlzLmdldFBhcmVudFZpZXcoKTtcblxuICAgICAgICAgICAgZm9yIChsZXQgbm9kZSBvZiB0aGlzLm5vZGVzKSB7XG4gICAgICAgICAgICAgICAgLy9jYWNoZSBtb2RpZmllZCBkYXRhIGlmIHZpcnR1YWwgc2Nyb2xsXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBza2lwVHJhY2tpbmdWaXJ0dWFsUm93ICE9PSB0cnVlICYmXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuZ2V0TG9jYWxOYW1lKCkgPT09IFwicm93XCIgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aXJ0dWFsU2Nyb2xsID09PSB0cnVlICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW9kaWZpZWRWaXJ0dWFsUm93cyAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW9kaWZpZWRWaXJ0dWFsUm93c1tub2RlW1RhYmxlQ29tcG9uZW50LklOVEVSTkFMX1ZJUlRVQUxfT1JJR0lOQUxfSU5ERVhdXSAhPSBudWxsXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5pdE1vZGlmaWVkVmlydHVhbFJvd3NKc29uKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW9kaWZpZWRWaXJ0dWFsUm93c0pzb25bbm9kZVtUYWJsZUNvbXBvbmVudC5JTlRFUk5BTF9WSVJUVUFMX09SSUdJTkFMX0lOREVYXV0gPSBub2RlLnRvSnNvbigpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vcmVtb3ZlZCBvdXJzZWxmIGZyb20gcGFyZW50IGNhY2hlXG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudFZpZXcgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnRWaWV3LnJlbW92ZVZpZXdDaGlsZEZyb21NYXAobm9kZS5nZXRJZCgpKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBub2RlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubm9kZXMgPSBbXTtcblxuICAgICAgICBpZiAodGhpcy52aXJ0dWFsU2Nyb2xsICE9PSB0cnVlKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93cyA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fcHJldlNlbGVjdGVkUm93cyA9IFtdO1xuICAgICAgICB0aGlzLmxhc3RTZWxlY3RlZFJvd0luZGV4ID0gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGRhdGFzb3VyY2Ugcm93IGNvdW50XG4gICAgICogQHJldHVybnMgTnVtYmVyIG9mIHJvd3MgaW4gW1tkYXRhU291cmNlXV1cbiAgICAgKi9cbiAgICBnZXRSb3dDb3VudCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGF0YVNvdXJjZSA/IHRoaXMuX2RhdGFTb3VyY2UubGVuZ3RoIDogMDtcbiAgICB9XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIC8qKlxuICAgICAqIEFkZC9yZW1vdmUgcm93IHRvIGxpc3Qgb2Ygc2VsZWN0ZWQgcm93c1xuICAgICAqIEBwYXJhbSByb3dcbiAgICAgKiBAcGFyYW0gaXNTZWxlY3RlZCBJZiB0cnVlLCByb3cgd2lsbCBiZSBhZGRlZCwgb3RoZXJ3aXNlIHJvdyB3aWxsIGJlIHJlbW92ZWQgZnJvbSBzZWxlY3RlZCByb3dzIGNvbGxlY3Rpb25cbiAgICAgKi9cbiAgICBzZWxlY3RSb3cocm93OiBIVE1MRWxlbWVudFdyYXBwZXIsIGlzU2VsZWN0ZWQ6IGJvb2xlYW4pIHtcbiAgICAgICAgbGV0IHJvd0luZGV4ID0gLTE7XG5cbiAgICAgICAgaWYgKHRoaXMudmlydHVhbFNjcm9sbCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgY29uc3QgdGVtcE5vZGUgPSBfLmZpbmQodGhpcy5ub2RlcywgKG5vZGUpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZSA9PT0gcm93O1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICh0ZW1wTm9kZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcm93SW5kZXggPSB0ZW1wTm9kZVtUYWJsZUNvbXBvbmVudC5JTlRFUk5BTF9WSVJUVUFMX09SSUdJTkFMX0lOREVYXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJvd0luZGV4ID0gXy5maW5kSW5kZXgodGhpcy5ub2RlcywgKG5vZGUpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZSA9PT0gcm93O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocm93SW5kZXggPj0gMCAmJiByb3dJbmRleCA8IHRoaXMuX2RhdGFTb3VyY2UubGVuZ3RoKSB7XG4gICAgICAgICAgICBsZXQgaWR4ID0gXy5maW5kSW5kZXgodGhpcy5zZWxlY3RlZFJvd3MsIChyb3cpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcm93ID09PSByb3dJbmRleDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoaXNTZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIC8vaWYgaXQgd2Fzbid0IHNlbGVjdGVkLCBhZGQgaXQgaW4gc2VsZWN0ZWRSb3dzLlxuICAgICAgICAgICAgICAgIGlmIChpZHggPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dzLnB1c2gocm93SW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy9pZiBpdCB3YXMgc2VsZWN0ZWQgYmVmb3JlLCByZW1vdmUgaXQgZnJvbSBzZWxlY3RlZFJvd3MuXG4gICAgICAgICAgICAgICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dzLnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgLyoqXG4gICAgICogRXZlbnQgaGFuZGxlciBmb3IgY2xpY2sgb24gcm93XG4gICAgICogQHBhcmFtIGV2ZW50IE1vdXNlIGNsaWNrIGV2ZW50XG4gICAgICogQHBhcmFtIHJvd0luZGV4IEluZGV4IG9mIHRoZSByb3cgdGhhdCB3YXMgY2xpY2tlZFxuICAgICAqIEBldmVudCBvblN0YXRlQ2hhbmdlXG4gICAgICovXG4gICAgb25Sb3dDbGljayhldmVudDogTW91c2VFdmVudCwgcm93SW5kZXg6IG51bWJlcikge1xuICAgICAgICAvL2FkZCB0aGUgcm93IHRvIHZpZXcgY2hpbGRyZW4gbWFwIGZvciBsb29rdXBcbiAgICAgICAgY29uc3QgcGFyZW50VmlldyA9IHRoaXMuZ2V0UGFyZW50VmlldygpO1xuXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAocGFyZW50VmlldyAhPSBudWxsKSB7XG4gICAgICAgICAgICBwYXJlbnRWaWV3LmFkZFZpZXdDaGlsZFRvTWFwKHRoaXMubm9kZXNbcm93SW5kZXhdKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMucHJldmlvdXNSb3dJbmRleCAhPSBudWxsICYmIHRoaXMubm9kZXNbdGhpcy5wcmV2aW91c1Jvd0luZGV4XSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcGFyZW50Vmlldy5yZW1vdmVWaWV3Q2hpbGRGcm9tTWFwKHRoaXMubm9kZXNbdGhpcy5wcmV2aW91c1Jvd0luZGV4XS5nZXRJZCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucHJldmlvdXNSb3dJbmRleCA9IHJvd0luZGV4O1xuICAgICAgICB0aGlzLnRyaWdnZXJTdGF0ZUNoYW5nZSgpO1xuICAgIH1cblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgcHJpdmF0ZSB0cmlnZ2VyU3RhdGVDaGFuZ2UoKSB7XG4gICAgICBjb25zdCBjbGllbnRFdmVudCA9IG5ldyBDbGllbnRFdmVudCh0aGlzLCBldmVudCk7XG5cbiAgICAgIGlmIChBcHBVdGlscy5jdXN0b21pemVDbGllbnRFdmVudCAhPSBudWxsKSB7XG4gICAgICAgIEFwcFV0aWxzLmN1c3RvbWl6ZUNsaWVudEV2ZW50KHRoaXMsIGNsaWVudEV2ZW50KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuZ2V0UGFyZW50VmlldygpICE9IG51bGwpIHtcbiAgICAgICAgICBjbGllbnRFdmVudC5zZXRQYXJhbWV0ZXIoXCJzY3JlZW5JZFwiLCB0aGlzLmdldFBhcmVudFZpZXcoKS5nZXRJZCgpKTtcbiAgICAgIH1cblxuICAgICAgY2xpZW50RXZlbnQuc2V0UGFyYW1ldGVyKFwiaWRcIiwgdGhpcy5nZXRJZCgpKTtcblxuICAgICAgLy91c2VyIGNhbiBzZWxlY3RlZCBtb3JlIHRoYW4gb25lIHJvd1xuICAgICAgbGV0IHJvd0lkOiBzdHJpbmcgPSB0aGlzLnNlbGVjdGVkUm93cy5tYXAoaWR4PT50aGlzLmdldENoaWxkQnlPcmlnaW5hbFJvd0luZGV4KGlkeCkuZ2V0SWQoKSkuam9pbihcIixcIik7XG5cbiAgICAgIGNsaWVudEV2ZW50LnNldFBhcmFtZXRlcihcInJvd0lkXCIsIHJvd0lkKTtcblxuICAgICAgdGhpcy5nZXRTZXNzaW9uKCkuZ2V0RXZlbnRIYW5kbGVyKCkuc2V0Q2xpZW50RXZlbnQoY2xpZW50RXZlbnQpO1xuICAgICAgdGhpcy5vblN0YXRlQ2hhbmdlLmVtaXQoKTtcbiAgICB9XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIHByaXZhdGUgZ2V0Q2hpbGRCeU9yaWdpbmFsUm93SW5kZXgoaW5kZXg6IG51bWJlcik6IEhUTUxFbGVtZW50V3JhcHBlciB7XG4gICAgICAgIGxldCBub2RlOiBIVE1MRWxlbWVudFdyYXBwZXIgPSB0aGlzLm5vZGVzW2luZGV4XTtcblxuICAgICAgICBpZiAodGhpcy52aXJ0dWFsU2Nyb2xsID09PSB0cnVlKSB7XG4gICAgICAgICAgICBub2RlID0gXy5maW5kKHRoaXMubm9kZXMsIChlbDogSFRNTEVsZW1lbnRXcmFwcGVyKT0+e1xuICAgICAgICAgICAgICAgIHJldHVybiBlbFtUYWJsZUNvbXBvbmVudC5JTlRFUk5BTF9WSVJUVUFMX09SSUdJTkFMX0lOREVYXSA9PT0gaW5kZXg7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH1cblxuICAgIGhhbmRsZU1vdXNlVXAoZXZlbnQ6IE1vdXNlRXZlbnQsIHJvd0luZGV4OiBudW1iZXIsIHJvdzogYW55KSB7XG4gICAgICAvL2ZvciBkcmFnZ2FsZSByb3dzLCB3ZSBuZWVkIHRvIGRvdWJsZSBjaGVjayByb3cgc2VsZWN0aW9uIGFnYWluXG4gICAgICBpZiAodGhpcy5kcmFnZ2FibGVSb3dzID09PSB0cnVlICYmIHRoaXMuc2hvdWxkSGFuZGxlTW91c2VVcCA9PT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLnRvZ2dsZVJvd1NlbGVjdGlvbihldmVudCwgcm93SW5kZXgsIHJvdywgdHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2hvdWxkSGFuZGxlTW91c2VVcCA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgLyoqXG4gICAgICogU2V0IHJvdyBhcyBzZWxlY3RlZC91bnNlbGVjdGVkXG4gICAgICogQHBhcmFtIHJvd0luZGV4IEluZGV4IG9mIHJvdyB0byB0b2dnbGUgb24vb2ZmXG4gICAgICovXG4gICAgdG9nZ2xlUm93U2VsZWN0aW9uKGV2ZW50OiBNb3VzZUV2ZW50LCByb3dJbmRleDogbnVtYmVyLCByb3c6IGFueSwgaXNNb3VzZVVwOiBib29sZWFuID0gZmFsc2UpIHtcblxuICAgICAgICBjb25zdCB0YXJnZXRFbCA9IDxIVE1MRWxlbWVudD5ldmVudC50YXJnZXQ7XG5cbiAgICAgICAgaWYgKHRhcmdldEVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PSAnaW5wdXQnICYmIHRhcmdldEVsLmdldEF0dHJpYnV0ZSgndHlwZScpICE9IG51bGwpIHtcbiAgICAgICAgICAgIGlmICh0YXJnZXRFbC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKS50b0xvd2VyQ2FzZSgpID09ICdyYWRpbycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGFyZ2V0RWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09ICdidXR0b24nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgYWN0dWFsUm93SW5kZXggPSByb3dJbmRleDtcblxuICAgICAgICAvL3ByZXZlbnQgdGV4dCBzZWxlY3Rpb24gd2hlbiBzaGlmdEtleSBpcyBwcmVzc2VkXG4gICAgICAgIGlmIChldmVudC5zaGlmdEtleSA9PT0gdHJ1ZSAmJiBldmVudC5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGlvbk1vZGUgIT09IFwibm9uZVwiKSB7XG4gICAgICAgICAgICBpZiAodGhpcy52aXJ0dWFsU2Nyb2xsID09PSB0cnVlICYmIHJvd1tUYWJsZUNvbXBvbmVudC5JTlRFUk5BTF9WSVJUVUFMX09SSUdJTkFMX0lOREVYXSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIGFjdHVhbFJvd0luZGV4ID0gcm93W1RhYmxlQ29tcG9uZW50LklOVEVSTkFMX1ZJUlRVQUxfT1JJR0lOQUxfSU5ERVhdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL2lmIHVzZXIgaXMgbm90IHByZXNzaW5nIHNoaWZ0IGtleSwgY2xlYXIgYWxsIHByZXZpb3VzIHNlbGVjdGlvblxuICAgICAgICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5ICE9PSB0cnVlICYmIGV2ZW50LmN0cmxLZXkgIT09IHRydWUgJiYgZXZlbnQuYnV0dG9ucyAhPT0gMikge1xuICAgICAgICAgICAgICBsZXQgY2xlYXJTZWxlY3Rpb24gPSB0cnVlO1xuXG4gICAgICAgICAgICAgIGlmICh0aGlzLmRyYWdnYWJsZVJvd3MgPT09IHRydWUgJiYgaXNNb3VzZVVwICE9PSB0cnVlICYmIHRoaXMuc2VsZWN0ZWRSb3dzLmluZGV4T2YoYWN0dWFsUm93SW5kZXgpID49IDApIHtcbiAgICAgICAgICAgICAgICBjbGVhclNlbGVjdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvdWxkSGFuZGxlTW91c2VVcCA9IHRydWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoY2xlYXJTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93cy5zcGxpY2UoMCwgdGhpcy5zZWxlY3RlZFJvd3MubGVuZ3RoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgaWR4ID0gXy5maW5kSW5kZXgodGhpcy5zZWxlY3RlZFJvd3MsIChyb3cpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcm93ID09PSBhY3R1YWxSb3dJbmRleDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoaWR4IDwgMCkge1xuICAgICAgICAgICAgICAgIC8vaWYgbXVsdGkgcm93IGFuZCB1c2VyIGlzIHByZXNzaW5nIHNoaWZ0L2N0cmwga2V5LCBhbGxvdyBtdWx0aSByb3cgc2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uTW9kZSA9PT0gXCJtdWx0aVJvd1wiICYmIChldmVudC5zaGlmdEtleSB8fCBldmVudC5jdHJsS2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuY3RybEtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd3MucHVzaChhY3R1YWxSb3dJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmxhc3RTZWxlY3RlZFJvd0luZGV4ID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5sYXN0U2VsZWN0ZWRSb3dJbmRleCA+IHJvd0luZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSByb3dJbmRleDsgaSA8IHRoaXMubGFzdFNlbGVjdGVkUm93SW5kZXg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd3MucHVzaCh0aGlzLmdldE9yaWdpbmFsSW5kZXgoaSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmxhc3RTZWxlY3RlZFJvd0luZGV4IDwgcm93SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMubGFzdFNlbGVjdGVkUm93SW5kZXggKyAxOyBpIDw9IHJvd0luZGV4OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dzLnB1c2godGhpcy5nZXRPcmlnaW5hbEluZGV4KGkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dzLnB1c2goYWN0dWFsUm93SW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd3MucHVzaChhY3R1YWxSb3dJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93cyA9IFthY3R1YWxSb3dJbmRleF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jdHJsS2V5ID09PSB0cnVlICYmIGlkeCA+PSAwICYmIGV2ZW50LmJ1dHRvbnMgIT09IDIpIHtcbiAgICAgICAgICAgICAgICAvL2lmIGNvbnRyb2wga2V5IGlzIHByZXNzZWQgKGFuZCBub3QgcmlnaHQgY2xpY2spLCByZW1vdmUgdGhlIHNlbGVjdGVkIHJvd1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dzLnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgICAgIHRoaXMubGFzdFNlbGVjdGVkUm93SW5kZXggPSByb3dJbmRleDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudHJpZ2dlclN0YXRlQ2hhbmdlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcmV0dXJuIHRoZSBhY3R1YWwgaW5kZXhlcyBiYXNlIG9uIGRhdGFzb3VyY2VcbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbmRleFxuICAgICAqL1xuICAgIHByaXZhdGUgZ2V0T3JpZ2luYWxJbmRleChpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKHRoaXMudmlydHVhbFNjcm9sbCA9PT0gdHJ1ZSAmJiB0aGlzLm5vZGVzW2luZGV4XSAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub2Rlc1tpbmRleF1bVGFibGVDb21wb25lbnQuSU5URVJOQUxfVklSVFVBTF9PUklHSU5BTF9JTkRFWF07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IFtbZGlzYWJsZWRdXSBwcm9wZXJ0eSB2YWx1ZVxuICAgICAqIEBwYXJhbSBib28gVG9nZ2xlIFtbZGlzYWJsZWRdXVxuICAgICAqL1xuICAgIHNldERpc2FibGVkKGJvbzogYm9vbGVhbikge1xuICAgICAgICB0aGlzLmRpc2FibGVkID0gYm9vO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBbW2Rpc2FibGVkXV0gcHJvcGVydHkgdmFsdWVcbiAgICAgKi9cbiAgICBnZXREaXNhYmxlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZWQ7XG4gICAgfVxuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAvKipcbiAgICAgKiBHZXQgYSBjb2xsZWN0aW9uIG9mIGFsbCByb3cgZWxlbWVudHMgdGhhdCBhcmUgc2VsZWN0ZWRcbiAgICAgKiBAcmV0dXJucyBUaGUgc2VsZWN0ZWQgcm93c1xuICAgICAqL1xuICAgIGdldFNlbGVjdGVkUm93cygpOiBBcnJheTxIVE1MRWxlbWVudFdyYXBwZXI+IHtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRSb3dFbGVtZW50czogQXJyYXk8SFRNTEVsZW1lbnRXcmFwcGVyPiA9IFtdO1xuXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFJvd3MubGVuZ3RoID4gMCAmJiB0aGlzLm5vZGVzICE9IG51bGwgJiYgdGhpcy5ub2Rlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmb3IgKGxldCByb3dJbmRleCBvZiB0aGlzLnNlbGVjdGVkUm93cykge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IG5vZGUgb2YgdGhpcy5ub2Rlcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5nZXRMb2NhbE5hbWUoKSA9PT0gXCJyb3dcIiAmJiBub2RlLnJvd051bWJlciA9PT0gcm93SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUm93RWxlbWVudHMucHVzaChub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkUm93RWxlbWVudHM7XG4gICAgfVxuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAvKipcbiAgICAgKiBHZXQgY29sbGVjdGlvbiBvZiBzZWxlY3RlZCByb3cgaW5kZXhlc1xuICAgICAqL1xuICAgIGdldFNlbGVjdGVkUm93SW5kZXhlcygpOiBBcnJheTxudW1iZXI+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRSb3dzLm1hcChyb3cgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHJvd1t0aGlzLlJPV19JTkRFWF9LRVldO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFdmVudCBoYW5kbGVyIGZvciByb3cgc2VsZWN0IGV2ZW50XG4gICAgICogQHBhcmFtIGV2ZW50XG4gICAgICovXG4gICAgaGFuZGxlUm93U2VsZWN0aW9uKGV2ZW50OiBhbnkpIHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgICAgaWYgKCFfLmlzRXF1YWwoZXZlbnQuc2VsZWN0ZWQsIHRoaXMuX3ByZXZTZWxlY3RlZFJvd3MpKSB7XG4gICAgICAgICAgICB0aGlzLm9uQ2hhbmdlLmVtaXQobmV3IFRhYmxlU2VsZWN0aW9uRXZlbnQoZXZlbnQuc2VsZWN0ZWQpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3ByZXZTZWxlY3RlZFJvd3MgPSBldmVudC5zZWxlY3RlZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFdmVudCBoYW5kbGVyIGZvciBkb3VibGUgY2xpY2sgb24gY2VsbFxuICAgICAqIEBwYXJhbSBldmVudFxuICAgICAqIEBldmVudCBvbkRvdWJsZUNsaWNrXG4gICAgICovXG4gICAgaGFuZGxlQ2VsbEFjdGl2YXRpb24oZXZlbnQ6IGFueSkge1xuICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ2RibGNsaWNrJykge1xuICAgICAgICAgICAgdGhpcy5vbkRvdWJsZUNsaWNrLmVtaXQobmV3IFRhYmxlU2VsZWN0aW9uRXZlbnQoZXZlbnQucm93KSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvL2ludGVybmFsXG4gICAgYXBwZW5kUm93SW5kZXhUb1Jvdyhyb3c6IGFueSwgcm93SW5kZXg6IG51bWJlcikge1xuICAgICAgICByb3dbdGhpcy5ST1dfSU5ERVhfS0VZXSA9IHJvd0luZGV4O1xuICAgIH1cblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSAqL1xuICAgIC8qKlxuICAgICAqIFRyaWdnZXIgY2hhbmdlIGRldGVjdGlvbiBhbmQgcmUtcmVuZGVyIHRoZSB0YWJsZVxuICAgICAqIEBwYXJhbSBjbGVhckRhdGEgU2V0IHRvIHRydWUgdG8gZW1wdHkgdGFibGUgZGF0YVxuICAgICAqL1xuICAgIHJlZnJlc2goY2xlYXJEYXRhOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKGNsZWFyRGF0YSA9PSB0cnVlKSB7XG4gICAgICAgICAgICB0aGlzLl9kYXRhU291cmNlID0gW107XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcbiAgICB9XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIC8qKlxuICAgICAqIEdldCBbW2NoYW5nZURldGVjdG9yUmVmXV0gcHJvcGVydHlcbiAgICAgKiBAcmV0dXJuIHRoZSBDaGFuZ2VEZXRlY3RvclxuICAgICAqL1xuICAgIHByb3RlY3RlZCBnZXRDaGFuZ2VEZXRlY3RvcigpOiBDaGFuZ2VEZXRlY3RvclJlZiB7XG4gICAgICByZXR1cm4gdGhpcy5jaGFuZ2VEZXRlY3RvclJlZjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgTmV4YVdlYiB0YWcgbmFtZVxuICAgICAqIEByZXR1cm5zIFRhZyBuYW1lXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGdldE54VGFnTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwidGFibGVcIjtcbiAgICB9XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIC8qKlxuICAgICAqIENvbnZlciB0aGUgY29udGVudCBvZiB0aGlzIHNjcmVlbnMgdG8gSlNPTiBvYmplY3Qgc28gaXQgY2FuIGJlIHNlbnQgdG8gdGhlIHNlcnZlci5cbiAgICAgKi9cbiAgICB0b0pzb24oKToge30ge1xuICAgICAgICBjb25zdCBqc29uOiBhbnkgPSBzdXBlci50b0pzb24oKTtcblxuICAgICAgICAvLyBpZiAodGhpcy5nZXRTZWxlY3RlZFJvd3MoKSAhPSBudWxsICYmIHRoaXMuZ2V0U2VsZWN0ZWRSb3dzKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyAgICAgdGhpcy5zZXRKc29uKGpzb24sIFwic2VsZWN0ZWRSb3dzXCIsIHRoaXMuZ2V0U2VsZWN0ZWRSb3dzKCkubWFwKGl0ZW09Pml0ZW0udG9Kc29uKCkpKTtcbiAgICAgICAgLy8gfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMubm9kZXMgIT0gbnVsbCAmJlxuICAgICAgICAgICAgdGhpcy5ub2Rlcy5sZW5ndGggPiAwXG4gICAgICAgICkge1xuICAgICAgICAgICAgLy92aXJ0dWFsIHNjcm9sbCAodHJhY2sgd2hpY2ggcm93cyB3ZSBhbHJlYWR5IGNvbnZlcnRlZClcbiAgICAgICAgICAgIGxldCB0ZW1wUm93czoge1tuYW1lOiBzdHJpbmddOiBhbnl9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnZpcnR1YWxTY3JvbGwgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICB0ZW1wUm93cyA9IHt9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBqc29uW1wicm93c1wiXSA9IHRoaXMubm9kZXMubWFwKChub2RlLCBpbmRleCk9PntcbiAgICAgICAgICAgICAgICBjb25zdCByb3dKc29uID0gbm9kZS50b0pzb24oKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93cyAhPSBudWxsICYmIHRoaXMuc2VsZWN0ZWRSb3dzLmluZGV4T2YoaW5kZXgpID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcm93SnNvbltcInNlbGVjdGVkXCJdID0gXCJ0cnVlXCI7XG4gICAgICAgICAgICAgICAgICAgIHJvd0pzb25bXCJpbmRleFwiXSA9IGluZGV4ICsgXCJcIjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy52aXJ0dWFsU2Nyb2xsID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBSb3dzW25vZGVbVGFibGVDb21wb25lbnQuSU5URVJOQUxfVklSVFVBTF9PUklHSU5BTF9JTkRFWF1dID0gbm9kZVtUYWJsZUNvbXBvbmVudC5JTlRFUk5BTF9WSVJUVUFMX09SSUdJTkFMX0lOREVYXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcm93SnNvbjtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvL3ZpcnR1YWwgc2Nyb2xsIGRhdGFcbiAgICAgICAgICAgIGlmICh0aGlzLnZpcnR1YWxTY3JvbGwgPT09IHRydWUgJiYgdGhpcy5tb2RpZmllZFZpcnR1YWxSb3dzSnNvbiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5cyA9IF8ua2V5cyh0aGlzLm1vZGlmaWVkVmlydHVhbFJvd3NKc29uKTtcblxuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9tYWtlIHN1cmUgd2Ugbm90IGFscmVhZHkgY29udmVydGVkIHRoZW1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXBSb3dzW2tleV0gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbltcInJvd3NcIl0ucHVzaCh0aGlzLm1vZGlmaWVkVmlydHVhbFJvd3NKc29uW2tleV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY29sdW1ucyAhPSBudWxsICYmIHRoaXMuY29sdW1ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBsZXQgY29sdW1ucyA9IHRoaXMuY29sdW1ucztcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICB0aGlzLmdldExvY2FsTmFtZSgpID09PSBcInRhYmxlXCIgJiZcbiAgICAgICAgICAgICAgICB0aGlzLmNvbHVtbnNIYXNCZWVuU3dhcHBlZCA9PT0gdHJ1ZVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgY29sdW1ucyA9IF8ub3JkZXJCeShjb2x1bW5zLCAoY2hpbGQ6IFRhYmxlQ29sdW1uRGlyZWN0aXZlKT0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZC5vcmlnaW5hbENvbHVtbkluZGV4O1xuICAgICAgICAgICAgICAgIH0pIGFzIGFueTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAganNvbltcImNvbHVtbkRlZnNcIl0gPSBjb2x1bW5zLm1hcCgoY29sdW1uLCBpbmRleCk9PntcbiAgICAgICAgICAgICAgICBjb25zdCBkZWYgPSB7XG4gICAgICAgICAgICAgICAgICAgIFwidmlzaWJsZVwiOiB0aGlzLnRvSnNvblZhbHVlKGNvbHVtbi52aXNpYmxlKSxcbiAgICAgICAgICAgICAgICAgICAgXCJsb2NrZWRcIjogdGhpcy50b0pzb25WYWx1ZShjb2x1bW4ubG9ja2VkKSxcbiAgICAgICAgICAgICAgICAgICAgXCJlbmFibGVkXCI6IHRoaXMudG9Kc29uVmFsdWUoY29sdW1uLmVuYWJsZWQpLFxuICAgICAgICAgICAgICAgICAgICBcInNvcnRhYmxlXCI6IHRoaXMudG9Kc29uVmFsdWUoY29sdW1uLnNvcnRhYmxlKSxcbiAgICAgICAgICAgICAgICAgICAgXCJpc0NoZWNrZWRcIjogdGhpcy50b0pzb25WYWx1ZShjb2x1bW4uaXNDaGVja2VkKSxcbiAgICAgICAgICAgICAgICAgICAgXCJjdXN0b21BdHRyaWJ1dGVzXCI6IEJhc2VDb21wb25lbnQubWFwVG9Kc29uKGNvbHVtbi5jdXN0b21BdHRyaWJ1dGVzKVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvLyBtYWtlIHN1cmUgY3VzdG9tQXR0cmlidXRlcyBoYXMgJ3dpZHRoJyBwcm9wZXJ0eVxuICAgICAgICAgICAgICAgIGlmIChkZWZbXCJjdXN0b21BdHRyaWJ1dGVzXCJdW1wid2lkdGhcIl0gIT0gbnVsbClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLmhlYWROb2RlLmdldENoaWxkQXQoaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB3aWR0aCA9IHRoaXMudG9XaG9sZU51bWJlcihub2RlLmh0bWxFbGVtZW50LnN0eWxlLndpZHRoLnNsaWNlKDAsLTIpKTsvL3NlcnZlciBleHBlY3Qgd2hvbGUgbnVtYmVyXG4gICAgICAgICAgICAgICAgICAgIGRlZltcImN1c3RvbUF0dHJpYnV0ZXNcIl1bXCJ3aWR0aFwiXSA9IHRoaXMudG9Kc29uVmFsdWUod2lkdGgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChjb2x1bW4uaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmW1wiaWRcIl0gPSB0aGlzLnRvSnNvblZhbHVlKGNvbHVtbi5pZCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmW1wiaWRcIl0gPSBCYXNlQ29tcG9uZW50LmdlbmVyYXRlVW5pcXVlSWQoXCJjb2x1bW5cIik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi5sb2NrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmW1widGFnTmFtZVwiXSA9IFwibG9ja2VkQ29sdW1uXCI7XG4gICAgICAgICAgICAgICAgICAgIGRlZltcIm54VGFnTmFtZVwiXSA9IFwibG9ja2VkQ29sdW1uXCI7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmW1widGFnTmFtZVwiXSA9IFwiY29sdW1uXCI7XG4gICAgICAgICAgICAgICAgICAgIGRlZltcIm54VGFnTmFtZVwiXSA9IFwiY29sdW1uXCI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy9oZWFkZXIgdGFnIG9mIGNvbHVtblxuICAgICAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyID0ge1xuICAgICAgICAgICAgICAgICAgICBcInRhZ05hbWVcIjogXCJoZWFkZXJcIixcbiAgICAgICAgICAgICAgICAgICAgXCJueFRhZ05hbWVcIjogXCJoZWFkZXJcIixcbiAgICAgICAgICAgICAgICAgICAgXCJ0ZXh0XCI6IHRoaXMudG9Kc29uVmFsdWUoY29sdW1uLmhlYWRlcilcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi5oZWFkZXJEaXJlY3RpdmUgJiYgY29sdW1uLmhlYWRlckRpcmVjdGl2ZS5pZCkge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJbXCJpZFwiXSA9IHRoaXMudG9Kc29uVmFsdWUoY29sdW1uLmhlYWRlckRpcmVjdGl2ZS5pZCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyW1wiaWRcIl0gPSBCYXNlQ29tcG9uZW50LmdlbmVyYXRlVW5pcXVlSWQoXCJoZWFkZXJcIik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZGVmW1wiY2hpbGRyZW5cIl0gPSBbaGVhZGVyXTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBkZWY7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBqc29uO1xuICAgIH1cblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgLyoqXG4gICAgICogQ29udmVydCBjaGlsZCB0byBKU09OXG4gICAgICogQHBhcmFtIGNoaWxkIGNoaWxkIHRvIGJlIGNvbnZlcnRlZCB0byBKU09OXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGNoaWxkVG9Kc29uKGNoaWxkOiBCYXNlQ29tcG9uZW50KSB7XG4gICAgICAgIHJldHVybiBjaGlsZC5nZXRUYWdOYW1lKCkgPT09IFwiaGVhZHJvd1wiIHx8IGNoaWxkLmdldFRhZ05hbWUoKSA9PT0gXCJoZWFkY2VsbFwiID8gY2hpbGQudG9Kc29uKCkgOiBudWxsO1xuICAgIH1cblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgLyoqXG4gICAgICogQWRkIGVsZW1lbnQgdG8gaW50ZXJuYWwgbGlzdCBvZiByb3csIGNlbGwsIG9yIGhlYWRlciBjZWxsXG4gICAgICogQHBhcmFtIHR5cGUgJ3JvdycgfCAnY2VsbCcgfCAnaGVhZGNlbGwnXG4gICAgICogQHBhcmFtIGV2ZW50IENyZWF0ZSBldmVudFxuICAgICAqIEBwYXJhbSByb3dPckNvbHVtbkluZGV4XG4gICAgICogQHBhcmFtIHJvd0RhdGFPckNvbHVtbkRlZlxuICAgICAqL1xuICAgIHJlZ2lzdGVyRmF1eEVsZW1lbnQodHlwZTogc3RyaW5nLCBldmVudDogT25DcmVhdGVFdmVudCwgcm93T3JDb2x1bW5JbmRleDogbnVtYmVyLCByb3dEYXRhT3JDb2x1bW5EZWY6IGFueSkge1xuICAgICAgICB0aGlzLl9pc0hlYWRlckNlbGwgPSBmYWxzZTtcblxuICAgICAgICBpZiAocm93RGF0YU9yQ29sdW1uRGVmID09PSBudWxsIHx8XG4gICAgICAgICAgICAocm93RGF0YU9yQ29sdW1uRGVmICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICByb3dEYXRhT3JDb2x1bW5EZWYgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgICByb3dEYXRhT3JDb2x1bW5EZWYuc2tpcFRyYWNraW5nICE9PSB0cnVlKSkge1xuICAgICAgICAgICAgaWYgKHR5cGUgPT09IFwicm93XCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyYWNrUm93KGV2ZW50LCByb3dPckNvbHVtbkluZGV4LCByb3dEYXRhT3JDb2x1bW5EZWYpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSBcImNlbGxcIikge1xuICAgICAgICAgICAgICAgIHRoaXMudHJhY2tDZWxsKGV2ZW50LCByb3dPckNvbHVtbkluZGV4LCByb3dEYXRhT3JDb2x1bW5EZWYpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSBcImhlYWRjZWxsXCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9pc0hlYWRlckNlbGwgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMudHJhY2tIZWFkQ2VsbChldmVudCwgcm93RGF0YU9yQ29sdW1uRGVmKTtcblxuICAgICAgICAgICAgICAgIGlmIChyb3dPckNvbHVtbkluZGV4ID09PSB0aGlzLmNvbHVtbnMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgdGhpcy5pbml0UGx1Z2lucygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBbW25vZGVzXV0gcHJvcGVydHlcbiAgICAgKiBAcmV0dXJucyBOb2RlIGxpc3RcbiAgICAgKi9cbiAgICBnZXRUYWJsZUNoaWxkcmVuKCk6IEFycmF5PEhUTUxFbGVtZW50V3JhcHBlcj4ge1xuICAgICAgcmV0dXJuIHRoaXMubm9kZXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IG51bWJlciBvZiBub2Rlc1xuICAgICAqIEByZXR1cm5zIE51bWJlciBvZiBub2Rlc1xuICAgICAqL1xuICAgIGdldENoaWxkQ291bnQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZXMgIT0gbnVsbCA/IHRoaXMubm9kZXMubGVuZ3RoIDogMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIGNoaWxkcmVuIG9mIHRoaXMgdGFibGVcbiAgICAgKiBAcmV0dXJuIExpc3Qgb2YgY2hpbGRyZW5cbiAgICAgKi9cbiAgICBnZXRDaGlsZHJlbigpOiBWZWN0b3I8YW55PiB7XG4gICAgICAgIGNvbnN0IGNoaWxkcmVuOiBWZWN0b3I8SFRNTEVsZW1lbnRXcmFwcGVyPiA9IG5ldyBWZWN0b3I8SFRNTEVsZW1lbnRXcmFwcGVyPigpO1xuXG4gICAgICAgIF8uZm9yRWFjaCh0aGlzLmdldFRhYmxlQ2hpbGRyZW4oKSwgKGNoaWxkKT0+Y2hpbGRyZW4uYWRkKGNoaWxkKSk7XG5cbiAgICAgICAgcmV0dXJuIGNoaWxkcmVuO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHhwYXRoRXhwcmVzc2lvbiBHZXQgcXVlcnkgcmVzdWx0IGZyb20gYW4geHBhdGggZXhwcmVzc2lvbiBzdHJpbmdcbiAgICAgKi9cbiAgICBldmFsdWF0ZVhQYXRoKHhwYXRoRXhwcmVzc2lvbjogc3RyaW5nKTogYW55IHtcbiAgICAgIGNvbnN0IHJlc3VsdDogVmVjdG9yPGFueT4gPSBuZXcgVmVjdG9yPGFueT4oKTtcbiAgICAgIGNvbnN0IHhwYXRoUmVzdWx0OiBYUGF0aFJlc3VsdCA9IGRvY3VtZW50LmV2YWx1YXRlKHhwYXRoRXhwcmVzc2lvbi5yZXBsYWNlKFwiY2VsbFtcIiwgXCJ0ZFtcIikucmVwbGFjZShcInJvd1tcIiwgXCJ0cltcIiksIHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LCBudWxsLCBYUGF0aFJlc3VsdC5BTllfVFlQRSwgbnVsbCk7XG5cbiAgICAgIGlmICh4cGF0aFJlc3VsdCAhPSBudWxsKSB7XG4gICAgICAgIGxldCBub2RlOiBOb2RlID0geHBhdGhSZXN1bHQuaXRlcmF0ZU5leHQoKTtcblxuICAgICAgICB3aGlsZShub2RlKSB7XG4gICAgICAgICAgcmVzdWx0LmFkZChub2RlKTtcbiAgICAgICAgICBub2RlID0geHBhdGhSZXN1bHQuaXRlcmF0ZU5leHQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIGNoaWxkT3JBcnJheU9yU3RyaW5nV3RmXG4gICAgICogQHBhcmFtIHJvd051bWJlclxuICAgICAqL1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgYXBwZW5kQ2hpbGQoY2hpbGRPckFycmF5T3JTdHJpbmdXdGY6IGFueSwgcm93TnVtYmVyOiBudW1iZXIgPSAtMSkge1xuICAgICAgICAvL1RPRE8gbmVlZCB0byBhcHBlbmQgY2hpbGQgdG8gY2VydGFpbiByb3c/IGRwZW5kaW5nIG9uIGNoaWxkT3JBcnJheU9yU3RyaW5nV3RmXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgdGhlIHJvdyBoYXMgYmVlbiBzZWxlY3RlZFxuICAgICAqIEBwYXJhbSByb3dJbmRleCBJbmRleCBvZiByb3cgdG8gY2hlY2tcbiAgICAgKiBAcmV0dXJucyBUcnVlIGlmIHJvdyBpcyBhIHNlbGVjdGVkIHJvd1xuICAgICAqL1xuICAgIGlzU2VsZWN0ZWRSb3cocm93SW5kZXg6IG51bWJlciwgcm93OiBhbnkpIHtcbiAgICAgIGlmICh0aGlzLnZpcnR1YWxTY3JvbGwgPT09IHRydWUgJiYgcm93W1RhYmxlQ29tcG9uZW50LklOVEVSTkFMX1ZJUlRVQUxfT1JJR0lOQUxfSU5ERVhdICE9IG51bGwpIHtcbiAgICAgICAgcm93SW5kZXggPSByb3dbVGFibGVDb21wb25lbnQuSU5URVJOQUxfVklSVFVBTF9PUklHSU5BTF9JTkRFWF07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkUm93cyAhPSBudWxsICYmIHRoaXMuc2VsZWN0ZWRSb3dzLmluZGV4T2Yocm93SW5kZXgpID49IDA7XG4gICAgfVxuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAvKipcbiAgICAgKiBHZXQgY3VzdG9tIGF0dHJpYnV0ZXMgb2Ygcm93IGlmIGl0IGhhcyBhbnksIG90aGVyd2lzZSByZXR1cm4gbnVsbFxuICAgICAqIEBwYXJhbSByb3dcbiAgICAgKiBAcGFyYW0gcm93T3JDb2x1bW5JbmRleFxuICAgICAqL1xuICAgIGdldFJvd0N1c3RvbUF0dHJpYnV0ZXMocm93OiBhbnksIHJvd09yQ29sdW1uSW5kZXg6IG51bWJlcikge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMucm93Q3VzdG9tQXR0cmlidXRlQnVpbGRlciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yb3dDdXN0b21BdHRyaWJ1dGVCdWlsZGVyKHJvdywgcm93T3JDb2x1bW5JbmRleCwgKHRoaXMuX2dldE5vbmVBY3RpdmVWaWV3UGFyZW50KCkgfHwgdGhpcy5nZXRQYXJlbnRWaWV3KCkpIGFzIFZpZXdDb21wb25lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJvdyAhPSBudWxsICYmIHJvdy5jdXN0b21BdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcm93LmN1c3RvbUF0dHJpYnV0ZXM7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBjb2x1bW4gaXMgdmlzaWJsZS4gRWl0aGVyIGJ5IGluZGV4IG9yIGNvbHVtblxuICAgICAqIEBwYXJhbSBpbmRleFxuICAgICAqIEBwYXJhbSBjb2x1bW5cbiAgICAgKiBAcmV0dXJucyBUcnVlIGlmIGNvbHVtbiBpcyB2aXNpYmxlXG4gICAgICovXG4gICAgaXNDb2x1bW5WaXNpYmxlKGluZGV4OiBudW1iZXIsIGNvbHVtbjogVGFibGVDb2x1bW5EaXJlY3RpdmUgPSBudWxsKTogYm9vbGVhbiB7XG4gICAgICAgIGlmIChjb2x1bW4gIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbi52aXNpYmxlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuY29sdW1ucy5maW5kKChpdGVtLCBpZHgpPT5pZHggPT09IGluZGV4KS52aXNpYmxlO1xuICAgIH1cblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgLyoqXG4gICAgICogQWRkIGEgY2hpbGQgY29tcG9uZW50IHRvIHRoZSB0YWJsZVxuICAgICAqIEBwYXJhbSBjaGlsZCBDb21wb25lbnQgdG8gYWRkXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGFkZENoaWxkKGNoaWxkOiBCYXNlQ29tcG9uZW50KSB7XG4gICAgICAgIHN1cGVyLmFkZENoaWxkKGNoaWxkKTtcbiAgICAgICAgY29uc3Qgcm93ID0gdGhpcy5ub2Rlc1t0aGlzLm5vZGVzLmxlbmd0aCAtIDFdO1xuXG4gICAgICAgIGlmICh0aGlzLl9pc0hlYWRlckNlbGwgIT09IHRydWUgJiYgcm93KSB7XG4gICAgICAgICAgICBjaGlsZC50YWJsZVJvd05vID0gcm93LnJvd051bWJlcjtcbiAgICAgICAgICAgIHJvdy5wYXJlbnRUYWJsZUlkID0gdGhpcy5pZDtcbiAgICAgICAgICAgIHJvdy5wYXJlbnRUYWJsZSA9IHRoaXM7XG4gICAgICAgICAgICAvL3doZW4gd2UgZ2V0IGhlcmUgcm93LmNoaWxkTm9kZXNbY3VycmVudExlbmd0aF0gc2hvdWxkIGJlIHRoZSBjZWxsIHBhcmVudCByb3dcbiAgICAgICAgICAgIC8vYXBwZW5kIGNoaWxkIGNvbXBvbmVudCB0byBjZWxsIChmb3IgZHluYW1pYylcbiAgICAgICAgICAgIGlmIChyb3cuY2hpbGROb2Rlc1tyb3cuY2hpbGROb2Rlcy5sZW5ndGggLSAxXSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlRhYmxlQ29tcG9uZW50OiBVbmFibGUgdG8gcmVnaXN0ZXIgZWxlbWVudCB0byBjZWxsIG9mIGN1cnJlbnQgcm93IChjZWxsIGlzIG51bGwpXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjaGlsZC5zZXRBdHRyaWJ1dGUoXCJpc0xvY2tlZENvbHVtblwiLCByb3cuY2hpbGROb2Rlc1tyb3cuY2hpbGROb2Rlcy5sZW5ndGggLSAxXS5nZXRBdHRyaWJ1dGUoXCJpc0xvY2tlZENvbHVtblwiLCB0cnVlKSk7XG4gICAgICAgICAgICAgICAgcm93LmNoaWxkTm9kZXNbcm93LmNoaWxkTm9kZXMubGVuZ3RoIC0gMV0uc2V0Q29tcG9uZW50KGNoaWxkLCB0cnVlKTtcblxuICAgICAgICAgICAgICAgIC8vc29waGlhICMxNzI4OiByZXN0cmljdGVkIHJpZ2h0IGNsaWNrXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdHJpY3RDZWxsUG9wdXAgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgIGNoaWxkLnNraXBFbWl0Q29udGV4dE1lbnVFdmVudCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmlydHVhbFNjcm9sbCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgY29uc3Qgc29ydFZhbHVlID0gY2hpbGQuZ2V0QXR0cmlidXRlKFwic29ydFZhbHVlXCIsIHRydWUpO1xuXG4gICAgICAgICAgICAgICAgICBpZiAoc29ydFZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEF0dHJpYnV0ZShyb3cuY2hpbGROb2Rlc1tyb3cuY2hpbGROb2Rlcy5sZW5ndGggLSAxXS5odG1sRWxlbWVudCwgXCJkYXRhLXRleHRcIiwgc29ydFZhbHVlKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL3RyYWNrIGNoYW5nZSBpZiB2aXJ0dWFsIHNjcm9sbFxuICAgICAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aXJ0dWFsU2Nyb2xsID09PSB0cnVlICYmXG4gICAgICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkIGluc3RhbmNlb2YgQ2hlY2tib3hDb21wb25lbnQgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkIGluc3RhbmNlb2YgUmFkaW9CdXR0b25Db21wb25lbnQgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkIGluc3RhbmNlb2YgVGV4dEZpZWxkQ29tcG9uZW50IHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZCBpbnN0YW5jZW9mIENvbWJvQm94Q29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sdW1uSWR4ID0gcm93LmNoaWxkTm9kZXMubGVuZ3RoIC0gMTtcblxuICAgICAgICAgICAgICAgICAgICAvL2hhcyBjYWNoZWQgZGF0YT9cbiAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW9kaWZpZWRWaXJ0dWFsUm93cyAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RpZmllZFZpcnR1YWxSb3dzW3Jvd1tUYWJsZUNvbXBvbmVudC5JTlRFUk5BTF9WSVJUVUFMX09SSUdJTkFMX0lOREVYXV0gIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW9kaWZpZWRWaXJ0dWFsUm93c1tyb3dbVGFibGVDb21wb25lbnQuSU5URVJOQUxfVklSVFVBTF9PUklHSU5BTF9JTkRFWF1dW3Jvdy5jaGlsZE5vZGVzW2NvbHVtbklkeF1bXCJvcmlnaW5hbENvbHVtbkluZGV4XCJdXSAhPSBudWxsXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHRoaXMubW9kaWZpZWRWaXJ0dWFsUm93c1tyb3dbVGFibGVDb21wb25lbnQuSU5URVJOQUxfVklSVFVBTF9PUklHSU5BTF9JTkRFWF1dW3Jvdy5jaGlsZE5vZGVzW2NvbHVtbklkeF1bXCJvcmlnaW5hbENvbHVtbkluZGV4XCJdXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXAudGV4dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNoaWxkIGFzIGFueSkuc2V0VGV4dCh0ZW1wLnRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAoY2hpbGQgYXMgYW55KS5zZXRDaGVja2VkKHRlbXAuY2hlY2tlZCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjaGlsZC5faW50ZXJuYWxDaGFuZ2VDYiA9IChjb21wKT0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tJbml0TW9kaWZpZWRWaXJ0dWFsUm93cygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tb2RpZmllZFZpcnR1YWxSb3dzW3Jvd1tUYWJsZUNvbXBvbmVudC5JTlRFUk5BTF9WSVJUVUFMX09SSUdJTkFMX0lOREVYXV0gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW9kaWZpZWRWaXJ0dWFsUm93c1tyb3dbVGFibGVDb21wb25lbnQuSU5URVJOQUxfVklSVFVBTF9PUklHSU5BTF9JTkRFWF1dID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW9kaWZpZWRWaXJ0dWFsUm93c1tyb3dbVGFibGVDb21wb25lbnQuSU5URVJOQUxfVklSVFVBTF9PUklHSU5BTF9JTkRFWF1dW3Jvdy5jaGlsZE5vZGVzW2NvbHVtbklkeF1bXCJvcmlnaW5hbENvbHVtbkluZGV4XCJdXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBjb21wLmdldFRleHQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiBjb21wLmdldENoZWNrZWQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKHRoaXMuaGVhZE5vZGUgIT0gbnVsbCl7XG4gICAgICAgICAgLy9za2lwIGVtaXRpbmcgZXZlbnQgc28gd2UgY2FuIGVtaXQgb3Vyc2VsZi5cbiAgICAgICAgICBjaGlsZC5za2lwRW1pdENvbnRleHRNZW51RXZlbnQgPSB0cnVlO1xuICAgICAgICAgIGNoaWxkLnRhYmxlUm93Tm8gPSAtMTtcbiAgICAgICAgICB0aGlzLmhlYWROb2RlLnBhcmVudFRhYmxlSWQgPSB0aGlzLmlkO1xuICAgICAgICAgIHRoaXMuaGVhZE5vZGUucGFyZW50VGFibGUgPSB0aGlzO1xuICAgICAgICAgIHRoaXMuaGVhZE5vZGUuY2hpbGROb2Rlc1t0aGlzLmhlYWROb2RlLmNoaWxkTm9kZXMubGVuZ3RoIC0gMV0uc2V0Q29tcG9uZW50KGNoaWxkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgLyoqXG4gICAgICogw6nCgcK4w6bCisKew6TCuMKtw6PCgcKuw6jCocKMw6PCgsKSw6XCicKKw6nCmcKkw6PCgcKZw6PCgsKLXG4gICAgICovXG4gICAgcmVtb3ZlU2VsZWN0ZWRSb3coKXtcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSb3dzLmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgLy8gw6nCgcK4w6bCisKew6jCocKMw6PCgsKSw6nCmcKNw6nCoMKGw6PCgcKnw6TCuMKmw6PCgcKzw6bCm8K/w6PCgcKIw6PCgsKLXG4gICAgICAgICAgICBsZXQgc2VsZWN0ZWQgOkFycmF5PG51bWJlcj4gPSB0aGlzLnNlbGVjdGVkUm93cy5jb25jYXQoKS5zb3J0KGZ1bmN0aW9uKHYxLHYyKXtyZXR1cm4gdjItdjE7fSk7XG4gICAgICAgICAgICBmb3IgKGxldCBpZHggb2Ygc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGQgOiBIVE1MRWxlbWVudFdyYXBwZXIgPSB0aGlzLm5vZGVzW2lkeF07XG4gICAgICAgICAgICAgICAgZm9yKGxldCB0YXJnZXQgb2YgY2hpbGQuY2hpbGROb2Rlcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNoaWxkKHRhcmdldC5nZXRDb21wb25lbnQoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNoaWxkLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVzLnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZS5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCByb3dOdW1iZXIgOm51bWJlciA9IDA7XG4gICAgICAgICAgICBmb3IobGV0IHJvdyBvZiB0aGlzLm5vZGVzKXtcbiAgICAgICAgICAgICAgICByb3cucm93TnVtYmVyID0gcm93TnVtYmVyKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93cyA9IFtdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgdGhpcyBpcyBhIGNvbnRhaW5lciBjb21wb25lbnRcbiAgICAgKiBAcmV0dXJucyBUcnVlXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGlzQ29udGFpbmVyKCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAvKipcbiAgICAgKiBBZGQgcm93IHRvIGxpc3Qgb2Ygbm9kZXNcbiAgICAgKiBAcGFyYW0gZXZlbnRcbiAgICAgKiBAcGFyYW0gcm93T3JDb2x1bW5JbmRleFxuICAgICAqIEBwYXJhbSByb3dEYXRhXG4gICAgICovXG4gICAgcHJpdmF0ZSB0cmFja1JvdyhldmVudDogT25DcmVhdGVFdmVudCwgcm93T3JDb2x1bW5JbmRleDogbnVtYmVyLCByb3dEYXRhOiBhbnkpIHtcbiAgICAgICAgY29uc3Qgcm93ID0gbmV3IEhUTUxFbGVtZW50V3JhcHBlcih0aGlzLnJlbmRlcmVyLCBcIlwiLCB0aGlzLmdldFNlc3Npb24oKSk7XG4gICAgICAgIHJvdy5yb3dOdW1iZXIgPSByb3dPckNvbHVtbkluZGV4O1xuICAgICAgICByb3cuaHRtbEVsZW1lbnQgPSBldmVudC5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIHRoaXMuc2V0UGFyZW50U2NyZWVuSWQocm93KTtcbiAgICAgICAgcm93LnNldExvY2FsZU5hbWUoXCJyb3dcIik7XG5cbiAgICAgICAgY29uc3QgY3VzdG9tQXR0cmlidXRlcyA9IHRoaXMuZ2V0Um93Q3VzdG9tQXR0cmlidXRlcyhyb3dEYXRhLCByb3dPckNvbHVtbkluZGV4KTtcblxuICAgICAgICBpZiAoY3VzdG9tQXR0cmlidXRlcyAhPSBudWxsICYmIGN1c3RvbUF0dHJpYnV0ZXMgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHJvdy5hcHBlbmRDdXN0b21BdHRyaWJ1dGVzKGN1c3RvbUF0dHJpYnV0ZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJvd0RhdGEgIT0gbnVsbCAmJiByb3dEYXRhLmlkICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJvdy5zZXRBdHRyaWJ1dGUoXCJpZFwiLCByb3dEYXRhLmlkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnZpcnR1YWxTY3JvbGwgPT09IHRydWUgJiYgcm93RGF0YSAhPSBudWxsKSB7XG4gICAgICAgICAgICByb3dbVGFibGVDb21wb25lbnQuSU5URVJOQUxfVklSVFVBTF9PUklHSU5BTF9JTkRFWF0gPSByb3dEYXRhW1RhYmxlQ29tcG9uZW50LklOVEVSTkFMX1ZJUlRVQUxfT1JJR0lOQUxfSU5ERVhdO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50cmFja05vZGUocm93KTtcblxuICAgICAgICAvL2RyYWdnYWJsZSByb3dcbiAgICAgICAgaWYgKHJvdy5pc0RyYWdnYWJsZSgpKSB7XG4gICAgICAgICAgICByb3cuYXBwbHlEcmFnZ2FibGUoKTtcbiAgICAgICAgICAgIHRoaXMuZHJhZ2dhYmxlUm93cyA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0b1Jvd0luZGV4KHJvd0luZGV4OiBudW1iZXIsIHJvd0RhdGE6IGFueSk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnZpcnR1YWxTY3JvbGwgPT09IHRydWUgJiYgcm93RGF0YSAhPSBudWxsID8gcm93RGF0YVtUYWJsZUNvbXBvbmVudC5JTlRFUk5BTF9WSVJUVUFMX09SSUdJTkFMX0lOREVYXSA6IHJvd0luZGV4O1xuICAgIH1cblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgLyoqXG4gICAgICogQWRkIGNlbGwgdG8gbGlzdCBvZiBub2Rlc1xuICAgICAqIEBwYXJhbSBldmVudFxuICAgICAqIEBwYXJhbSBjb2x1bW5EZWZcbiAgICAgKi9cbiAgICBwcml2YXRlIHRyYWNrQ2VsbChldmVudDogT25DcmVhdGVFdmVudCwgY29sdW1uSW5kZXg6IG51bWJlciwgY29sdW1uRGVmOiBUYWJsZUNvbHVtbkRpcmVjdGl2ZSkge1xuICAgICAgICBjb25zdCBjZWxsID0gbmV3IEhUTUxFbGVtZW50V3JhcHBlcih0aGlzLnJlbmRlcmVyLCBcIlwiLCB0aGlzLmdldFNlc3Npb24oKSk7XG4gICAgICAgIGNlbGwuaHRtbEVsZW1lbnQgPSBldmVudC5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGNlbGwuc2V0TG9jYWxlTmFtZShcImNlbGxcIik7XG4gICAgICAgIGlmIChjb2x1bW5EZWYuY3VzdG9tQXR0cmlidXRlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoIWNlbGwuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikpIHtcbiAgICAgICAgICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIGNvbHVtbkRlZi5jdXN0b21BdHRyaWJ1dGVzW1wiY2xhc3NcIl0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgb3JnQ2xhc3M6IHN0cmluZyA9IGNlbGwuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIik7XG4gICAgICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBvcmdDbGFzcyArIFwiIFwiICsgY29sdW1uRGVmLmN1c3RvbUF0dHJpYnV0ZXNbXCJjbGFzc1wiXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoXCJpc0xvY2tlZENvbHVtblwiLCBjb2x1bW5EZWYubG9ja2VkICsgXCJcIik7XG4gICAgICAgIHRoaXMuc2V0UGFyZW50U2NyZWVuSWQoY2VsbCk7XG5cbiAgICAgICAgLy90cmFjayBvcmlnaW5hbCBjb2x1bW4gaW5kZXggZm9yIHNvcnRpbmdcbiAgICAgICAgaWYgKGNvbHVtbkRlZi5vcmlnaW5hbENvbHVtbkluZGV4ID09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbHVtbkRlZi5vcmlnaW5hbENvbHVtbkluZGV4ID0gY29sdW1uSW5kZXg7XG4gICAgICAgIH1cblxuICAgICAgICBjZWxsW1wib3JpZ2luYWxDb2x1bW5JbmRleFwiXSA9IGNvbHVtbkRlZi5vcmlnaW5hbENvbHVtbkluZGV4O1xuXG4gICAgICAgIC8vYWRkIGNlbGwgdG8gY3VycmVudCByb3dcbiAgICAgICAgaWYgKHRoaXMubm9kZXNbdGhpcy5ub2Rlcy5sZW5ndGggLSAxXSAhPT0gdW5kZWZpbmVkICYmIHRoaXMubm9kZXNbdGhpcy5ub2Rlcy5sZW5ndGggLSAxXSAhPT0gbnVsbCl7XG4gICAgICAgICAgICB0aGlzLm5vZGVzW3RoaXMubm9kZXMubGVuZ3RoIC0gMV0uYXBwZW5kQ2hpbGQoY2VsbCxmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIHByaXZhdGUgdHJhY2tIZWFkQ2VsbChldmVudDogT25DcmVhdGVFdmVudCwgY29sdW1uRGVmOiBUYWJsZUNvbHVtbkRpcmVjdGl2ZSkge1xuICAgICAgICBpZih0aGlzLmhlYWROb2RlID09IG51bGwpe1xuICAgICAgICAgICAgdGhpcy5oZWFkTm9kZSA9IG5ldyBIVE1MRWxlbWVudFdyYXBwZXIodGhpcy5yZW5kZXJlciwgXCJcIiwgdGhpcy5nZXRTZXNzaW9uKCkpO1xuICAgICAgICAgICAgdGhpcy5oZWFkTm9kZS5yb3dOdW1iZXIgPSAtMTtcbiAgICAgICAgICAgIHRoaXMuc2V0UGFyZW50U2NyZWVuSWQodGhpcy5oZWFkTm9kZSk7XG4gICAgICAgICAgICB0aGlzLmhlYWROb2RlLnNldExvY2FsZU5hbWUoXCJoZWFkcm93XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2VsbCA9IG5ldyBIVE1MRWxlbWVudFdyYXBwZXIodGhpcy5yZW5kZXJlciwgXCJcIiwgdGhpcy5nZXRTZXNzaW9uKCkpO1xuICAgICAgICBjZWxsLmh0bWxFbGVtZW50ID0gZXZlbnQuZWxlbWVudC5uYXRpdmVFbGVtZW50IGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBjZWxsLnNldExvY2FsZU5hbWUoXCJoZWFkY2VsbFwiKTtcbiAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoXCJpc0xvY2tlZENvbHVtblwiLCBjb2x1bW5EZWYubG9ja2VkICsgXCJcIik7XG4gICAgICAgIGNlbGwuY3VzdG9tRGF0YSA9IGNvbHVtbkRlZjtcbiAgICAgICAgdGhpcy5zZXRQYXJlbnRTY3JlZW5JZChjZWxsKTtcblxuICAgICAgICB0aGlzLmhlYWROb2RlLmFwcGVuZENoaWxkKGNlbGwpO1xuICAgIH1cblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgLyoqXG4gICAgICogQWRkIGVsZW1lbnQgdG8gaW50ZXJuYWwgW1tub2Rlc11dIGxpc3QgdG8ga2VlcCB0cmFjayBvZlxuICAgICAqIEBwYXJhbSBub2RlIEVsZW1lbnQgdG8gYWRkIHRvIGludGVybmFsIG5vZGUgbGlzdFxuICAgICAqL1xuICAgIHByaXZhdGUgdHJhY2tOb2RlKG5vZGU6IEhUTUxFbGVtZW50V3JhcHBlcikge1xuICAgICAgICBpZiAodGhpcy5ub2RlcyA9PSBudWxsKSB7XG4gICAgICAgIHRoaXMubm9kZXMgPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubm9kZXMucHVzaChub2RlKTtcbiAgICB9XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgcGFyZW50IHNjcmVlbiBpZCBvbiBhbiBlbGVtZW50XG4gICAgICogQHBhcmFtIGVsXG4gICAgICovXG4gICAgcHJpdmF0ZSBzZXRQYXJlbnRTY3JlZW5JZChlbDogSFRNTEVsZW1lbnRXcmFwcGVyKSB7XG4gICAgICAgIGlmICh0aGlzLmdldFBhcmVudFZpZXcoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICBlbC5wYXJlbnRTY3JlZW5JZCA9IHRoaXMuZ2V0UGFyZW50VmlldygpLmdldElkKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgaW52b2tlIFtbcm93U3R5bGVGbl1dIG9uIGEgcm93IGFuZCBnZXQgaXQncyBzdHlsZVxuICAgICAqIEBwYXJhbSByb3dcbiAgICAgKiBAcmV0dXJucyBTdHlsZSBhdHRyaWJ1dGVzXG4gICAgICovXG4gICAgcm93U3R5bGVDbGFzcyhyb3c6IGFueSk6IHN0cmluZyB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5yb3dTdHlsZUZuID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJvd1N0eWxlRm4ocm93KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpbmQgdGhlIGNoaWxkIG5vZGUgYnkgaWRcbiAgICAgKiBAcGFyYW0gaWQgQ2hpbGQncyBpZFxuICAgICAqL1xuICAgIGdldENoaWxkTm9kZUJ5SWQoaWQ6IHN0cmluZyk6IEhUTUxFbGVtZW50V3JhcHBlciB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vZGVzICE9IG51bGwgPyB0aGlzLm5vZGVzLmZpbmQoY2hpbGQ9PmNoaWxkLmlkID09PSBpZCkgOiBudWxsO1xuICAgIH1cblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgLyoqXG4gICAgICogSGFuZGxlIGNlbGwgb25Db250ZXh0TWVudSBpZiBjb21wb25lbnQgaW5zaWRlIHRoZSBjZWxsIGhhcyBub3QgYWxyZWFkeSBoYW5kbGUgaXRcbiAgICAgKlxuICAgICAqIEBwYXJhbSByb3dOdW1iZXJcbiAgICAgKiBAcGFyYW0gY29sdW1uSW5kZXhcbiAgICAgKiBAcGFyYW0gZXZlbnRcbiAgICAgKi9cbiAgICBoYW5kbGVDb2x1bW5PbkNvbnRleHRNZW51KGNvbHVtbjogVGFibGVDZWxsRGlyZWN0aXZlICxyb3dOdW1iZXIsIGNvbHVtbkluZGV4OiBudW1iZXIsIGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLm5vZGVzICE9IG51bGwgJiYgdGhpcy5ub2Rlc1tyb3dOdW1iZXJdICE9IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkQ29sdW1uID0gdGhpcy5ub2Rlc1tyb3dOdW1iZXJdLmdldENoaWxkQXQoY29sdW1uSW5kZXgpO1xuXG4gICAgICAgICAgICBpZiAoY2hpbGRDb2x1bW4gIT0gbnVsbCAmJiBjaGlsZENvbHVtbi5jb21wb25lbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAvL3NvcGhpYSAjMTcyOFxuICAgICAgICAgICAgICBpZiAodGhpcy5yZXN0cmljdENlbGxQb3B1cCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGNoaWxkQ29sdW1uLmNvbXBvbmVudC5oYW5kbGVPbkNvbnRleHRNZW51KGV2ZW50KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJlc3RyaWN0Q2VsbFBvcHVwID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkQ29sdW1uLmNvbXBvbmVudC5wb3B1cCAhPSBudWxsICYmIGNoaWxkQ29sdW1uLmNvbXBvbmVudC5wb3B1cCAhPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgY2hpbGRDb2x1bW4uY29tcG9uZW50LmhhbmRsZU9uQ29udGV4dE1lbnUoZXZlbnQsIHRydWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbHVtbiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2V0U2Vzc2lvbigpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRTZXNzaW9uKCkuc2V0TW91c2VQb3NpdGlvbihldmVudCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50VmlldyA9IHRoaXMuZ2V0UGFyZW50VmlldygpO1xuICAgICAgICAgICAgICAgIGxldCBwb3B1cE1lbnVJZDogc3RyaW5nID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIGlmIChwYXJlbnRWaWV3ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcG9wdXBNZW51SWQgPSAocGFyZW50VmlldyBhcyBWaWV3Q29tcG9uZW50KS5nZXRGaXJzdFBvcHVwTWVudUlkKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb2x1bW4ub25Db250ZXh0TWVudUNiID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgIGNvbHVtbi5vbkNvbnRleHRNZW51Q2IodGhpcy5fZ2V0Tm9uZUFjdGl2ZVZpZXdQYXJlbnQoKSB8fCB0aGlzLmdldFBhcmVudFZpZXcoKSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHBvcHVwTWVudUlkICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG0gPSBzZXRUaW1lb3V0KCgpPT57XG4gICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRtKTtcblxuICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmdldFNlc3Npb24oKS5fY3VycmVudFBvcHVwTWVudUlkICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBNZW51SWQgPSB0aGlzLmdldFNlc3Npb24oKS5fY3VycmVudFBvcHVwTWVudUlkO1xuICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0U2Vzc2lvbigpLnNob3dDb250ZXh0TWVudShwb3B1cE1lbnVJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRTZXNzaW9uKCkuX2N1cnJlbnRQb3B1cE1lbnVJZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgLyoqXG4gICAgICogRXZlbnQgaGFuZGxlciBmb3IgY29udGV4dCBjbGljayBvbiB0aGUgaGVhZGVyXG4gICAgICogQHBhcmFtIGNvbHVtbkluZGV4IEluZGV4IG9mIGNvbHVtbiB0aGF0IHdhcyBjbGlja2VkXG4gICAgICogQHBhcmFtIGV2ZW50XG4gICAgICovXG4gICAgaGFuZGxlSGVhZGVyT25Db250ZXh0TWVudShjb2x1bW5JbmRleDogbnVtYmVyLCBldmVudDogTW91c2VFdmVudCkge1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKHRoaXMuaGVhZE5vZGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3QgY2hpbGRDb2x1bW4gPSB0aGlzLmhlYWROb2RlLmdldENoaWxkQXQoY29sdW1uSW5kZXgpO1xuXG4gICAgICAgICAgICBpZiAoY2hpbGRDb2x1bW4gIT0gbnVsbCAmJiBjaGlsZENvbHVtbi5jb21wb25lbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICBjb25zdCBjbGllbnRFdmVudCA9IG5ldyBDbGllbnRFdmVudChjaGlsZENvbHVtbiwgZXZlbnQpO1xuXG4gICAgICAgICAgICAgIGlmIChBcHBVdGlscy5jdXN0b21pemVDbGllbnRFdmVudCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgQXBwVXRpbHMuY3VzdG9taXplQ2xpZW50RXZlbnQoY2hpbGRDb2x1bW4sIGNsaWVudEV2ZW50KTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmICh0aGlzLmdldFBhcmVudFZpZXcoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICBjbGllbnRFdmVudC5zZXRQYXJhbWV0ZXIoXCJzY3JlZW5JZFwiLCB0aGlzLmdldFBhcmVudFZpZXcoKS5nZXRJZCgpKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGNsaWVudEV2ZW50LnNldFBhcmFtZXRlcihcImlkXCIsIHRoaXMuZ2V0SWQoKSk7XG5cbiAgICAgICAgICAgICAgdGhpcy5nZXRTZXNzaW9uKCkuZ2V0RXZlbnRIYW5kbGVyKCkuc2V0Q2xpZW50RXZlbnQoY2xpZW50RXZlbnQpO1xuXG4gICAgICAgICAgICAgIGNoaWxkQ29sdW1uLmNvbXBvbmVudC5oYW5kbGVPbkNvbnRleHRNZW51KGV2ZW50LCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgcHJpdmF0ZSByZWNhbGN1bGF0ZVZpcnR1YWxTY3JvbGxEYXRhKGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAodGhpcy52aXJ0dWFsU2Nyb2xsID09PSB0cnVlKSB7XG4gICAgICAgICAgbGV0IHNjcm9sbFRvcCA9IGV2ZW50LnNyY0VsZW1lbnQuc2Nyb2xsVG9wO1xuXG4gICAgICAgICAgLy9hZGp1c3Qgb25seSBvbiBJRTksIG90aGVyd2lzZSwgaXQgd2lsbCBzdHVjayBpbiBpbmYgbG9vcFxuICAgICAgICAgIGlmICh0aGlzLmlzSUU5ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgIHNjcm9sbFRvcCAtPSAwLjU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHRoaXMuc2Nyb2xsTGVmdCA9PT0gZXZlbnQuc3JjRWxlbWVudC5zY3JvbGxMZWZ0KSB7XG4gICAgICAgICAgICB0aGlzLmNhbGNWaXJ0dWFsU2Nyb2xsVmlld1BvcnQoc2Nyb2xsVG9wKTtcbiAgICAgICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuYWRqdXN0VGFibGVIZWFkKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgLyoqXG4gICAgICogRXZlbnQgaGFuZGxlciBmb3IgdGFibGUgaGVhZCBjaGFuZ2UuIFNldCBzdHlsZSB0byBwcm9wZXJseSBkaXNwbGF5XG4gICAgICogQHBhcmFtIGV2ZW50XG4gICAgICovXG4gICAgcHJpdmF0ZSBhZGp1c3RUYWJsZUhlYWQoZXZlbnQsIHNraXBCb2R5QWRqdXN0bWVudDogYm9vbGVhbiA9IGZhbHNlLCBza2lwSGVhZGVyOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKHRoaXMudGFibGUgPT0gbnVsbCB8fCBldmVudCA9PSBudWxsKSByZXR1cm47XG4gICAgICAgIHRoaXMucHJlTW91c2VFdmVudCA9IGV2ZW50O1xuICAgICAgICBsZXQgc2Nyb2xsVG9wID0gZXZlbnQuc3JjRWxlbWVudC5zY3JvbGxUb3A7XG5cbiAgICAgICAgLy9hZGp1c3Qgb25seSBvbiBJRTksIG90aGVyd2lzZSwgaXQgd2lsbCBzdHVjayBpbiBpbmYgbG9vcFxuICAgICAgICBpZiAodGhpcy5pc0lFOSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgc2Nyb2xsVG9wIC09IDAuNTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5zY3JvbGxMZWZ0ID0gZXZlbnQuc3JjRWxlbWVudC5zY3JvbGxMZWZ0XG5cbiAgICAgICAgaWYgKHRoaXMudmlydHVhbFNjcm9sbCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgLy8gaWYgKGV2ZW50LnNyY0VsZW1lbnQuc2Nyb2xsVG9wID4gdGhpcy5tYXhTY3JvbGxUb3ApIHtcbiAgICAgICAgICAgIC8vICAgICBzY3JvbGxUb3AgPSB0aGlzLm1heFNjcm9sbFRvcDtcbiAgICAgICAgICAgIC8vIH1cblxuICAgICAgICAgICAgLy90aGlzLmNhbGNWaXJ0dWFsU2Nyb2xsVmlld1BvcnQoc2Nyb2xsVG9wKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXZTY3JvbGxUb3BGb3JIaWRkZW5IZWFkZXIgIT09IHNjcm9sbFRvcCAmJiBza2lwSGVhZGVyID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgIHNjcm9sbFRvcCAtPSB0aGlzLnRoZWFkSGVpZ2h0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnByZXZTY3JvbGxUb3BGb3JIaWRkZW5IZWFkZXIgPSBzY3JvbGxUb3A7XG4gICAgICAgICAgICB0aGlzLl9kaXNhYmxlZFNjcm9sbGluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmNhbGNWaXJ0dWFsVGFibGVQb3NpdGlvbihzY3JvbGxUb3ApO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+e1xuICAgICAgICAgICAgICAgIHRoaXMuX2Rpc2FibGVkU2Nyb2xsaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9LDEwMCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2tpcEhlYWRlciAhPT0gdHJ1ZSkge1xuICAgICAgICAvLyAgIHRoaXMuZmFrZVRhYmxlLm5hdGl2ZUVsZW1lbnQuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgLy8gICB0aGlzLmlzSGVhZGVyQXBwZW5kVG9GYWtlVGFibGUgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZVN0eWxlKHRoaXMudGFibGVIZWFkLm5hdGl2ZUVsZW1lbnQsIFwidmlzaWJpbGl0eVwiKTtcbiAgICAgICAgICBpZih0aGlzLnRhYmxlRm9vdCAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZVN0eWxlKHRoaXMudGFibGVGb290Lm5hdGl2ZUVsZW1lbnQsIFwidmlzaWJpbGl0eVwiKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMuZ2hvc3RIZWFkZXIubmF0aXZlRWxlbWVudCwgXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcblxuICAgICAgICAgIGNvbnN0IHRhYmxlID0gdGhpcy50YWJsZS5uYXRpdmVFbGVtZW50O1xuICAgICAgICAgIGNvbnN0IHRoZWFkID0gdGFibGUucXVlcnlTZWxlY3RvcigndGhlYWQnKTtcbiAgICAgICAgICBjb25zdCB0Ym9keSA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3IoJ3Rib2R5Jyk7XG5cblxuICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbHVtbnMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICBsZXQgY29sdW1uID0gdGhpcy5jb2x1bW5zLmZpbmQoKGl0ZW0sIGlkeCk9PmlkeCA9PT0gaSk7XG4gICAgICAgICAgICAgIGlmKGNvbHVtbiAhPSBudWxsICYmIGNvbHVtbi52aXNpYmxlICYmIGNvbHVtbi5sb2NrZWQpXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRDaGlsZHJlbiA9ICQodGhlYWQucXVlcnlTZWxlY3RvcigndGg6bnRoLWNoaWxkKCcgKyAoaSsxKSArICcpJykpO1xuICAgICAgICAgICAgICAgICAgbGV0IHRyYW5zID0gYHRyYW5zbGF0ZSgke3RoaXMuc2Nyb2xsTGVmdH1weCwgJHtzY3JvbGxUb3B9cHgpYDtcblxuICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmlydHVhbFNjcm9sbCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgIHRyYW5zID0gYHRyYW5zbGF0ZVgoJHt0aGlzLnNjcm9sbExlZnR9cHgpYDtcbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgaGVhZENoaWxkcmVuLmNzcyhcInRyYW5zZm9ybVwiLCB0cmFucyk7XG4gICAgICAgICAgICAgICAgICBoZWFkQ2hpbGRyZW4uY3NzKFwiLW1zLXRyYW5zZm9ybVwiLCB0cmFucyk7XG5cbiAgICAgICAgICAgICAgICAgIGlmIChza2lwQm9keUFkanVzdG1lbnQgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBib2R5Q2hpbGRyZW4gPSAkKHRib2R5LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkOm50aC1jaGlsZCgnICsgKGkrMSkgKyAnKScpKTtcbiAgICAgICAgICAgICAgICAgICAgICBib2R5Q2hpbGRyZW4uY3NzKFwidHJhbnNmb3JtXCIsIGB0cmFuc2xhdGUoJHt0aGlzLnNjcm9sbExlZnR9cHhgKTtcbiAgICAgICAgICAgICAgICAgICAgICBib2R5Q2hpbGRyZW4uY3NzKFwiLW1zLXRyYW5zZm9ybVwiLCBgdHJhbnNsYXRlKCR7dGhpcy5zY3JvbGxMZWZ0fXB4YCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29sdW1uICE9IG51bGwgJiYgY29sdW1uLnZpc2libGUgJiYgdGhpcy52aXJ0dWFsU2Nyb2xsICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBoZWFkQ2hpbGRyZW4gPSAkKHRoZWFkLnF1ZXJ5U2VsZWN0b3IoJ3RoOm50aC1jaGlsZCgnICsgKGkrMSkgKyAnKScpKTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zID0gYHRyYW5zbGF0ZVkoJHtzY3JvbGxUb3B9cHgpYDtcblxuICAgICAgICAgICAgICAgICAgaGVhZENoaWxkcmVuLmNzcyhcInRyYW5zZm9ybVwiLCB0cmFucyk7XG4gICAgICAgICAgICAgICAgICBoZWFkQ2hpbGRyZW4uY3NzKFwiLW1zLXRyYW5zZm9ybVwiLCB0cmFucyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLmFkanVzdFRhYmxlRm9vdGVyKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIC8qKlxuICAgICAqIFNldCB0YWJsZSBmb290ZXIgc3R5bGVzIGZvciBwcm9wZXIgZGlzcGxheVxuICAgICAqL1xuICAgIHByaXZhdGUgYWRqdXN0VGFibGVGb290ZXIoKSB7XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKHRoaXMudGFibGUgPT0gbnVsbCkgcmV0dXJuO1xuXG4gICAgICBjb25zdCB0Zm9vdCA9IHRoaXMudGFibGUubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwidGZvb3RcIik7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmICh0Zm9vdCAhPSBudWxsKSB7XG4gICAgICAgIC8vVml2aWZ5LCBmb3IgaHR0cHM6Ly9naXRodWIuY29tL3dlYXZlaW8vbmduc29waGlhL2lzc3Vlcy8xODA2XG4gICAgICAgIGxldCB0Zm9vdFBvcyA9IDA7XG4gICAgICAgIGlmKCQodGhpcy50YWJsZS5uYXRpdmVFbGVtZW50KS5oZWlnaHQoKSA8ICQodGhpcy50YWJsZUNvbnRhaW5lci5uYXRpdmVFbGVtZW50KS5oZWlnaHQoKSkge1xuICAgICAgICAgICAgdGZvb3RQb3MgPSAkKHRoaXMudGFibGVDb250YWluZXIubmF0aXZlRWxlbWVudCkuaGVpZ2h0KCkgLSAkKHRoaXMudGFibGUubmF0aXZlRWxlbWVudCkuaGVpZ2h0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0Zm9vdFBvcyA9ICgkKHRoaXMudGFibGVDb250YWluZXIubmF0aXZlRWxlbWVudCkuaGVpZ2h0KCkgLSAkKHRoaXMudGFibGUubmF0aXZlRWxlbWVudCkuaGVpZ2h0KCkpICsgdGhpcy50YWJsZUNvbnRhaW5lci5uYXRpdmVFbGVtZW50LnNjcm9sbFRvcDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbHVtbnMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgbGV0IGNvbHVtbiA9IHRoaXMuY29sdW1ucy5maW5kKChpdGVtLCBpZHgpPT5pZHggPT09IGkpO1xuICAgICAgICAgICAgaWYgKGNvbHVtbiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZm9vdENoaWxkcmVuID0gJCh0Zm9vdC5xdWVyeVNlbGVjdG9yKCd0ZDpudGgtY2hpbGQoJyArIChpKzEpICsgJyknKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdHJhbnMgPSBgdHJhbnNsYXRlWSgke3Rmb290UG9zfXB4KWA7XG5cbiAgICAgICAgICAgICAgICBmb290Q2hpbGRyZW4uY3NzKFwidHJhbnNmb3JtXCIsIHRyYW5zKTtcbiAgICAgICAgICAgICAgICBmb290Q2hpbGRyZW4uY3NzKFwiLW1zLXRyYW5zZm9ybVwiLCB0cmFucyk7XG4gICAgICAgICAgICAgICAgZm9vdENoaWxkcmVuLmNzcyhcInBvc2l0aW9uXCIsIFwicmVsYXRpdmVcIik7XG4gICAgICAgICAgICAgICAgZm9vdENoaWxkcmVuLmNzcyhcInotaW5kZXhcIiwgXCIzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAvKipcbiAgICAgKiBFdmVudCBoYW5kbGVyIGZvciBrZXl1cC4gQ29weSBrZXlib2FyZCBzaG9ydGN1dCBzdXBwb3J0XG4gICAgICogQHBhcmFtIGV2ZW50IEtleXVwIGV2ZW50XG4gICAgICovXG4gICAgaGFuZGxlS2V5VXAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgZXZlbnQuY3RybEtleSA9PT0gdHJ1ZSAmJlxuICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgIGV2ZW50LmNvZGUgPT09IFwiS2V5Q1wiIHx8XG4gICAgICAgICAgICAgICAgZXZlbnQua2V5Q29kZSA9PT0gNjcgfHxcbiAgICAgICAgICAgICAgICBldmVudC5rZXlDb2RlID09PSA5OVxuICAgICAgICAgICAgKVxuICAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgbmV4dFxuICAgICAgICAgICAgdGhpcy5jb3B5U2VsZWN0ZWRSb3dBc1RleHQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgLyoqXG4gICAgICogQ2hlY2sgdG8gc2VlIGlmIHdlIGNhbiBzZW5kIHNlbGVjdGVkIHJvd3MgdG8gY2xpcGJvYXJkXG4gICAgICovXG4gICAgY29weVNlbGVjdGVkUm93QXNUZXh0KCkge1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSb3dzICE9IG51bGwgJiYgdGhpcy5zZWxlY3RlZFJvd3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBsZXQgc2VsZWN0ZWRSb3dUZXh0OiBBcnJheTxzdHJpbmc+O1xuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRSb3c6IEhUTUxFbGVtZW50V3JhcHBlciA9IHRoaXMuZ2V0U2VsZWN0ZWRSb3dzKClbMF07XG5cbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICAgICAgaWYgKHNlbGVjdGVkUm93LmNoaWxkTm9kZXMgIT0gbnVsbCAmJiBzZWxlY3RlZFJvdy5jaGlsZE5vZGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFJvd1RleHQgPSBzZWxlY3RlZFJvdy5jaGlsZE5vZGVzLm1hcChjaGlsZCA9PiBjaGlsZC5nZXRUZXh0KCkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxlY3RlZFJvdy5keW5hbWljQ2hpbGROb2RlcyAhPSBudWxsICYmIHNlbGVjdGVkUm93LmR5bmFtaWNDaGlsZE5vZGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFJvd1RleHQgPSBzZWxlY3RlZFJvdy5keW5hbWljQ2hpbGROb2Rlcy5tYXAoY2hpbGQgPT4gY2hpbGQuZ2V0VGV4dCgpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRSb3dUZXh0ICE9IG51bGwgJiYgc2VsZWN0ZWRSb3dUZXh0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsaXBib2FyZFNlcnZpY2UuY29weShzZWxlY3RlZFJvd1RleHQuam9pbihTdHJpbmcuZnJvbUNoYXJDb2RlKDkpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIGEgcm93IGlkIGJhc2VkIG9uIHJvdydzIFtbaWRdXSBhbmQgaW5kZXhcbiAgICAgKiBAcGFyYW0gcm93XG4gICAgICogQHBhcmFtIHJvd0luZGV4XG4gICAgICovXG4gICAgYnVpbGRSb3dJZChyb3c6IGFueSwgcm93SW5kZXg6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5yb3dJZEJ1aWxkZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucm93SWRCdWlsZGVyKHJvdywgcm93SW5kZXgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFsncm93JywgdGhpcy5pZCwgcm93SW5kZXhdLmpvaW4oJy0nKTtcbiAgICB9XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIC8qKlxuICAgICAqIFNvcnQgdGhlIGRhdGEgKGZvciB2aXJ0dWFsIHNjcm9sbClcbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb2x1bW5cbiAgICAgKi9cbiAgICBoYW5kbGVTb3J0KGNvbHVtbjogVGFibGVDb2x1bW5EaXJlY3RpdmUpIHtcbiAgICAgICAgLy9zb3J0aW5nIGlzIG9ubHkgYWxsb3dlZCBvbiBhIG5vbiBsb2NraW5nIGNvbHVtblxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKHRoaXMudmlydHVhbFNjcm9sbCA9PT0gdHJ1ZSAmJiBjb2x1bW4ubG9ja2VkICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAvL2ZpbmQgcHJldmlvdXMgc29ydCBkaXJlY3Rpb24gZm9yIHRoZSBjb2x1bW5cbiAgICAgICAgICAgIHRoaXMuY29sdW1ucy5mb3JFYWNoKGNvbD0+e1xuICAgICAgICAgICAgICAgIC8vdXNpbmcgb3JpZ2luYWxDb2x1bW5JbmRleCBiL2MgdXNlIGNhbiBkcmFnIGNvbHVtbiBhcm91bmQgYW5kIHRodXMgY29sdW1uIGluZGV4IGNoYW5nZWRcbiAgICAgICAgICAgICAgICBpZiAoY29sLm9yaWdpbmFsQ29sdW1uSW5kZXggIT09IGNvbHVtbi5vcmlnaW5hbENvbHVtbkluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbC5zb3J0RGlyZWN0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKGNvbHVtbi5zb3J0RGlyZWN0aW9uID09PSBcImFzY1wiKSB7XG4gICAgICAgICAgICAgICAgY29sdW1uLnNvcnREaXJlY3Rpb24gPSBcImRlc2NcIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29sdW1uLnNvcnREaXJlY3Rpb24gPSBcImFzY1wiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgc29ydENvbHVtbklkOiBzdHJpbmcgPSB0aGlzLnZpcnR1YWxTY3JvbGxTb3J0S2V5c1tjb2x1bW4ub3JpZ2luYWxDb2x1bW5JbmRleF07XG5cbiAgICAgICAgICAgIC8vaWYgY3VzdG9tIHNvcnRuIGZuIGlzIHByb3ZpZGVkLCB1c2VkIHRvIGZpbmQgcHJvcGVyIGNvbHVtbiB0byBzb3J0XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMudmlydHVhbFNjcm9sbFNvcnRGbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgc29ydENvbHVtbklkID0gdGhpcy52aXJ0dWFsU2Nyb2xsU29ydEZuKHRoaXMuX2dldE5vbmVBY3RpdmVWaWV3UGFyZW50KCkgfHwgdGhpcy5nZXRQYXJlbnRWaWV3KCksIGNvbHVtbi5vcmlnaW5hbENvbHVtbkluZGV4KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNvcnRDb2x1bW5JZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZGF0YVNvdXJjZSA9IF8ub3JkZXJCeSh0aGlzLl9kYXRhU291cmNlLCBbc29ydENvbHVtbklkXSwgW2NvbHVtbi5zb3J0RGlyZWN0aW9uXSBhcyBhbnkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmNhbGNWaXJ0dWFsU2Nyb2xsVmlld1BvcnQodGhpcy5wcmV2U2Nyb2xsVG9wKTtcbiAgICAgICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICB9ICBlbHNlIGlmICh0aGlzLnZpcnR1YWxTY3JvbGwgIT09IHRydWUgJiYgY29sdW1uLmxvY2tlZCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgLy8gUlhDIEFkZFxuICAgICAgICAgICAgaWYgKHRoaXMuc29ydERpcmVjdGlvbiA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuc29ydERpcmVjdGlvbiA9IFwiYXNjXCI7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc29ydENvbHVtbklkID09PSBjb2x1bW4ub3JpZ2luYWxDb2x1bW5JbmRleCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNvcnREaXJlY3Rpb24gPT09IFwiYXNjXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3J0RGlyZWN0aW9uID0gXCJkZXNjXCI7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3J0RGlyZWN0aW9uID0gXCJhc2NcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc29ydERpcmVjdGlvbiA9IFwiYXNjXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNvcnRDb2x1bW5JZCA9IGNvbHVtbi5vcmlnaW5hbENvbHVtbkluZGV4O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgdGhlIG92ZXJhbGwgaGVpZ2h0IHNvIHdlIGNhbiBhZGQgc2Nyb2xsYmFyIGZvciB2aXJ0dWFsIHNjcm9sbC4gVGhpcyBpcyBkb25lXG4gICAgICogYnkgbXVsdGlwbHlpbmcgdGhlIG51bWJlciBvZiByb3dzIHRvIHRoZSBoZWlnaHQgb2YgZWFjaCByb3cuXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGNhbGNWaXJ0dWFsU2Nyb2xsSGVpZ2h0KCkge1xuICAgICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcbiAgICAgICAgaWYgKHRoaXMudmlydHVhbFNjcm9sbCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2RhdGFTb3VyY2UgIT0gbnVsbCAmJiB0aGlzLl9kYXRhU291cmNlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAvL3Njcm9sbCBoZWlnaHQgPSAxMHB4ICogIyByb3dzICgxMHB4IGlzIHRoZSBoZWlnaHQgb2YgZWFjaCByb3cpXG4gICAgICAgICAgICAgICAgdGhpcy5fdmlydHVhbFNjcm9sbERpdkhlaWdodCA9ICh0aGlzLnJvd0hlaWdodCAqIHRoaXMuX2RhdGFTb3VyY2UubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1heFNjcm9sbFRvcCA9IHRoaXMuX3ZpcnR1YWxTY3JvbGxEaXZIZWlnaHQ7XG4gICAgICAgICAgICAgICAgdGhpcy52aXJ0dWFsU2Nyb2xsU29ydEtleXMgPSBfLmtleXModGhpcy5fZGF0YVNvdXJjZVswXSk7XG5cbiAgICAgICAgICAgICAgICAvL3RyYWNrIG9yaWdpbmFsIGluZGV4XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLl9kYXRhU291cmNlW3RoaXMuX2RhdGFTb3VyY2UubGVuZ3RoIC0gMV1bVGFibGVDb21wb25lbnQuSU5URVJOQUxfVklSVFVBTF9PUklHSU5BTF9JTkRFWF0gIT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgXy5mb3JFYWNoKHRoaXMuX2RhdGFTb3VyY2UsIChpdGVtLCBpbmRleCk9PntcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1bVGFibGVDb21wb25lbnQuSU5URVJOQUxfVklSVFVBTF9PUklHSU5BTF9JTkRFWF0gPSBpbmRleDtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl92aXJ0dWFsU2Nyb2xsRGl2SGVpZ2h0ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWFya0ZvckNoZWNrKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGp1c3QvbW92ZSB0aGUgcG9zaXRpb24gb2YgdGhlIHRhYmxlIGNvbnRhaW5lciBzbyB0aGF0IGl0IGRpc3BsYXllZCBwcm9wZXJseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzY3JvbGxUb3BcbiAgICAgKi9cbiAgICBwcml2YXRlIGNhbGNWaXJ0dWFsVGFibGVQb3NpdGlvbihzY3JvbGxUb3A6IG51bWJlcikge1xuICAgICAgICBpZiAodGhpcy52aXJ0dWFsU2Nyb2xsID09PSB0cnVlKSB7XG4gICAgICAgICAgICAvLy1tcy10cmFuc2Zvcm1cbiAgICAgICAgICAgIC8vdHJhbnNmb3JtXG4gICAgICAgICAgICAvLyBpZiAodGhpcy5tYXhTY3JvbGxUb3AgPiAwKSB7XG4gICAgICAgICAgICAvLyAgICAgc2Nyb2xsVG9wID0gTWF0aC5taW4oc2Nyb2xsVG9wLCB0aGlzLm1heFNjcm9sbFRvcCk7XG4gICAgICAgICAgICAvLyB9XG5cbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy50YWJsZVdyYXBwZXIubmF0aXZlRWxlbWVudCwgXCJ0cmFuc2Zvcm1cIiwgYHRyYW5zbGF0ZVkoJHtzY3JvbGxUb3B9cHgpYCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMudGFibGVXcmFwcGVyLm5hdGl2ZUVsZW1lbnQsIFwiLW1zLXRyYW5zZm9ybVwiLCBgdHJhbnNsYXRlWSgke3Njcm9sbFRvcH1weClgKTtcbiAgICAgICAgICAgIC8vIHRoaXMubWFya0ZvckNoZWNrKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgdGhlIHZpc2libGUgdmlydHVhbCByb3dzIHRvIGRpc3BsYXkgdG8gdGhlIHVzZXJcbiAgICAgKlxuICAgICAqIEBwYXJhbSBzY3JvbGxUb3BcbiAgICAgKi9cbiAgICBwcml2YXRlIGNhbGNWaXJ0dWFsU2Nyb2xsVmlld1BvcnQoc2Nyb2xsVG9wOiBudW1iZXIgPSAwKSB7XG4gICAgICAgIGlmICh0aGlzLl9pc1ZpZXdJbml0ID09PSB0cnVlICYmIHRoaXMuX2RhdGFTb3VyY2UgIT0gbnVsbCkge1xuICAgICAgICAgICAgbGV0IHN0YXJ0SWR4OiBudW1iZXIgPSAwO1xuXG4gICAgICAgICAgICAvL2lmIHNjcm9sbFRvcCBpcyBncmVhdGVyIHRoYW4gMCwgbmVlZCB0byBmaWd1cmUgdGhlIHN0YXJ0aW5nIHJvd1xuICAgICAgICAgICAgaWYgKHNjcm9sbFRvcCA+IDApIHtcbiAgICAgICAgICAgICAgICAvL2VhY2ggcm93IGlzIDEwcHggaGVpZ2h0LCBpZiBzY3JvbGxUb3AgaXMgMTAwcHgsIHRoZW4gd2Ugc3RhcnQgYXQgcm93IDEwXG4gICAgICAgICAgICAgICAgLy9zY3JvbGxUb3AgLyAxMHB4P1xuICAgICAgICAgICAgICAgIHN0YXJ0SWR4ID0gTWF0aC5mbG9vcihzY3JvbGxUb3AgLyB0aGlzLnJvd0hlaWdodCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoc3RhcnRJZHggPiB0aGlzLl9kYXRhU291cmNlLmxlbmd0aCAtIHRoaXMuX3ZpcnR1YWxTY3JvbGxSb3dQZXJWaWV3KSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0SWR4ID0gdGhpcy5fZGF0YVNvdXJjZS5sZW5ndGggLSB0aGlzLl92aXJ0dWFsU2Nyb2xsUm93UGVyVmlldztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX3ZpcnR1YWxWaWV3UG9ydCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnByZXZTY3JvbGxUb3AgPSBzY3JvbGxUb3A7XG4gICAgICAgICAgICB0aGlzLmNsZWFuVXBDaGlsZE5vZGVzKCk7XG4gICAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcblxuICAgICAgICAgICAgdGhpcy56b25lLnJ1bigoKT0+e1xuICAgICAgICAgICAgICAgIHRoaXMuX3ZpcnR1YWxWaWV3UG9ydCA9IHRoaXMuYnVpbGRSb3dJZGVudGl0eSh0aGlzLl9kYXRhU291cmNlLnNsaWNlKHN0YXJ0SWR4LCBzdGFydElkeCArIHRoaXMuX3ZpcnR1YWxTY3JvbGxSb3dQZXJWaWV3ICsgdGhpcy5hZGp1c3RlZFJvd3MpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfc3dhcChmcm9tSW5kZXg6IG51bWJlciwgdG9JbmRleDogbnVtYmVyKSB7XG4gICAgICBjb25zdCB0ZW1wVG9Db2x1bW4gPSB0aGlzLmNvbHVtbnNbdG9JbmRleF07XG5cbiAgICAgIHRoaXMuY29sdW1uc1t0b0luZGV4XSA9IHRoaXMuY29sdW1uc1tmcm9tSW5kZXhdO1xuICAgICAgdGhpcy5jb2x1bW5zW2Zyb21JbmRleF0gPSB0ZW1wVG9Db2x1bW47XG4gICAgfVxuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAvKipcbiAgICAgKiBTd2FwIHRoZSBjb2x1bW5zIGFmdGVyIGEgY29sdW1uIGlzIGJlaW5nIGRyYWcgYW5kIHJvcFxuICAgICAqXG4gICAgICogQHBhcmFtIGZyb21JbmRleCBjb2x1bW4gdGhhdCBpcyBiZWluZyBkcmFnZ2VkIChtb3ZlZClcbiAgICAgKiBAcGFyYW0gdG9JbmRleCAgY29sdW1uIHRoYXQgaXMgYmVpbmcgZHJvcGVkIGludG9cbiAgICAgKi9cbiAgICBwcml2YXRlIHN3YXBDb2x1bW5zKGZyb21JbmRleDogbnVtYmVyLCB0b0luZGV4OiBudW1iZXIpIHtcbiAgICAgIC8vc29waGlhIDE4NTY6IG5lZWQgdG8gcHJvcGVybHkgc3dhcCBjb2x1bW5zXG4gICAgICBpZiAoZnJvbUluZGV4IDwgdG9JbmRleCkge1xuICAgICAgICBmb3IgKGxldCBpID0gZnJvbUluZGV4OyBpIDwgdG9JbmRleDsgaSsrKSB7XG4gICAgICAgICAgdGhpcy5fc3dhcChpLCBpICsgMSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZnJvbUluZGV4ID4gdG9JbmRleCkge1xuICAgICAgICBmb3IgKGxldCBpID0gZnJvbUluZGV4OyBpID4gdG9JbmRleDsgaS0tKSB7XG4gICAgICAgICAgdGhpcy5fc3dhcChpLCBpIC0gMSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuc2Nyb2xsQ29udGFpbmVyU3R5bGVzICE9IG51bGwpIHtcbiAgICAgICAgICB0aGlzLnNjcm9sbENvbnRhaW5lclN0eWxlc1tcIm92ZXJmbG93LXlcIl0gPSBcImF1dG9cIjtcbiAgICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcbiAgICAgIH1cblxuICAgICAgLy9zb3BoaWEgMTgyMzogZm9yIHNlcnZlciB0cmFja2luZ1xuICAgICAgXy5mb3JFYWNoKHRoaXMuY29sdW1ucywgKGNvbCwgaWR4KT0+e1xuICAgICAgICBjb2wuc2V0QXR0cmlidXRlKFwidmlzdWFsSW5kZXhcIiwgaWR4ICsgXCJcIik7XG4gICAgICB9KTtcblxuICAgICAgaWYgKHRoaXMudmlydHVhbFNjcm9sbCAhPT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLmRldGVjdENoYW5nZXMoKTtcblxuICAgICAgICBzZXRUaW1lb3V0KCgpPT57XG4gICAgICAgICAgdGhpcy5hcHBseVJlc2l6ZUNvbHVtbnMoKTtcbiAgICAgICAgfSwgMjAwKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5jb2x1bW5zSGFzQmVlblN3YXBwZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgcHJpdmF0ZSBfY2xlYW51cENvbFJlc2l6ZSgpIHtcbiAgICAgICAgLy9yZXNldFxuICAgICAgICB0aGlzLiRjb2xSZXNpemFibGUgPSAkKHRoaXMudGFibGUubmF0aXZlRWxlbWVudCkuY29sUmVzaXphYmxlKHtcbiAgICAgICAgICBkaXNhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoYCMke3RoaXMuaWR9IC5KQ0xSZ3JpcHNgKS5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIGFwcGx5UmVzaXplQ29sdW1ucygpIHtcbiAgICAgIGlmICh0aGlzLnRhYmxlICE9IG51bGwgJiYgKHRoaXMuZW5hYmxlQ29sdW1uUmVzaXplID09IG51bGwgfHwgdGhpcy5lbmFibGVDb2x1bW5SZXNpemUgPT09IHRydWUpKSB7XG4gICAgICAgIHRoaXMuX2NsZWFudXBDb2xSZXNpemUoKTtcbiAgICAgICAgdGhpcy4kY29sUmVzaXphYmxlID0gJCh0aGlzLnRhYmxlLm5hdGl2ZUVsZW1lbnQpLmNvbFJlc2l6YWJsZSh7XG4gICAgICAgICAgICBsaXZlRHJhZzogZmFsc2UsIC8vdHVybmluZyB0aGlzIG9uIHdpbGwgaW5jdXJyZWQgYSBzZXZlcmUgcGVyZm9ybWFuY2UgcGVuYWx0eSBvbiBJRSBzbyBsZWF2ZSBpdCBvZmZcbiAgICAgICAgICAgIHJlc2l6ZU1vZGU6ICdvdmVyZmxvdycsXG4gICAgICAgICAgICBwYXJ0aWFsUmVmcmVzaDogdHJ1ZSwgLy9BZnRlciBjbG9zaW5nIHRoZSB3aW5kb3cgYW5kIG9wZW5pbmcgYWdhaW4sIGNvbHVtblJlc2l6ZXIgY2FuJ3Qgd29yay4gVG8gZml4IHRoYXQsIHRoaXMgdmFsdWUgaXMgbmVlZGVkLixcbiAgICAgICAgICAgIGhlYWRlck9ubHk6IHRydWUgLy9hbGxvdyBkcmFnZ2luZyB1c2luZyBoZWFkZXIgb25seVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gd2hldGhlciBvciBub3QgdGhlIGNvbHVtbiBhdCB0aGUgcGFydGljdWxhciBpbmRleCBjYW4gYmUgZHJhZ2dlZC9kcm9wXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29sSWR4XG4gICAgICovXG4gICAgcHJpdmF0ZSBjYW5EcmFnQ29sdW1uKGNvbElkeDogbnVtYmVyKSB7XG4gICAgICAgIGxldCBjYW5EcmFnID0gdHJ1ZTtcblxuICAgICAgICBmb3IgKGxldCBjb2wgb2YgdGhpcy5jb2x1bW5zKSB7XG4gICAgICAgICAgICBpZiAoY29sLm9yaWdpbmFsQ29sdW1uSW5kZXggPT09IGNvbElkeCAmJiBjb2wubG9ja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgY2FuRHJhZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNhbkRyYWc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBpbmRleCBvZiB0aGUgc3VwcHBsaWVkIHJvd1xuICAgICAqXG4gICAgICogQHBhcmFtIGNoaWxkIHJvdyB0byBjaGVjayBmbyByaW5kZXg/XG4gICAgICovXG4gICAgaW5kZXhPZkNoaWxkKGNoaWxkOiBhbnkpOiBudW1iZXIge1xuICAgICAgICBpZiAodGhpcy5ub2RlcyAhPSBudWxsICYmIHRoaXMubm9kZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIF8uZmluZEluZGV4KHRoaXMubm9kZXMsIChub2RlKT0+bm9kZSA9PT0gY2hpbGQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9jaGlsZCBkb2VzIG5vdCBleGlzdHNcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2NoZWNrSW5pdE1vZGlmaWVkVmlydHVhbFJvd3MoKSB7XG4gICAgICBpZiAodGhpcy5tb2RpZmllZFZpcnR1YWxSb3dzID09IG51bGwpIHtcbiAgICAgICAgdGhpcy5tb2RpZmllZFZpcnR1YWxSb3dzID0ge307XG4gICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfY2hlY2tJbml0TW9kaWZpZWRWaXJ0dWFsUm93c0pzb24oKSB7XG4gICAgICBpZiAodGhpcy5tb2RpZmllZFZpcnR1YWxSb3dzSnNvbiA9PSBudWxsKSB7XG4gICAgICAgIHRoaXMubW9kaWZpZWRWaXJ0dWFsUm93c0pzb24gPSB7fTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWZyZXNoIHRoZSB0YWJsZSBzb3J0ZXJcbiAgICAgKi9cbiAgICBwcml2YXRlIHJlZnJlc2hUYWJsZVNvcnRlcigpIHtcbiAgICAgICAgLy9kYXRhIGNoYW5nZXMsIG5lZWQgdG8gdXBkYXRlIHRhYmxlU29ydGVyXG4gICAgICAgIGlmICh0aGlzLl90YWJsZVNvcnRlclJlZnJlc2hUbSAhPSBudWxsKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGFibGVTb3J0ZXJSZWZyZXNoVG0pO1xuICAgICAgICAgICAgdGhpcy5fdGFibGVTb3J0ZXJSZWZyZXNoVG0gPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3RhYmxlU29ydGVyUmVmcmVzaFRtID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RhYmxlU29ydGVyUmVmcmVzaFRtKTtcbiAgICAgICAgICAgICAgICB0aGlzLl90YWJsZVNvcnRlclJlZnJlc2hUbSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy4kdGFibGVzb3J0ZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiR0YWJsZXNvcnRlci50cmlnZ2VyKFwidXBkYXRlXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmFkanVzdFRhYmxlSGVhZCh0aGlzLnByZU1vdXNlRXZlbnQpO1xuICAgICAgICAgICAgfSwgMjAwKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVmcmVzaCBjYWNoZSBkYXRhIChzb3J0IHZhbHVlLCBldGMpXG4gICAgICovXG4gICAgcmVmcmVzaFRhYmxlU29ydGVyQ2FjaGUoKSB7XG4gICAgICAvL2RhdGEgY2hhbmdlcywgbmVlZCB0byB1cGRhdGUgdGFibGVTb3J0ZXJcbiAgICAgIGlmICh0aGlzLl90YWJsZVNvcnRlckNhY2hlUmVmcmVzaFRtICE9IG51bGwpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGFibGVTb3J0ZXJDYWNoZVJlZnJlc2hUbSk7XG4gICAgICAgICAgdGhpcy5fdGFibGVTb3J0ZXJDYWNoZVJlZnJlc2hUbSA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgICAgdGhpcy5fdGFibGVTb3J0ZXJDYWNoZVJlZnJlc2hUbSA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGFibGVTb3J0ZXJDYWNoZVJlZnJlc2hUbSk7XG4gICAgICAgICAgICAgIHRoaXMuX3RhYmxlU29ydGVyQ2FjaGVSZWZyZXNoVG0gPSBudWxsO1xuXG4gICAgICAgICAgICAgIGlmICh0aGlzLiR0YWJsZXNvcnRlciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLiR0YWJsZXNvcnRlci50cmlnZ2VyKFwidXBkYXRlQ2FjaGVcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCAyMDApO1xuICAgICAgfSk7XG4gIH1cblxuICAgIHNldFNlbGVjdEFsbFZpcnR1YWxSb3dzKHNob3VsZFNlbGVjdGVkOiBib29sZWFuKSB7XG4gICAgICAgIGlmIChzaG91bGRTZWxlY3RlZCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhpcy5tb2RpZmllZFZpcnR1YWxSb3dzID0ge307XG4gICAgICAgICAgICB0aGlzLm1vZGlmaWVkVmlydHVhbFJvd3NKc29uID0ge307XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93cyA9IFtdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fY2hlY2tJbml0TW9kaWZpZWRWaXJ0dWFsUm93cygpO1xuICAgICAgICAgICAgdGhpcy5fY2hlY2tJbml0TW9kaWZpZWRWaXJ0dWFsUm93c0pzb24oKTtcblxuICAgICAgICAgICAgY29uc3QgY2hlY2tCb3hlQ29sdW1uSWR4cyA9IFtdO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5ub2RlcyAhPSBudWxsICYmIHRoaXMubm9kZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIC8vZmluZCBhbGwgY2hlY2tib3hlcyBjb2x1bW5zXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5vZGVzWzBdLmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubm9kZXNbMF0uY2hpbGROb2Rlc1tpXS5jb21wb25lbnQgaW5zdGFuY2VvZiBDaGVja2JveENvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tCb3hlQ29sdW1uSWR4cy5wdXNoKGkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL2lmIHRoZXJlIGFyZSBjaGVja2JveGVzLCBjaGVjayB0aGVtXG4gICAgICAgICAgICB0aGlzLmxhc3RTZWxlY3RlZFJvd0luZGV4ID0gMDtcbiAgICAgICAgICAgIGlmIChjaGVja0JveGVDb2x1bW5JZHhzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCByb3cgb2YgdGhpcy5fZGF0YVNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICAvL21ha2Ugc3VyZSByb3cgaXMgbm90IHZpc2libGVcbiAgICAgICAgICAgICAgICAgICAgaWYgKF8uZmluZEluZGV4KHRoaXMubm9kZXMsIChub2RlKT0+e1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vZGVbVGFibGVDb21wb25lbnQuSU5URVJOQUxfVklSVFVBTF9PUklHSU5BTF9JTkRFWF0gPT09IHJvd1tUYWJsZUNvbXBvbmVudC5JTlRFUk5BTF9WSVJUVUFMX09SSUdJTkFMX0lOREVYXTtcbiAgICAgICAgICAgICAgICAgICAgfSkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tb2RpZmllZFZpcnR1YWxSb3dzW3Jvd1tUYWJsZUNvbXBvbmVudC5JTlRFUk5BTF9WSVJUVUFMX09SSUdJTkFMX0lOREVYXV0gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW9kaWZpZWRWaXJ0dWFsUm93c1tyb3dbVGFibGVDb21wb25lbnQuSU5URVJOQUxfVklSVFVBTF9PUklHSU5BTF9JTkRFWF1dID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGNvbElkeCBvZiBjaGVja0JveGVDb2x1bW5JZHhzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RpZmllZFZpcnR1YWxSb3dzW3Jvd1tUYWJsZUNvbXBvbmVudC5JTlRFUk5BTF9WSVJUVUFMX09SSUdJTkFMX0lOREVYXV1bY29sSWR4XSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzLm1vZGlmaWVkVmlydHVhbFJvd3NKc29uIFtdXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMudmlydHVhbFNjcm9sbEludmlzaWJsZVJvd0J1aWxkZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvd0VsZW1lbnQ6IEhUTUxFbGVtZW50V3JhcHBlciA9IHRoaXMudmlydHVhbFNjcm9sbEludmlzaWJsZVJvd0J1aWxkZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2dldE5vbmVBY3RpdmVWaWV3UGFyZW50KCkgfHwgdGhpcy5nZXRQYXJlbnRWaWV3KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dFbGVtZW50LnNldEF0dHJpYnV0ZShcInNlbGVjdGVkXCIsIFwidHJ1ZVwiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW9kaWZpZWRWaXJ0dWFsUm93c0pzb25bcm93W1RhYmxlQ29tcG9uZW50LklOVEVSTkFMX1ZJUlRVQUxfT1JJR0lOQUxfSU5ERVhdXSA9IHJvd0VsZW1lbnQudG9Kc29uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vc2VsZWN0ZWQgdGhlIHJvd1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSb3dzID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93cy5wdXNoKHJvd1tUYWJsZUNvbXBvbmVudC5JTlRFUk5BTF9WSVJUVUFMX09SSUdJTkFMX0lOREVYXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHJlY0NhbGNOb1ZpcnR1YWxSb3coKSB7XG4gICAgICBpZiAodGhpcy52aXJ0dWFsU2Nyb2xsID09PSB0cnVlKSB7XG4gICAgICAgIGxldCBoZWlnaHQgPSAkKHRoaXMudGFibGVDb250YWluZXIubmF0aXZlRWxlbWVudCkuaGVpZ2h0KCk7XG5cbiAgICAgICAgaWYgKHRoaXMudGFibGVIZWFkICE9IG51bGwpIHtcbiAgICAgICAgICB0aGlzLnRoZWFkSGVpZ2h0ID0gJCh0aGlzLnRhYmxlSGVhZC5uYXRpdmVFbGVtZW50KS5oZWlnaHQoKTtcbiAgICAgICAgICBoZWlnaHQgPSBoZWlnaHQgLSB0aGlzLnRoZWFkSGVpZ2h0O1xuXG4gICAgICAgICAgaWYgKHRoaXMuc2tpcFJvd3NBZGp1c3RtZW50ICE9PSB0cnVlKSB7XG4gICAgICAgICAgICB0aGlzLmFkanVzdGVkUm93cyA9IE1hdGgucm91bmQodGhpcy50aGVhZEhlaWdodCAvIHRoaXMucm93SGVpZ2h0KSArIDI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fdmlydHVhbFNjcm9sbFJvd1BlclZpZXcgPSBNYXRoLnJvdW5kKGhlaWdodCAvIHRoaXMucm93SGVpZ2h0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNldEhlYWRlcldpZHRoSGVpZ2h0KCl7Ly9Gb3IgaHR0cHM6Ly9naXRodWIuY29tL3dlYXZlaW8vbmduc29waGlhL2lzc3Vlcy8xNjE4XG4gICAgICAgIGNvbnN0IHRhYmxlID0gdGhpcy50YWJsZS5uYXRpdmVFbGVtZW50O1xuICAgICAgICBjb25zdCB0aGVhZCA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3IoJ3RoZWFkJyk7XG4gICAgICAgIGxldCBoZWFkZXJNYXhIZWlnaHQgPSAwO1xuICAgICAgICB2YXIgaWQgPSB0YWJsZS5pZDtcbiAgICAgICAgaWYgKHRoaXMuY29sdW1ucyAhPSBudWxsKXtcbiAgICAgICAgICAgIGlmKHRoaXMuZm9yY2VGaXhXaWR0aCl7XG4gICAgICAgICAgICAgICAgLy9wbGVhc2UgZG8gbm90IHJlbW92ZWQgb3VyIGNvZGVcbiAgICAgICAgICAgICAgICAvL3RoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy50YWJsZS5uYXRpdmVFbGVtZW50LCBcInRhYmxlLWxheW91dFwiLCBcImZpeGVkXCIpO1xuXG4gICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuY29sdW1ucy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjb2x1bW4gPSB0aGlzLmNvbHVtbnMuZmluZCgoaXRlbSwgaWR4KT0+aWR4ID09PSBpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYoY29sdW1uICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRDaGlsZHJlbiA9IHRoZWFkLnF1ZXJ5U2VsZWN0b3IoJ3RoOm50aC1jaGlsZCgnICsgKGkrMSkgKyAnKScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShoZWFkQ2hpbGRyZW4sIFwid2lkdGhcIiwgYCR7Y29sdW1uLmNvbnRyb2xXaWR0aH1weGApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29sdW1uLmNvbnRyb2xIZWlnaHQgIT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0hlYWRlckF1dG8gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGhlYWRlck1heEhlaWdodCA8IGNvbHVtbi5jb250cm9sSGVpZ2h0KXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyTWF4SGVpZ2h0ID0gTnVtYmVyKGNvbHVtbi5jb250cm9sSGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYodGhpcy5pc0hlYWRlckF1dG8pe1xuICAgICAgICAgICAgICAgICAgICAkKFwiI1wiICsgaWQgKyBcIj5kaXY+ZGl2PnRhYmxlXCIpLnJlbW92ZUNsYXNzKFwiaGVhZGVyLWZpeGVkXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qZWxzZXtcbiAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5jb2x1bW5zLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvbHVtbiA9IHRoaXMuY29sdW1ucy5maW5kKChpdGVtLCBpZHgpPT5pZHggPT09IGkpO1xuICAgICAgICAgICAgICAgICAgICBpZihjb2x1bW4gIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZENoaWxkcmVuID0gdGhlYWQucXVlcnlTZWxlY3RvcigndGg6bnRoLWNoaWxkKCcgKyAoaSsxKSArICcpJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKGhlYWRDaGlsZHJlbiwgXCJtaW4td2lkdGhcIiwgYCR7Y29sdW1uLmNvbnRyb2xXaWR0aH1weGApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSovXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5naG9zdEhlYWRlciAhPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoaGVhZGVyTWF4SGVpZ2h0ID09IDApIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJNYXhIZWlnaHQgPSAzMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLmdob3N0SGVhZGVyLm5hdGl2ZUVsZW1lbnQsIFwiaGVpZ2h0XCIsIGhlYWRlck1heEhlaWdodCArIFwicHhcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXNldCB0YWJsZSBjb2x1bW4gKGluIGNhc2UgaXQgaGFzIGJlZW4gc3dhcHBlZClcbiAgICAgKi9cbiAgICBwcml2YXRlIHJlc2V0VGFibGVDb2x1bW5zKCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdGhpcy5mb3JjZVJlc2V0Q29sdW1ucyA9PT0gdHJ1ZSAmJlxuICAgICAgICAgIHRoaXMuX2lzRHlpbmcgIT09IHRydWUgJiZcbiAgICAgICAgICB0aGlzLmNvbHVtbnMgIT0gbnVsbCAmJlxuICAgICAgICAgIHRoaXMuY29sdW1uc0hhc0JlZW5Td2FwcGVkID09PSB0cnVlXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5jb2x1bW5zSGFzQmVlblN3YXBwZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgY29uc3QgdGVtcCA9IF8uY2xvbmUodGhpcy5jb2x1bW5zKTtcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmhlYWROb2RlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWROb2RlLmNoaWxkTm9kZXMgPSBbXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gXy5zb3J0QnkodGVtcCwgKGNvbDogVGFibGVDb2x1bW5EaXJlY3RpdmUsIGlkeDogbnVtYmVyKT0+e1xuICAgICAgICAgICAgICAgIGNvbC5zZXRBdHRyaWJ1dGUoXCJ2aXN1YWxJbmRleFwiLCBpZHggKyBcIlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sLm9yaWdpbmFsQ29sdW1uSW5kZXg7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICAgICAgdGhpcy5pbml0UGx1Z2lucygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBidWlsZFJvd0lkZW50aXR5KHJvd3M6IEFycmF5PGFueT4pIHtcbiAgICAgICAgLy8gaWYgKHJvd3MgPT0gbnVsbCkgcmV0dXJuIHJvd3M7XG5cbiAgICAgICAgLy8gZm9yIChsZXQgcm93SW5kZXggPSAwOyByb3dJbmRleCA8IHJvd3MubGVuZ3RoOyByb3dJbmRleCsrKSB7XG4gICAgICAgIC8vICAgICByb3dzW3Jvd0luZGV4XVtUYWJsZUNvbXBvbmVudC5JTlRFUk5BTF9ST1dfRElGRkVSX0lEXSA9IEJhc2VDb21wb25lbnQuZ2VuZXJhdGVVbmlxdWVJZChcInJvd19kaWZmZXJcIik7XG4gICAgICAgIC8vICAgICByb3dzW3Jvd0luZGV4XVtUYWJsZUNvbXBvbmVudC5JTlRFUk5BTF9ST1dfSURdID0gdGhpcy5idWlsZFJvd0lkKHJvd3Nbcm93SW5kZXhdLCByb3dJbmRleCk7XG4gICAgICAgIC8vIH1cblxuICAgICAgICByZXR1cm4gcm93cztcbiAgICB9XG5cbiAgICByb3dUcmFja0J5Rm4oaWR4Om51bWJlciwgcm93OiBhbnkpIHtcbiAgICAgICAgcmV0dXJuIHJvd1tUYWJsZUNvbXBvbmVudC5JTlRFUk5BTF9ST1dfRElGRkVSX0lEXTtcbiAgICB9XG5cbiAgICBjb2x1bW5IZWFkZXJUcmFja0J5Rm4oaWR4OiBudW1iZXIsIGNvbHVtbjogVGFibGVDb2x1bW5EaXJlY3RpdmUpIHtcbiAgICAgIHJldHVybiBjb2x1bW5bVGFibGVDb21wb25lbnQuSU5URVJOQUxfQ09MVU1OX0hFQURFUl9JRF07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlZCB2dC1yb3cgYnkgaW5kZXguIFRoaXMgd2lsbCBub3Qgd29ya3MgZm9yIHJvd3MgdGhhdCBhcmUgY3JlYXRlZCBieSBkYXRhU291cmNlXG4gICAgICovXG4gICAgcmVtb3ZlVGFibGVSb3dCeUluZGV4KGluZGV4OiBudW1iZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuX3RhYmxlUm93ICE9IG51bGwgJiYgdGhpcy5fdGFibGVSb3cubGVuZ3RoID4gaW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMuX3RhYmxlUm93ID0gXy5maWx0ZXIodGhpcy5fdGFibGVSb3csIChyb3csIHJvd0luZGV4KT0+e1xuICAgICAgICAgICAgICAgIHJldHVybiByb3dJbmRleCAhPT0gaW5kZXg7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5jbGVhblVwQ2hpbGROb2RlcygpO1xuICAgICAgICAgICAgdGhpcy5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVkIHZ0LXJvdyBieSBpZC4gVGhpcyB3aWxsIG5vdCB3b3JrcyBmb3Igcm93cyB0aGF0IGFyZSBjcmVhdGVkIGJ5IGRhdGFTb3VyY2VcbiAgICAgKi9cbiAgICByZW1vdmVUYWJsZVJvd0J5SWQoaWQ6IHN0cmluZykge1xuICAgICAgICBpZiAodGhpcy5fdGFibGVSb3cgIT0gbnVsbCAmJiB0aGlzLl90YWJsZVJvdy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLl90YWJsZVJvdyA9IF8uZmlsdGVyKHRoaXMuX3RhYmxlUm93LCAocm93KT0+e1xuICAgICAgICAgICAgICAgIHJldHVybiByb3cuaWQgIT09IGlkO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuY2xlYW5VcENoaWxkTm9kZXMoKTtcbiAgICAgICAgICAgIHRoaXMuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB0b0NvbHVtbnMoY29sdW1uczogUXVlcnlMaXN0PFRhYmxlQ29sdW1uRGlyZWN0aXZlPik6IEFycmF5PFRhYmxlQ29sdW1uRGlyZWN0aXZlPiB7XG4gICAgICByZXR1cm4gY29sdW1ucy5tYXAoKGNvbCwgaWR4KT0+e1xuICAgICAgICBjb2xbVGFibGVDb21wb25lbnQuSU5URVJOQUxfQ09MVU1OX0hFQURFUl9JRF0gPSBCYXNlQ29tcG9uZW50LmdlbmVyYXRlVW5pcXVlSWQoXCJoY1wiKTtcbiAgICAgICAgY29sLnNldEF0dHJpYnV0ZShcInZpc3VhbEluZGV4XCIsIGlkeCArICcnKTtcbiAgICAgICAgcmV0dXJuIGNvbDtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgdG9XaG9sZU51bWJlcih3aWR0aDogc3RyaW5nKTogbnVtYmVyIHtcbiAgICAgIHJldHVybiBwYXJzZUludCh3aWR0aCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjaGVja1Nob3dCbGFua1JvdygpIHtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5kYXRhU291cmNlID09IG51bGwgfHxcbiAgICAgICAgdGhpcy5kYXRhU291cmNlLmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICAodGhpcy50YWJsZUNvbnRhaW5lci5uYXRpdmVFbGVtZW50IGFzIEhUTUxFbGVtZW50KS5zY3JvbGxIZWlnaHQgPiAodGhpcy50YWJsZUNvbnRhaW5lci5uYXRpdmVFbGVtZW50IGFzIEhUTUxFbGVtZW50KS5jbGllbnRIZWlnaHRcbiAgICAgICkge1xuICAgICAgICB0aGlzLnNob3dCbGFua1JvdyA9IGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zaG93QmxhbmtSb3cgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJlbW92ZUZyb21UYWJsZVJvdyh3aHR2cjpzdHJpbmcpIHtcbiAgICAvLyAgIC8vbm8gaWRlYSB3aGF0IHRoaXMgZm9yXG4gICAgLy8gfVxuXG4gICAgLy8gcHJpdmF0ZSBhcHBlbmRIZWFkZXJUb0Zha2VUYWJsZSgpIHtcbiAgICAvLyAgIGlmICh0aGlzLmlzSGVhZGVyQXBwZW5kVG9GYWtlVGFibGUgIT09IHRydWUpIHtcbiAgICAvLyAgICAgdGhpcy5mYWtlVGFibGUubmF0aXZlRWxlbWVudC5hcHBlbmRDaGlsZCgkKHRoaXMudGFibGVIZWFkLm5hdGl2ZUVsZW1lbnQpLmNsb25lKClbMF0pO1xuICAgIC8vICAgICB0aGlzLmlzSGVhZGVyQXBwZW5kVG9GYWtlVGFibGUgPSB0cnVlO1xuICAgIC8vICAgfVxuICAgIC8vIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgcm93IGZyb20gdGFibGVSb3dzIGJ5IGlkLiBubyBkZXRlY3QgY2hhbmdlXG4gICAgICogQHBhcmFtIGlkIHJvdyBlbGVtZW50IGlkXG4gICAgICovXG4gICAgcmVtb3ZlRnJvbVRhYmxlUm93KGlkOiBzdHJpbmcpe1xuICAgICAgY29uc3QgaSA9IHRoaXMudGFibGVSb3cuZmluZEluZGV4KHI9PnIuaWQgPT09IGlkKTtcbiAgICAgIHRoaXMudGFibGVSb3cuc3BsaWNlKGksIDEpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IERpcmVjdGl2ZSwgQ29udGVudENoaWxkLCBmb3J3YXJkUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBUYWJsZUNvbHVtbkRpcmVjdGl2ZSB9IGZyb20gJy4vdGFibGUtY29sdW1uLmRpcmVjdGl2ZSc7XG5cbkBEaXJlY3RpdmUoe1xuICBzZWxlY3RvcjogJ3Z0LWxvY2tlZC1jb2x1bW4nLFxuICBwcm92aWRlcnM6IFtcbiAgICB7XG4gICAgICBwcm92aWRlOiBUYWJsZUNvbHVtbkRpcmVjdGl2ZSxcbiAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpPT5Mb2NrZWRDb2x1bW5EaXJlY3RpdmUpXG4gICAgfVxuICBdXG59KVxuLyoqXG4gKiBKdXN0IGFsaWFzaW5nIHZ0LXRhYmxlLWNvbHVtbiBmb3IgbG9ja2VkIGNvbHVtblxuICovXG5leHBvcnQgY2xhc3MgTG9ja2VkQ29sdW1uRGlyZWN0aXZlIGV4dGVuZHMgVGFibGVDb2x1bW5EaXJlY3RpdmUge1xuICBuZ09uSW5pdCgpIHtcbiAgICBzdXBlci5uZ09uSW5pdCgpO1xuXG4gICAgdGhpcy5sb2NrZWQgPSB0cnVlO1xuICB9XG59XG4iLCJpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IENsaXBib2FyZFNlcnZpY2UgfSBmcm9tICcuL2NsaXBib2FyZC5zZXJ2aWNlJztcblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogW1xuICAgIENvbW1vbk1vZHVsZVxuICBdLFxuICBkZWNsYXJhdGlvbnM6IFtdLFxuICBwcm92aWRlcnM6IFtcbiAgICBDbGlwYm9hcmRTZXJ2aWNlXG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgQ2xpcGJvYXJkTW9kdWxlIHsgfVxuIiwiaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBUYWJsZUNvbXBvbmVudCB9IGZyb20gJy4vdGFibGUuY29tcG9uZW50JztcbmltcG9ydCB7IFRhYmxlQ2VsbERpcmVjdGl2ZSB9IGZyb20gJy4vdGFibGUtY2VsbC5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgVGFibGVIZWFkZXJEaXJlY3RpdmUgfSBmcm9tICcuL3RhYmxlLWhlYWRlci5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgVGFibGVDb2x1bW5EaXJlY3RpdmUgfSBmcm9tICcuL3RhYmxlLWNvbHVtbi5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgSGVhZGVyRGlyZWN0aXZlIH0gZnJvbSAnLi9oZWFkZXIuZGlyZWN0aXZlJztcbmltcG9ydCB7IExvY2tlZENvbHVtbkRpcmVjdGl2ZSB9IGZyb20gJy4vbG9ja2VkLWNvbHVtbi5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgQmFzZU1vZHVsZSB9IGZyb20gJy4uL2Jhc2UvYmFzZS5tb2R1bGUnO1xuaW1wb3J0IHsgVGFibGVSb3dEZWZEaXJlY3RpdmUgfSBmcm9tICcuL3RhYmxlLXJvdy1kZWYuZGlyZWN0aXZlJztcbmltcG9ydCB7IEZvb3RlclJvd0RpcmVjdGl2ZSB9IGZyb20gJy4vZm9vdGVyLXJvdy5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgUm93RGlyZWN0aXZlIH0gZnJvbSAnLi9yb3cuZGlyZWN0aXZlJztcbmltcG9ydCB7IENsaXBib2FyZE1vZHVsZSB9IGZyb20gJy4uL2NsaXBib2FyZC9jbGlwYm9hcmQubW9kdWxlJztcblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogW1xuICAgIENvbW1vbk1vZHVsZSxcbiAgICBCYXNlTW9kdWxlLFxuICAgIENsaXBib2FyZE1vZHVsZVxuICBdLFxuICBkZWNsYXJhdGlvbnM6IFtcbiAgICBUYWJsZUNvbXBvbmVudCxcbiAgICBUYWJsZUNlbGxEaXJlY3RpdmUsXG4gICAgVGFibGVDb2x1bW5EaXJlY3RpdmUsXG4gICAgVGFibGVIZWFkZXJEaXJlY3RpdmUsXG4gICAgSGVhZGVyRGlyZWN0aXZlLFxuICAgIExvY2tlZENvbHVtbkRpcmVjdGl2ZSxcbiAgICBUYWJsZVJvd0RlZkRpcmVjdGl2ZSxcbiAgICBGb290ZXJSb3dEaXJlY3RpdmUsXG4gICAgUm93RGlyZWN0aXZlXG4gIF0sXG4gIGV4cG9ydHM6IFtcbiAgICBUYWJsZUNvbXBvbmVudCxcbiAgICBUYWJsZUNlbGxEaXJlY3RpdmUsXG4gICAgVGFibGVDb2x1bW5EaXJlY3RpdmUgLFxuICAgIFRhYmxlSGVhZGVyRGlyZWN0aXZlLFxuICAgIEhlYWRlckRpcmVjdGl2ZSxcbiAgICBMb2NrZWRDb2x1bW5EaXJlY3RpdmUsXG4gICAgVGFibGVSb3dEZWZEaXJlY3RpdmUsXG4gICAgRm9vdGVyUm93RGlyZWN0aXZlLFxuICAgIFJvd0RpcmVjdGl2ZVxuICBdXG59KVxuZXhwb3J0IGNsYXNzIFRhYmxlTW9kdWxlIHsgfVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIEVsZW1lbnRSZWYsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE91dHB1dCwgVmlld0NoaWxkLCBUZW1wbGF0ZVJlZiwgT3B0aW9uYWwsIFNraXBTZWxmLCBSZW5kZXJlcjIsIENvbnRlbnRDaGlsZCwgVmlld0NvbnRhaW5lclJlZiwgZm9yd2FyZFJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQmFzZUNvbXBvbmVudCB9IGZyb20gJy4uLy4uL2Jhc2UvYmFzZS5jb21wb25lbnQnO1xuaW1wb3J0IHsgU2Vzc2lvblNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXNzaW9uL3Nlc3Npb24uc2VydmljZSc7XG5cbi8qKlxuICogQ2xhc3MgZm9yIHRhYiBjb21wb25lbnRcbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAndnQtdGFiJyxcbiAgdGVtcGxhdGVVcmw6ICcuL3RhYi5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL3RhYi5jb21wb25lbnQuY3NzJ10sXG4gIHByb3ZpZGVyczogW1xuICAgIHtcbiAgICAgIHByb3ZpZGU6IEJhc2VDb21wb25lbnQsXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKT0+VGFiQ29tcG9uZW50KVxuICAgIH1cbiAgXVxufSlcbmV4cG9ydCBjbGFzcyBUYWJDb21wb25lbnQgZXh0ZW5kcyBCYXNlQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgLy8gU2V0cyBhY3RpdmUgdGFiIGNsYXNzXG4gIEBJbnB1dCgpIGFjdGl2ZTogYm9vbGVhbjtcbiAgQElucHV0KCkgaWQ6IHN0cmluZztcblxuICBAT3V0cHV0KCkgb25Db21tYW5kID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIEBWaWV3Q2hpbGQoVGVtcGxhdGVSZWYpIGNvbnRlbnQ6IFRlbXBsYXRlUmVmPGFueT47XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSBwYXJlbnQgc2VlIFtbQmFzZUNvbXBvbmVudF1dIGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSBzZXNzaW9uU2VydmljZSBzZWUgW1tCYXNlQ29tcG9uZW50XV0gY29uc3RydWN0b3JcbiAgICogQHBhcmFtIGVsZW1lbnRSZWYgc2VlIFtbQmFzZUNvbXBvbmVudF1dIGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSByZW5kZXJlciBzZWUgW1tCYXNlQ29tcG9uZW50XV0gY29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKEBPcHRpb25hbCgpIEBTa2lwU2VsZigpIHBhcmVudDogQmFzZUNvbXBvbmVudCwgc2Vzc2lvblNlcnZpY2U6IFNlc3Npb25TZXJ2aWNlLCBlbGVtZW50UmVmOiBFbGVtZW50UmVmLCByZW5kZXJlcjogUmVuZGVyZXIyKSB7XG4gICAgc3VwZXIocGFyZW50LCBzZXNzaW9uU2VydmljZSwgZWxlbWVudFJlZiwgcmVuZGVyZXIpO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSBjaGlsZCBUYWIgY2hpbGQgY29tcG9uZW50IHRvIGFkZFxuICAgKi9cbiAgcHJvdGVjdGVkIGFkZENoaWxkKGNoaWxkOiBCYXNlQ29tcG9uZW50KSB7XG4gICAgKHRoaXMucGFyZW50IGFzIGFueSkuYWRkQ2hpbGQoY2hpbGQpO1xuXG4gICAgaWYgKHRoaXMudGFiQ2hpbGRyZW5JZHMgPT0gbnVsbCkge1xuICAgICAgdGhpcy50YWJDaGlsZHJlbklkcyA9IFtdO1xuICAgIH1cblxuICAgIHRoaXMudGFiQ2hpbGRyZW5JZHMucHVzaChjaGlsZC5nZXRJZCgpKTtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBBZnRlciB2aWV3IGluaXQgbGlmZWN5Y2xlXG4gICAqL1xuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgc3VwZXIubmdBZnRlclZpZXdJbml0KCk7XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogR2V0IEpTT04gcmVwcmVzZW50YXRpb24gb2YgdGhpcyBjb21wb25lbnRcbiAgICogQHJldHVybnMgT2JqZWN0IEpTT04gbWV0YWRhdGEgYWJvdXQgdGhpcyBjb21wb25lbnRcbiAgICovXG4gIHRvSnNvbigpIHtcbiAgICBjb25zdCBqc29uOiBhbnkgPSBzdXBlci50b0pzb24oKTtcbiAgICB0aGlzLnNldEpzb24oanNvbiwgXCJhY3RpdmVcIiwgdGhpcy5mb2N1c2VkKTtcblxuICAgIHJldHVybiBqc29uO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIEdldCBOZXhhV2ViIGNvbXBvbmVudCB0YWcgbmFtZVxuICAgKi9cbiAgcHJvdGVjdGVkIGdldE54VGFnTmFtZSgpIHtcbiAgICByZXR1cm4gXCJ0YWJcIjtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBFdmVudCBoYW5kbGVyIGZvciBjbGljayBldmVudFxuICAgKiBAZXZlbnQgb25Db21tYW5kXG4gICAqL1xuICBvbkNsaWNrKCkge1xuICAgIHRoaXMub25Db21tYW5kLmVtaXQodGhpcy5pZCk7XG4gICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIEZvY3VzIHRoaXMgdGFiXG4gICAqL1xuICBzZXRGb2N1cygpIHtcbiAgICBjb25zdCBwYXJlbnQgPSB0aGlzLmdldFBhcmVudCgpO1xuXG4gICAgaWYgKHBhcmVudCAhPSBudWxsICYmIHR5cGVvZiBwYXJlbnRbXCJzZXRTZWxlY3RlZFRhYlwiXSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBwYXJlbnRbXCJzZXRTZWxlY3RlZFRhYlwiXSh0aGlzLmlkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3VwZXIuc2V0Rm9jdXMoKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIENvbXBvbmVudCxcbiAgRWxlbWVudFJlZixcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENvbnRlbnRDaGlsZHJlbixcbiAgVmlld0NoaWxkLFxuICBWaWV3Q2hpbGRyZW4sXG4gIFZpZXdDb250YWluZXJSZWYsXG4gIFF1ZXJ5TGlzdCxcbiAgU2tpcFNlbGYsXG4gIE9wdGlvbmFsLFxuICBFdmVudEVtaXR0ZXIsXG4gIE91dHB1dCxcbiAgSW5wdXQsXG4gIENoYW5nZURldGVjdG9yUmVmLFxuICBSZW5kZXJlcjIsXG4gIGZvcndhcmRSZWYsXG4gIENvbnRlbnRDaGlsZFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEJhc2VDb21wb25lbnQgfSBmcm9tICcuLi9iYXNlL2Jhc2UuY29tcG9uZW50JztcbmltcG9ydCB7IFNlc3Npb25TZXJ2aWNlIH0gZnJvbSAnLi4vc2Vzc2lvbi9zZXNzaW9uLnNlcnZpY2UnO1xuaW1wb3J0IHsgVGFiQ29tcG9uZW50IH0gZnJvbSAnLi90YWIvdGFiLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBUYWJFdmVudCB9IGZyb20gJy4vdGFiLWV2ZW50JztcblxuaW1wb3J0ICogYXMgXyBmcm9tIFwibG9kYXNoXCI7XG5cbnR5cGUgVGFiUGxhY2VtZW50ID0gXCJsZWZ0XCIgfCBcInRvcFwiIHwgXCJib3R0b21cIiB8IFwicmlnaHRcIjtcblxuLyoqXG4gKiBDbGFzcyBmb3IgdGFiIHBhbmUgY29udGFpbmVyIGNvbXBvbmVudFxuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICd2dC10YWItcGFuZScsXG4gIHRlbXBsYXRlVXJsOiAnLi90YWItcGFuZS5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL3RhYi1wYW5lLmNvbXBvbmVudC5jc3MnXSxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gIHByb3ZpZGVyczogW1xuICAgIHtcbiAgICAgIHByb3ZpZGU6IEJhc2VDb21wb25lbnQsXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKT0+VGFiUGFuZUNvbXBvbmVudClcbiAgICB9XG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgVGFiUGFuZUNvbXBvbmVudCBleHRlbmRzIEJhc2VDb21wb25lbnQge1xuICBASW5wdXQoKSB0YWJQbGFjZW1lbnQ6IFRhYlBsYWNlbWVudCA9IFwidG9wXCI7XG4gIEBDb250ZW50Q2hpbGRyZW4oVGFiQ29tcG9uZW50KSBzZXQgdGFic0xpc3QodGFiTGlzdDogUXVlcnlMaXN0PFRhYkNvbXBvbmVudD4pIHtcbiAgICB0aGlzLnRhYnMgPSB0YWJMaXN0LnRvQXJyYXkoKTtcbiAgfVxuICBAVmlld0NoaWxkcmVuKCd0YWJOYXZJdGVtJykgdGFiTmF2SXRlbXM6IEFycmF5PEVsZW1lbnRSZWY+O1xuXG4gIEBPdXRwdXQoKSBvbkNsaWNrOiBFdmVudEVtaXR0ZXI8VGFiRXZlbnQ+ID0gbmV3IEV2ZW50RW1pdHRlcjxUYWJFdmVudD4oKTtcblxuICBzZWxlY3RlZFRhYkluZGV4OiBudW1iZXIgPSAwO1xuICBmb2N1c2VkVGFiSW5kZXg6IG51bWJlciA9IDA7XG4gIHRhYnM6IEFycmF5PFRhYkNvbXBvbmVudD4gPSBbXTtcblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHBhcmVudCBzZWUgW1tCYXNlQ29tcG9uZW50XV0gY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHNlc3Npb25TZXJ2aWNlIHNlZSBbW0Jhc2VDb21wb25lbnRdXSBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0gZWxlbWVudFJlZiBzZWUgW1tCYXNlQ29tcG9uZW50XV0gY29uc3RydWN0b3JcbiAgICogQHBhcmFtIGNkIEluamVjdCBjaGFuZ2UgZGV0ZWN0b3JcbiAgICogQHBhcmFtIHJlbmRlcmVyIHNlZSBbW0Jhc2VDb21wb25lbnRdXSBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgQE9wdGlvbmFsKCkgQFNraXBTZWxmKCkgcGFyZW50OiBCYXNlQ29tcG9uZW50LFxuICAgIHNlc3Npb25TZXJ2aWNlOiBTZXNzaW9uU2VydmljZSxcbiAgICBlbGVtZW50UmVmOiBFbGVtZW50UmVmLFxuICAgIHByaXZhdGUgY2Q6IENoYW5nZURldGVjdG9yUmVmLFxuICAgIHJlbmRlcmVyOiBSZW5kZXJlcjJcbiAgKSB7XG4gICAgc3VwZXIocGFyZW50LCBzZXNzaW9uU2VydmljZSwgZWxlbWVudFJlZiwgcmVuZGVyZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFmdGVyIHZpZXcgaW5pdCBsaWZlY3ljbGUuIFNldCB1cCB0YWJzIGFuZCB0cmlnZ2VyIGNoYW5nZSBkZXRlY3RvclxuICAgKi9cbiAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgIHN1cGVyLm5nQWZ0ZXJWaWV3SW5pdCgpO1xuXG4gICAgdGhpcy5jb25maWd1cmVUYWJzKCk7XG4gICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogU2V0IHRoZSBbW3NlbGVjdGVkVGFiSW5kZXhdXSB0byBpbmRleCBvZiBhY3RpdmUgdGFiXG4gICAqL1xuICBwcml2YXRlIGNvbmZpZ3VyZVRhYnMoKSB7XG4gICAgXy5mb3JFYWNoKHRoaXMudGFicywgKHRhYiwgaW5kZXgpPT57XG4gICAgICBpZiAodGFiLmFjdGl2ZSA9PT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLnNlbGVjdGVkVGFiSW5kZXggPSBpbmRleDtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBFdmVudCBoYW5kbGVyIGZvciB3aGVuIHRhYiBpcyBzZWxlY3RlZFxuICAgKiBAcGFyYW0gZXZlbnRcbiAgICogQHBhcmFtIGluZGV4IEluZGV4IG9mIHRhYiB0byBzZWxlY3RcbiAgICogQHBhcmFtIHRhYklkXG4gICAqIEBldmVudCBvbkNvbW1hbmRcbiAgICovXG4gIGhhbmRsZVNlbGVjdFRhYihldmVudDogRXZlbnQsIGluZGV4OiBudW1iZXIsIHRhYklkOiBzdHJpbmcpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMuc2V0Rm9jdXNlZFRhYihpbmRleCk7XG4gICAgdGhpcy5zZWxlY3RlZFRhYkluZGV4ID0gaW5kZXg7XG4gICAgLy8gdGhpcy5vbkNsaWNrLmVtaXQoe1xuICAgIC8vICAgdGFiSWQ6IHRhYklkLFxuICAgIC8vICAgdGFiSW5kZXg6IGluZGV4XG4gICAgLy8gfSk7XG4gICAgdGhpcy5zZWxlY3RlZFRhYi5vbkNvbW1hbmQuZW1pdCh0YWJJZCk7XG4gICAgdGhpcy5tYXJrRm9yQ2hlY2soKTtcblxuICAgIGNvbnN0IHBhcmVudFZpZXcgPSB0aGlzLmdldFBhcmVudFZpZXcoKTtcblxuICAgIGlmIChwYXJlbnRWaWV3ICE9IG51bGwpIHtcbiAgICAgIHBhcmVudFZpZXcucmVzZXRBbGxTY3JvbGxQYW5lc1Bvc2l0aW9uVG9QcmV2aW91cygpO1xuICAgIH1cbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBFdmVudCBoYW5kbGVyIGZvciBrZXlkb3duIGV2ZW50LiBBcnJvdyBrZXlzIHVzZWQgZm9yIG5hdmlnYXRpb25cbiAgICogQHBhcmFtIGUgS2V5IGV2ZW50XG4gICAqL1xuICBoYW5kbGVLZXlkb3duKGU6IEtleWJvYXJkRXZlbnQpIHtcbiAgICBpZiAoIWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuY2xhc3NOYW1lLmluY2x1ZGVzKFwiY29tYm9ib3gtaW5wdXQtYm94XCIpICYmICFkb2N1bWVudC5hY3RpdmVFbGVtZW50LmNsYXNzTmFtZS5pbmNsdWRlcyhcImRyb3Bkb3duLWl0ZW1cIikpIHtcbiAgICAgIC8qIEFsbG93IHRhYiBuYXZpZ2F0aW9uIHZpYSBhcnJvdyBrZXlzOiBodHRwczovL2dpdGh1Yi5jb20vd2VhdmVpby9uZ25zb3BoaWEvaXNzdWVzLzE0NjUgKi9cbiAgICAgIGNvbnN0IFVQX0tFWV9DT0RFID0gMzg7XG4gICAgICBjb25zdCBET1dOX0tFWV9DT0RFID0gNDA7XG4gICAgICBjb25zdCBFTlRFUl9LRVlfQ09ERSA9IDEzO1xuICAgICAgY29uc3Qga2V5UHJlc3NlZCA9IGUud2hpY2g7XG4gIFxuICAgICAgLy8gSWdub3JlIGFsbCBrZXlzIGV4Y2VwdCB1cC9kb3duIG9yIEVOVEVSXG4gICAgICBjb25zdCBuYXZpZ2F0aW9uS2V5cyA9IFtVUF9LRVlfQ09ERSwgRE9XTl9LRVlfQ09ERSwgRU5URVJfS0VZX0NPREVdO1xuICAgICAgaWYgKG5hdmlnYXRpb25LZXlzLmluZGV4T2Yoa2V5UHJlc3NlZCkgPT09IC0xKSByZXR1cm47XG4gIFxuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgXG4gICAgICBsZXQgbmV3SW5kZXg6IG51bWJlcjtcbiAgXG4gICAgICBpZihrZXlQcmVzc2VkID09PSBET1dOX0tFWV9DT0RFICYmIHRoaXMuZm9jdXNlZFRhYkluZGV4IDwgdGhpcy50YWJzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgbmV3SW5kZXggPSB0aGlzLmZvY3VzZWRUYWJJbmRleCArIDE7XG4gICAgICB9IGVsc2UgaWYoa2V5UHJlc3NlZCA9PT0gVVBfS0VZX0NPREUgJiYgdGhpcy5mb2N1c2VkVGFiSW5kZXggPiAwKSB7XG4gICAgICAgIG5ld0luZGV4ID0gdGhpcy5mb2N1c2VkVGFiSW5kZXggLSAxO1xuICAgICAgfSBlbHNlIGlmIChrZXlQcmVzc2VkID09PSBFTlRFUl9LRVlfQ09ERSkge1xuICAgICAgICB0aGlzLnNldFNlbGVjdGVkVGFiKHRoaXMuZm9jdXNlZFRhYkluZGV4KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld0luZGV4ID0gdGhpcy5mb2N1c2VkVGFiSW5kZXg7XG4gICAgICB9XG4gICAgICB0aGlzLnNldEZvY3VzZWRUYWIobmV3SW5kZXgpO1xuICAgIH1cbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBGb2N1cyBhIHRhYiBieSBpdCdzIGluZGV4IHBvc2l0aW9uXG4gICAqIEBwYXJhbSBpbmRleCBJbmRleCBvZiB0YWIgdG8gZm9jdXNcbiAgICovXG4gIHNldEZvY3VzZWRUYWIoaW5kZXg6IG51bWJlcikge1xuICAgIHRoaXMuZm9jdXNlZFRhYkluZGV4ID0gaW5kZXg7XG4gICAgY29uc3QgdGFiSXRlbSA9IHRoaXMudGFiTmF2SXRlbXMuZmluZCgoaXRlbSwgaSk9PiB7XG4gICAgICByZXR1cm4gaSA9PT0gaW5kZXg7XG4gICAgfSk7XG5cbiAgICBpZiAodGFiSXRlbSkge1xuICAgICAgc2V0VGltZW91dCgoKT0+e1xuICAgICAgICB0YWJJdGVtLm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgIH0sIDApO1xuICAgIH1cbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBTZXQgc2VsZWN0ZWQgdGFiIGJ5IGluZGV4IG9yIGlkXG4gICAqIEBwYXJhbSBpbmRleCBJbmRleCBvciBJZCBvZiBbW1RhYkNvbXBvbmVudF1dIHRvIHNlbGVjdFxuICAgKi9cbiAgc2V0U2VsZWN0ZWRUYWIoaW5kZXg6IG51bWJlciB8IHN0cmluZykge1xuICAgIGlmICh0eXBlb2YgaW5kZXggPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRUYWJJbmRleCA9IGluZGV4O1xuICAgIH0gZWxzZSB7XG4gICAgICAvL3NlbGVjdGVkIHRhYiBieSBuYW1lP1xuICAgICAgY29uc3QgdGVtcEluZGV4ID0gXy5maW5kSW5kZXgodGhpcy50YWJzLCAodGFiOiBUYWJDb21wb25lbnQpPT50YWIuaWQgPT09IGluZGV4KTtcblxuICAgICAgaWYgKHRlbXBJbmRleCA+PSAwKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRUYWJJbmRleCA9IHRlbXBJbmRleDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLm1hcmtGb3JDaGVjaygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgc2VsZWN0ZWQgW1tUYWJDb21wb25lbnRdXVxuICAgKiBAcmV0dXJucyBUYWIgdGhhdCBpcyBzZWxlY3RlZFxuICAgKi9cbiAgZ2V0IHNlbGVjdGVkVGFiKCk6IFRhYkNvbXBvbmVudCB7XG4gICAgcmV0dXJuIHRoaXMudGFicy5maW5kKChpdGVtLCBpbmRleCk9PmluZGV4ID09PSB0aGlzLnNlbGVjdGVkVGFiSW5kZXgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBOZXhhV2ViIHRhZyBuYW1lXG4gICAqIEByZXR1cm5zIE5hbWUgb2YgdGFnXG4gICAqL1xuICBwcm90ZWN0ZWQgZ2V0TnhUYWdOYW1lKCkge1xuICAgIHJldHVybiBcInRhYlBhbmVcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgW1tjZF1dIChDaGFuZ2VEZXRlY3RvcikgbWVtYmVyXG4gICAqL1xuICBnZXRDaGFuZ2VEZXRlY3RvcigpIHtcbiAgICByZXR1cm4gdGhpcy5jZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSB0YWIgY2hpbGQgZnJvbSB0aGUgcGFuZVxuICAgKiBAcGFyYW0gY2hpbGQgVGFiIHRvIHJlbW92ZVxuICAgKi9cbiAgcmVtb3ZlQ2hpbGQoY2hpbGQ6IFRhYkNvbXBvbmVudCkge1xuICAgIHN1cGVyLnJlbW92ZUNoaWxkKGNoaWxkKTtcbiAgICB0aGlzLnRhYnMgPSBfLmZpbHRlcih0aGlzLnRhYnMsICh0YWIpPT50YWIuaWQgIT09IGNoaWxkLmlkKTtcbiAgICB0aGlzLmNkLm1hcmtGb3JDaGVjaygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgY29tcG9uZW50XG4gICAqIEByZXR1cm5zIE9iamVjdCBKU09OIG1ldGFkYXRhXG4gICAqL1xuICB0b0pzb24oKSB7XG4gICAgY29uc3QganNvbiA9IHN1cGVyLnRvSnNvbigpO1xuICAgIGpzb25bXCJzZWxlY3RlZFRhYkluZGV4XCJdID0gdGhpcy5zZWxlY3RlZFRhYkluZGV4O1xuXG4gICAgcmV0dXJuIGpzb247XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhpcyBpcyBhIGNvbnRhaW5lciBjb21wb25lbnRcbiAgICogQHJldHVybnMgVHJ1ZVxuICAgKi9cbiAgcHJvdGVjdGVkIGlzQ29udGFpbmVyKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG4iLCJpbXBvcnQgeyBEaXJlY3RpdmUsIFZpZXdDb250YWluZXJSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiAnW3Z0LXRhYi1ob3N0XSdcbn0pXG5leHBvcnQgY2xhc3MgVGFiSG9zdERpcmVjdGl2ZSB7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIHZpZXdDb250YWluZXJSZWY6IFZpZXdDb250YWluZXJSZWZcbiAgKSB7IH1cblxufVxuIiwiaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBUYWJQYW5lQ29tcG9uZW50IH0gZnJvbSAnLi90YWItcGFuZS5jb21wb25lbnQnO1xuaW1wb3J0IHsgVGFiQ29tcG9uZW50IH0gZnJvbSAnLi90YWIvdGFiLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBUYWJIb3N0RGlyZWN0aXZlIH0gZnJvbSAnLi90YWIvdGFiLWhvc3QuZGlyZWN0aXZlJztcblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogW1xuICAgIENvbW1vbk1vZHVsZVxuICBdLFxuICBkZWNsYXJhdGlvbnM6IFtUYWJQYW5lQ29tcG9uZW50LCBUYWJDb21wb25lbnQsIFRhYkhvc3REaXJlY3RpdmVdLFxuICBleHBvcnRzOiBbVGFiQ29tcG9uZW50LCBUYWJQYW5lQ29tcG9uZW50LCBUYWJIb3N0RGlyZWN0aXZlXVxufSlcbmV4cG9ydCBjbGFzcyBUYWJQYW5lTW9kdWxlIHsgfVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT25Jbml0LCBPdXRwdXQsIEVsZW1lbnRSZWYsIEV2ZW50RW1pdHRlciwgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIFNraXBTZWxmLCBPcHRpb25hbCwgQ2hhbmdlRGV0ZWN0b3JSZWYsIGZvcndhcmRSZWYsIFJlbmRlcmVyMiwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBCYXNlQ29tcG9uZW50IH0gZnJvbSAnLi4vYmFzZS9iYXNlLmNvbXBvbmVudCc7XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuaW1wb3J0IHsgU2Vzc2lvblNlcnZpY2UgfSBmcm9tICcuLi9zZXNzaW9uL3Nlc3Npb24uc2VydmljZSc7XG5cbi8qKlxuICogQ2xhc3MgZm9yIHRleHRhcmVhIGNvbXBvbmVudFxuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICd2dC10ZXh0LWFyZWEnLFxuICB0ZW1wbGF0ZVVybDogJy4vdGV4dC1hcmVhLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vdGV4dC1hcmVhLmNvbXBvbmVudC5jc3MnXSxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gIHByb3ZpZGVyczogW1xuICAgIHtcbiAgICAgIHByb3ZpZGU6IEJhc2VDb21wb25lbnQsXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKT0+VGV4dEFyZWFDb21wb25lbnQpXG4gICAgfVxuICBdXG59KVxuZXhwb3J0IGNsYXNzIFRleHRBcmVhQ29tcG9uZW50IGV4dGVuZHMgQmFzZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIHN0YXRpYyByZWFkb25seSBNQVhfTEVOR1RIOiBudW1iZXIgPSA5OTk5O1xuICBwcml2YXRlIF9tYXhMZW5ndGg6IG51bWJlciA9IFRleHRBcmVhQ29tcG9uZW50Lk1BWF9MRU5HVEg7XG5cbiAgQElucHV0KCkgc2V0IG1heExlbmd0aChtYXg6IG51bWJlcikge1xuICAgIHRoaXMuX21heExlbmd0aCA9IG1heDtcbiAgfVxuICBASW5wdXQoKSBzZXQgZWRpdGFibGUodmFsOiBzdHJpbmcgfCBib29sZWFuKSB7XG4gICAgdGhpcy5fZWRpdGFibGUgPSB2YWw7XG4gIH1cblxuICBAVmlld0NoaWxkKCd0ZXh0YXJlYScpIHRleHRhcmVhOiBFbGVtZW50UmVmO1xuICBAT3V0cHV0KCkgb25UZXh0Q2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICBAT3V0cHV0KCkgb25FZGl0ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIF9lZGl0YWJsZTogYm9vbGVhbiB8IHN0cmluZyA9IHRydWU7XG5cbiAgZ2V0IGVkaXRhYmxlKCk6IGJvb2xlYW4gfCBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9lZGl0YWJsZSAhPT0gXCJmYWxzZVwiICYmIHRoaXMuX2VkaXRhYmxlICE9PSBmYWxzZTtcbiAgfVxuICBnZXQgbWF4TGVuZ3RoKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX21heExlbmd0aCA+IDAgPyB0aGlzLl9tYXhMZW5ndGggOiBUZXh0QXJlYUNvbXBvbmVudC5NQVhfTEVOR1RIO1xuICB9XG5cbiAgcHJpdmF0ZSBfdGV4dEJlZm9yZUZvY3VzSW46c3RyaW5nOy8vZm9yIG9uRWRpdCgpXG4gIHByaXZhdGUgX3RleHRQcmV2aW91c0tleUlucHV0OnN0cmluZzsvL2ZvciBvblRleHRDaGFuZ2UoKVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gcGFyZW50IHNlZSBbW0Jhc2VDb21wb25lbnRdXSBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0gc2Vzc2lvblNlcnZpY2Ugc2VlIFtbQmFzZUNvbXBvbmVudF1dIGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSBlbGVtZW50UmVmIHNlZSBbW0Jhc2VDb21wb25lbnRdXSBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0gY2QgQ2hhbmdlRGV0ZWN0b3IgZm9yIHRoaXMgY29tcG9uZW50XG4gICAqIEBwYXJhbSByZW5kZXJlciBzZWUgW1tCYXNlQ29tcG9uZW50XV0gY29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKEBPcHRpb25hbCgpIEBTa2lwU2VsZigpIHBhcmVudDogQmFzZUNvbXBvbmVudCwgc2Vzc2lvblNlcnZpY2U6IFNlc3Npb25TZXJ2aWNlLCBlbGVtZW50UmVmOiBFbGVtZW50UmVmLCBwcml2YXRlIGNkOiBDaGFuZ2VEZXRlY3RvclJlZiwgcmVuZGVyZXI6IFJlbmRlcmVyMikge1xuICAgIHN1cGVyKHBhcmVudCwgc2Vzc2lvblNlcnZpY2UsIGVsZW1lbnRSZWYsIHJlbmRlcmVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0IGxpZmVjeWNsZS4gQ2FsbCBwYXJlbnQgbmdPbkluaXRcbiAgICovXG4gIG5nT25Jbml0KCkge1xuICAgIHN1cGVyLm5nT25Jbml0KCk7XG5cbiAgICBpZih0aGlzLmNvbnRyb2xQYWRkaW5nKXtcbiAgICAgIHRoaXMuY29udHJvbFBhZGRpbmcgPSB0aGlzLmNvbnRyb2xQYWRkaW5nICsgJ3B4JztcbiAgICB9XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogQWZ0ZXIgdmlldyBpbml0IGxpZmVjeWNsZS5cbiAgICogRm9jdXMgdGhlIHRleHRhcmVhIGFuZCBzZXQgZGltZW5zaW9uc1xuICAgKi9cbiAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgIHN1cGVyLm5nQWZ0ZXJWaWV3SW5pdCgpO1xuICAgIGlmICh0aGlzLmZvY3VzT25BY3RpdmF0aW9uKSB7XG4gICAgICB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5mb2N1cygpO1xuICAgIH1cblxuICAgIHRoaXMuaW5pdFdpZHRoSGVpZ2h0U3R5bGUoXCJoZWlnaHRcIiwgXCJ3aWR0aFwiKTtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZUZyb21EZWYoKTtcbiAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG5hbWUgb2YgdGhlIGNvbXBvbmVudFxuICAgKiBAcmV0dXJucyBOYW1lIG9mIGNvbXBvbmVudFxuICAgKi9cbiAgZ2V0TG9jYWxOYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwidGV4dEFyZWFcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb2N1cyB0aGUgdGV4dGFyZWEgZWxlbWVudFxuICAgKi9cbiAgc2V0Rm9jdXMoKSB7XG4gICAgdGhpcy50ZXh0YXJlYS5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB2YWx1ZSBvZiBpbnRlcm5hbCBbW19tYXhMZW5ndGhdXSBwcm9wZXJ0eVxuICAgKi9cbiAgZ2V0TWF4TGVuZ3RoKCkge1xuICAgIHJldHVybiB0aGlzLl9tYXhMZW5ndGg7XG4gIH1cblxuICAvKipcbiAgICogU2V0IFtbX21heExlbmd0aF1dIHByb3BlcnR5IHZhbHVlIGFuZCBtYXJrIGZvciBjaGFuZ2UgZGV0ZWN0aW9uXG4gICAqIEBwYXJhbSBtYXggTGVuZ3RoIG9mIHRleHQgY29udGVudFxuICAgKi9cbiAgc2V0TWF4TGVuZ3RoKG1heDogbnVtYmVyIHwgc3RyaW5nKSB7XG4gICAgaWYgKHR5cGVvZiBtYXggPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHRoaXMuX21heExlbmd0aCA9IG1heDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbWF4TGVuZ3RoID0gcGFyc2VJbnQobWF4KTtcbiAgICB9XG5cbiAgICB0aGlzLmNkLm1hcmtGb3JDaGVjaygpO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIEV2ZW50IGhhbmRsZXIgZm9yIHRleHQgaW5wdXRcbiAgICogRW1pdCBvblRleHRDaGFuZ2UgYi9jIHVzZXIga2VlcCB0eXBpbmcgKGlucHV0IHN0aWxsIGhhcyBmb2N1cylcbiAgICogQHBhcmFtIGV2ZW50XG4gICAqIEBwYXJhbSB2YWx1ZVxuICAgKiBAZXZlbnQgb25UZXh0Q2hhbmdlXG4gICAqL1xuICBvbklucHV0KGV2ZW50OiBLZXlib2FyZEV2ZW50LCB2YWx1ZTogc3RyaW5nKSB7XG4gICAgbGV0IHBvcyA9IHRoaXMudGV4dGFyZWEubmF0aXZlRWxlbWVudC5zZWxlY3Rpb25TdGFydDtcbiAgICBpZihldmVudC5rZXlDb2RlID09IDggfHwgZXZlbnQua2V5Q29kZSA9PSA0NikvL0JhY2tzcGFjZSB8fCBEZWxldGVcbiAgICB7XG4gICAgICB0aGlzLnRleHQgPSB2YWx1ZTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnRleHRhcmVhLm5hdGl2ZUVsZW1lbnQuc2VsZWN0aW9uU3RhcnQgPSBwb3M7XG4gICAgICAgIHRoaXMudGV4dGFyZWEubmF0aXZlRWxlbWVudC5zZWxlY3Rpb25FbmQgPSBwb3M7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZih0aGlzLnRleHQgIT0gbnVsbCAmJiB0aGlzLl9tYXhMZW5ndGggPiAwICYmIHRoaXMuX21heExlbmd0aCA8IHRoaXMudGV4dC5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy50ZXh0ID0gdGhpcy50ZXh0LnN1YnN0cmluZygwLCB0aGlzLl9tYXhMZW5ndGgpO1xuICAgIH1cblxuICAgIGlmKHRoaXMuX3RleHRQcmV2aW91c0tleUlucHV0ICE9IHRoaXMudGV4dClcbiAgICAgIHRoaXMub25UZXh0Q2hhbmdlLmVtaXQoKTtcbiAgICB0aGlzLl90ZXh0UHJldmlvdXNLZXlJbnB1dCA9IHRoaXMudGV4dDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG9mIFtbY2RdXSAoQ2hhbmdlRGV0ZWN0b3IpIHByb3BlcnR5XG4gICAqIEByZXR1cm5zIENoYW5nZSBkZXRlY3RvciBmb3IgdGhpcyBjb21wb25lbnRcbiAgICovXG4gIHByb3RlY3RlZCBnZXRDaGFuZ2VEZXRlY3RvcigpOiBDaGFuZ2VEZXRlY3RvclJlZiB7XG4gICAgcmV0dXJuIHRoaXMuY2Q7XG4gIH1cblxuICAvKipcbiAgICogR2V0IE5leGF3ZWIgdGFnIG5hbWVcbiAgICogQHJldHVybnMgVGFnIG5hbWVcbiAgICovXG4gIHByb3RlY3RlZCBnZXROeFRhZ05hbWUoKSB7XG4gICAgcmV0dXJuIFwidGV4dEFyZWFcIjtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBFdmVudCBoYW5kbGVyIGZvciBmb2N1cyBldmVudFxuICAgKiBAcGFyYW0gZSBJbnB1dCBmb2N1cyBldmVudFxuICAgKi9cbiAgb25Gb2N1cyhlKSB7XG4gICAgdGhpcy5fdGV4dEJlZm9yZUZvY3VzSW4gPSB0aGlzLnRleHQ7XG4gICAgdGhpcy5fdGV4dFByZXZpb3VzS2V5SW5wdXQgPSB0aGlzLnRleHQ7XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogRXZlbnQgaGFuZGxlciBmb3IgYmx1ciAodW5mb2N1cykgZXZlbnRcbiAgICogQHBhcmFtIGUgSW5wdXQgYmx1ciBldmVudFxuICAgKi9cbiAgb25CbHVyKGV2ZW50LCB2YWx1ZSkge1xuICAgIGlmKHRoaXMudGV4dGFyZWEubmF0aXZlRWxlbWVudC5vd25lckRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IHRoaXMudGV4dGFyZWEubmF0aXZlRWxlbWVudCkgcmV0dXJuOy8vcHJldmVudCBmb2N1c2xvc3Qgd2hlbmV2ZXIgYWN0aXZlIHByb2Nlc3MgaXMgY2hhbmdlZC5cbiAgICB0aGlzLnRleHQgPSB2YWx1ZTsvL3doZW4gdGhlIGxhc3QgY2hhciBpcyBaZW5rYWt1IGFuZCB0aGUgdXNlciBkb2Vzbid0IHByZXNzICdFbnRlcicsIHRoaXMgaXMgbmVlZGVkLlxuICAgIGlmKHRoaXMudGV4dCAhPSBudWxsICYmIHRoaXMuX21heExlbmd0aCA+IDAgJiYgdGhpcy5fbWF4TGVuZ3RoIDwgdGhpcy50ZXh0Lmxlbmd0aCkge1xuICAgICAgdGhpcy50ZXh0ID0gdGhpcy50ZXh0LnN1YnN0cmluZygwLCB0aGlzLl9tYXhMZW5ndGgpO1xuICAgIH1cbiAgICBpZih0aGlzLnRleHQgIT0gdGhpcy5fdGV4dEJlZm9yZUZvY3VzSW4pXG4gICAgICB0aGlzLm9uRWRpdC5lbWl0KCk7XG4gICAgdGhpcy52YWxpZGF0ZUZpZWxkKGV2ZW50KTtcbiAgfVxuICAvKipcbiAgICogU2V0IFtbdmlzaWJsZV1dIHByb3BlcnR5IHZhbHVlXG4gICAqIEBvdmVycmlkZVxuICAgKiBAcGFyYW0gdmFsdWUgVG9nZ2xlIHZpc2liaWxpdHlcbiAgICovXG4gIHNldFZpc2libGUodmFsdWU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLnZpc2libGUgPSB2YWx1ZTtcbiAgICBpZiAodGhpcy52aXNpYmxlKSB7XG4gICAgICB0aGlzLnJlbW92ZUNzc0NsYXNzKCdoaWRkZW4nKTtcbiAgICAgIHRoaXMuZ2V0RWxlbWVudCgpLnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYWRkQ3NzQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgdGhpcy5nZXRFbGVtZW50KCkuc2V0QXR0cmlidXRlKCdoaWRkZW4nLCAnJyk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IFRleHRBcmVhQ29tcG9uZW50IH0gZnJvbSAnLi90ZXh0LWFyZWEuY29tcG9uZW50JztcbmltcG9ydCB7IEZvcm1zTW9kdWxlLCBSZWFjdGl2ZUZvcm1zTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuXG5ATmdNb2R1bGUoe1xuICBpbXBvcnRzOiBbXG4gICAgQ29tbW9uTW9kdWxlLFxuICAgIEZvcm1zTW9kdWxlLFxuICAgIFJlYWN0aXZlRm9ybXNNb2R1bGUsXG4gIF0sXG4gIGRlY2xhcmF0aW9uczogW1RleHRBcmVhQ29tcG9uZW50XSxcbiAgZXhwb3J0czogW1xuICAgIFRleHRBcmVhQ29tcG9uZW50LFxuICAgIEZvcm1zTW9kdWxlLFxuICAgIFJlYWN0aXZlRm9ybXNNb2R1bGUsXG4gIF0sXG4gIGVudHJ5Q29tcG9uZW50czogW1xuICAgIFRleHRBcmVhQ29tcG9uZW50XG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgVGV4dEFyZWFNb2R1bGUgeyB9XG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIEVsZW1lbnRSZWYsIFNraXBTZWxmLCBPcHRpb25hbCwgUXVlcnlMaXN0LCBWaWV3Q2hpbGRyZW4sIFZpZXdFbmNhcHN1bGF0aW9uLCBOZ1pvbmUsIENvbnRlbnRDaGlsZHJlbiwgVmlld0NoaWxkLCBUZW1wbGF0ZVJlZiwgUmVuZGVyZXIyLCBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgQ2hhbmdlRGV0ZWN0b3JSZWYsIGZvcndhcmRSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEJhc2VDb21wb25lbnQgfSBmcm9tICcuLi9iYXNlL2Jhc2UuY29tcG9uZW50JztcbmltcG9ydCB7IFNlc3Npb25TZXJ2aWNlIH0gZnJvbSAnLi4vc2Vzc2lvbi9zZXNzaW9uLnNlcnZpY2UnO1xuaW1wb3J0IHsgVGFibGVDb2x1bW5EaXJlY3RpdmUgfSBmcm9tICcuLi90YWJsZS90YWJsZS1jb2x1bW4uZGlyZWN0aXZlJztcbmltcG9ydCB7IEhUTUxFbGVtZW50V3JhcHBlciB9IGZyb20gJy4vaHRtbC1lbGVtZW50LXdyYXBwZXInO1xuXG5kZWNsYXJlIHZhciBqUXVlcnk6IGFueTtcblxuaW1wb3J0ICogYXMgXyBmcm9tIFwibG9kYXNoXCI7XG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tICcuLi9qYXZhL3ZlY3Rvcic7XG5cbi8qKlxuICogQ2xhc3MgZm9yIHRyZWUgdGFibGUgY29tcG9uZW50XG4gKi9cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3Z0LXRyZWUtdGFibGUnLFxuICB0ZW1wbGF0ZVVybDogJy4vdHJlZS10YWJsZS5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL3RyZWUtdGFibGUuY29tcG9uZW50LnNjc3MnXSxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXG4gIHByb3ZpZGVyczogW1xuICAgIHtcbiAgICAgIHByb3ZpZGU6IEJhc2VDb21wb25lbnQsXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKT0+VHJlZVRhYmxlQ29tcG9uZW50KVxuICAgIH1cbiAgXVxufSlcbmV4cG9ydCBjbGFzcyBUcmVlVGFibGVDb21wb25lbnQgZXh0ZW5kcyBCYXNlQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgQElucHV0KCkgcm93RGF0YTogQXJyYXk8YW55PjtcbiAgQElucHV0KCkgY29sdW1uRGVmczogQXJyYXk8YW55PjtcbiAgQElucHV0KCkgdXNlRG9jRnJhZ21lbnQ6IGJvb2xlYW47XG5cbiAgQENvbnRlbnRDaGlsZHJlbihUYWJsZUNvbHVtbkRpcmVjdGl2ZSlcbiAgY29sdW1uczogUXVlcnlMaXN0PFRhYmxlQ29sdW1uRGlyZWN0aXZlPjtcblxuICBAVmlld0NoaWxkKFwidGFibGVCb2R5XCIsIHtyZWFkOiBFbGVtZW50UmVmfSkgdGFibGVCb2R5OiBFbGVtZW50UmVmPEhUTUxFbGVtZW50PjtcblxuICBfYm9keUZyYWdtZW50OiBEb2N1bWVudEZyYWdtZW50O1xuXG4gIHByaXZhdGUgbm9kZXM6IEFycmF5PEhUTUxFbGVtZW50V3JhcHBlcj4gPSBbXTtcbiAgc2VsZWN0ZWROb2RlczogQXJyYXk8bnVtYmVyPiA9IFtdO1xuICBwcml2YXRlIHNlbGVjdGVkUm93RWxlbWVudHM6IEFycmF5PEhUTUxFbGVtZW50V3JhcHBlcj4gPSBbXTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBAT3B0aW9uYWwoKSBAU2tpcFNlbGYoKSBwYXJlbnQ6IEJhc2VDb21wb25lbnQsXG4gICAgc2Vzc2lvblNlcnZpY2U6IFNlc3Npb25TZXJ2aWNlLFxuICAgIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsXG4gICAgcHJpdmF0ZSB6b25lOiBOZ1pvbmUsXG4gICAgcmVuZGVyZXI6IFJlbmRlcmVyMixcbiAgICBwcml2YXRlIGNkOiBDaGFuZ2VEZXRlY3RvclJlZlxuICApIHtcbiAgICBzdXBlcihwYXJlbnQsIHNlc3Npb25TZXJ2aWNlLCBlbGVtZW50UmVmLCByZW5kZXJlcik7XG4gIH1cblxuICAvKipcbiAgICogSW5pdCBsaWZlY3ljbGUuIE11c3QgY2FsbCBwYXJlbnQgbmdPbkluaXRcbiAgICovXG4gIG5nT25Jbml0KCkge1xuICAgIHN1cGVyLm5nT25Jbml0KCk7XG5cbiAgICAvLyBXaWR0aC9IZWlnaHQgaXMgcmVxdWlyZWQgb3RoZXJ3aXNlIGdyaWQgd2lsbCBjb2xsYXBzZSB0byB6ZXJvLlxuICAgIC8vIGlmICghdGhpcy5jb250cm9sSGVpZ2h0KSB0aGlzLmNvbnRyb2xIZWlnaHQgPSAnNTAwcHgnO1xuICAgIC8vIGlmICghdGhpcy5jb250cm9sV2lkdGgpIHRoaXMuY29udHJvbFdpZHRoID0gJzUwMHB4JztcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBBZnRlciB2aWV3IGluaXQgbGlmZWN5Y2xlLiBTZXQgdGFibGUgY29sdW1ucyBhbmQgY2FsbCBwYXJlbnQgbmdBZnRlclZpZXdJbml0XG4gICAqL1xuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgLy9tYWtlIHN1cmUgdG8gY2FsbCBzdXJlIGl0IGNhbiBpbml0IHRoaW5nXG4gICAgc3VwZXIubmdBZnRlclZpZXdJbml0KCk7XG5cbiAgICB0aGlzLmNyZWF0ZURvY0ZyYWdtZW50KCk7XG5cbiAgICBpZiAodGhpcy5jb2x1bW5zICE9IG51bGwgJiYgdGhpcy5jb2x1bW5zLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuY29sdW1uRGVmcyA9IFtdO1xuXG4gICAgICB0aGlzLmNvbHVtbnMuZm9yRWFjaChjb2x1bW49PntcbiAgICAgICAgdGhpcy5jb2x1bW5EZWZzLnB1c2goe1xuICAgICAgICAgIGhlYWRlck5hbWU6IGNvbHVtbi5oZWFkZXIsXG4gICAgICAgICAgY29udHJvbFdpZHRoOiBjb2x1bW4uY29udHJvbFdpZHRoXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucm93RGF0YSAmJiB0aGlzLnJvd0RhdGEubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpPT4ge1xuICAgICAgICBqUXVlcnkoYCMke3RoaXMuaWR9IC5qcS10cmVlLXRhYmxlYCkudHJlZXRhYmxlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGVzdHJveSBsaWZlY3ljbGUuIERlbGV0ZSB0cmVlIG5vZGVzIHRvIGNsZWFyIG91dCByZWZlcmVuY2VzXG4gICAqL1xuICBuZ09uRGVzdHJveSgpIHtcbiAgICB0aGlzLnRhYmxlQm9keSA9IG51bGw7XG5cbiAgICB0aGlzLl9ib2R5RnJhZ21lbnQgPSBudWxsO1xuXG4gICAgaWYgKHRoaXMubm9kZXMgIT0gbnVsbCkge1xuICAgICAgZm9yIChsZXQgbm9kZSBvZiB0aGlzLm5vZGVzKSB7XG4gICAgICAgIG5vZGUuZGVzdHJveSgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMubm9kZXMgPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhbGwgY2hpbGQgcm93cyBmcm9tIHRoaXMgdGFibGVcbiAgICovXG4gIGNsZWFyUm93cygpIHtcbiAgICAvLyB3aGlsZSh0aGlzLnRhYmxlQm9keS5uYXRpdmVFbGVtZW50LmZpcnN0Q2hpbGQpIHtcbiAgICAvLyAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2hpbGQodGhpcy50YWJsZUJvZHkubmF0aXZlRWxlbWVudCwgdGhpcy50YWJsZUJvZHkubmF0aXZlRWxlbWVudC5maXJzdENoaWxkKTtcbiAgICAvLyB9XG5cbiAgICAodGhpcy50YWJsZUJvZHkubmF0aXZlRWxlbWVudCBhcyBIVE1MRWxlbWVudCkuaW5uZXJIVE1MID0gXCJcIjtcblxuICAgIHRoaXMubm9kZXMgPSBbXTtcbiAgICB0aGlzLnNlbGVjdGVkTm9kZXMgPSBbXTtcbiAgICB0aGlzLnNlbGVjdGVkUm93RWxlbWVudHMgPSBbXTtcbiAgICB0aGlzLmNyZWF0ZURvY0ZyYWdtZW50KCk7XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogQ3JlYXRlIHRhYmxlIHJvdyBidXQgRE8gTk9UIGFwcGVuZCB0byB0YWJsZVxuICAgKi9cbiAgY3JlYXRlUm93KCk6IEhUTUxFbGVtZW50V3JhcHBlciB7XG4gICAgY29uc3Qgcm93OiBIVE1MRWxlbWVudFdyYXBwZXIgPSBuZXcgSFRNTEVsZW1lbnRXcmFwcGVyKHRoaXMucmVuZGVyZXIsIFwicm93XCIsIHRoaXMuZ2V0U2Vzc2lvbigpKTtcbiAgICByb3cuc2V0QXR0cmlidXRlKFwiaWRcIiwgQmFzZUNvbXBvbmVudC5nZW5lcmF0ZVVuaXF1ZUlkKFwicm93XCIpKTtcbiAgICByb3cucGFyZW50VGFibGVJZCA9IHRoaXMuaWQ7XG4gICAgcm93LnBhcmVudFRhYmxlID0gdGhpcztcbiAgICB0aGlzLnNldFBhcmVudFNjcmVlbklkKHJvdyk7XG5cbiAgICB0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCk9PntcbiAgICAgIHJvdy5odG1sRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsICgpPT57XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkTm9kZXMgIT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWROb2Rlcy5mb3JFYWNoKGlkeD0+e1xuICAgICAgICAgICAgdGhpcy5fc2VsZWN0Um93KGlkeCwgZmFsc2UpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0VsZW1lbnRzID0gW107XG4gICAgICAgIHRoaXMuc2VsZWN0Um93KHJvdywgdHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMudHJhY2tOb2RlKHJvdyk7XG5cbiAgICByZXR1cm4gcm93O1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIENyZWF0ZSB0YWJsZSByb3cgYW5kIGFwcGVuZCB0byB0YWJsZVxuICAgKi9cbiAgYWRkUm93KCk6IEhUTUxFbGVtZW50V3JhcHBlciB7XG4gICAgY29uc3Qgcm93ID0gdGhpcy5jcmVhdGVSb3coKTtcblxuICAgIGlmICh0aGlzLnVzZURvY0ZyYWdtZW50ID09PSB0cnVlKSB7XG4gICAgICB0aGlzLl9ib2R5RnJhZ21lbnQuYXBwZW5kQ2hpbGQocm93Lmh0bWxFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW5kZXJlci5hcHBlbmRDaGlsZCh0aGlzLnRhYmxlQm9keS5uYXRpdmVFbGVtZW50LCByb3cuaHRtbEVsZW1lbnQpO1xuICAgIH1cbiAgICByb3cuaHRtbEVsZW1lbnQuc3R5bGVbXCJiYWNrZ3JvdW5kXCJdID0gXCJcIjtcbiAgICByZXR1cm4gcm93O1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIFNldCBhIHJvdyBhcyBzZWxlY3RlZCBhbmQgc2V0IHNlbGVjdGVkIHN0eWxlXG4gICAqIEBwYXJhbSBub2RlSW5kZXggSW5kZXggb2Ygbm9kZS9yb3cgdG8gc2VsZWN0XG4gICAqIEBwYXJhbSBpc1NlbGVjdGVkIFRvZ2dsZSB0byBzZXQgc2VsZWN0ZWQgc3R5bGVcbiAgICovXG4gIF9zZWxlY3RSb3cobm9kZUluZGV4OiBudW1iZXIsIGlzU2VsZWN0ZWQ6IGJvb2xlYW4pIHtcblxuICAgIGxldCBpZHggPSBfLmZpbmRJbmRleCh0aGlzLnNlbGVjdGVkTm9kZXMsIChub2RlKSA9PiB7XG4gICAgICAgIHJldHVybiBub2RlID09PSBub2RlSW5kZXg7XG4gICAgfSk7XG5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoaXNTZWxlY3RlZCkge1xuICAgICAgICAvL2lmIGl0IHdhc24ndCBzZWxlY3RlZCwgYWRkIGl0IGluIHNlbGVjdGVkUm93cy5cbiAgICAgICAgaWYgKGlkeCA8IDApIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWROb2Rlcy5wdXNoKG5vZGVJbmRleCk7XG4gICAgICAgICAgICB0aGlzLm5vZGVzW25vZGVJbmRleF0uaHRtbEVsZW1lbnQucXVlcnlTZWxlY3RvcigndGQnKS5zdHlsZS5jb2xvciA9ICdibHVlJztcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vaWYgaXQgd2FzIHNlbGVjdGVkIGJlZm9yZSwgcmVtb3ZlIGl0IGZyb20gc2VsZWN0ZWRSb3dzLlxuICAgICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWROb2Rlcy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgIHRoaXMubm9kZXNbbm9kZUluZGV4XS5odG1sRWxlbWVudC5xdWVyeVNlbGVjdG9yKCd0ZCcpLnN0eWxlLmNvbG9yID0gXCJcIjtcbiAgICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBieSBzZXRBdHRyaWJ1dGUocm93LCB2YWx1ZSk7XG4gICAqIEBwYXJhbSByb3cgUm93IHRvIHNldCBhcyBzZWxlY3RlZCByb3dcbiAgICogQHBhcmFtIGlzU2VsZWN0ZWQgVG9nZ2xlIHNlbGVjdGVkIHN0YXRlIGFuZCBzdHlsZVxuICAgKi9cbiAgc2VsZWN0Um93KHJvdzogSFRNTEVsZW1lbnRXcmFwcGVyLCBpc1NlbGVjdGVkOiBib29sZWFuKSB7XG4gICAgaWYgKHRoaXMubm9kZXMgPT0gbnVsbCkgcmV0dXJuO1xuICAgIGxldCBub2RlSW5kZXggPSBfLmZpbmRJbmRleCh0aGlzLm5vZGVzLCAobm9kZSkgPT4ge1xuICAgICAgcmV0dXJuIG5vZGUgPT09IHJvdztcbiAgICB9KTtcbiAgICAvL05vdyBpbiB0aGUgYXMtaXMndHJlZS10YWJsZSBvbmx5IG9uZSByb3cgY2FuIGJlIHNlbGVjdGVkLlxuXG4gICAgbGV0IHRkczogTm9kZUxpc3QgPSB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCd0ZCcpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICh0ZHNbaV0gYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmNvbG9yID0gJyc7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLl9zZWxlY3RSb3coaSwgZmFsc2UpO1xuICAgIH1cblxuICAgIHRoaXMuX3NlbGVjdFJvdyhub2RlSW5kZXgsIHRydWUpO1xuXG4gICAgaWYgKGlzU2VsZWN0ZWQpIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRSb3dFbGVtZW50cy5wdXNoKHJvdyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRSb3dFbGVtZW50cyA9IHRoaXMuc2VsZWN0ZWRSb3dFbGVtZW50cy5maWx0ZXIoZWw9PntcbiAgICAgICAgcmV0dXJuIGVsLl91bmlxdWVJZCAhPT0gcm93Ll9pbnRlcm5hbElkO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0U2VsZWN0ZWRSb3dzKCk6IEFycmF5PEhUTUxFbGVtZW50V3JhcHBlcj4ge1xuICAgIHJldHVybiB0aGlzLnNlbGVjdGVkUm93RWxlbWVudHM7XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogQ3JlYXRlIHRhYmxlIGNlbGwgKHdpbGwgbm90IGFwcGVuZCB0byBhbnl0aGluZylcbiAgICogQHJldHVybnMgVGhlIHRhYmxlIGNlbGwgdGhhdCBpcyBjcmVhdGVkXG4gICAqL1xuICBjcmVhdGVDZWxsKCk6IEhUTUxFbGVtZW50V3JhcHBlciB7XG4gICAgY29uc3QgY2VsbDogSFRNTEVsZW1lbnRXcmFwcGVyID0gbmV3IEhUTUxFbGVtZW50V3JhcHBlcih0aGlzLnJlbmRlcmVyLCBcImNlbGxcIiwgdGhpcy5nZXRTZXNzaW9uKCkpO1xuICAgIGNlbGwuc2V0QXR0cmlidXRlKFwiaWRcIiwgQmFzZUNvbXBvbmVudC5nZW5lcmF0ZVVuaXF1ZUlkKFwiY2VsbFwiKSk7XG4gICAgdGhpcy5zZXRQYXJlbnRTY3JlZW5JZChjZWxsKTtcblxuICAgIC8vZm9yIGNlbGwsIHdlIG5lZWQgdG8gYXBwZW5kIGl0IHRvIHRoZSByb3dcbiAgICB0aGlzLnRyYWNrTm9kZShjZWxsKTtcblxuICAgIHJldHVybiBjZWxsO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIHVzZWQgY3JlYXRlQ2VsbCBpbnN0ZWFkXG4gICAqL1xuICBhZGRDZWxsKCk6IEhUTUxFbGVtZW50V3JhcHBlciB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlQ2VsbCgpO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIFJlLXJlbmRlciB0cmVlIHRhYmxlLiBNdXN0IGNhbGwgalF1ZXJ5IHBsdWdpbidzIG1ldGhvZCBvbiBlbGVtZW50IHRvIHJlLXJlbmRlci5cbiAgICovXG4gIHJlZHJhd1RyZWUoKSB7XG4gICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpPT57XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgalF1ZXJ5KGAjJHt0aGlzLmlkfSAuanEtdHJlZS10YWJsZWApLnRyZWV0YWJsZSh7XG4gICAgICAgIGV4cGFuZGFibGU6IHRydWVcbiAgICAgIH0sIHRydWUpO1xuXG4gICAgICB0aGlzLmNkLm1hcmtGb3JDaGVjaygpO1xuICAgIH0pO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIEV4cGFuZCBhbGwgbm9kZXMgaW4gdGhlIHRyZWVcbiAgICovXG4gIGV4cGFuZEFsbCgpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIGpRdWVyeShgIyR7dGhpcy5pZH0gLmpxLXRyZWUtdGFibGVgKS50cmVldGFibGUoXCJleHBhbmRBbGxcIik7XG4gICAgdGhpcy5zZXROb2RlRXhwYW5kZWRTdGF0dXMoXCJ0cnVlXCIpO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIENvbGxhcHNlIGFsbCBub2RlIGluIHRoZSB0cmVlXG4gICAqL1xuICBjb2xsYXBzZUFsbCgpIHtcbiAgICBqUXVlcnkoYCMke3RoaXMuaWR9IC5qcS10cmVlLXRhYmxlYCkudHJlZXRhYmxlKFwiY29sbGFwc2VBbGxcIik7XG4gICAgdGhpcy5zZXROb2RlRXhwYW5kZWRTdGF0dXMoXCJmYWxzZVwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY2hpbGQgbm9kZXMgb2YgdGhlIHRhYmxlXG4gICAqIEByZXR1cm5zIFtbbm9kZXNdXVxuICAgKi9cbiAgZ2V0VGFibGVDaGlsZHJlbigpOiBBcnJheTxIVE1MRWxlbWVudFdyYXBwZXI+IHtcbiAgICByZXR1cm4gdGhpcy5ub2RlcztcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBHZXQgbnVtYmVyIG9mIGNoaWxkIG5vZGVzIGZvciB0aGlzIHRyZWVcbiAgICogQHJldHVybnMgTnVtYmVyIG9mIGNoaWxkIG5vZGVzXG4gICAqL1xuICBnZXRDaGlsZENvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubm9kZXMgIT0gbnVsbCA/IHRoaXMubm9kZXMubGVuZ3RoIDogMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY2hpbGQgbm9kZSBieSBpZFxuICAgKiBAcGFyYW0gaWRcbiAgICovXG4gIGdldENoaWxkQnlJZChpZDogc3RyaW5nKTogSFRNTEVsZW1lbnRXcmFwcGVyIHtcbiAgICBpZiAodGhpcy5ub2RlcyAhPSBudWxsKSB7XG4gICAgICBjb25zdCB0ZW1wID0gXy5maWx0ZXIodGhpcy5ub2RlcywgKGl0ZW06IEhUTUxFbGVtZW50V3JhcHBlcik9Pml0ZW0uZ2V0SWQoKSA9PT0gaWQpO1xuXG4gICAgICBpZiAodGVtcC5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiB0ZW1wWzBdO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIEdldCBsaXN0IG9mIG5vZGVzIGZyb20gWFBhdGggZXhwcmVzc2lvbiBzdHJpbmdcbiAgICogQHBhcmFtIHhwYXRoRXhwcmVzc2lvblxuICAgKi9cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgZXZhbHVhdGVYUGF0aCh4cGF0aEV4cHJlc3Npb246IHN0cmluZyk6IGFueSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICBjb25zdCByZXN1bHQ6IFZlY3Rvcjxhbnk+ID0gbmV3IFZlY3Rvcjxhbnk+KCk7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICBjb25zdCB4cGF0aFJlc3VsdDogWFBhdGhSZXN1bHQgPSBkb2N1bWVudC5ldmFsdWF0ZSh4cGF0aEV4cHJlc3Npb24ucmVwbGFjZShcImNlbGxbXCIsIFwidGRbXCIpLnJlcGxhY2UoXCJyb3dbXCIsIFwidHJbXCIpLCB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgbnVsbCwgWFBhdGhSZXN1bHQuQU5ZX1RZUEUsIG51bGwpO1xuXG4gICAgaWYgKHhwYXRoUmVzdWx0ICE9IG51bGwpIHtcbiAgICAgIGxldCBub2RlOiBOb2RlID0geHBhdGhSZXN1bHQuaXRlcmF0ZU5leHQoKTtcblxuICAgICAgd2hpbGUobm9kZSkge1xuICAgICAgICByZXN1bHQuYWRkKG5vZGUpO1xuICAgICAgICBub2RlID0geHBhdGhSZXN1bHQuaXRlcmF0ZU5leHQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgY2hpbGQgbm9kZSB0byB0aGUgdHJlZVxuICAgKiBAcGFyYW0gbm9kZSBDaGlsZCB0byBhZGRcbiAgICovXG4gIHByaXZhdGUgdHJhY2tOb2RlKG5vZGU6IEhUTUxFbGVtZW50V3JhcHBlcikge1xuICAgIGlmICh0aGlzLm5vZGVzID09IG51bGwpIHtcbiAgICAgIHRoaXMubm9kZXMgPSBbXTtcbiAgICB9XG5cbiAgICB0aGlzLm5vZGVzLnB1c2gobm9kZSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IE5leGFXZWIgdGFnIG5hbWVcbiAgICogQHJldHVybnMgVGFnbmFtZVxuICAgKi9cbiAgcHJvdGVjdGVkIGdldE54VGFnTmFtZSgpIHtcbiAgICByZXR1cm4gXCJ0cmVlVGFibGVcIjtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBHZXQgW1tjZF1dIChDaGFuZ2UgZGV0ZWN0b3IpIHByb3BlcnR5XG4gICAqIEByZXR1cm5zIENoYW5nZSBkZXRlY3RvciByZWZlcmVuY2VcbiAgICovXG4gIHByb3RlY3RlZCBnZXRDaGFuZ2VEZXRlY3RvcigpIHtcbiAgICByZXR1cm4gdGhpcy5jZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgbm9kZSBleHBhbmRlZCBwcm9wZXJ0eSB2YWx1ZVxuICAgKiBAcGFyYW0gc3RhdHVzIFZhbHVlIGZvciBub2RlJ3MgZXhwYW5kZWQgcHJvcGVydHlcbiAgICovXG4gIHByaXZhdGUgc2V0Tm9kZUV4cGFuZGVkU3RhdHVzKHN0YXR1czogc3RyaW5nKSB7XG4gICAgaWYgKHRoaXMubm9kZXMgIT0gbnVsbCkge1xuICAgICAgXy5mb3JFYWNoKHRoaXMubm9kZXMsIChub2RlKT0+e1xuICAgICAgICBpZiAobm9kZS5nZXRMb2NhbE5hbWUoKSA9PT0gXCJyb3dcIikge1xuICAgICAgICAgIG5vZGUuZXhwYW5kZWQgPSBzdGF0dXM7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgSlNPTiByZXByZXNlbnRhdGlvbiBmb3IgdGhpcyBjb21wb25lbnRcbiAgICogQHJldHVybnMgQ29tcG9uZW50IG1ldGFkYXRhIGFzIEpTT04gb2JqZWN0XG4gICAqL1xuICB0b0pzb24oKToge30ge1xuICAgIGNvbnN0IHJldFZhbCA9IHN1cGVyLnRvSnNvbigpO1xuXG4gICAgaWYgKHRoaXMubm9kZXMgIT0gbnVsbCkge1xuICAgICAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLm5vZGVzLmZpbHRlcihub2RlPT5ub2RlLmdldExvY2FsTmFtZSgpID09PSBcInJvd1wiKTtcblxuICAgICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0VmFsW1wiY2hpbGRyZW5cIl0gPSBjaGlsZHJlbi5tYXAoY2hpbGQ9PmNoaWxkLnRvSnNvbigpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmV0VmFsO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIGVsZW1lbnRzIHBhcmVudCBJRFxuICAgKiBAcGFyYW0gZWxcbiAgICovXG4gIHByaXZhdGUgc2V0UGFyZW50U2NyZWVuSWQoZWw6IEhUTUxFbGVtZW50V3JhcHBlcikge1xuICAgIGlmICh0aGlzLmdldFBhcmVudFZpZXcoKSAhPSBudWxsKSB7XG4gICAgICAgIGVsLnBhcmVudFNjcmVlbklkID0gdGhpcy5nZXRQYXJlbnRWaWV3KCkuZ2V0SWQoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0Tm9kZXMoKTogSFRNTEVsZW1lbnRXcmFwcGVyW10ge1xuICAgIHJldHVybiB0aGlzLm5vZGVzXG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZURvY0ZyYWdtZW50KCkge1xuICAgIGlmICh0aGlzLnVzZURvY0ZyYWdtZW50ID09PSB0cnVlKSB7XG4gICAgICB0aGlzLl9ib2R5RnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgfVxuICB9XG5cbiAgYXBwZW5kRnJhZ21lbnQoKSB7XG4gICAgaWYgKHRoaXMuX2JvZHlGcmFnbWVudCAhPSBudWxsKSB7XG4gICAgICAodGhpcy50YWJsZUJvZHkubmF0aXZlRWxlbWVudCBhcyBIVE1MRWxlbWVudCkuYXBwZW5kQ2hpbGQodGhpcy5fYm9keUZyYWdtZW50KTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgVHJlZVRhYmxlQ29tcG9uZW50IH0gZnJvbSAnLi90cmVlLXRhYmxlLmNvbXBvbmVudCc7XG5cbkBOZ01vZHVsZSh7XG4gIGltcG9ydHM6IFtcbiAgICBDb21tb25Nb2R1bGVcbiAgXSxcbiAgZGVjbGFyYXRpb25zOiBbVHJlZVRhYmxlQ29tcG9uZW50XSxcbiAgZXhwb3J0czogW1xuICAgIFRyZWVUYWJsZUNvbXBvbmVudFxuICBdLFxuICBlbnRyeUNvbXBvbmVudHM6IFtcbiAgICBUcmVlVGFibGVDb21wb25lbnRcbiAgXVxufSlcbmV4cG9ydCBjbGFzcyBUcmVlVGFibGVNb2R1bGUgeyB9XG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIEFmdGVyVmlld0luaXQsIFZpZXdDaGlsZCwgVHlwZSwgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLCBDb21wb25lbnRSZWYsIElucHV0LCBFbGVtZW50UmVmLCBSZW5kZXJlcjIsIFNraXBTZWxmLCBPcHRpb25hbCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQmFzZUNvbXBvbmVudCB9IGZyb20gJy4uL2Jhc2UvYmFzZS5jb21wb25lbnQnO1xuaW1wb3J0IHsgQXR0cmlidXRlc0VudW0gfSBmcm9tICcuLi9iYXNlL2F0dHJpYnV0ZXMuZW51bSc7XG5cbmltcG9ydCB7IERpYWxvZ0NvbXBvbmVudCB9IGZyb20gJy4uL2RpYWxvZy9kaWFsb2cuY29tcG9uZW50JztcbmltcG9ydCB7IENvbXBvbmVudFR5cGUgfSBmcm9tICcuLi9iYXNlL2NvbXBvbmVudC10eXBlLmVudW0nO1xuaW1wb3J0IHsgTGFiZWxDb21wb25lbnQgfSBmcm9tICcuLi9sYWJlbC9sYWJlbC5jb21wb25lbnQnO1xuaW1wb3J0IHsgQnV0dG9uQ29tcG9uZW50IH0gZnJvbSAnLi4vYnV0dG9uL2J1dHRvbi5jb21wb25lbnQnO1xuaW1wb3J0IHsgQ29tYm9Cb3hDb21wb25lbnQgfSBmcm9tICcuLi9jb21iby1ib3gvY29tYm8tYm94LmNvbXBvbmVudCc7XG5pbXBvcnQgeyBUZXh0RmllbGRDb21wb25lbnQgfSBmcm9tICcuLi90ZXh0LWZpZWxkL3RleHQtZmllbGQuY29tcG9uZW50JztcbmltcG9ydCB7IENoZWNrYm94Q29tcG9uZW50IH0gZnJvbSAnLi4vY2hlY2tib3gvY2hlY2tib3guY29tcG9uZW50JztcbmltcG9ydCB7IFJhZGlvQnV0dG9uQ29tcG9uZW50IH0gZnJvbSAnLi4vcmFkaW8tYnV0dG9uL3JhZGlvLWJ1dHRvbi5jb21wb25lbnQnO1xuaW1wb3J0IHsgVGV4dEFyZWFDb21wb25lbnQgfSBmcm9tICcuLi90ZXh0LWFyZWEvdGV4dC1hcmVhLmNvbXBvbmVudCc7XG5cbmltcG9ydCAqIGFzIF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IER5bmFtaWNQYWdlc1NlcnZpY2UgfSBmcm9tICcuL2R5bmFtaWMtcGFnZXMuc2VydmljZSc7XG5pbXBvcnQgeyBBcHBVdGlscyB9IGZyb20gJy4uL2Jhc2UvYXBwLXV0aWxzJztcblxuaW1wb3J0IHsgU3ViamVjdCwgT2JzZXJ2YWJsZSB9IGZyb20gXCJyeGpzXCI7XG5pbXBvcnQgeyBTZXNzaW9uU2VydmljZSB9IGZyb20gJy4uL3Nlc3Npb24vc2Vzc2lvbi5zZXJ2aWNlJztcbmltcG9ydCB7IEhUTUxFbGVtZW50V3JhcHBlciB9IGZyb20gJy4uL3RyZWUtdGFibGUvaHRtbC1lbGVtZW50LXdyYXBwZXInO1xuaW1wb3J0IHsgVWlEb2N1bWVudCB9IGZyb20gJy4uL2Jhc2UvdWktZG9jdW1lbnQnO1xuaW1wb3J0IHsgUG9wdXBNZW51RGlyZWN0aXZlIH0gZnJvbSAnLi4vcG9wdXAtbWVudS9wb3B1cC1tZW51LmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tICcuLi9iYXNlL2xvZ2dlcic7XG5pbXBvcnQgeyBLZXlVdGlscyB9IGZyb20gJy4uL2Jhc2Uva2V5LXV0aWxzJztcbmltcG9ydCB7IEphdmFVdGlscyB9IGZyb20gJy4uL2phdmEvamF2YS11dGlscyc7XG5pbXBvcnQgeyBBdHRyaWJ1dGVOYW1lVmFsdWUgfSBmcm9tICcuLi9iYXNlL2F0dHJpYnV0ZS1uYW1lLXZhbHVlJztcbmltcG9ydCB7IE1lbnVJdGVtQ29tcG9uZW50IH0gZnJvbSAnLi4vcG9wdXAtbWVudS9tZW51LWl0ZW0vbWVudS1pdGVtLmNvbXBvbmVudCc7XG5cbi8qKlxuICogQmFzZSBwYXJlbnQgY29tcG9uZW50IGNsYXNzIHRoYXQgYWxsIG90aGVyIHNjcmVlbiBjb21wb25lbnRzIGluaGVyaXQgZnJvbVxuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICd2dC1kdW1teS12aWV3JyxcbiAgdGVtcGxhdGU6ICcnXG59KVxuZXhwb3J0IGNsYXNzIFZpZXdDb21wb25lbnQgZXh0ZW5kcyBCYXNlQ29tcG9uZW50IHtcbiAgQFZpZXdDaGlsZChEaWFsb2dDb21wb25lbnQpIGRpYWxvZzogRGlhbG9nQ29tcG9uZW50O1xuICBwcml2YXRlIHJvdXRlVXJsOiBzdHJpbmc7XG4gIHByaXZhdGUgcm91dGVEZWFjdGl2YXRlZDogYm9vbGVhbjtcbiAgcHJpdmF0ZSBtY29zOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICB6SW5kZXg6IG51bWJlcjtcbiAgaXNEeW5hbWljUGFnZTogYm9vbGVhbjtcbiAgaXNEZXN0cm95ZWQ6IGJvb2xlYW47XG4gIGNhbkJlQWN0aXZlVmlldzogYm9vbGVhbiA9IHRydWU7XG4gIGFjdGlvbkZvcndhcmROYW1lOiBzdHJpbmc7XG4gIG1vZGFsOnN0cmluZztcbiAgcm91dGVJZDogc3RyaW5nOyAgIC8vRm9yIHJvdXRlLnNlcnZpY2VcblxuICBwcml2YXRlIF92aWV3SW5pdGlhbGl6ZWRTdWJqZWN0OiBTdWJqZWN0PHZvaWQ+ID0gbmV3IFN1YmplY3Q8dm9pZD4oKTtcbiAgdmlld0luaXRpYWxpemVkOiBPYnNlcnZhYmxlPHZvaWQ+ID0gdGhpcy5fdmlld0luaXRpYWxpemVkU3ViamVjdC5hc09ic2VydmFibGUoKTtcblxuICBwcml2YXRlIGRlZklkczogQXJyYXk8c3RyaW5nPiA9IFtdO1xuICBwcml2YXRlIHBvcHVwTWVudXM6IEFycmF5PFBvcHVwTWVudURpcmVjdGl2ZT47XG5cbiAgLy9wcml2YXRlIF9maW5kRWxlbWVudENhY2hlOiBhbnk7XG5cbiAgcHJpdmF0ZSBjaGFuZ2VEZXRlY3Rpb25Gcm96ZW46IGJvb2xlYW47XG5cbiAgaXNNaW5pbWl6ZWQ6IGJvb2xlYW47XG5cbiAgc2tpcEJyZWFkQ3J1bWI6IGJvb2xlYW47XG5cbiAgLy9hbGxvdyB0aGlzIHNhbWUgc2NyZWVuIHRvIGxhdW5jaCBtdWx0aXBsZSB0aW1lXG4gIGFsbG93TXVsdGlwbGVTY3JlZW46IGJvb2xlYW47XG4gIHNjcmVlbkluZGV4OiBudW1iZXIgPSBudWxsO1xuICBiYXNlU2NyZWVuSWQ6IHN0cmluZzsgLy9pZCBmb3IgZ3JvdXBpbmcgc2NyZWVuIChhdm9pZGluZyBzY3JlZW5pbmRleClcblxuICAvL2NhbGxiYWNrIGZvciBhbnkgY3VzdG9tIGNsZWFudXBcbiAgYmVmb3JlRGVzdHJveUNiOiAoaWQ6IHN0cmluZyk9PnZvaWQ7XG5cblxuICAvL2tlZXAgdHJhY2sgb2YgbWVudSBpdGVtcyAodGhhdCBhcmUgbm90IGFjdGl2ZSkgYXMgYXJlIG1lbnUgaXRlbXMgYXJlIGRlc3Ryb3llZCBhZnRlciBpdCBpcyBjbG9zZWQuXG4gIHByaXZhdGUgX2luYWN0aXZlTWVudUl0ZW1zOiBNYXA8c3RyaW5nLCBIVE1MRWxlbWVudFdyYXBwZXI+O1xuXG4gIHByaXZhdGUgX3RhYmxlQ29sdW1uc01hcDogTWFwPHN0cmluZywgYW55PjtcblxuICBfdmlld1N0YXR1czogbnVtYmVyO1xuXG4gIHByaXZhdGUgdmlld1JvdXRlU2V0OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gcGFyZW50IHNlZSBbW0Jhc2VDb21wb25lbnRdXSBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0gc2Vzc2lvblNlcnZpY2Ugc2VlIFtbQmFzZUNvbXBvbmVudF1dIGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSBlbGVtZW50UmVmIHNlZSBbW0Jhc2VDb21wb25lbnRdXSBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgQE9wdGlvbmFsKCkgQFNraXBTZWxmKCkgcGFyZW50OiBCYXNlQ29tcG9uZW50LFxuICAgIHNlc3Npb25TZXJ2aWNlOiBTZXNzaW9uU2VydmljZSxcbiAgICBlbGVtZW50UmVmOiBFbGVtZW50UmVmKXtcbiAgICBzdXBlcihwYXJlbnQsIHNlc3Npb25TZXJ2aWNlLCBlbGVtZW50UmVmLCBudWxsKTtcbiAgICB0aGlzLmFjdGlvbkZvcndhcmROYW1lID0gdGhpcy5nZXRJZCgpO1xuICB9XG5cbiAgdmlld0lzSW5pdGlhbGl6ZWQ6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFNldCBbW3JvdXRlVXJsXV0gcHJvcGVydHkgdmFsdWUuIElmIFtbZGlhbG9nXV0gZXhpc3RzLCBzZXQgaXQncyByb3V0ZSBVUkxcbiAgICogQHBhcmFtIHVybFxuICAgKi9cbiAgc2V0Um91dGVVcmwodXJsOiBzdHJpbmcpIHtcbiAgICB0aGlzLnJvdXRlVXJsID0gdXJsO1xuXG4gICAgaWYgKHRoaXMuZGlhbG9nICE9IG51bGwpIHtcbiAgICAgIHRoaXMuZGlhbG9nLnNldFZpZXdSb3V0ZVVybCh1cmwpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgW1tyb3V0ZVVybF1dIHByb3BlcnR5IHZhbHVlXG4gICAqIEByZXR1cm5zIFJvdXRlIFVSTFxuICAgKi9cbiAgZ2V0Um91dGVVcmwoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5yb3V0ZVVybDtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHJvdXRlIGlzIGRlYWN0aXZhdGVkLlxuICAgKiBAcmV0dXJucyBUcnVlIGlmIHJvdXRlIGlzIGRlYWN0aXZhdGVkXG4gICAqL1xuICBpc1JvdXRlRGVhY3RpdmF0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMucm91dGVEZWFjdGl2YXRlZCA9PT0gdHJ1ZTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEFmdGVyIHZpZXcgaW5pdCBsaWZlY3ljbGVcbiAgICovXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICBpZiAodGhpcy5jYW5CZUFjdGl2ZVZpZXcgIT09IGZhbHNlKSB7XG4gICAgICB0aGlzLnBhcmVudCA9IG51bGw7XG4gICAgfVxuXG4gICAgLy9hZGQgdmlldyB0byBzdGFja1xuICAgIHRoaXMuZ2V0U2Vzc2lvbigpLmdldE1jb0NvbnRhaW5lcigpLnJlZ2lzdGVyVmlldyh0aGlzKTtcblxuICAgIHN1cGVyLm5nQWZ0ZXJWaWV3SW5pdCgpO1xuXG4gICAgdGhpcy5hZnRlckRpYWxvZ0luaXQoKTtcblxuICAgIGlmICh0aGlzLnBvcHVwTWVudXMgIT0gbnVsbCkge1xuICAgICAgXy5mb3JFYWNoKHRoaXMucG9wdXBNZW51cywgKHBvcHVwTWVudSk9PnBvcHVwTWVudS5jb252ZXJ0U3ViTWVudUl0ZW1zKHRoaXMuaWQpKTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbXBvbmVudEluaXRpYWxpemUoKTtcblxuICAgIGlmICh0aGlzLmRpYWxvZykge1xuICAgICAgdGhpcy5kaWFsb2cuc2V0Vmlld1JvdXRlVXJsKHRoaXMucm91dGVVcmwpO1xuICAgICAgdGhpcy52aWV3Um91dGVTZXQgPSB0cnVlO1xuICAgIH1cblxuICAgIHRoaXMuZ2V0U2Vzc2lvbigpLmdldE1jb0NvbnRhaW5lcigpLnJlU3RhY2tWaWV3KHRoaXMuaWQsIHRoaXMuc2NyZWVuSW5kZXgpO1xuXG4gICAgdGhpcy5fdmlld0luaXRpYWxpemVkU3ViamVjdC5uZXh0KCk7XG4gICAgdGhpcy52aWV3SXNJbml0aWFsaXplZCA9IHRydWU7XG4gIH1cblxuXG4gIHByb3RlY3RlZCBhZnRlckRpYWxvZ0luaXQoKSB7XG4gICAgaWYgKHRoaXMuZGlhbG9nKSB7XG4gICAgICAvL2dldCBpZCBvZiBkaWFsb2cgYXMgb3VyIGlkXG4gICAgICB0aGlzLmlkID0gdGhpcy5kaWFsb2cuZ2V0SWQoKTtcbiAgICAgIHRoaXMuZGlhbG9nLnNjcmVlbkluZGV4ID0gdGhpcy5zY3JlZW5JbmRleDtcblxuICAgICAgaWYgKHR5cGVvZiB0aGlzLmRpYWxvZy5tb2RhbCA9PT0gXCJib29sZWFuXCIpe1xuICAgICAgICB0aGlzLm1vZGFsID0gSmF2YVV0aWxzLmJvb2xlYW5Ub1N0cmluZyh0aGlzLmRpYWxvZy5tb2RhbCk7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgdGhpcy5tb2RhbCA9IHRoaXMuZGlhbG9nLm1vZGFsO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMubW9kYWwgIT0gbnVsbCAmJiAodGhpcy5tb2RhbCA9PT0gXCJ0cnVlXCIgfHwgdGhpcy5tb2RhbCA9PT0gXCJmYWxzZVwiKSkge1xuICAgICAgICB0aGlzLnNldEVsZW1lbnRBdHRyaWJ1dGVCeUlkKHRoaXMuaWQsICdtb2RhbCcsIHRoaXMubW9kYWwpO1xuICAgICAgICB0aGlzLnNldE1vZGFsTW9kZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kaWFsb2cubW9kYWwgPSBcImZhbHNlXCI7XG4gICAgICAgIHRoaXMubW9kYWwgPSB0aGlzLmRpYWxvZy5tb2RhbDtcbiAgICAgICAgdGhpcy5zZXRFbGVtZW50QXR0cmlidXRlQnlJZCh0aGlzLmlkLCAnbW9kYWwnLCBcImZhbHNlXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5wb3B1cE1lbnVzICE9IG51bGwpIHtcbiAgICAgICAgXy5mb3JFYWNoKHRoaXMucG9wdXBNZW51cywgKHBvcHVwTWVudSk9PnBvcHVwTWVudS5jb252ZXJ0U3ViTWVudUl0ZW1zKHRoaXMuaWQpKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5kaWFsb2cucmVzZXRJZCgpO1xuXG4gICAgICBpZiAodGhpcy52aWV3Um91dGVTZXQgIT09IHRydWUpIHtcbiAgICAgICAgdGhpcy5kaWFsb2cuc2V0Vmlld1JvdXRlVXJsKHRoaXMucm91dGVVcmwpO1xuICAgICAgICB0aGlzLnZpZXdSb3V0ZVNldCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cblxuICAvKipcbiAgICogU2V0IG1vZGFsIENTUyBhbmQgZGlhbG9nJ3MgbW9kYWwgcHJvcGVydHkgdmFsdWUgdG8gdHJ1ZS5cbiAgICogTWFrZSB2aWV3IGNvbXBvbmVudCBkaXNwbGF5IGFzIG1vZGFsXG4gICAqL1xuICBzZXRNb2RhbE1vZGUoKXtcbiAgICBpZiAodGhpcy5tb2RhbCA9PSBcInRydWVcIikge1xuICAgICAgdGhpcy5kaWFsb2dbXCJlbGVtZW50UmVmXCJdLm5hdGl2ZUVsZW1lbnQuY2xhc3NOYW1lID0gXCJtb2RhbCBmYWRlIGluXCI7XG4gICAgICB0aGlzLmRpYWxvZ1tcImVsZW1lbnRSZWZcIl0ubmF0aXZlRWxlbWVudC5zdHlsZS5jc3NUZXh0ID0gXCJkaXNwbGF5OmlubGluZS1ibG9jaztcIjtcbiAgICAgIHRoaXMuc2V0RWxlbWVudEF0dHJpYnV0ZUJ5SWQodGhpcy5pZCwgJ21vZGFsJywgdGhpcy5tb2RhbCk7XG4gICAgICB0aGlzLmRpYWxvZy5tb2RhbCA9IHRoaXMubW9kYWw7XG4gICAgfVxuICB9XG5cblxuICAvKipcbiAgICogRGVzdHJveSBsaWZlY3ljbGUuIENsZWFyIGFsbCByZWZlcmVuY2VzXG4gICAqL1xuICBuZ09uRGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5iZWZvcmVEZXN0cm95Q2IgIT0gbnVsbCkge1xuICAgICAgdGhpcy5iZWZvcmVEZXN0cm95Q2IodGhpcy5nZXRJZCgpKTtcbiAgICB9XG5cbiAgICB0aGlzLl9pbmFjdGl2ZU1lbnVJdGVtcyA9IG51bGw7XG5cbiAgICB0aGlzLnJvdXRlRGVhY3RpdmF0ZWQgPSB0cnVlO1xuICAgIC8vcmVtb3ZlIHZpZXcgZnJvbSBzdGFja1xuICAgIHRoaXMuZ2V0U2Vzc2lvbigpLmdldE1jb0NvbnRhaW5lcigpLnJlbW92ZVZpZXcodGhpcyk7XG5cbiAgICB0aGlzLm1jb3MuZm9yRWFjaChtY289PnRoaXMuZ2V0U2Vzc2lvbigpLmdldE1jb0NvbnRhaW5lcigpLnJlbW92ZU1jbyhtY28pKTtcbiAgICB0aGlzLm1jb3MuY2xlYXIoKTtcbiAgICBkZWxldGUgdGhpcy5tY29zO1xuXG4gICAgaWYgKHRoaXMuZGlhbG9nICE9IG51bGwpIHtcbiAgICAgIGlmICh0aGlzLmRpYWxvZy52aWV3Q29udGFpbmVyICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5kaWFsb2cudmlld0NvbnRhaW5lci5jbGVhcigpO1xuXG4gICAgICAgIGRlbGV0ZSB0aGlzLmRpYWxvZy52aWV3Q29udGFpbmVyO1xuICAgICAgfVxuXG4gICAgICBkZWxldGUgdGhpcy5kaWFsb2c7XG4gICAgfVxuXG4gICAgdGhpcy5pc0Rlc3Ryb3llZCA9IHRydWU7XG4gICAgdGhpcy5nZXRTZXNzaW9uKCkuZ2V0SW5qZWN0b3IoRHluYW1pY1BhZ2VzU2VydmljZSkucmVtb3ZlVmlldyh0aGlzKTtcblxuXG4gICAgXy5mb3JFYWNoKHRoaXMuZGVmSWRzLCAoaWQpPT57XG4gICAgICB0aGlzLmdldFNlc3Npb24oKS5kZWxldGVEZWYoaWQpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5kZWZJZHMgPSBudWxsO1xuICAgIHRoaXMucG9wdXBNZW51cyA9IG51bGw7XG5cbiAgICAvLyBpZiAodGhpcy5fZmluZEVsZW1lbnRDYWNoZSAhPSBudWxsKSB7XG4gICAgLy8gICB0aGlzLl9maW5kRWxlbWVudENhY2hlLmNsZWFyKCk7XG4gICAgLy8gfVxuXG4gICAgLy8gdGhpcy5fZmluZEVsZW1lbnRDYWNoZSA9IG51bGw7XG5cbiAgICB0aGlzLl90YWJsZUNvbHVtbnNNYXAgPSBudWxsO1xuXG4gICAgc3VwZXIubmdPbkRlc3Ryb3koKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxlZ2F0ZSB0byBbW2JvZHlJbml0XV1cbiAgICovXG4gIHByb3RlY3RlZCBjb21wb25lbnRJbml0aWFsaXplKCkge1xuICAgIHRoaXMuYm9keUluaXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGNvbXBvbmVudCdzIHRhZyBuYW1lLiBJbXBsZW1lbnRhdGlvbiBvZiBbW0Jhc2VDb21wb25lbnRdXSBtZXRob2RcbiAgICogQHJldHVybnMgTmFtZSBvZiB0YWdcbiAgICovXG4gIGdldFRhZ05hbWUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ3Z0LWR1bW15LXZpZXcnO1xuICB9XG5cbiAgLyoqXG4gICAqIE5vdCBpbXBsZW1lbnRlZFxuICAgKi9cbiAgYm9keUluaXQoKSB7XG5cbiAgfVxuXG5cbiAgLyoqXG4gICAqIFF1ZXJ5IHRoZSBcImVsZW1lbnRcIiB2aWEgc2VsZWN0Rm4gZnVuY3Rpb24sIHRoZW4gc2V0IHRoZSBhdHRyaWJ1dGUgb2YgdGhlIGVsZW1lbnQuIElmIGZvdW5kXG4gICAqIHNldCB0aGUgYXR0cmlidXRlIHthdHRyaWJ1dGV9IHdpdGggdmFsdWUge3ZhbHVlfVxuICAgKlxuICAgKiBAcGFyYW0gc2VsZWN0b3JGblxuICAgKi9cbiAgc2V0RWxlbWVudEF0dHJpYnV0ZShcbiAgICBzZWxlY3RvckZuOiAoKG1hcDogTWFwPHN0cmluZywgQmFzZUNvbXBvbmVudD4pPT5CYXNlQ29tcG9uZW50KSxcbiAgICBhdHRyaWJ1dGU6IEF0dHJpYnV0ZXNFbnVtLFxuICAgIHZhbHVlOiBhbnlcbiAgKSB7XG4gICAgY29uc3QgY29tcCA9IHNlbGVjdG9yRm4odGhpcy5jaGlsZHJlbik7XG5cbiAgICBpZiAoY29tcCA9PSBudWxsKSB7XG4gICAgICBMb2dnZXIud2FybignVW5hYmxlIHRvIHNldCBhdHRyaWJ1dGUsIGNvbXBvbmVudCBpcyBudWxsJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbXAuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZSwgdmFsdWUpO1xuICAgIH1cblxuICAgIHRoaXMubWFya0ZvckNoZWNrKCk7XG4gIH1cblxuICAvKipcbiAgKiBTZXQgW1tkaXNhYmxlZF1dIHByb3BlcnR5IHZhbHVlXG4gICogQHBhcmFtIGJvbyBWYWx1ZSBmb3IgZGlzYWJsZWQgcHJvcGVydHlcbiAgKi9cbiAgc2V0RGlzYWJsZWQoYm9vOiBib29sZWFuKSB7XG4gICAgdGhpcy5kaXNhYmxlZCA9IGJvbztcbiAgICB0aGlzLmRpYWxvZy5zZXREaXNhYmxlZChib28pO1xuICB9XG5cblxuICAvKipcbiAgICogUXVlcnkgdGhlIFwiZWxlbWVudFwiIHZpYSBzZWxlY3RGbiBmdW5jdGlvbiwgdGhlbiBzZXQgdGhlIGF0dHJpYnV0ZSBvZiB0aGUgZWxlbWVudC4gSWYgZm91bmRcbiAgICogc2V0IHRoZSBhdHRyaWJ1dGUge2F0dHJpYnV0ZX0gd2l0aCB2YWx1ZSB7dmFsdWV9XG4gICAqXG4gICAqIEBwYXJhbSBzZWxlY3RvckZuXG4gICAqL1xuICBzZXRFbGVtZW50QXR0cmlidXRlQnlJZChcbiAgICBjb21wSWQ6IHN0cmluZyxcbiAgICBhdHRyaWJ1dGU6IEF0dHJpYnV0ZXNFbnVtIHwgc3RyaW5nLFxuICAgIHZhbHVlOiBhbnlcbiAgKSB7XG5cbiAgICBpZiAoYXR0cmlidXRlID09PSBBdHRyaWJ1dGVzRW51bS5USVRMRSB8fCBhdHRyaWJ1dGUgPT09ICd0aXRsZScpIHtcbiAgICAgIHRoaXMuc2V0VGl0bGUodmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoY29tcElkID09PSB0aGlzLmdldElkKCkpIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZSwgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgY29tcCA9IHRoaXMuZmluZEVsZW1lbnRCeUlkKGNvbXBJZCk7XG5cbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICAgIGlmIChjb21wID09IG51bGwpIHtcbiAgICAgICAgLy9pcyB0aGlzIGZvciBkZWY/XG4gICAgICAgIGNvbnN0IGNvbXBEZWYgPSB0aGlzLmdldFNlc3Npb24oKS5nZXREZWYoY29tcElkKTtcblxuICAgICAgICBpZiAoY29tcERlZiAhPSBudWxsKSB7XG4gICAgICAgICAgY29tcERlZi5hdHRyaWJ1dGVbYXR0cmlidXRlXSA9IHZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgY29tcCA9IFVpRG9jdW1lbnQuZ2V0TWVudUNvbXBvbmVudChjb21wSWQpO1xuXG4gICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICAgICAgICBpZiAoY29tcCAhPSBudWxsKSB7XG4gICAgICAgICAgICBjb21wLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGUsIHZhbHVlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgTG9nZ2VyLndhcm4oYFVuYWJsZSB0byBzZXQgYXR0cmlidXRlLCBjb21wb25lbnQgd2l0aCBpZDogJHtjb21wSWR9IGlzIG5vdCBmb3VuZGApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29tcC5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlLCB2YWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMubWFya0ZvckNoZWNrKCk7XG4gICAgfVxuICB9XG5cblxuICAvKipcbiAgICogV2hvbGVzYWxlIHNldCBhdHRyaWJ1dGVzIHRvIGFuIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSBjb21wSWQgZWxlbWVudCB0byBzZXQgYXR0cmlidXRlXG4gICAqIEBwYXJhbSBhdHRyaWJ1dGVzIGFuIGFycmF5IG9mIEF0dHJpYnV0ZXNFbnVtIHRvIGJlIHNldFxuICAgKi9cbiAgc2V0RWxlbWVudEF0dHJpYnV0ZXNCeUlkKFxuICAgIGNvbXBJZDogc3RyaW5nLFxuICAgIGF0dHJpYnV0ZXM6IEFycmF5PEF0dHJpYnV0ZU5hbWVWYWx1ZT5cbiAgKSB7XG5cbiAgICBpZiAoY29tcElkID09PSB0aGlzLmdldElkKCkpIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlcyhhdHRyaWJ1dGVzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgY29tcCA9IHRoaXMuZmluZEVsZW1lbnRCeUlkKGNvbXBJZCk7XG5cbiAgICAgIGlmIChjb21wID09IG51bGwpIHtcbiAgICAgICAgLy9pcyB0aGlzIGZvciBkZWY/XG4gICAgICAgIGNvbnN0IGNvbXBEZWYgPSB0aGlzLmdldFNlc3Npb24oKS5nZXREZWYoY29tcElkKTtcblxuICAgICAgICBpZiAoY29tcERlZiAhPSBudWxsKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBhdHRyIG9mIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIGNvbXBEZWYuYXR0cmlidXRlW2F0dHIuYXR0cmlidXRlTmFtZV0gPSBhdHRyLnZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBMb2dnZXIud2FybihgVW5hYmxlIHRvIHNldCBhdHRyaWJ1dGUsIGNvbXBvbmVudCB3aXRoIGlkOiAke2NvbXBJZH0gaXMgbm90IGZvdW5kYCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbXAuc2V0QXR0cmlidXRlcyhhdHRyaWJ1dGVzKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gIH1cblxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGFuIGF0dHJpYnV0ZSBmcm9tIGEgY29tcG9uZW50IHdpdGggYSBzcGVjaWZpYyBpZFxuICAgKiBAcGFyYW0gY29tcElkIENvbXBvbmVudCBpZFxuICAgKiBAcGFyYW0gYXR0cmlidXRlIE5hbWUgb2YgYXR0cmlidXRlIHRvIHJlbW92ZSBmcm9tIGNvbXBvbmVudFxuICAgKi9cbiAgcmVtb3ZlRWxlbWVudEF0dHJpYnV0ZUJ5SWQoXG4gICAgY29tcElkOiBzdHJpbmcsXG4gICAgYXR0cmlidXRlOiBBdHRyaWJ1dGVzRW51bSB8IHN0cmluZ1xuICApIHtcblxuICAgIGlmIChhdHRyaWJ1dGUgPT09IEF0dHJpYnV0ZXNFbnVtLlRJVExFIHx8IGF0dHJpYnV0ZSA9PT0gJ3RpdGxlJykge1xuICAgICAgdGhpcy5zZXRUaXRsZShcIlwiKTtcbiAgICB9IGVsc2UgaWYgKGNvbXBJZCA9PT0gdGhpcy5nZXRJZCgpKSB7XG4gICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBjb21wID0gdGhpcy5maW5kRWxlbWVudEJ5SWQoY29tcElkKTtcblxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgICAgaWYgKGNvbXAgPT0gbnVsbCkge1xuICAgICAgICBMb2dnZXIud2FybihgVW5hYmxlIHRvIHJlbW92ZSBhdHRyaWJ1dGUsIGNvbXBvbmVudCB3aXRoIGlkOiAke2NvbXBJZH0gaXMgbm90IGZvdW5kYCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb21wLnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMubWFya0ZvckNoZWNrKCk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBTZWFyY2hlcyBmb3IgYSByYWRpbyBidXR0b24gZ3JvdXAgYnkgSUQgYW5kIGFkZHMgYW4gYXR0cmlidXRlIHRvIGFsbCBbW1JhZGlvQnV0dG9uQ29tcG9uZW50XV0gZWxlbWVudHMgaW4gdGhlIGdyb3VwXG4gICAqIEBwYXJhbSByYWRpb0dyb3VwSWRcbiAgICogQHBhcmFtIGF0dHJpYnV0ZSBIVE1MIGF0dHJpYnV0ZSBuYW1lIHRvIGJlIHNldFxuICAgKiBAcGFyYW0gdmFsdWUgVmFsdWUgdG8gc2V0IG9uIEhUTUwgYXR0cmlidXRlXG4gICAqL1xuICBzZXRSYWRpb0dyb3VwQXR0cmlidXRlKHJhZGlvR3JvdXBJZDogc3RyaW5nLCBhdHRyaWJ1dGU6IEF0dHJpYnV0ZXNFbnVtIHwgc3RyaW5nLCB2YWx1ZTogYW55KSB7XG4gICAgY29uc3QgcmFkaW9zID0gXy5maWx0ZXIoQXJyYXkuZnJvbSh0aGlzLmNoaWxkcmVuLnZhbHVlcygpKSwgKGNoaWxkKT0+e1xuICAgICAgcmV0dXJuIGNoaWxkIGluc3RhbmNlb2YgUmFkaW9CdXR0b25Db21wb25lbnQgJiYgKGNoaWxkIGFzIFJhZGlvQnV0dG9uQ29tcG9uZW50KS5ncm91cCA9PT0gcmFkaW9Hcm91cElkO1xuICAgIH0pO1xuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKHJhZGlvcyAhPSBudWxsICYmIHJhZGlvcy5sZW5ndGggPiAwKSB7XG4gICAgICBfLmZvckVhY2gocmFkaW9zLCAocmFkaW8pPT57XG4gICAgICAgIHJhZGlvLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGUsIHZhbHVlKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMubWFya0ZvckNoZWNrKCk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG9mIGFuIEhUTUwgYXR0cmlidXRlIG9mIGEgY29tcG9uZW50XG4gICAqIEBwYXJhbSBjb21wSWQgSWQgb2YgY29tcG9uZW50IHRvIGdldCBhdHRyaWJ1dGUgZnJvbVxuICAgKiBAcGFyYW0gYXR0cmlidXRlIE5hbWUgb2YgSFRNTCBhdHRyaWJ1dGUgdG8gZ2V0XG4gICAqL1xuICBnZXRFbGVtZW50QXR0cmlidXRlQnlJZChjb21wSWQ6IHN0cmluZywgYXR0cmlidXRlOiBBdHRyaWJ1dGVzRW51bSB8IHN0cmluZyk6IGFueSB7XG4gICAgY29uc3QgY29tcCA9IHRoaXMuZmluZEVsZW1lbnRCeUlkKGNvbXBJZCk7XG5cbiAgICBpZiAoY29tcCAhPSBudWxsKSB7XG4gICAgICByZXR1cm4gY29tcC5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlKTtcbiAgICB9XG4gIH1cblxuXG4gIC8qKlxuICAgKiBGaW5kIFtbQ29tYm9ib3hDb21wb25lbnRdXSBieSBpZCBhbmQgY2FsbCBpdCdzIGluaXRpYWxpemVDb21ib2JveFZhbHVlcyBtZXRob2QuXG4gICAqIEBwYXJhbSBjb21wSWQgQ29tcG9uZW50IElEIHRvIGluaXRpYWxpemVcbiAgICogQHBhcmFtIHZhbHVlIFZhbHVlIHRvIHNldCBvbiBjb21ib2JveFxuICAgKiBAcGFyYW0gYXR0cmlidXRlIE5hbWUgb2YgYXR0cmlidXRlIHRvIHNldCBvbiBjb21ib2JveFxuICAgKi9cbiAgaW5pdGlhbGl6ZUNvbWJvQm94VmFsdWVzKFxuICAgIGNvbXBJZDogc3RyaW5nLFxuICAgIHZhbHVlOiBhbnksXG4gICAgYXR0cmlidXRlOiBhbnlcbiAgKSB7XG4gICAgY29uc3QgY29tYm9Cb3g6IENvbWJvQm94Q29tcG9uZW50ID0gdGhpcy5maW5kRWxlbWVudEJ5SWQoY29tcElkKSBhcyBDb21ib0JveENvbXBvbmVudDtcblxuICAgIGlmIChjb21ib0JveCA9PSBudWxsKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBVbmFibGUgdG8gZmluZCBjb21ib2JveDogJHtjb21wSWR9IGApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb21ib0JveC5pbml0aWFsaXplQ29tYm9ib3hWYWx1ZXModmFsdWUpO1xuXG4gICAgICBpZiAoYXR0cmlidXRlICE9IG51bGwpIHtcbiAgICAgICAgaWYgKGF0dHJpYnV0ZVtcIndpZHRoXCJdICE9IG51bGwpIHtcbiAgICAgICAgICBjb21ib0JveC5zZXRDb250cm9sV2lkdGgoYXR0cmlidXRlW1wid2lkdGhcIl0pO1xuICAgICAgICB9IGVsc2UgaWYgKGF0dHJpYnV0ZVtcIm9uQ29tbWFuZFwiXSAhPSBudWxsKSB7XG4gICAgICAgICAgY29tYm9Cb3guc2V0T25Db21tYW5kKGF0dHJpYnV0ZVtcIm9uQ29tbWFuZFwiXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBbW0NvbWJvYm94Q29tcG9uZW50XV0gc2VsZWN0ZWQgaXRlbSB0aGF0IG1hdGNoZXMgdmFsdWVcbiAgICogQHBhcmFtIGNvbXBJZCBbW0NvbWJvYm94Q29tcG9uZW50XV0gaWRcbiAgICogQHBhcmFtIHZhbHVlIFZhbHVlIHRvIHNldCBhcyBzZWxlY3RlZFxuICAgKi9cbiAgc2VsZWN0Q29tYm9Cb3hJdGVtKGNvbXBJZDogc3RyaW5nLCB2YWx1ZTogYW55KSB7XG4gICAgY29uc3QgY29tYm9Cb3g6IENvbWJvQm94Q29tcG9uZW50ID0gdGhpcy5maW5kRWxlbWVudEJ5SWQoY29tcElkKSBhcyBDb21ib0JveENvbXBvbmVudDtcblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmIChjb21ib0JveCA9PSBudWxsKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBVbmFibGUgdG8gZmluZCBjb21ib2JveDogJHtjb21wSWR9IGApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb21ib0JveC5zZXRTZWxlY3RWYWx1ZSh2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZpbmQgY29tcG9uZW50IGFuZCBmb2N1cyBpdFxuICAgKiBAcGFyYW0gY29tcElkIENvbXBvbmVudCBpZFxuICAgKi9cbiAgc2V0Rm9jdXMoY29tcElkOiBzdHJpbmcgPSBudWxsKSB7XG4gICAgaWYgKGNvbXBJZCA9PSB0aGlzLmlkKSB7XG4gICAgICB0aGlzLnNob3dWaWV3KCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvbXBJZCA9PSBudWxsIHx8IGNvbXBJZCA9PSAnJykge1xuICAgICAgdGhpcy5yZXF1ZXN0Rm9jdXMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgY29tcCA9IFVpRG9jdW1lbnQuZmluZEVsZW1lbnRCeUlkKGNvbXBJZCk7XG5cbiAgICAgIGlmIChjb21wID09IG51bGwpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgVW5hYmxlIHRvIHNldEZvY3VzLCBjb21wb25lbnQgd2l0aCBpZDogJHtjb21wSWR9IGlzIG5vdCBmb3VuZGApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29tcC5yZXF1ZXN0Rm9jdXMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRpdGxlIG9uIFtbRGlhbG9nQ29tcG9uZW50XV1cbiAgICogQHBhcmFtIHRpdGxlIFRpdGxlIG9mIGRpYWxvZ1xuICAgKi9cbiAgc2V0VGl0bGUodGl0bGU6IHN0cmluZykge1xuICAgIGlmICh0aGlzLmRpYWxvZyAhPSBudWxsKSB7XG4gICAgICB0aGlzLmRpYWxvZy50aXRsZSA9IHRpdGxlO1xuXG4gICAgICB0aGlzLmRpYWxvZy5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gIH1cblxuXG4gIC8qKlxuICAgKiBDbG9zZSBbW2RpYWxvZ11dIGlmIGl0IGV4aXN0cyBvbiB0aGlzIGNvbXBvbmVudFxuICAgKiBAcGFyYW0gZGVsYXlEaWFsb2dDbG9zZVxuICAgKi9cbiAgY2xvc2UoZGVsYXlEaWFsb2dDbG9zZT86IGJvb2xlYW4pIHtcblxuICAgIGNvbnN0IGRpYWxvZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZGlhbG9nLmlkKTtcbiAgICBkaWFsb2cuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJkaXNwbGF5OiBub25lO1wiKTtcbiAgICBkaWFsb2cuaW5uZXJIVE1MID0gXCJcIjtcblxuICAgIHRoaXMuX3ZpZXdTdGF0dXMgPSAxO1xuXG4gICAgdGhpcy5jbGVhbnVwKCk7XG5cbiAgICBpZiAodGhpcy5kaWFsb2cgIT0gbnVsbCkge1xuICAgICAgaWYoZGVsYXlEaWFsb2dDbG9zZSkge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLmRpYWxvZy5jbG9zZShudWxsLCBmYWxzZSk7XG4gICAgICAgIH0sIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kaWFsb2cuY2xvc2UobnVsbCwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmlzRHluYW1pY1BhZ2UgPT09IHRydWUpIHtcbiAgICAgIHRoaXMuZ2V0U2Vzc2lvbigpLmdldEluamVjdG9yKER5bmFtaWNQYWdlc1NlcnZpY2UpLnJlbW92ZVZpZXcodGhpcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLmdldFNlc3Npb24oKSAhPSBudWxsICYmIHRoaXMuZ2V0U2Vzc2lvbigpLmdldFJvdXRlTmF2aWdhdG9yU2VydmljZSgpICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5nZXRTZXNzaW9uKCkuZ2V0Um91dGVOYXZpZ2F0b3JTZXJ2aWNlKCkuZGVzdHJveVJvdXRlKHRoaXMucm91dGVVcmwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIlVuYWJsZSB0byBjaGFuZ2Ugcm91dGUsIHNlc3Npb24gb3Igcm91dGUgbmF2aWdhdGlvbiBzZXJ2aWNlIGlzIG5vdCBkZWZpbmVkXCIpO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gY2xvc2UgVmlld0NvbXBvbmVudCwgRGlhbG9nQ29tcG9uZW50IG5vdCBmb3VuZCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgbmFtZSBvZiB0aGlzIGNvbXBvbmVudFxuICAgKi9cbiAgZ2V0TG9jYWxOYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwid2luZG93XCI7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhbmQgYWRkIGFuIE1DT1xuICAgKiBAcGFyYW0gbWNvTmFtZVxuICAgKiBAcGFyYW0gbWNvQ2xhc3NcbiAgICovXG4gIGNyZWF0ZU1jbyhtY29OYW1lOiBzdHJpbmcsIG1jb0NsYXNzOiBUeXBlPGFueT4pOiBhbnkge1xuICAgIGxldCBtY286IGFueSA9IHRoaXMuZ2V0U2Vzc2lvbigpLmdldE1jb0NvbnRhaW5lcigpLmdldE1jbyhtY29OYW1lKTtcblxuICAgIC8vY2hlY2sgdG8gc2VlIGlmIE1DTyBhbHJlYWR5IGV4aXN0cz9cbiAgICBpZiAobWNvICE9IG51bGwpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIk1DTyBcIiArIG1jb05hbWUgKyBcIiBpcyBhbHJlYWR5IGV4aXN0cywgdXNlIGV4aXN0aW5nIG9uZVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWNvID0gbmV3IG1jb0NsYXNzKHRoaXMpO1xuICAgICAgdGhpcy5nZXRTZXNzaW9uKCkuZ2V0TWNvQ29udGFpbmVyKCkucmVnaXN0ZXJNY28obWNvTmFtZSwgbWNvKTtcblxuICAgICAgLy9hZGQgbWNvIG5hbWUgZm9yIHRyYWNraW5nICh0byBiZSBjbGVhbmVkIGFuZCByZW1vdmVkIGxhdGVyKVxuICAgICAgdGhpcy5tY29zLmFkZChtY29OYW1lKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWNvO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBNQ08gZnJvbSBjbGllbnQgc2Vzc2lvblxuICAgKiBAcGFyYW0gbWNvTmFtZSBOYW1lIG9mIE1DTyB0byBnZXRcbiAgICogQHJldHVybnMgTUNPXG4gICAqL1xuICBnZXRNY28obWNvTmFtZTogc3RyaW5nKTogYW55IHtcbiAgICByZXR1cm4gdGhpcy5nZXRTZXNzaW9uKCkuZ2V0TWNvQ29udGFpbmVyKCkuZ2V0TWNvKG1jb05hbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIHN0cmluZyBhbmQgY3JlYXRlIGNvbXBvbmVudCBiYXNlIG9uIGl0XG4gICAqXG4gICAqIEBwYXJhbSBkb21TdHJpbmdcbiAgICovXG4gIGNyZWF0ZUNvbXBvbmVudChkb21TdHJpbmc6IHN0cmluZykge1xuICAgIC8vdGV4dEZpZWxkXG4gICAgLy9sYWJlbFxuICAgIC8vcGFuZWxcbiAgICAvL2hvcml6b250YWxTZXBhcmF0b3JcbiAgICB0cnkge1xuICAgICAgY29uc3QgZWxlbWVudCA9IEFwcFV0aWxzLnBhcnNlRG9tKGRvbVN0cmluZyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICB9XG4gIH1cblxuXG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCBETyBOT1QgVVNFIFRISVMsIGV4aXN0cyBvbmx5IGZvciBsZWdhY3kgc3VwcG9ydCwgdXNlIG5nSWYgaW5zdGVhZFxuICAgKiBAcGFyYW0gY29tcG9uZW50VHlwZVxuICAgKi9cbiAgX2NyZWF0ZUR5bmFtaWNDb21wb25lbnQoY29tcG9uZW50VHlwZTogQ29tcG9uZW50VHlwZSk6IEJhc2VDb21wb25lbnQge1xuICAgIGxldCBjb21wOiBCYXNlQ29tcG9uZW50ID0gbnVsbDtcblxuICAgIGlmICh0aGlzLmRpYWxvZyAhPSBudWxsICYmIHRoaXMuZGlhbG9nLnZpZXdDb250YWluZXIgIT0gbnVsbCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY29tcEZhY3Rvcnk6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciA9IHRoaXMuZ2V0U2Vzc2lvbigpLmdldEluamVjdG9yKENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcik7XG5cbiAgICAgICAgaWYgKGNvbXBGYWN0b3J5ICE9IG51bGwpIHtcbiAgICAgICAgICBsZXQgY29tcFJlZjogQ29tcG9uZW50UmVmPEJhc2VDb21wb25lbnQ+O1xuICAgICAgICAgIGlmIChjb21wb25lbnRUeXBlID09PSBDb21wb25lbnRUeXBlLkxBQkVMKSB7XG4gICAgICAgICAgICBjb21wUmVmID0gdGhpcy5kaWFsb2cudmlld0NvbnRhaW5lci5jcmVhdGVDb21wb25lbnQoY29tcEZhY3RvcnkucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoTGFiZWxDb21wb25lbnQpKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGNvbXBvbmVudFR5cGUgPT09IENvbXBvbmVudFR5cGUuQlVUVE9OKSB7XG4gICAgICAgICAgICBjb21wUmVmID0gdGhpcy5kaWFsb2cudmlld0NvbnRhaW5lci5jcmVhdGVDb21wb25lbnQoY29tcEZhY3RvcnkucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoQnV0dG9uQ29tcG9uZW50KSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChjb21wb25lbnRUeXBlID09PSBDb21wb25lbnRUeXBlLkNPTUJPQk9YKSB7XG4gICAgICAgICAgICBjb21wUmVmID0gdGhpcy5kaWFsb2cudmlld0NvbnRhaW5lci5jcmVhdGVDb21wb25lbnQoY29tcEZhY3RvcnkucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoQ29tYm9Cb3hDb21wb25lbnQpKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGNvbXBvbmVudFR5cGUgPT09IENvbXBvbmVudFR5cGUuVEVYVF9GSUVMRCkge1xuICAgICAgICAgICAgY29tcFJlZiA9IHRoaXMuZGlhbG9nLnZpZXdDb250YWluZXIuY3JlYXRlQ29tcG9uZW50KGNvbXBGYWN0b3J5LnJlc29sdmVDb21wb25lbnRGYWN0b3J5KFRleHRGaWVsZENvbXBvbmVudCkpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY29tcG9uZW50VHlwZSA9PT0gQ29tcG9uZW50VHlwZS5DSEVDS0JPWCkge1xuICAgICAgICAgICAgY29tcFJlZiA9IHRoaXMuZGlhbG9nLnZpZXdDb250YWluZXIuY3JlYXRlQ29tcG9uZW50KGNvbXBGYWN0b3J5LnJlc29sdmVDb21wb25lbnRGYWN0b3J5KENoZWNrYm94Q29tcG9uZW50KSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChjb21wb25lbnRUeXBlID09PSBDb21wb25lbnRUeXBlLlJBRElPKSB7XG4gICAgICAgICAgICBjb21wUmVmID0gdGhpcy5kaWFsb2cudmlld0NvbnRhaW5lci5jcmVhdGVDb21wb25lbnQoY29tcEZhY3RvcnkucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoUmFkaW9CdXR0b25Db21wb25lbnQpKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGNvbXBvbmVudFR5cGUgPT09IENvbXBvbmVudFR5cGUuVEVYVEFSRUEpIHtcbiAgICAgICAgICAgIGNvbXBSZWYgPSB0aGlzLmRpYWxvZy52aWV3Q29udGFpbmVyLmNyZWF0ZUNvbXBvbmVudChjb21wRmFjdG9yeS5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShUZXh0QXJlYUNvbXBvbmVudCkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIGNvbXBvbmVudCB0eXBlOiBcIiArIGNvbXBvbmVudFR5cGUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChjb21wUmVmICE9IG51bGwpIHtcbiAgICAgICAgICAgIGNvbXAgPSBjb21wUmVmLmluc3RhbmNlO1xuICAgICAgICAgICAgY29tcC5jb21wUmVmID0gY29tcFJlZjtcbiAgICAgICAgICAgIGNvbXAuY29tcFJlZi5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcImZhaWwgdG8gY3JlYXRlIGNvbXBvbmVudDogXCIgKyBlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY29tcDtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIERPIE5PVCBVU0UgVEhJUyEgRXhpc3RzIG9ubHkgZm9yIGxlZ2FjeSBzdXBwb3J0XG4gICAqIEBwYXJhbSBpZFxuICAgKi9cbiAgX3JlbW92ZUNvbXBvbmVudChpZDogc3RyaW5nKSB7XG4gICAgY29uc3QgY2hpbGQgPSB0aGlzLmZpbmRFbGVtZW50QnlJZChpZCk7XG5cbiAgICBpZiAoY2hpbGQgIT0gbnVsbCkge1xuICAgICAgY2hpbGQuZGVzdHJveUNvbXBvbmVudCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZGlhbG9nICE9IG51bGwgJiZcbiAgICAgICAgdGhpcy5kaWFsb2cudmlld0NvbnRhaW5lciAhPSBudWxsICYmXG4gICAgICAgICh0aGlzLmRpYWxvZy52aWV3Q29udGFpbmVyIGFzIGFueSkuX2VtYmVkZGVkVmlld3MgIT0gbnVsbCAmJlxuICAgICAgICBBcnJheS5pc0FycmF5KCh0aGlzLmRpYWxvZy52aWV3Q29udGFpbmVyIGFzIGFueSkuX2VtYmVkZGVkVmlld3MpICYmXG4gICAgICAgICh0aGlzLmRpYWxvZy52aWV3Q29udGFpbmVyIGFzIGFueSkuX2VtYmVkZGVkVmlld3MubGVuZ3RoID4gMFxuICAgICAgKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgZXYgPSAodGhpcy5kaWFsb2cudmlld0NvbnRhaW5lciBhcyBhbnkpLl9lbWJlZGRlZFZpZXdzO1xuXG4gICAgICAgICAgZm9yIChsZXQgdiBvZiBldikge1xuICAgICAgICAgICAgaWYgKHYubm9kZXMgJiYgQXJyYXkuaXNBcnJheSh2Lm5vZGVzKSAmJiB2Lm5vZGVzLmxlbmd0aCA+IDApIHtcblxuICAgICAgICAgICAgICBmb3IgKGxldCBuIG9mIHYubm9kZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAobi5pbnN0YW5jZSAhPSBudWxsICYmIG4uaW5zdGFuY2UuaWQgPT09IGlkKSB7XG4gICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG4uaW5zdGFuY2UuZGVzdHJveUNvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBuLmluc3RhbmNlLmRlc3Ryb3lDb21wb25lbnQoKVxuXG4gICAgICAgICAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICAgICAgICAgICAgICBpZiAoQXBwVXRpbHMuZW5hYmxlTG9nZ2luZyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhcIlJlbW92ZWQgY29tcG9uZW50OiBcIiArIGlkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoaXMgdmlldyBjYW4gYmUgYWN0aXZlXG4gICAqIEByZXR1cm5zIFRydWUgaWYgdmlldyBjYW4gYmUgYWN0aXZlIG9yIHBhcmVudCBpcyBudWxsXG4gICAqL1xuICBpc1ZpZXcoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY2FuQmVBY3RpdmVWaWV3ICE9PSBmYWxzZSA/IHRydWUgOiAodGhpcy5nZXRQYXJlbnQoKSA9PSBudWxsID8gdHJ1ZSA6IGZhbHNlKTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoaXMgdmlldyBjYW4ndCBiZSBhY3RpdmUgdmlld1xuICAgKiBAcmV0dXJucyBUcnVlIGlmIHZpZXcgY2FuJ3QgYmUgYWN0aXZlIHZpZXdcbiAgICovXG4gIGlzTm9uZUFjdGl2ZVZpZXcoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY2FuQmVBY3RpdmVWaWV3ID09PSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGlzIGlzIGEgZHluYW1pYyBwYWdlXG4gICAqIEByZXR1cm5zIFRydWUgaWYgaXQgaXMgYSBkeW5hbWljIHBhZ2VcbiAgICovXG4gIGlzRHluYW1pY1ZpZXcoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXNEeW5hbWljUGFnZSA9PT0gdHJ1ZSA/IHRydWUgOiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgW1tEaWFsb2dDb21wb25lbnRdXSBpbnN0YW5jZSB6LWluZGV4XG4gICAqIEBwYXJhbSBuZXdaSW5kZXhcbiAgICovXG4gIHVwZGF0ZVpJbmRleChuZXdaSW5kZXg6IG51bWJlcikge1xuICAgIGlmICh0aGlzLmRpYWxvZyAhPSBudWxsICYmIHRoaXMuaXNEZXN0cm95ZWQgIT09IHRydWUgJiYgdGhpcy5kaXNhYmxlZCAhPSB0cnVlKSB7XG4gICAgICB0aGlzLmRpYWxvZy51cGRhdGVaSW5kZXgobmV3WkluZGV4KTtcbiAgICAgIHRoaXMuekluZGV4ID0gbmV3WkluZGV4O1xuICAgIH1cbiAgfVxuXG5cbiAgLyoqXG4gICAqIEdldCBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgY29tcG9uZW50XG4gICAqIEByZXR1cm5zIE9iamVjdCBKU09OIG1ldGFkYXRhIGZvciB0aGlzIGNvbXBvbmVudFxuICAgKi9cbiAgdG9Kc29uKCk6IHt9IHtcbiAgICBjb25zdCBqc29uOiBhbnkgPSBzdXBlci50b0pzb24oKTtcbiAgICB0aGlzLnNldEpzb24oanNvbiwgXCJzY3JlZW5JbmRleFwiLCB0aGlzLmdldFNjcmVlbkluZGV4KCkpO1xuXG4gICAgaWYgKHRoaXMuZ2V0U2Vzc2lvbigpLmdldE1jb0NvbnRhaW5lcigpLmFjdGl2ZVZpZXcoKS5nZXRJZCgpID09PSB0aGlzLmdldElkKCkgJiYgVWlEb2N1bWVudC5tZW51SXRlbUVsZW1lbnRNYXAgIT0gbnVsbCkge1xuICAgICAgY29uc3QgbWVudUl0ZW1zOiBBcnJheTx7fT4gPSBbXTtcbiAgICAgIGNvbnN0IGtleVNldCA9IFVpRG9jdW1lbnQubWVudUl0ZW1FbGVtZW50TWFwLmtleXMoKTtcbiAgICAgIGxldCBrZXlJdCA9IGtleVNldC5uZXh0KCk7XG5cbiAgICAgIHdoaWxlKGtleUl0LmRvbmUgIT09IHRydWUpIHtcbiAgICAgICAgbWVudUl0ZW1zLnB1c2goVWlEb2N1bWVudC5tZW51SXRlbUVsZW1lbnRNYXAuZ2V0KGtleUl0LnZhbHVlKS50b0pzb24oKSk7XG4gICAgICAgIGtleUl0ID0ga2V5U2V0Lm5leHQoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX2luYWN0aXZlTWVudUl0ZW1zICE9IG51bGwpIHtcbiAgICAgICAgY29uc3Qga2V5SXQgPSB0aGlzLl9pbmFjdGl2ZU1lbnVJdGVtcy52YWx1ZXMoKTtcbiAgICAgICAgbGV0IHJzID0ga2V5SXQubmV4dCgpO1xuXG4gICAgICAgIHdoaWxlKHJzLmRvbmUgIT09IHRydWUpIHtcbiAgICAgICAgICBtZW51SXRlbXMucHVzaChycy52YWx1ZS50b0pzb24oKSk7XG4gICAgICAgICAgcnMgPSBrZXlJdC5uZXh0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGpzb25bXCJjaGlsZHJlblwiXSAhPSBudWxsKSB7XG4gICAgICAgIGpzb25bXCJjaGlsZHJlblwiXSA9IGpzb25bXCJjaGlsZHJlblwiXS5jb25jYXQobWVudUl0ZW1zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGpzb25bXCJjaGlsZHJlblwiXSA9IG1lbnVJdGVtcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ganNvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgY29tcG9uZW50IGlkIHRvIFtbZGVmSWRzXV1cbiAgICogQHBhcmFtIGlkXG4gICAqL1xuICB0cmFja0RlZihpZDogc3RyaW5nKSB7XG4gICAgdGhpcy5kZWZJZHMucHVzaChpZCk7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBjbG9zZU9uSW5pdCA9IHsgaWRTZXQgOiBuZXcgU2V0PHN0cmluZz4oKSwgdHlwZXMgOiBuZXcgU2V0PFR5cGU8Vmlld0NvbXBvbmVudD4+KCksIGhvb2tlZCA6IGZhbHNlIH07XG5cbiAgc3RhdGljIGhhc0lkQXNDbG9zZVRhcmdldE9uSW5pdCh2aWV3SWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBWaWV3Q29tcG9uZW50LmNsb3NlT25Jbml0LmlkU2V0Lmhhcyh2aWV3SWQpO1xuICB9XG5cbiAgc3RhdGljIGhhc1R5cGVBc0Nsb3NlVGFyZ2V0T25Jbml0KHZpZXdUeXBlOiBUeXBlPFZpZXdDb21wb25lbnQ+KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIFZpZXdDb21wb25lbnQuY2xvc2VPbkluaXQudHlwZXMuaGFzKHZpZXdUeXBlKTtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIGhvb2tDbG9zZVByZXZWaWV3MkR5bmFtaWNQYWdlc1NlcnZpY2UoKSB7XG4gICAgaWYoIVZpZXdDb21wb25lbnQuY2xvc2VPbkluaXQuaG9va2VkKSB7XG4gICAgICBEeW5hbWljUGFnZXNTZXJ2aWNlLm9uQ3JlYXRlVmlld0Nsb3NlciA9IChzZXNzaW9uU2VydmljZSwgdmlld1R5cGUsIHJvdXRlSWQpID0+IHtcbiAgICAgICAgVmlld0NvbXBvbmVudC5jbG9zZVByZXZWaWV3KHNlc3Npb25TZXJ2aWNlLCByb3V0ZUlkID8gcm91dGVJZCA6IHZpZXdUeXBlKTtcbiAgICAgIH07XG4gICAgICBWaWV3Q29tcG9uZW50LmNsb3NlT25Jbml0Lmhvb2tlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGNsb3NlUHJldlZpZXcoc2Vzc2lvblNlcnZpY2U6IFNlc3Npb25TZXJ2aWNlLCB0YXJnZXQ6IHN0cmluZ3xUeXBlPFZpZXdDb21wb25lbnQ+KSB7XG4gICAgbGV0IHZpZXc6IFZpZXdDb21wb25lbnQgPSBudWxsO1xuICAgIGlmKCh0eXBlb2YgdGFyZ2V0KSA9PSBcInN0cmluZ1wiKSB7XG4gICAgICBsZXQgc2NyZWVuSWQ6IHN0cmluZyA9IHRhcmdldCBhcyBzdHJpbmc7XG4gICAgICBpZihWaWV3Q29tcG9uZW50Lmhhc0lkQXNDbG9zZVRhcmdldE9uSW5pdChzY3JlZW5JZCkpIHtcbiAgICAgICAgdmlldyA9IHNlc3Npb25TZXJ2aWNlLmdldE1jb0NvbnRhaW5lcigpLmdldFZpZXdCeUlkKHNjcmVlbklkKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYodGFyZ2V0IGluc3RhbmNlb2YgVHlwZSkge1xuICAgICAgbGV0IHZpZXdUeXBlOiBUeXBlPFZpZXdDb21wb25lbnQ+ID0gdGFyZ2V0IGFzIFR5cGU8Vmlld0NvbXBvbmVudD47XG4gICAgICBpZihWaWV3Q29tcG9uZW50Lmhhc1R5cGVBc0Nsb3NlVGFyZ2V0T25Jbml0KHZpZXdUeXBlKSkge1xuICAgICAgICB2aWV3ID0gXy5maW5kKHNlc3Npb25TZXJ2aWNlLmdldE1jb0NvbnRhaW5lcigpLmdldFZpZXdzKCksIHYgPT4gdi5jb25zdHJ1Y3RvciA9PSB2aWV3VHlwZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy9WaXZpZnk6IGlmIHZpZXcgaGFzIGFjdGlvbkZvcndhcmROYW1lLCBkbyBub3QgY2xvc2UgdGhlIHZpZXcgYXMgd2Ugd2lsbCBjYWxsIGl0IGhhbmRsZUFjdGlvbkZvcndhcmQoKSB0byByZWZyZXNoIHRoZSBzY3JlZW4uXG4gICAgaWYodmlldyAmJiB2aWV3LmFjdGlvbkZvcndhcmROYW1lID09IG51bGwpIHtcbiAgICAgIHZpZXcuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xvc2UgcHJldmlvdXMgdmVyc2lvbiBvZiB0aGlzIHZpZXcgKGlmIHRoaXMgdmlldyBpcyBcInJlLW9wZW5cIikuIFRoaXMgaXMgdG8gc3VwcG9ydCB1c2FnZVxuICAgKiBvZiByZW1vdmluZyBjdXJyZW50IHZpZXcgYW5kIHJlcGxhY2luZyB3aXRoIG5ldyB2aWV3XG4gICAqIEBwYXJhbSB2aWV3SWRcbiAgICovXG4gIGNsb3NlVmlldyh2aWV3SWQ6IHN0cmluZywgZGVsYXlEaWFsb2dDbG9zZT86IGJvb2xlYW4pIHtcbiAgICAvL2lmIHRoZSB2aWV3IGFib3V0IHRvIGJlIGNsb3NlZCBoYXMgdGhlIHNhbWUgXCJpZFwiIChpLmUuIHNhbWUgc2NyZWVuIGJ1dCBkaWZmKS5cbiAgICBjb25zdCBjaGVja1NjcmVlbkluaXF1ZSA9IHZpZXdJZCA9PT0gdGhpcy5pZDtcblxuICAgIGNvbnN0IG9sZFZpZXc6IFZpZXdDb21wb25lbnQgPSBfLmZpbmQodGhpcy5nZXRTZXNzaW9uKCkuZ2V0TWNvQ29udGFpbmVyKCkuZ2V0Vmlld3MoKSwgKHZpZXc6IFZpZXdDb21wb25lbnQpPT57XG4gICAgICByZXR1cm4gdmlldy5pZCA9PT0gdmlld0lkICYmXG4gICAgICAgIChjaGVja1NjcmVlbkluaXF1ZSA9PT0gZmFsc2UgfHxcbiAgICAgICAgICAoY2hlY2tTY3JlZW5JbmlxdWUgPT09IHRydWUgJiZcbiAgICAgICAgICAgIHZpZXcudW5pcXVlSWQgIT09IHRoaXMudW5pcXVlSWRcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIDtcbiAgICB9KTtcblxuICAgIGlmIChvbGRWaWV3ICE9IG51bGwpIHtcbiAgICAgIC8vZm9yIGNhc2Ugd2hlcmUgd2UgYXJlIHRoZSBzYW1lIHNjcmVlbiwgd2Ugc2hvdWxkJ3QgY2FsbCBiZWZvcmVEZXN0cm95Q2IgdG8gY2xlYW51cFxuICAgICAgaWYgKGNoZWNrU2NyZWVuSW5pcXVlID09PSB0cnVlKSB7XG4gICAgICAgIG9sZFZpZXcuYmVmb3JlRGVzdHJveUNiID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgb2xkVmlldy5jbG9zZShkZWxheURpYWxvZ0Nsb3NlKTtcbiAgICB9XG4gICAgaWYoIXRoaXMudmlld0lzSW5pdGlhbGl6ZWQgJiYgY2hlY2tTY3JlZW5JbmlxdWUpIHtcbiAgICAgIC8vIFRoaXMgY2FzZSBpcyB0b28gbGF0ZSB0byBjbG9zZS4gVGhpcyBvYmplY3QncyB2aWV3IGlzIGFscmVhZHkgZXhpc3QsIHJldXNlZCBhbmQgdW4tY2xvc2FibGUhXG4gICAgICAvLyBUbyBzYXZlIHRoaXMgdHJ5aW5nLCBhbmQgZXhlY3V0ZSBjbG9zaW5nIGF0IHJvdXRlciBiZWZvcmUgY3JlYXRlIG5ldyB2aWV3LlxuICAgICAgaWYoIVZpZXdDb21wb25lbnQuY2xvc2VPbkluaXQuaWRTZXQuaGFzKHZpZXdJZCkpIHtcbiAgICAgICAgVmlld0NvbXBvbmVudC5jbG9zZU9uSW5pdC5pZFNldC5hZGQodmlld0lkKTtcbiAgICAgIH1cbiAgICAgIGxldCBvVHlwZSA9IHRoaXMuY29uc3RydWN0b3IgYXMgVHlwZTxWaWV3Q29tcG9uZW50PjtcbiAgICAgIGlmKCFWaWV3Q29tcG9uZW50LmNsb3NlT25Jbml0LnR5cGVzLmhhcyhvVHlwZSkpIHtcbiAgICAgICAgVmlld0NvbXBvbmVudC5jbG9zZU9uSW5pdC50eXBlcy5hZGQob1R5cGUpO1xuICAgICAgfVxuICAgICAgVmlld0NvbXBvbmVudC5ob29rQ2xvc2VQcmV2VmlldzJEeW5hbWljUGFnZXNTZXJ2aWNlKCk7XG4gICAgfVxuICB9XG5cblxuICAvKipcbiAgICogQWRkIGEgW1tQb3B1cE1lbnVEaXJlY3RpdmVdXSB0byBbW3BvcHVwTWVudXNdXSBwcm9wZXJ0eVxuICAgKiBAcGFyYW0gcG9wdXBNZW51IFBvcHVwIG1lbnUgdG8gYWRkIHRvIGludGVybmFsIFtbcG9wdXBNZW51c11dIGxpc3RcbiAgICovXG4gIHJlZ2lzdGVyUG9wdXBNZW51KHBvcHVwTWVudTogUG9wdXBNZW51RGlyZWN0aXZlKSB7XG4gICAgaWYgKHRoaXMucG9wdXBNZW51cyA9PSBudWxsKSB7XG4gICAgICB0aGlzLnBvcHVwTWVudXMgPSBbXTtcbiAgICB9XG5cbiAgICB0aGlzLnBvcHVwTWVudXMucHVzaChwb3B1cE1lbnUpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIFtbcG9wdXBNZW51c11dIGhhcyAxIG9yIG1vcmUgaXRlbXNcbiAgICogQHJldHVybnMgVHJ1ZSBpZiBbW3BvcHVwTWVudXNdXSBpcyBkZWZpbmVkIGFuZCBoYXMgYXQgbGVhc3QgMSBpdGVtXG4gICAqL1xuICBoYXNQb3B1cE1lbnUoKSB7XG4gICAgcmV0dXJuIHRoaXMucG9wdXBNZW51cyAhPSBudWxsICYmIHRoaXMucG9wdXBNZW51cy5sZW5ndGggPiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgSUQgb2YgdGhlIGZpcnN0IFtbUG9wdXBNZW51RGlyZWN0aXZlXV0gaW5zdGFuY2UgaW4gW1twb3B1cE1lbnVzXG4gICAqIEByZXR1cm5zIElkIG9mIHBvcHVwIG1lbnVcbiAgICovXG4gIGdldEZpcnN0UG9wdXBNZW51SWQoKSB7XG4gICAgcmV0dXJuIHRoaXMucG9wdXBNZW51cyAhPSBudWxsICYmIHRoaXMucG9wdXBNZW51cy5sZW5ndGggPiAwID8gdGhpcy5wb3B1cE1lbnVzWzBdLmlkIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxlZ2F0ZSB0byBbW0Jhc2VDb21wb25lbnRdXSBmaW5kRWxlbWVudEJ5SWQgbWV0aG9kXG4gICAqIEBwYXJhbSBpZCBDb21wb25lbnQgSURcbiAgICovXG4gIGZpbmRFbGVtZW50QnlJZChpZDogc3RyaW5nKTogQmFzZUNvbXBvbmVudCB7XG4gICAgbGV0IGNvbXA6IEJhc2VDb21wb25lbnQgPSBzdXBlci5maW5kRWxlbWVudEJ5SWQoaWQpO1xuXG4gICAgaWYgKGNvbXAgPT0gbnVsbCAmJiB0aGlzLl90YWJsZUNvbHVtbnNNYXAgIT0gbnVsbCkge1xuICAgICAgY29tcCA9IHRoaXMuX3RhYmxlQ29sdW1uc01hcC5nZXQoS2V5VXRpbHMudG9NYXBLZXkoaWQpKTtcbiAgICB9XG5cbiAgICBpZiAoY29tcCA9PSBudWxsKSB7XG4gICAgICAvL2NoZWNrIGZvciBpbmFjdGl2ZSBtZW51IGl0ZW1zXG4gICAgICBjb21wID0gdGhpcy5nZXRJbmFjdGl2ZU1lbnVJdGVtKGlkKSBhcyBhbnk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbXA7XG4gIH1cblxuICAvKipcbiAgICogU3RvcCBjaGFuZ2UgZGV0ZWN0aW9uXG4gICAqL1xuICBmcmVlemVDaGFuZ2VEZXRlY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuZ2V0Q2hhbmdlRGV0ZWN0b3IoKSAhPSBudWxsKSB7XG4gICAgICB0aGlzLmdldENoYW5nZURldGVjdG9yKCkuZGV0YWNoKCk7XG4gICAgICB0aGlzLmNoYW5nZURldGVjdGlvbkZyb3plbiA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlc3VtZSBjaGFuZ2UgZGV0ZWN0aW9uIGlmIGl0IGhhcyBiZWVuIHN0b3BwZWRcbiAgICovXG4gIHVuZnJlZXplQ2hhbmdlRGV0ZWN0aW9uKCkge1xuICAgIGlmICh0aGlzLmdldENoYW5nZURldGVjdG9yKCkgIT0gbnVsbCkge1xuICAgICAgdGhpcy5nZXRDaGFuZ2VEZXRlY3RvcigpLmRldGVjdENoYW5nZXMoKTtcbiAgICAgIHRoaXMuZ2V0Q2hhbmdlRGV0ZWN0b3IoKS5yZWF0dGFjaCgpO1xuICAgIH1cblxuICAgIHRoaXMuY2hhbmdlRGV0ZWN0aW9uRnJvemVuID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgY2hhbmdlIGRldGVjdGlvbiBoYXMgYmVlbiBzdG9wcGVkXG4gICAqIEByZXR1cm5zIFRydWUgaWYgY2hhbmdlIGRldGVjdGlvbiBoYXMgYmVlbiBzdG9wcGVkXG4gICAqL1xuICBpc0NoYW5nZURldGVjdGlvbkZyb3plbigpIHtcbiAgICByZXR1cm4gdGhpcy5jaGFuZ2VEZXRlY3Rpb25Gcm96ZW4gPT09IHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhpcyBpcyBhIGNvbnRhaW5lciBjb21wb25lbnRcbiAgICogQHJldHVybnMgVHJ1ZVxuICAgKi9cbiAgcHJvdGVjdGVkIGlzQ29udGFpbmVyKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyaWdnZXIgY2hhbmdlIGRldGVjdGlvbiBmb3IgcGFyZW50IFtbQmFzZUNvbXBvbmVudF1dIGFuZCBbW2RpYWxvZ11dIGluc3RhbmNlXG4gICAqL1xuICBkZXRlY3RDaGFuZ2VzKCkge1xuICAgIHN1cGVyLmRldGVjdENoYW5nZXMoKTtcblxuICAgIGlmICh0aGlzLmRpYWxvZyAhPSBudWxsKSB7XG4gICAgICB0aGlzLmRpYWxvZy5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE1hcmsgdGhpcyBjb21wb25lbnQgZm9yIGNoYW5nZSBkZXRlY3Rpb25cbiAgICovXG4gIG1hcmtGb3JDaGVjaygpIHtcbiAgICBzdXBlci5tYXJrRm9yQ2hlY2soKTtcblxuICAgIGlmICh0aGlzLmRpYWxvZyAhPSBudWxsKSB7XG4gICAgICB0aGlzLmRpYWxvZy5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2hvdyB0aGUgdmlldyBhZnRlciBpdCBoYXMgYmVlbiBoaWRkZW4gdmlhIG1pbmltaXplZFxuICAgKi9cbiAgc2hvd1ZpZXcoKSB7XG4gICAgaWYgKHRoaXMuZGlhbG9nICE9IG51bGwpIHtcbiAgICAgIHRoaXMuZGlhbG9nLnNob3dWaWV3KCk7XG4gICAgfVxuXG4gICAgZGVsZXRlIHRoaXMuaXNNaW5pbWl6ZWQ7XG4gIH1cblxuICAvKipcbiAgICogTWluaW1pemUgdGhlIFtbZGlhbG9nXV0gb2YgdGhpcyBjb21wb25lbnRcbiAgICovXG4gIG1pbmltaXplKCkge1xuICAgIGlmICh0aGlzLmRpYWxvZyAhPSBudWxsKSB7XG4gICAgICB0aGlzLmRpYWxvZy5taW5pbWl6ZShudWxsKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTW92ZSB0aGlzIGNvbXBvbmVudCB0byB0aGUgdG9wIG9mIHRoZSB2aWV3IHN0YWNrXG4gICAqL1xuICBtb3ZlVG9Ub3AoKSB7XG4gICAgdGhpcy5nZXRTZXNzaW9uKCkuZ2V0TWNvQ29udGFpbmVyKCkucmVTdGFja1ZpZXcodGhpcy5pZCksIHRoaXMuc2NyZWVuSW5kZXg7XG4gIH1cblxuICB0cmFja0luYWN0aXZlTWVudUl0ZW0obWVudUl0ZW06IE1lbnVJdGVtQ29tcG9uZW50KSB7XG4gICAgY29uc3QgaWQgPSBtZW51SXRlbS5nZXRJZCgpO1xuXG4gICAgY29uc3QgZmF1eE1lbnVJdGVtID0gbmV3IEhUTUxFbGVtZW50V3JhcHBlcihudWxsLCBcIm1lbnVJdGVtXCIsIG51bGwpO1xuICAgIGZhdXhNZW51SXRlbS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpZCk7XG5cbiAgICBpZiAobWVudUl0ZW0uaXRlbSAhPSBudWxsICYmIG1lbnVJdGVtLml0ZW0uY3VzdG9tQXR0cmlidXRlcyAhPSBudWxsKSB7XG4gICAgICBjb25zdCBrZXlzID0gXy5rZXlzKG1lbnVJdGVtLml0ZW0uY3VzdG9tQXR0cmlidXRlcyk7XG5cbiAgICAgIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcbiAgICAgICAgaWYgKGtleSAhPT0gXCJpZFwiKSB7XG4gICAgICAgICAgZmF1eE1lbnVJdGVtLnNldEF0dHJpYnV0ZShrZXksIG1lbnVJdGVtLml0ZW0uY3VzdG9tQXR0cmlidXRlc1trZXldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLl9pbmFjdGl2ZU1lbnVJdGVtcyA9PSBudWxsKSB7XG4gICAgICB0aGlzLl9pbmFjdGl2ZU1lbnVJdGVtcyA9IG5ldyBNYXA8c3RyaW5nLCBIVE1MRWxlbWVudFdyYXBwZXI+KCk7XG4gICAgfVxuXG4gICAgdGhpcy5faW5hY3RpdmVNZW51SXRlbXMuc2V0KGlkLCBmYXV4TWVudUl0ZW0pO1xuICB9XG5cbiAgZ2V0SW5hY3RpdmVNZW51SXRlbShpZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuX2luYWN0aXZlTWVudUl0ZW1zICE9IG51bGwgPyB0aGlzLl9pbmFjdGl2ZU1lbnVJdGVtcy5nZXQoaWQpIDogbnVsbDtcbiAgfVxuXG4gIGNsZWFudXAoKSB7XG4gICAgc3VwZXIuY2xlYW51cCgpO1xuXG4gICAgaWYgKHRoaXMuX3ZpZXdDaGlsZHJlbk1hcCAhPSBudWxsKSB7XG4gICAgICBjb25zdCBjaXQgPSB0aGlzLl92aWV3Q2hpbGRyZW5NYXAudmFsdWVzKCk7XG4gICAgICBsZXQgdmFsID0gY2l0Lm5leHQoKTtcblxuICAgICAgd2hpbGUodmFsLmRvbmUgIT09IHRydWUpIHtcbiAgICAgICAgLy9zb21lIGNoaWxkcmVuIGFyZSBub3QgYWN0dWFsIEJhc2VDb21wb25lbnRcbiAgICAgICAgaWYgKHR5cGVvZiB2YWwudmFsdWUuZW1wdHlDaGlsZHJlbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgdmFsLnZhbHVlLmVtcHR5Q2hpbGRyZW4oKTtcbiAgICAgICAgICB2YWwudmFsdWUuX2lzRHlpbmcgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFsID0gY2l0Lm5leHQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzdXBlci5lbXB0eUNoaWxkcmVuKCk7XG4gIH1cblxuICBpc01vZGFsRGlhbG9nKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmRpYWxvZyAhPSBudWxsICYmICh0aGlzLmRpYWxvZy5tb2RhbCA9PT0gdHJ1ZSB8fCB0aGlzLmRpYWxvZy5tb2RhbCA9PT0gXCJ0cnVlXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIE5vdCBpbXBsZW1lbnRlZFxuICAgKi9cbiAgaGFuZGxlQWN0aW9uRm9yd2FyZCgpIHtcbiAgfVxuICAvKipcbiAgICogc2NyZWVuIGluZGV4KDB+KcOjwoHCrsOmwpbCh8Olwq3Cl8OlwojCl8OowqHCqMOnwo/CvlxuICAgKi9cbiAgZ2V0U2NyZWVuSW5kZXgoKTpzdHJpbmcge1xuICAgIHJldHVybiAodGhpcy5zY3JlZW5JbmRleCA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuc2NyZWVuSW5kZXggPT09IG51bGwpXG4gICAgICA/ICcnXG4gICAgICA6IHRoaXMuc2NyZWVuSW5kZXgudG9TdHJpbmcoKTtcbiAgfVxuICByZWdpc3RlclNjcmVlbkluZGV4KCl7XG4gICAgdGhpcy5zY3JlZW5JbmRleCA9IHRoaXMuZ2V0U2Vzc2lvbigpLmdldE1jb0NvbnRhaW5lcigpLm5leHRTY3JlZW5JbmRleCh0aGlzLmJhc2VTY3JlZW5JZCk7XG4gIH1cblxuICBzZXRWaXNpYmxlKGJvbzogYm9vbGVhbikge1xuICAgIHN1cGVyLnNldFZpc2libGUoYm9vKTtcbiAgICB0aGlzLmdldFNlc3Npb24oKS5nZXRNY29Db250YWluZXIoKS5yZWZyZXNoQnJlYWRDcnVtYigpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IFZpZXdDb21wb25lbnQgfSBmcm9tICcuL3ZpZXcuY29tcG9uZW50JztcbmltcG9ydCB7IER5bmFtaWNQYWdlc1NlcnZpY2UgfSBmcm9tICcuL2R5bmFtaWMtcGFnZXMuc2VydmljZSc7XG5pbXBvcnQgeyBCYXNlTW9kdWxlIH0gZnJvbSAnLi4vYmFzZS9iYXNlLm1vZHVsZSc7XG5cbkBOZ01vZHVsZSh7XG4gIGltcG9ydHM6IFtcbiAgICBDb21tb25Nb2R1bGUsXG4gICAgQmFzZU1vZHVsZVxuICBdLFxuICBkZWNsYXJhdGlvbnM6IFtWaWV3Q29tcG9uZW50XSxcbiAgcHJvdmlkZXJzOiBbXG4gICAgRHluYW1pY1BhZ2VzU2VydmljZVxuICBdLFxuICBleHBvcnRzOiBbXG4gICAgVmlld0NvbXBvbmVudCxcbiAgXVxufSlcbmV4cG9ydCBjbGFzcyBWaWV3TW9kdWxlIHsgfVxuIiwiaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBPcHRpb25hbCxcbiAgU2tpcFNlbGYsXG4gIEVsZW1lbnRSZWYsXG4gIENvbnRlbnRDaGlsZHJlbixcbiAgUXVlcnlMaXN0LFxuICBJbnB1dCxcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENoYW5nZURldGVjdG9yUmVmLFxuICBEb0NoZWNrLFxuICBJdGVyYWJsZURpZmZlcnMsXG4gIEl0ZXJhYmxlRGlmZmVyLFxuICBWaWV3Q2hpbGQsXG4gIENvbnRlbnRDaGlsZCxcbiAgVmlld0VuY2Fwc3VsYXRpb24sXG4gIFJlbmRlcmVyMlxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEJhc2VDb21wb25lbnQgfSBmcm9tICcuLi9iYXNlL2Jhc2UuY29tcG9uZW50JztcbmltcG9ydCB7IFNlc3Npb25TZXJ2aWNlIH0gZnJvbSAnLi4vc2Vzc2lvbi9zZXNzaW9uLnNlcnZpY2UnO1xuaW1wb3J0IHsgTWVudUl0ZW1EaXJlY3RpdmUgfSBmcm9tICcuL21lbnUtaXRlbS5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgTWVudUl0ZW0gfSBmcm9tICcuL21lbnUtaXRlbSc7XG5pbXBvcnQgeyBDb250ZXh0TWVudVNlcnZpY2UgfSBmcm9tICcuL2NvbnRleHQtbWVudS5zZXJ2aWNlJztcbmltcG9ydCB7IEJzRHJvcGRvd25EaXJlY3RpdmUgfSBmcm9tICduZ3gtYm9vdHN0cmFwJztcbmltcG9ydCB7IE1lbnVJdGVtQnVpbGRlciB9IGZyb20gJy4vbWVudS1pdGVtLWJ1aWxkZXInO1xuaW1wb3J0ICogYXMgXyBmcm9tIFwibG9kYXNoXCI7XG5pbXBvcnQgeyBDbGllbnRFdmVudCB9IGZyb20gJy4uL2V2ZW50LWhhbmRsZXIvY2xpZW50LWV2ZW50JztcbmltcG9ydCB7IEFwcFV0aWxzIH0gZnJvbSAnLi4vYmFzZS9hcHAtdXRpbHMnO1xuaW1wb3J0IHsgVWlEb2N1bWVudCB9IGZyb20gJy4uL2Jhc2UvdWktZG9jdW1lbnQnO1xuXG4vKipcbiAqIENsYXNzIGZvciBwb3B1cCBtZW51IGNvbXBvbmVudFxuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICd2dC1wb3B1cC1tZW51LXZpZXcnLFxuICB0ZW1wbGF0ZVVybDogJy4vcG9wdXAtbWVudS5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL3BvcHVwLW1lbnUuY29tcG9uZW50LmNzcyddLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZVxufSlcbmV4cG9ydCBjbGFzcyBQb3B1cE1lbnVDb21wb25lbnQgZXh0ZW5kcyBCYXNlQ29tcG9uZW50IGltcGxlbWVudHMgRG9DaGVjayB7XG4gIEBJbnB1dCgpIHByaXZhdGUgaWROYW1lOiBzdHJpbmc7IC8vRE8gTk9UIHVzZWQsIGV4aXN0cyBmb3IgYmFkIHVzYWdlXG4gIEBWaWV3Q2hpbGQoXCJteURyb3Bkb3duXCIsIHtyZWFkOiBCc0Ryb3Bkb3duRGlyZWN0aXZlfSkgZHJvcGRvd246IEJzRHJvcGRvd25EaXJlY3RpdmU7XG4gIEBWaWV3Q2hpbGQoXCJic0Ryb3Bkb3duQ29udGFpbmVyXCIsIHtyZWFkOiBFbGVtZW50UmVmfSkgZHJvcGRvd25Db250YWluZXI6IEVsZW1lbnRSZWY8SFRNTEVsZW1lbnQ+O1xuXG4gIEBJbnB1dCgpIG1lbnVJdGVtczogQXJyYXk8TWVudUl0ZW0+ID0gW107XG5cbiAgcHJpdmF0ZSBtZW51SXRlbXNEaWZmZXI6IEl0ZXJhYmxlRGlmZmVyPHt9PiA9IG51bGw7XG5cbiAgcHJpdmF0ZSBpc1Nob3duOiBib29sZWFuID0gZmFsc2U7XG5cbiAgZ2V0IGhhc01lbnVJdGVtcygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5tZW51SXRlbXMgIT0gbnVsbCAmJiB0aGlzLm1lbnVJdGVtcy5sZW5ndGggPiAwO1xuICB9XG5cbiAgb25Eb2N1bWVudENsaWNrOiAoZXZlbnQpPT52b2lkO1xuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gcGFyZW50IHNlZSBbW0Jhc2VDb21wb25lbnRdXSBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0gc2Vzc2lvblNlcnZpY2Ugc2VlIFtbQmFzZUNvbXBvbmVudF1dIGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSBlbGVtZW50UmVmIHNlZSBbW0Jhc2VDb21wb25lbnRdXSBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0gY2QgQ2hhbmdlIGRldGVjdG9yXG4gICAqIEBwYXJhbSBkaWZmZXJzXG4gICAqIEBwYXJhbSBwb3B1cE1lbnVTZXJ2aWNlXG4gICAqIEBwYXJhbSByZW5kZXJlciBzZWUgW1tCYXNlQ29tcG9uZW50XV0gY29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIEBPcHRpb25hbCgpIEBTa2lwU2VsZigpIHBhcmVudDogQmFzZUNvbXBvbmVudCxcbiAgICBzZXNzaW9uU2VydmljZTogU2Vzc2lvblNlcnZpY2UsXG4gICAgZWxlbWVudFJlZjogRWxlbWVudFJlZixcbiAgICBwcml2YXRlIGNkOiBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICBkaWZmZXJzOiBJdGVyYWJsZURpZmZlcnMsXG4gICAgcHJpdmF0ZSBwb3B1cE1lbnVTZXJ2aWNlOiBDb250ZXh0TWVudVNlcnZpY2UsXG4gICAgcmVuZGVyZXI6IFJlbmRlcmVyMlxuICApIHtcbiAgICBzdXBlcihwYXJlbnQsIHNlc3Npb25TZXJ2aWNlLCBlbGVtZW50UmVmLCByZW5kZXJlcik7XG5cbiAgICB0aGlzLm1lbnVJdGVtc0RpZmZlciA9IGRpZmZlcnMuZmluZChbXSkuY3JlYXRlKCk7XG5cbiAgICB0aGlzLm9uRG9jdW1lbnRDbGljayA9IChldmVudCk9PntcbiAgICAgIHRoaXMuaGFuZGxlRG9jdW1lbnRDbGljayhldmVudCk7XG4gICAgfTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLm9uRG9jdW1lbnRDbGljaywgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogRG8gY2hlY2sgbGlmZWN5Y2xlXG4gICAqL1xuICBuZ0RvQ2hlY2soKSB7XG4gICAgaWYgKHRoaXMubWVudUl0ZW1zRGlmZmVyLmRpZmYodGhpcy5tZW51SXRlbXMpKSB7XG4gICAgICB0aGlzLmNkLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZnRlciB2aWV3IGluaXQgbGlmZWN5Y2xlLiBUcmlnZ2VyIGNoYW5nZSBkZXRlY3Rpb24gYW5kIHNob3cgdGhpcyBjb21wb25lbnRcbiAgICovXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICBzdXBlci5uZ0FmdGVyVmlld0luaXQoKTtcbiAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcblxuICAgIFVpRG9jdW1lbnQucmVnaXN0ZXJNZW51SXRlbUVsZW1lbnQodGhpcy5nZXRJZCgpLCB0aGlzIGFzIGFueSk7XG5cbiAgICBjb25zdCB0bSA9IHNldFRpbWVvdXQoKCk9PntcbiAgICAgIGNsZWFyVGltZW91dCh0bSk7XG4gICAgICB0aGlzLnNob3coKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXN0cm95IGxpZmVjeWNsZS4gUmVtb3ZlIGV2ZW50IGxpc3RlbmVycyBhbmQgcmVtb3ZlIGRyb3Bkb3duIGVsZW1lbnRzXG4gICAqL1xuICBuZ09uRGVzdHJveSgpIHtcbiAgICBzdXBlci5uZ09uRGVzdHJveSgpO1xuXG4gICAgVWlEb2N1bWVudC51bnJlZ2lzdGVyTWVudUl0ZW1FbGVtZW50KHRoaXMuZ2V0SWQoKSk7XG5cbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5vbkRvY3VtZW50Q2xpY2ssIHRydWUpO1xuICAgIHRoaXMuZHJvcGRvd25Db250YWluZXIgPSBudWxsO1xuICAgIHRoaXMuZHJvcGRvd24gPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFNob3cgdGhlIHBvcHVwIGJ5IHNldHRpbmcgQ1NTIHBvc2l0aW9uIHRvIG9uIHNjcmVlblxuICAgKi9cbiAgcHJpdmF0ZSBzaG93KCkge1xuICAgIHRoaXMucG9wdXBNZW51U2VydmljZS5zZXRBY3RpdmVNZW51KHRoaXMuaWQpO1xuXG4gICAgaWYgKHRoaXMuZHJvcGRvd24gIT0gbnVsbCkge1xuICAgICAgdGhpcy5kcm9wZG93bi5zaG93KCk7XG4gICAgICB0aGlzLmlzU2hvd24gPSB0cnVlO1xuICAgICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLmdldFNlc3Npb24oKS5nZXRNb3VzZVBvc2l0aW9uKCk7XG5cbiAgICAgIGlmIChwb3NpdGlvbiAhPSBudWxsICYmIHRoaXMuZHJvcGRvd25Db250YWluZXIgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMuZHJvcGRvd25Db250YWluZXIubmF0aXZlRWxlbWVudCwgXCJsZWZ0XCIsIHBvc2l0aW9uLnggKyBcInB4XCIpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMuZHJvcGRvd25Db250YWluZXIubmF0aXZlRWxlbWVudCwgXCJ0b3BcIiwgcG9zaXRpb24ueSArIFwicHhcIik7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY2QubWFya0ZvckNoZWNrKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhpZGUgdGhlIHBvcHVwIG1lbnVcbiAgICovXG4gIHByaXZhdGUgaGlkZSgpIHtcbiAgICB0aGlzLmRyb3Bkb3duLmhpZGUoKTtcbiAgICB0aGlzLmlzU2hvd24gPSBmYWxzZTtcbiAgICB0aGlzLmNkLm1hcmtGb3JDaGVjaygpO1xuICAgIHRoaXMucG9wdXBNZW51U2VydmljZS5zZXRBY3RpdmVNZW51KG51bGwpO1xuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IGhhbmRsZXIgZm9yIG1vdXNlIGNsaWNrXG4gICAqIEBwYXJhbSBldmVudFxuICAgKi9cbiAgaGFuZGxlRG9jdW1lbnRDbGljayhldmVudDogTW91c2VFdmVudCl7XG4gICAgaWYgKHRoaXMuaXNTaG93biA9PT0gdHJ1ZSAmJiAhdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuY29udGFpbnMoZXZlbnQudGFyZ2V0KSkge1xuICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBbW2NkXV0gKENoYW5nZSBkZXRlY3RvcikgcHJvcGVydHlcbiAgICovXG4gIGdldENoYW5nZURldGVjdG9yKCkge1xuICAgIHJldHVybiB0aGlzLmNkO1xuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IGhhbmRsZXIgdGhhdCBoaWRlcyBhbGwgb3RoZXIgcG9wdXAgbWVudXMgYW5kIGRpc3BsYXlzIHRoaXMgb25lXG4gICAqIEBwYXJhbSBldmVudFxuICAgKi9cbiAgZGlzcFN1Ym1lbnUoZXZlbnQ6IGFueSk6IHZvaWQge1xuICAgIGNvbnN0IGN1cnJlbnRUYXJnZXQ6IGFueSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG4gICAgY29uc3QgY3VycmVudENoaWxkcmVuOiBBcnJheTxhbnk+ID0gY3VycmVudFRhcmdldC5jaGlsZHJlbjtcbiAgICBjb25zdCBwYXJlbnRDaGlsZHJlbjogQXJyYXk8YW55PiA9IGN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5jaGlsZHJlbjtcblxuICAgIGZvcihsZXQgaSA9IDAsIGxlbiA9IHBhcmVudENoaWxkcmVuLmxlbmd0aDsgaSA8IGxlbjsgaSsrKXtcbiAgICAgIGlmKHBhcmVudENoaWxkcmVuW2ldICE9PSB1bmRlZmluZWQpe1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHBhcmVudENoaWxkcmVuW2ldLCBcImJhY2tncm91bmQtY29sb3JcIiwgXCIjZmZmZmZmXCIpO1xuICAgICAgfVxuICAgICAgaWYocGFyZW50Q2hpbGRyZW5baV0uY2hpbGRyZW5bMV0gPT09IHVuZGVmaW5lZCl7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBwYXJlbnRDaGlsZHJlbltpXS5jaGlsZHJlblsxXS5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cC1zdWItbWVudS1kaXNwbGF5Jyk7XG4gICAgfVxuXG4gICAgaWYoY3VycmVudENoaWxkcmVuWzFdID09PSB1bmRlZmluZWRcbiAgICAgICAgfHwgKGN1cnJlbnRDaGlsZHJlblswXSAhPT0gdW5kZWZpbmVkICYmICFjdXJyZW50Q2hpbGRyZW5bMF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdkcm9wZG93bi1pdGVtJykpKXtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjdXJyZW50Q2hpbGRyZW5bMV0uY2xhc3NMaXN0LmFkZCgncG9wdXAtc3ViLW1lbnUtZGlzcGxheScpO1xuICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoY3VycmVudFRhcmdldCwgXCJiYWNrZ3JvdW5kLWNvbG9yXCIsIFwiI2Y1ZGU5MlwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgYW4gYXR0cmlidXRlIHdpdGggdmFsdWUgb24gdGhlIG1lbnUgaXRlbVxuICAgKiBAcGFyYW0gbmFtZSBBdHRyaWJ1dGUgbmFtZVxuICAgKiBAcGFyYW0gdmFsdWUgQXR0cmlidXRlIHZhbHVlXG4gICAqL1xuICBzZXRBdHRyaWJ1dGUobmFtZTogc3RyaW5nLCB2YWx1ZTogYW55KSB7XG4gICAgdGhpcy5zZXRDdXN0b21BdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdmFsdWUgb2YgYW4gYXR0cmlidXRlIGJ5IG5hbWVcbiAgICogQHBhcmFtIG5hbWUgQXR0cmlidXRlIG5hbWVcbiAgICovXG4gIGdldEF0dHJpYnV0ZShuYW1lOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDdXN0b21BdHRyaWJ1dGUobmFtZSk7XG4gIH1cblxuICB0b0pzb24oKSB7XG4gICAgcmV0dXJuIHN1cGVyLnRvSnNvbigpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBEaXJlY3RpdmUsIElucHV0LCBRdWVyeUxpc3QsIENvbnRlbnRDaGlsZHJlbiwgT3V0cHV0LCBFdmVudEVtaXR0ZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE1lbnVJdGVtIH0gZnJvbSAnLi9tZW51LWl0ZW0nO1xuXG4vKipcbiAqIE1lbnUgaXRlbSBkaXJlY3RpdmUgY2xhc3MuIEFkZHMgbWVudSBkaXNwYXkgYW5kIGJlaGF2aW9yIHRvIGNvbXBvbmVudFxuICovXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6ICd2dC1tZW51LWl0ZW0nXG59KVxuZXhwb3J0IGNsYXNzIE1lbnVJdGVtRGlyZWN0aXZlIHtcbiAgQElucHV0KCkgcHJpdmF0ZSBpZE5hbWU6IHN0cmluZzsgLy9ETyBOT1QgdXNlZCwgZXhpc3RzIGZvciBiYWQgdXNhZ2VcbiAgQElucHV0KCkgcHJpdmF0ZSBpZDogc3RyaW5nO1xuICBASW5wdXQoKSBwcml2YXRlIHRleHQ6IHN0cmluZyA9ICcnO1xuICBASW5wdXQoKSBwcml2YXRlIHZpc2libGU6IGJvb2xlYW4gPSB0cnVlO1xuICBAT3V0cHV0KCkgcHJpdmF0ZSBvbkNvbW1hbmQgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG5cbiAgQENvbnRlbnRDaGlsZHJlbihNZW51SXRlbURpcmVjdGl2ZSkgcHJpdmF0ZSBzdWJNZW51SXRlbXM6IFF1ZXJ5TGlzdDxNZW51SXRlbURpcmVjdGl2ZT47XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgW1tNZW51SXRlbURpcmVjdGl2ZV1dIGNoaWxkcmVuIG9mIHBhcmVudCB2aWV3IHRvIFtbTWVudUl0ZW1dXVxuICAgKiBAcGFyYW0gcGFyZW50U2NyZWVuSWRcbiAgICovXG4gIHRvTWVudUl0ZW0ocGFyZW50U2NyZWVuSWQ/OiBzdHJpbmcpOiBNZW51SXRlbSB7XG4gICAgY29uc3QgbWVudUl0ZW06IE1lbnVJdGVtID0ge1xuICAgICAgaWQ6IHRoaXMuaWQsXG4gICAgICB0ZXh0OiB0aGlzLnRleHQsXG4gICAgICBtZW51SXRlbXM6IG51bGwsXG4gICAgICBvbkNvbW1hbmQ6IHRoaXMub25Db21tYW5kLFxuICAgICAgcGFyZW50U2NyZWVuSWQ6IHBhcmVudFNjcmVlbklkLFxuICAgICAgZGlzcGxheTogdGhpcy52aXNpYmxlXG4gICAgfTtcblxuICAgIGlmICh0aGlzLnN1Yk1lbnVJdGVtcyAhPSBudWxsICYmIHRoaXMuc3ViTWVudUl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vZmlsdGVyIHRvIHJlbW92ZSBzZWxmIHRoZW4gbWFwIHRvIE1lbnVJdGVtXG4gICAgICBtZW51SXRlbS5tZW51SXRlbXMgPSB0aGlzLnN1Yk1lbnVJdGVtcy5maWx0ZXIoaXRlbT0+aXRlbSAhPT0gdGhpcykubWFwKGl0ZW09Pml0ZW0udG9NZW51SXRlbShwYXJlbnRTY3JlZW5JZCkpO1xuICAgIH1cblxuICAgIHJldHVybiBtZW51SXRlbTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBPdXRwdXQsIElucHV0LCBFdmVudEVtaXR0ZXIsIE9uRGVzdHJveSwgQWZ0ZXJWaWV3SW5pdCwgQ2hhbmdlRGV0ZWN0b3JSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE1lbnVJdGVtIH0gZnJvbSAnLi4vbWVudS1pdGVtJztcbmltcG9ydCB7IENsaWVudEV2ZW50IH0gZnJvbSAnLi4vLi4vZXZlbnQtaGFuZGxlci9jbGllbnQtZXZlbnQnO1xuaW1wb3J0IHsgQXBwVXRpbHMgfSBmcm9tICcuLi8uLi9iYXNlL2FwcC11dGlscyc7XG5pbXBvcnQgeyBTZXNzaW9uU2VydmljZSB9IGZyb20gJy4uLy4uL3Nlc3Npb24vc2Vzc2lvbi5zZXJ2aWNlJztcbmltcG9ydCB7IE1lbnVJdGVtQnVpbGRlciB9IGZyb20gJy4uL21lbnUtaXRlbS1idWlsZGVyJztcbmltcG9ydCB7IFVpRG9jdW1lbnQgfSBmcm9tICcuLi8uLi9iYXNlL3VpLWRvY3VtZW50JztcbmltcG9ydCAqIGFzIF8gZnJvbSBcImxvZGFzaFwiO1xuaW1wb3J0IHsgS2V5VXRpbHMgfSBmcm9tICcuLi8uLi9iYXNlL2tleS11dGlscyc7XG5cbi8qKlxuICogQ2xhc3MgZm9yIG1lbnUgaXRlbSBjb21wb25lbnQuIENoaWxkIHJlbmRlcmVkIGJ5IE1lbnUgZGlyZWN0aXZlXG4gKi9cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ1t2dC1tZW51LWl0ZW0tY29tcF0nLFxuICB0ZW1wbGF0ZVVybDogJy4vbWVudS1pdGVtLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vbWVudS1pdGVtLmNvbXBvbmVudC5jc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBNZW51SXRlbUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uRGVzdHJveSwgQWZ0ZXJWaWV3SW5pdHtcbiAgQElucHV0KCkgdGV4dDogc3RyaW5nO1xuICBASW5wdXQoKSBpZDogc3RyaW5nO1xuICBASW5wdXQoKSBtZW51SXRlbXM6IEFycmF5PE1lbnVJdGVtPjtcbiAgQElucHV0KCkgZGlzcGxheTogYm9vbGVhbiA9IHRydWU7XG4gIEBJbnB1dCgpIHZpc2libGU6IGJvb2xlYW47XG4gIEBJbnB1dCgpIGl0ZW06IE1lbnVJdGVtO1xuICBASW5wdXQoKSBwb3B1cE1lbnVJZDogc3RyaW5nO1xuXG4gIEBPdXRwdXQoKSBvbkNsaWNrID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBtZW51IGl0ZW1zIGV4aXN0XG4gICAqIEByZXR1cm5zIFRydWUgaWYgW1ttZW51SXRlbXNdXSBleGlzdHMgYW5kIGhhcyAxIG9yIG1vcmUgaXRlbXNcbiAgICovXG4gIGdldCBoYXNNZW51SXRlbXMoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubWVudUl0ZW1zICE9IG51bGwgJiYgdGhpcy5tZW51SXRlbXMubGVuZ3RoID4gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGlzIG1lbnUgaXRlbSBpcyBhIHNlcGFyYXRvci9kaXZpZGVyIChpLmUuIGh5cGhlbilcbiAgICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgbWVudSBpdGVtIHRleHQgaXMgYSBoeXBoZW5cbiAgICovXG4gIGdldCBpc0RpdmlkZXIoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMudGV4dCA9PT0gJy0nO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBtZW51IGl0ZW0gc3R5bGVzIG1hcFxuICAgKiBAcmV0dXJuIE1hcCBvZiBzdHlsZXNcbiAgICovXG4gIGdldCBtZW51U3R5bGVzKCkge1xuICAgIHJldHVybiB0aGlzLml0ZW0gIT0gbnVsbCA/IHRoaXMuaXRlbS5zdHlsZXMgOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSBzZXNzaW9uU2VydmljZSBJbmplY3RzIHJlZmVyZW5jZSB0byBbW1Nlc3Npb25TZXJ2aWNlXV0gaW5zdGFuY2VcbiAgICovXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgc2Vzc2lvblNlcnZpY2U6IFNlc3Npb25TZXJ2aWNlLCBwcml2YXRlIGNkOiBDaGFuZ2VEZXRlY3RvclJlZikge1xuXG4gIH1cblxuICAvKipcbiAgICogQWZ0ZXIgdmlldyBpbml0IGxpZmVjeWNsZS4gQWRkcyBtZW51IGl0ZW0gdG8gW1tVaURvY3VtZW50XV1cbiAgICovXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICBVaURvY3VtZW50LnJlZ2lzdGVyTWVudUl0ZW1FbGVtZW50KHRoaXMuaWQsIHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIERlc3Ryb3kgbGlmZWN5Y2xlLiBSZW1vdmUgbWVudSBpdGVtIGZyb20gW1tVaURvY3VtZW50XV1cbiAgICovXG4gIG5nT25EZXN0cm95KCkge1xuICAgIHRoaXMuaXRlbSA9IG51bGw7XG4gICAgdGhpcy5tZW51SXRlbXMgPSBudWxsO1xuXG4gICAgVWlEb2N1bWVudC51bnJlZ2lzdGVyTWVudUl0ZW1FbGVtZW50KHRoaXMuaWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBhbiBhdHRyaWJ1dGUgd2l0aCB2YWx1ZSBvbiB0aGUgbWVudSBpdGVtXG4gICAqIEBwYXJhbSBuYW1lIEF0dHJpYnV0ZSBuYW1lXG4gICAqIEBwYXJhbSB2YWx1ZSBBdHRyaWJ1dGUgdmFsdWVcbiAgICovXG4gIHNldEF0dHJpYnV0ZShuYW1lOiBzdHJpbmcsIHZhbHVlOiBhbnkpIHtcbiAgICBpZiAodGhpcy5pdGVtKSB7XG4gICAgICBpZiAobmFtZSA9PT0gXCJkaXNwbGF5XCIgfHwgbmFtZSA9PT0gXCJ2aXNpYmxlXCIpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZSA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PT0gXCJ0cnVlXCI7XG4gICAgICAgIHRoaXMuZGlzcGxheSA9IHZhbHVlO1xuICAgICAgICB0aGlzLml0ZW0uZGlzcGxheSA9IHZhbHVlO1xuICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcbiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gXCJ0ZXh0XCIpIHtcbiAgICAgICAgdGhpcy50ZXh0ID0gdmFsdWU7XG4gICAgICAgIHRoaXMuaXRlbS50ZXh0ID0gdmFsdWU7XG4gICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgfSBlbHNlIGlmIChNZW51SXRlbUJ1aWxkZXIua25vd25LZXlzLmluZGV4T2YobmFtZSkgPCAwKSB7XG4gICAgICAgIGlmICh0aGlzLml0ZW0uY3VzdG9tQXR0cmlidXRlcyA9PSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5pdGVtLmN1c3RvbUF0dHJpYnV0ZXMgPSB7fTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaXRlbS5jdXN0b21BdHRyaWJ1dGVzW25hbWVdID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdmFsdWUgb2YgYW4gYXR0cmlidXRlIGJ5IG5hbWVcbiAgICogQHBhcmFtIG5hbWUgQXR0cmlidXRlIG5hbWVcbiAgICovXG4gIGdldEF0dHJpYnV0ZShuYW1lOiBzdHJpbmcpIHtcbiAgICBpZiAodGhpcy5pdGVtKSB7XG4gICAgICBpZiAoTWVudUl0ZW1CdWlsZGVyLmtub3duS2V5cy5pbmRleE9mKG5hbWUpIDwgMCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVtLmN1c3RvbUF0dHJpYnV0ZXMgPT0gbnVsbCA/IG51bGwgOiB0aGlzLml0ZW0uY3VzdG9tQXR0cmlidXRlc1tuYW1lXTtcbiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gXCJkaXNwbGF5XCIgfHwgbmFtZSA9PT0gXCJ2aXNpYmxlXCIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzcGxheTtcbiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gXCJ0ZXh0XCIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dDtcbiAgICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gXCJpZFwiKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlkO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdmFsdWUgb2YgW1tpZF1dIHByb3BlcnR5XG4gICAqIEByZXR1cm5zIFtbaWRdXSB2YWx1ZVxuICAgKi9cbiAgZ2V0SWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaWQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHZhbHVlIG9mIFtbdGV4dF1dIHByb3BlcnR5XG4gICAqIEByZXR1cm5zIFtbdGV4dF1dIHZhbHVlXG4gICAqL1xuICBnZXRUZXh0KCkge1xuICAgIHJldHVybiB0aGlzLnRleHQ7XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogRXZlbnQgaGFuZGxlciBmcm8gbW91c2VlbnRlciBldmVudFxuICAgKiBAcGFyYW0gZXZlbnQgTW91c2UgZXZlbnRcbiAgICovXG4gIGhhbmRsZU9uRW50ZXIoZXZlbnQpIHtcbiAgICBjb25zdCBjbGllbnRFdmVudCA9IG5ldyBDbGllbnRFdmVudCh0aGlzLCBldmVudCk7XG5cbiAgICBpZiAoQXBwVXRpbHMuY3VzdG9taXplQ2xpZW50RXZlbnQgIT0gbnVsbCkge1xuICAgICAgQXBwVXRpbHMuY3VzdG9taXplQ2xpZW50RXZlbnQodGhpcywgY2xpZW50RXZlbnQpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLml0ZW0gIT0gbnVsbCAmJiB0aGlzLml0ZW0ucGFyZW50U2NyZWVuSWQgIT0gbnVsbCkge1xuICAgICAgY2xpZW50RXZlbnQuc2V0UGFyYW1ldGVyKFwic2NyZWVuSWRcIiwgdGhpcy5pdGVtLnBhcmVudFNjcmVlbklkKTtcbiAgICB9XG5cbiAgICB0aGlzLnNlc3Npb25TZXJ2aWNlLmdldEV2ZW50SGFuZGxlcigpLnNldENsaWVudEV2ZW50KGNsaWVudEV2ZW50KTtcblxuICAgIGlmICh0aGlzLml0ZW0gJiYgdHlwZW9mIHRoaXMuaXRlbS5vbkNvbW1hbmRDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5pdGVtLm9uQ29tbWFuZENhbGxiYWNrKHRoaXMuaXRlbSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLml0ZW0gJiYgdGhpcy5pdGVtLm9uQ29tbWFuZCkge1xuICAgICAgdGhpcy5pdGVtLm9uQ29tbWFuZC5lbWl0KCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucG9wdXBNZW51SWQgIT0gbnVsbCkge1xuICAgICAgdGhpcy5zZXNzaW9uU2VydmljZS5oaWRlQ29udGV4dE1lbnUodGhpcy5wb3B1cE1lbnVJZCk7XG4gICAgfVxuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIEV2ZW50IGhhbmRsZXIgZm9yIG1vdXNlZW50ZXIuIEZvY3VzZXMgdGhlIGV2ZW50IHRhcmdldFxuICAgKiBAcGFyYW0gZXZlbnQgTW91c2UgZXZlbnRcbiAgICovXG4gIGhhbmRsZU1vdXNlRW50ZXIoZXZlbnQpIHtcbiAgICBldmVudC50YXJnZXQuZm9jdXMoKTtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8qKlxuICAgKiBFdmVudCBoYW5kbGVyIGZvciBjbGljay5cbiAgICogQHBhcmFtIGV2ZW50XG4gICAqIEBldmVudCBPbkNvbW1hbmRcbiAgICovXG4gIGhhbmRsZU9uQ2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjbGllbnRFdmVudCA9IG5ldyBDbGllbnRFdmVudCh0aGlzLCBldmVudCk7XG5cbiAgICBpZiAoQXBwVXRpbHMuY3VzdG9taXplQ2xpZW50RXZlbnQgIT0gbnVsbCkge1xuICAgICAgQXBwVXRpbHMuY3VzdG9taXplQ2xpZW50RXZlbnQodGhpcywgY2xpZW50RXZlbnQpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLml0ZW0gIT0gbnVsbCAmJiB0aGlzLml0ZW0ucGFyZW50U2NyZWVuSWQgIT0gbnVsbCkge1xuICAgICAgY2xpZW50RXZlbnQuc2V0UGFyYW1ldGVyKFwic2NyZWVuSWRcIiwgdGhpcy5pdGVtLnBhcmVudFNjcmVlbklkKTtcbiAgICB9XG5cbiAgICB0aGlzLnNlc3Npb25TZXJ2aWNlLmdldEV2ZW50SGFuZGxlcigpLnNldENsaWVudEV2ZW50KGNsaWVudEV2ZW50KTtcblxuICAgIGlmICh0aGlzLml0ZW0gJiYgdHlwZW9mIHRoaXMuaXRlbS5vbkNvbW1hbmRDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5pdGVtLm9uQ29tbWFuZENhbGxiYWNrKHRoaXMuaXRlbSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLml0ZW0gJiYgdGhpcy5pdGVtLm9uQ29tbWFuZCkge1xuICAgICAgdGhpcy5pdGVtLm9uQ29tbWFuZC5lbWl0KCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucG9wdXBNZW51SWQgIT0gbnVsbCkge1xuICAgICAgdGhpcy5zZXNzaW9uU2VydmljZS5oaWRlQ29udGV4dE1lbnUodGhpcy5wb3B1cE1lbnVJZCk7XG4gICAgfVxuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIEV2ZW50IGhhbmRsZXIgZm9yIG1vdXNlZG93biBldmVudFxuICAgKiBAcGFyYW0gZXZlbnQgTW91c2UgZG93biBldmVudFxuICAgKi9cbiAgaGFuZGxlTW91c2VEb3duKGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gICAgY29uc3QgY2xpZW50RXZlbnQgPSBuZXcgQ2xpZW50RXZlbnQodGhpcywgZXZlbnQpO1xuXG4gICAgaWYgKEFwcFV0aWxzLmN1c3RvbWl6ZUNsaWVudEV2ZW50ICE9IG51bGwpIHtcbiAgICAgIEFwcFV0aWxzLmN1c3RvbWl6ZUNsaWVudEV2ZW50KHRoaXMsIGNsaWVudEV2ZW50KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pdGVtICE9IG51bGwgJiYgdGhpcy5pdGVtLnBhcmVudFNjcmVlbklkICE9IG51bGwpIHtcbiAgICAgIGNsaWVudEV2ZW50LnNldFBhcmFtZXRlcihcInNjcmVlbklkXCIsIHRoaXMuaXRlbS5wYXJlbnRTY3JlZW5JZCk7XG4gICAgfVxuXG4gICAgdGhpcy5zZXNzaW9uU2VydmljZS5nZXRFdmVudEhhbmRsZXIoKS5zZXRDbGllbnRFdmVudChjbGllbnRFdmVudCk7XG5cbiAgICBpZiAodGhpcy5pdGVtICYmIHR5cGVvZiB0aGlzLml0ZW0ub25Nb3VzZURvd25DYWxsYmFjayA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICB0aGlzLml0ZW0ub25Nb3VzZURvd25DYWxsYmFjayh0aGlzKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IEpTT04gcmVwcmVzZW50YXRpb24gZm9yIHRoaXMgY29tcG9uZW50XG4gICAqIEByZXR1cm5zIE9iamVjdCBNZXRhZGF0YSBhcyBKU09OXG4gICAqL1xuICB0b0pzb24oKToge30ge1xuICAgIGNvbnN0IGpzb24gPSB7fTtcblxuICAgIGpzb25bXCJ0YWdOYW1lXCJdID0gXCJtZW51SXRlbVwiO1xuICAgIGpzb25bXCJueFRhZ05hbWVcIl0gPSBcIm1lbnVJdGVtXCI7XG5cbiAgICBpZiAodGhpcy5pZCAhPSBudWxsKSB7XG4gICAgICBqc29uW1wiaWRcIl0gPSB0aGlzLmlkO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnRleHQgIT0gbnVsbCkge1xuICAgICAganNvbltcInRleHRcIl0gPSB0aGlzLnRleHQ7XG4gICAgfVxuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKHRoaXMucG9wdXBNZW51SWQgIT0gbnVsbCkge1xuICAgICAganNvbltcInBvcHVwXCJdID0gXCIjXCIgKyB0aGlzLnBvcHVwTWVudUlkO1xuICAgIH1cblxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICh0aGlzLml0ZW0uY3VzdG9tQXR0cmlidXRlcyAhPSBudWxsKSB7XG4gICAgICBjb25zdCBrZXlzID0gXy5rZXlzKHRoaXMuaXRlbS5jdXN0b21BdHRyaWJ1dGVzKTtcblxuICAgICAgZm9yIChsZXQga2V5IG9mIGtleXMpIHtcbiAgICAgICAganNvbltrZXldID0gS2V5VXRpbHMudG9Kc29uVmFsdWUodGhpcy5pdGVtLmN1c3RvbUF0dHJpYnV0ZXNba2V5XSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGpzb247XG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgaGFuZGxlciB0byBzaG93IHRoZSBzdWJtZW51IGl0ZW1zIGJ5IGFkZGluZyBDU1MgY2xhc3NcbiAgICogQHBhcmFtIGV2ZW50XG4gICAqL1xuICBkaXNwU3VibWVudShldmVudDogYW55KTogdm9pZCB7XG4gICAgY29uc3QgY3VycmVudFRhcmdldDogYW55ID0gZXZlbnQuY3VycmVudFRhcmdldDtcbiAgICBjb25zdCBjdXJyZW50Q2hpbGRyZW46IEFycmF5PGFueT4gPSBjdXJyZW50VGFyZ2V0LmNoaWxkcmVuO1xuICAgIGNvbnN0IHBhcmVudENoaWxkcmVuOiBBcnJheTxhbnk+ID0gY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmNoaWxkcmVuO1xuXG4gICAgZm9yKGxldCBpID0gMCwgbGVuID0gcGFyZW50Q2hpbGRyZW4ubGVuZ3RoOyBpIDwgbGVuOyBpKyspe1xuICAgICAgaWYocGFyZW50Q2hpbGRyZW5baV0gIT09IHVuZGVmaW5lZCl7XG4gICAgICAgIHBhcmVudENoaWxkcmVuW2ldLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiI2ZmZmZmZlwiO1xuICAgICAgfVxuICAgICAgaWYocGFyZW50Q2hpbGRyZW5baV0uY2hpbGRyZW5bMV0gPT09IHVuZGVmaW5lZCl7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBwYXJlbnRDaGlsZHJlbltpXS5jaGlsZHJlblsxXS5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cC1zdWItbWVudS1kaXNwbGF5Jyk7XG4gICAgfVxuXG4gICAgaWYoY3VycmVudENoaWxkcmVuWzFdID09PSB1bmRlZmluZWRcbiAgICAgICAgfHwgKGN1cnJlbnRDaGlsZHJlblswXSAhPT0gdW5kZWZpbmVkICYmICFjdXJyZW50Q2hpbGRyZW5bMF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdkcm9wZG93bi1pdGVtJykpKXtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjdXJyZW50Q2hpbGRyZW5bMV0uY2xhc3NMaXN0LmFkZCgncG9wdXAtc3ViLW1lbnUtZGlzcGxheScpO1xuICAgIGN1cnJlbnRUYXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCIjZjVkZTkyXCI7XG4gIH1cbn1cbiIsImltcG9ydCB7IERpcmVjdGl2ZSwgZm9yd2FyZFJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTWVudUl0ZW1EaXJlY3RpdmUgfSBmcm9tICcuL21lbnUtaXRlbS5kaXJlY3RpdmUnO1xuXG4vKipcbiAqIE1lbnUgZGlyZWN0aXZlIGNsYXNzXG4gKi9cbkBEaXJlY3RpdmUoe1xuICBzZWxlY3RvcjogJ3Z0LW1lbnUnLFxuICBwcm92aWRlcnM6IFtcbiAgICB7XG4gICAgICBwcm92aWRlOiBNZW51SXRlbURpcmVjdGl2ZSxcbiAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpPT5NZW51RGlyZWN0aXZlKVxuICAgIH1cbiAgXVxufSlcbmV4cG9ydCBjbGFzcyBNZW51RGlyZWN0aXZlIGV4dGVuZHMgTWVudUl0ZW1EaXJlY3RpdmUge1xuXG59XG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIE9uRGVzdHJveSwgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENoYW5nZURldGVjdG9yUmVmLCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSBcInJ4anNcIjtcbmltcG9ydCB7IENvbnRleHRNZW51U2VydmljZSB9IGZyb20gJy4uL2NvbnRleHQtbWVudS5zZXJ2aWNlJztcbmltcG9ydCB7IFBvcHVwTWVudUNvbXBvbmVudCB9IGZyb20gJy4uL3BvcHVwLW1lbnUuY29tcG9uZW50JztcblxuLyoqXG4gKiBDbGFzcyBmb3IgcG9wdXAgbWVudSBjb250YWluZXJcbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAndnQtcG9wdXAtbWVudS1jb250YWluZXInLFxuICB0ZW1wbGF0ZVVybDogJy4vcG9wdXAtbWVudS1jb250YWluZXIuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9wb3B1cC1tZW51LWNvbnRhaW5lci5jb21wb25lbnQuY3NzJ10sXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG59KVxuZXhwb3J0IGNsYXNzIFBvcHVwTWVudUNvbnRhaW5lckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uRGVzdHJveSB7XG4gIEBWaWV3Q2hpbGQoUG9wdXBNZW51Q29tcG9uZW50KSBwb3B1cE1lbnU6IFBvcHVwTWVudUNvbXBvbmVudDtcblxuICBwcml2YXRlIGFjdGl2ZU1lbnVTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcblxuICBhY3RpdmVNZW51SWQ6IHN0cmluZztcbiAgYWN0aXZlTWVudUl0ZW1zOiBBcnJheTxhbnk+O1xuICBcbiAgaGFzUG9wdXBNZW51OiBib29sZWFuID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIFxuICAgKiBAcGFyYW0gY29udGV4dE1lbnVTZXJ2aWNlIEluamVjdHMgcmVmZXJlbmNlIHRvIGNvbnRleHQgbWVudSBzZXJ2aWNlXG4gICAqIEBwYXJhbSBjZCBJbmplY3RzIGNoYW5nZSBkZXRlY3RvciByZWZlcmVuY2VcbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgY29udGV4dE1lbnVTZXJ2aWNlOiBDb250ZXh0TWVudVNlcnZpY2UsXG4gICAgcHJpdmF0ZSBjZDogQ2hhbmdlRGV0ZWN0b3JSZWZcbiAgKSB7XG4gICAgdGhpcy5hY3RpdmVNZW51U3Vic2NyaXB0aW9uID0gdGhpcy5jb250ZXh0TWVudVNlcnZpY2UuYWN0aXZlTWVudU9ic2VydmFibGUuc3Vic2NyaWJlKChhY3RpdmVNZW51KT0+e1xuICAgICAgdGhpcy5zZXRBY3RpdmVNZW51KGFjdGl2ZU1lbnUpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERlc3Ryb3kgbGlmZWN5Y2xlLiBSZW1vdmUgcmVmZXJlbmNlc1xuICAgKi9cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgaWYgKHRoaXMuYWN0aXZlTWVudVN1YnNjcmlwdGlvbiAhPSBudWxsKSB7XG4gICAgICB0aGlzLmFjdGl2ZU1lbnVTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB9XG5cbiAgICB0aGlzLmFjdGl2ZU1lbnVTdWJzY3JpcHRpb24gPSBudWxsO1xuICAgIHRoaXMuYWN0aXZlTWVudUl0ZW1zID0gbnVsbDtcbiAgICB0aGlzLmNvbnRleHRNZW51U2VydmljZSA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGFjdGl2ZSBtZW51IGJ5IGlkXG4gICAqIEBwYXJhbSBpZCBJZCBvZiBtZW51IHRvIHNldCBhcyBhY3RpdmVcbiAgICovXG4gIHNldEFjdGl2ZU1lbnUoaWQ6IHN0cmluZykge1xuICAgIHRoaXMuYWN0aXZlTWVudUlkID0gaWQ7XG4gICAgXG4gICAgaWYgKGlkICE9IG51bGwpIHtcbiAgICAgIHRoaXMuYWN0aXZlTWVudUl0ZW1zID0gdGhpcy5jb250ZXh0TWVudVNlcnZpY2UuZ2V0Q29udGV4dE1lbnVJdGVtcyhpZCk7XG5cbiAgICAgIGlmICh0aGlzLmFjdGl2ZU1lbnVJdGVtcyAhPSBudWxsICYmIHRoaXMuYWN0aXZlTWVudUl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGhpcy5oYXNQb3B1cE1lbnUgPSB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFjdGl2ZU1lbnVJdGVtcyA9IG51bGw7XG4gICAgICB0aGlzLmhhc1BvcHVwTWVudSA9IGZhbHNlO1xuICAgIH1cblxuICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBEaXJlY3RpdmUsIFF1ZXJ5TGlzdCwgSW5wdXQsIENvbnRlbnRDaGlsZHJlbiwgT25Jbml0LCBBZnRlclZpZXdJbml0LCBPcHRpb25hbCwgU2tpcFNlbGYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE1lbnVJdGVtRGlyZWN0aXZlIH0gZnJvbSAnLi9tZW51LWl0ZW0uZGlyZWN0aXZlJztcbmltcG9ydCB7IE1lbnVJdGVtIH0gZnJvbSAnLi9tZW51LWl0ZW0nO1xuaW1wb3J0IHsgQ29udGV4dE1lbnVTZXJ2aWNlIH0gZnJvbSAnLi9jb250ZXh0LW1lbnUuc2VydmljZSc7XG5pbXBvcnQgeyBCYXNlQ29tcG9uZW50IH0gZnJvbSAnLi4vYmFzZS9iYXNlLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBWaWV3Q29tcG9uZW50IH0gZnJvbSAnLi4vdmlldy92aWV3LmNvbXBvbmVudCc7XG5cbi8qKlxuICogUG9wdXAgbWVudSBkaXJlY3RpdmUgY2xhc3MuIEFkZHMgY29udGV4dCBtZW51IGl0ZW1zIHRvIGNvbXBvbmVudFxuICovXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6ICd2dC1wb3B1cC1tZW51J1xufSlcbmV4cG9ydCBjbGFzcyBQb3B1cE1lbnVEaXJlY3RpdmUgaW1wbGVtZW50cyBBZnRlclZpZXdJbml0IHtcbiAgQElucHV0KCkgaWROYW1lOiBzdHJpbmc7IC8vRE8gTk9UIHVzZWQsIGV4aXN0cyBmb3IgYmFkIHVzYWdlXG4gIEBJbnB1dCgpIGlkOiBzdHJpbmc7XG4gIEBJbnB1dCgpIGRpc2FibGVkOiBib29sZWFuID0gZmFsc2U7XG4gIEBJbnB1dCgpIHZpc2libGU6IGJvb2xlYW4gPSB0cnVlO1xuICBASW5wdXQoKSB0ZXh0OiBzdHJpbmcgPSBcIlwiO1xuXG4gIEBDb250ZW50Q2hpbGRyZW4oTWVudUl0ZW1EaXJlY3RpdmUpIHByaXZhdGUgc3ViTWVudUl0ZW1zOiBRdWVyeUxpc3Q8TWVudUl0ZW1EaXJlY3RpdmU+O1xuICBcbiAgLyoqXG4gICAqIFxuICAgKiBAcGFyYW0gcGFyZW50IFxuICAgKiBAcGFyYW0gY29udGV4dE1lbnVTZXJ2aWNlIEluamVjdGVkIHNlcnZpY2UgZm9yIGNvbnRleHQgbWVudSBmdW5jdGlvbnNcbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIEBPcHRpb25hbCgpIHByaXZhdGUgcGFyZW50OiBCYXNlQ29tcG9uZW50LFxuICAgIHByaXZhdGUgY29udGV4dE1lbnVTZXJ2aWNlOiBDb250ZXh0TWVudVNlcnZpY2VcbiAgKSB7IH1cblxuICAvKipcbiAgICogQWZ0ZXIgdmlldyBpbml0IGxpZmVjeWNsZS4gSW5pdGlhbGl6ZSBzdWJtZW51IGl0ZW1zXG4gICAqL1xuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgaWYgKHRoaXMucGFyZW50ICE9IG51bGwgJiYgdGhpcy5wYXJlbnQuZ2V0UGFyZW50VmlldygpICE9IG51bGwpIHtcbiAgICAgICh0aGlzLnBhcmVudC5nZXRQYXJlbnRWaWV3KCkgYXMgVmlld0NvbXBvbmVudCkucmVnaXN0ZXJQb3B1cE1lbnUodGhpcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY29udmVydFN1Yk1lbnVJdGVtcyhudWxsKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGVsZWdhdGUgdG8gW1tDb250ZXh0TWVudVNlcnZpY2VdXSBnZXRDb250ZXh0TWVudUl0ZW1zIG1ldGhvZFxuICAgKi9cbiAgZ2V0TWVudUl0ZW1zKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHRNZW51U2VydmljZS5nZXRDb250ZXh0TWVudUl0ZW1zKHRoaXMuaWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgYWxsIHN1YiBtZW51IGl0ZW1zIChbW01lbnVJdGVtRGlyZWN0aXZlXV0pIHRvIFtbTWVudUl0ZW1dXVxuICAgKiBAcGFyYW0gcGFyZW50U2NyZWVuSWQgSWQgb2YgcGFyZW50IHZpZXcgY29tcG9uZW50XG4gICAqL1xuICBjb252ZXJ0U3ViTWVudUl0ZW1zKHBhcmVudFNjcmVlbklkOiBzdHJpbmcpIHtcbiAgICBsZXQgbWVudUl0ZW1zOiBBcnJheTxNZW51SXRlbT4gPSBbXTtcblxuICAgIGlmICh0aGlzLnN1Yk1lbnVJdGVtcykge1xuICAgICAgbWVudUl0ZW1zID0gdGhpcy5zdWJNZW51SXRlbXMubWFwKGl0ZW09Pml0ZW0udG9NZW51SXRlbShwYXJlbnRTY3JlZW5JZCkpO1xuICAgIH1cblxuICAgIHRoaXMuY29udGV4dE1lbnVTZXJ2aWNlLnJlZ2lzdGVyQ29udGV4dE1lbnUodGhpcy5pZCwgbWVudUl0ZW1zLCBwYXJlbnRTY3JlZW5JZCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IE5nTW9kdWxlLCBDVVNUT01fRUxFTUVOVFNfU0NIRU1BIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgUG9wdXBNZW51Q29tcG9uZW50IH0gZnJvbSAnLi9wb3B1cC1tZW51LmNvbXBvbmVudCc7XG5pbXBvcnQgeyBNZW51SXRlbURpcmVjdGl2ZSB9IGZyb20gJy4vbWVudS1pdGVtLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBNZW51SXRlbUNvbXBvbmVudCB9IGZyb20gJy4vbWVudS1pdGVtL21lbnUtaXRlbS5jb21wb25lbnQnO1xuaW1wb3J0IHsgTWVudURpcmVjdGl2ZSB9IGZyb20gJy4vbWVudS5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgQ29udGV4dE1lbnVTZXJ2aWNlIH0gZnJvbSAnLi9jb250ZXh0LW1lbnUuc2VydmljZSc7XG5pbXBvcnQgeyBCc0Ryb3Bkb3duTW9kdWxlIH0gZnJvbSAnbmd4LWJvb3RzdHJhcCc7XG5pbXBvcnQgeyBQb3B1cE1lbnVDb250YWluZXJDb21wb25lbnQgfSBmcm9tICcuL3BvcHVwLW1lbnUtY29udGFpbmVyL3BvcHVwLW1lbnUtY29udGFpbmVyLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBQb3B1cE1lbnVEaXJlY3RpdmUgfSBmcm9tICcuL3BvcHVwLW1lbnUuZGlyZWN0aXZlJztcblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogW1xuICAgIENvbW1vbk1vZHVsZSxcbiAgICBCc0Ryb3Bkb3duTW9kdWxlLmZvclJvb3QoKVxuICBdLFxuICBkZWNsYXJhdGlvbnM6IFtcbiAgICBQb3B1cE1lbnVDb21wb25lbnQsXG4gICAgTWVudUl0ZW1EaXJlY3RpdmUsXG4gICAgTWVudUl0ZW1Db21wb25lbnQsXG4gICAgTWVudURpcmVjdGl2ZSxcbiAgICBQb3B1cE1lbnVDb250YWluZXJDb21wb25lbnQsXG4gICAgUG9wdXBNZW51RGlyZWN0aXZlXG4gIF0sXG4gIGV4cG9ydHM6IFtcbiAgICBQb3B1cE1lbnVDb21wb25lbnQsXG4gICAgTWVudUl0ZW1EaXJlY3RpdmUsXG4gICAgTWVudUl0ZW1Db21wb25lbnQsXG4gICAgTWVudURpcmVjdGl2ZSxcbiAgICBCc0Ryb3Bkb3duTW9kdWxlLFxuICAgIFBvcHVwTWVudUNvbnRhaW5lckNvbXBvbmVudCxcbiAgICBQb3B1cE1lbnVEaXJlY3RpdmVcbiAgXSxcbiAgcHJvdmlkZXJzOiBbXG4gICAgQ29udGV4dE1lbnVTZXJ2aWNlXG4gIF0sXG4gIHNjaGVtYXM6IFtDVVNUT01fRUxFTUVOVFNfU0NIRU1BXVxufSlcbmV4cG9ydCBjbGFzcyBQb3B1cE1lbnVNb2R1bGUgeyB9XG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgVGVtcGxhdGVSZWYsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG4vKipcbiAqIENsYXNzIGZvciBib3R0b20vcmlnaHQgc3BsaXQtcGFuZSBzZWN0aW9uXG4gKi9cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3Z0LWJvdHRvbScsXG4gIHRlbXBsYXRlVXJsOiAnLi9ib3R0b20tcGFuZS5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2JvdHRvbS1wYW5lLmNvbXBvbmVudC5jc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBCb3R0b21QYW5lQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgQFZpZXdDaGlsZChUZW1wbGF0ZVJlZikgY29udGVudDtcbiAgXG4gIGNvbnN0cnVjdG9yKCkgeyB9XG5cbiAgbmdPbkluaXQoKSB7XG4gIH1cblxufVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIFRlbXBsYXRlUmVmLCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuLyoqXG4gKiBDbGFzcyBmb3IgdG9wL2xlZnQgc3BsaXQtcGFuZSBzZWN0aW9uXG4gKi9cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3Z0LXRvcCcsXG4gIHRlbXBsYXRlVXJsOiAnLi90b3AtcGFuZS5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL3RvcC1wYW5lLmNvbXBvbmVudC5jc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBUb3BQYW5lQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgQFZpZXdDaGlsZChUZW1wbGF0ZVJlZikgY29udGVudDtcbiAgXG4gIGNvbnN0cnVjdG9yKCkgeyB9XG5cbiAgbmdPbkluaXQoKSB7XG4gIH1cblxufVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgSW5wdXQsIENvbnRlbnRDaGlsZCwgVmlld0NoaWxkLCBFbGVtZW50UmVmLCBPcHRpb25hbCwgU2tpcFNlbGYsIFJlbmRlcmVyMiwgTmdab25lLCBDaGFuZ2VEZXRlY3RvclJlZiwgZm9yd2FyZFJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQmFzZUNvbXBvbmVudCB9IGZyb20gJy4uL2Jhc2UvYmFzZS5jb21wb25lbnQnO1xuaW1wb3J0IHsgQm90dG9tUGFuZUNvbXBvbmVudCB9IGZyb20gJy4vYm90dG9tLXBhbmUvYm90dG9tLXBhbmUuY29tcG9uZW50Jztcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5pbXBvcnQgeyBUb3BQYW5lQ29tcG9uZW50IH0gZnJvbSAnLi90b3AtcGFuZS90b3AtcGFuZS5jb21wb25lbnQnO1xuaW1wb3J0IHsgU2Vzc2lvblNlcnZpY2UgfSBmcm9tICcuLi9zZXNzaW9uL3Nlc3Npb24uc2VydmljZSc7XG5pbXBvcnQgKiBhcyBfIGZyb20gJ2xvZGFzaCc7XG5cbmRlY2xhcmUgdmFyICQ6IGFueTtcblxuLyoqXG4gKiBDbGFzcyBmb3Igc3BsaXQgcmVzaXphYmxlIHBhbmVzXG4gKi9cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3Z0LXNwbGl0LXBhbmUnLFxuICB0ZW1wbGF0ZVVybDogJy4vc3BsaXQtcGFuZS5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL3NwbGl0LXBhbmUuY29tcG9uZW50LmNzcyddLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgcHJvdmlkZXJzOiBbXG4gICAge1xuICAgICAgcHJvdmlkZTogQmFzZUNvbXBvbmVudCxcbiAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpPT5TcGxpdFBhbmVDb21wb25lbnQpXG4gICAgfVxuICBdXG59KVxuZXhwb3J0IGNsYXNzIFNwbGl0UGFuZUNvbXBvbmVudCBleHRlbmRzIEJhc2VDb21wb25lbnQge1xuICAvKipcbiAgICogJ2hvcml6b250YWwnID0gdG9wL2JvdHRvbSBwYW5lcywgJ3ZlcnRpY2FsJyA9IGxlZnQvcmlnaHQgcGFuZXNcbiAgICovXG4gIEBJbnB1dCgpIG9yaWVudGF0aW9uOiBzdHJpbmcgPSAnaG9yaXpvbnRhbCc7XG5cbiAgLyoqXG4gICAqIFdoZXJlIHRoZSBkaXZpZGVyIHBvc2l0aW9uIHNob3VsZCBiZSBzZXRcbiAgICovXG4gIEBJbnB1dCgpIHNwbGl0UG9zaXRpb246IHN0cmluZyA9ICc1MCUnOyAvL3BlcmNlbnRcbiAgLyoqXG4gICAqIFNldCB0cnVlLCBpbiBjYXNlIG9mIGNhc2NhZGluZyBzcGxpdCBwYW5lXG4gICAqL1xuICBASW5wdXQoKSBzZXQgbm9TY3JvbGwodmFsdWUpe1xuICAgIHRoaXMuX25vU2Nyb2xsID0gdmFsdWU7XG4gICAgdGhpcy50b3BQYW5lU3R5bGVzWydvdmVyZmxvdyddID0gdmFsdWUgPyAnaGlkZGVuJyA6ICdpbmhlcml0JztcbiAgICB0aGlzLmJvdHRvbVBhbmVTdHlsZXNbJ292ZXJmbG93J10gPSB2YWx1ZSA/ICdoaWRkZW4nIDogJ2luaGVyaXQnO1xuICB9XG4gIGdldCBub1Njcm9sbCgpeyByZXR1cm4gdGhpcy5fbm9TY3JvbGw7IH1cbiAgcHJpdmF0ZSBfbm9TY3JvbGw6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBAVmlld0NoaWxkKFwidG9wUGFuZVNlY3Rpb25cIiwge3JlYWQ6IEVsZW1lbnRSZWZ9KSB0b3BQYW5lRWxlbWVudDogRWxlbWVudFJlZjtcbiAgQFZpZXdDaGlsZChcInNwbGl0UGFuZURpdmlkZXJcIiwge3JlYWQ6IEVsZW1lbnRSZWZ9KSBzcGxpdFBhbmVEaXZpZGVyOiBFbGVtZW50UmVmO1xuICBAVmlld0NoaWxkKFwiYm90dG9tUGFuZVNlY3Rpb25cIiwge3JlYWQ6IEVsZW1lbnRSZWZ9KSBib3R0b21QYW5lRWxlbWVudDogRWxlbWVudFJlZjtcbiAgQFZpZXdDaGlsZChcInNwbGl0UGFuZUNvbnRhaW5lclwiLCB7cmVhZDogRWxlbWVudFJlZn0pIHNwbGl0UGFuZUNvbnRhaW5lcjogRWxlbWVudFJlZjtcblxuICBAQ29udGVudENoaWxkKFRvcFBhbmVDb21wb25lbnQpIHRvcFBhbmU6IFRvcFBhbmVDb21wb25lbnQ7XG4gIEBDb250ZW50Q2hpbGQoQm90dG9tUGFuZUNvbXBvbmVudCkgYm90dG9tUGFuZTogQm90dG9tUGFuZUNvbXBvbmVudDtcblxuICBkaXZpZGVyU3R5bGVzOiB7W25hbWU6IHN0cmluZ106IHN0cmluZ30gPSB7fTtcbiAgdG9wUGFuZVN0eWxlczoge1tuYW1lOiBzdHJpbmddOiBzdHJpbmd9ID0ge307XG4gIGJvdHRvbVBhbmVTdHlsZXM6IHtbbmFtZTogc3RyaW5nXTogc3RyaW5nfSA9IHt9O1xuXG4gIGRpdmlkZXJDc3NDbGFzcyA9IFtcInNwbGl0LXBhbmUtZGl2aWRlclwiXTtcblxuICBwcml2YXRlIF9yZXNpemVPbjogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9oYW5kbGVNb3VzZU1vdmU6IChldmVudCk9PnZvaWQ7XG4gIHByaXZhdGUgX2hhbmRsZU1vdXNlRG93bjogKGV2ZW50KT0+dm9pZDtcbiAgcHJpdmF0ZSBfaGFuZGxlTW91c2VVcDogKGV2ZW50KT0+dm9pZDtcbiAgcHJpdmF0ZSBfcHJldlBvcyA9IC0xO1xuICBwcml2YXRlIF9jb250YWluZXJIZWlnaHQ6IG51bWJlcjtcbiAgcHJpdmF0ZSBfY29udGFpbmVyV2lkdGg6IG51bWJlcjtcbiAgcHJpdmF0ZSBfdXBkYXRlID0gZmFsc2U7XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSBwYXJlbnQgc2VlIFtbQmFzZUNvbXBvbmVudF1dIGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSBzZXNzaW9uU2VydmljZSBzZWUgW1tCYXNlQ29tcG9uZW50XV0gY29uc3RydWN0b3JcbiAgICogQHBhcmFtIGVsZW1lbnRSZWYgc2VlIFtbQmFzZUNvbXBvbmVudF1dIGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSByZW5kZXJlciBzZWUgW1tCYXNlQ29tcG9uZW50XV0gY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHpvbmUgSW5qZWN0IFtbTmdab25lXV0gcmVmZXJlbmNlXG4gICAqIEBwYXJhbSBjZCBJbmplY3QgW1tDaGFuZ2VEZXRlY3RvclJlZl1dXG4gICAqL1xuICBjb25zdHJ1Y3RvcihAT3B0aW9uYWwoKSBAU2tpcFNlbGYoKSBwYXJlbnQ6IEJhc2VDb21wb25lbnQsIHNlc3Npb25TZXJ2aWNlOiBTZXNzaW9uU2VydmljZSwgZWxlbWVudFJlZjogRWxlbWVudFJlZiwgcmVuZGVyZXI6IFJlbmRlcmVyMiwgcHJpdmF0ZSB6b25lOiBOZ1pvbmUsIHByaXZhdGUgY2Q6IENoYW5nZURldGVjdG9yUmVmKSB7XG4gICAgc3VwZXIocGFyZW50LCBzZXNzaW9uU2VydmljZSwgZWxlbWVudFJlZiwgcmVuZGVyZXIpO1xuXG4gICAgdGhpcy5faGFuZGxlTW91c2VNb3ZlID0gIF8udGhyb3R0bGUoKGV2ZW50KT0+e1xuICAgICAgdGhpcy5fcmVzaXplUGFuZWxzKGV2ZW50KTtcbiAgICB9LDE1MCk7XG5cbiAgICB0aGlzLl9oYW5kbGVNb3VzZURvd24gPSAoZXZlbnQpPT57XG4gICAgICB0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCk9PntcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5faGFuZGxlTW91c2VNb3ZlLCB0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAodGhpcy5vcmllbnRhdGlvbiA9PT0gXCJ2ZXJ0aWNhbFwiKSB7XG4gICAgICAgIHRoaXMuX3ByZXZQb3MgPSBldmVudC5wYWdlWDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3ByZXZQb3MgPSBldmVudC5wYWdlWTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX3Jlc2l6ZU9uID0gdHJ1ZTtcbiAgICAgIHRoaXMuX3VwZGF0ZSA9IGZhbHNlO1xuICAgIH07XG5cbiAgICB0aGlzLl9oYW5kbGVNb3VzZVVwID0gKGV2ZW50KT0+e1xuICAgICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpPT57XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5faGFuZGxlTW91c2VNb3ZlLCB0cnVlKTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLl9yZXNpemVPbiA9IGZhbHNlO1xuICAgICAgdGhpcy5fdXBkYXRlID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogSW5pdCBsaWZlY3ljbGUuIFNldCBwYW5lbCB3aWR0aFxuICAgKi9cbiAgbmdPbkluaXQoKSB7XG4gICAgc3VwZXIubmdPbkluaXQoKTtcbiAgICB0aGlzLnNldFBhbmVXaWR0aCgpO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgbW92ZVVwKCkge1xuICAgIGlmICh0aGlzLm9yaWVudGF0aW9uID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy50b3BQYW5lRWxlbWVudC5uYXRpdmVFbGVtZW50LCBcImhlaWdodFwiLCBcIjAlXCIpO1xuICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLmJvdHRvbVBhbmVFbGVtZW50Lm5hdGl2ZUVsZW1lbnQsIFwiaGVpZ2h0XCIsIFwiY2FsYygxMDAlIC0gMTNweClcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy50b3BQYW5lRWxlbWVudC5uYXRpdmVFbGVtZW50LCBcIndpZHRoXCIsIFwiY2FsYygxMDAlIC0gMTNweClcIik7XG4gICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMuYm90dG9tUGFuZUVsZW1lbnQubmF0aXZlRWxlbWVudCwgXCJ3aWR0aFwiLCBcIjAlXCIpO1xuICAgIH1cbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIG1vdmVEb3duKCkge1xuICAgIGlmICh0aGlzLm9yaWVudGF0aW9uID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy50b3BQYW5lRWxlbWVudC5uYXRpdmVFbGVtZW50LCBcImhlaWdodFwiLCBcImNhbGMoMTAwJSAtIDEzcHgpXCIpO1xuICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLmJvdHRvbVBhbmVFbGVtZW50Lm5hdGl2ZUVsZW1lbnQsIFwiaGVpZ2h0XCIsIFwiMCVcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy50b3BQYW5lRWxlbWVudC5uYXRpdmVFbGVtZW50LCBcIndpZHRoXCIsIFwiMCVcIik7XG4gICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMuYm90dG9tUGFuZUVsZW1lbnQubmF0aXZlRWxlbWVudCwgXCJ3aWR0aFwiLCBcImNhbGMoMTAwJSAtIDEzcHgpXCIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGlzIGlzIGEgY29udGFpbmVyIGNvbXBvbmVudFxuICAgKiBAcmV0dXJucyBUcnVlXG4gICAqL1xuICBwcm90ZWN0ZWQgaXNDb250YWluZXIoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAvKipcbiAgICogU2V0IHBhbmUgbGF5b3V0IGFuZCBkaW1lbnNpb25zXG4gICAqL1xuICBwcml2YXRlIHNldFBhbmVXaWR0aCgpIHtcbiAgICBpZiAodGhpcy5vcmllbnRhdGlvbiA9PT0gJ3ZlcnRpY2FsJykge1xuICAgICAgdGhpcy5kaXZpZGVyU3R5bGVzW1wiaGVpZ2h0XCJdID0gXCIxMDAlXCI7XG4gICAgICB0aGlzLmRpdmlkZXJTdHlsZXNbXCJ3aWR0aFwiXSA9IFwiMXB4XCI7XG4gICAgICB0aGlzLmRpdmlkZXJTdHlsZXNbJ2Zsb2F0J10gPSAnbGVmdCc7XG4gICAgICB0aGlzLnRvcFBhbmVTdHlsZXNbJ3dpZHRoJ10gPSAnY2FsYygnICsgdGhpcy5zcGxpdFBvc2l0aW9uICsgJyAtIDNweCknO1xuICAgICAgdGhpcy50b3BQYW5lU3R5bGVzWydoZWlnaHQnXSA9IFwiMTAwJVwiO1xuICAgICAgdGhpcy50b3BQYW5lU3R5bGVzWydmbG9hdCddID0gJ2xlZnQnXG4gICAgICBsZXQgcGVyY2VudDogc3RyaW5nID0gdGhpcy5zcGxpdFBvc2l0aW9uLnNwbGl0KCclJywgMSlbMF07XG4gICAgICBsZXQgblBlcmNlbnQgPSArcGVyY2VudDtcbiAgICAgIHRoaXMuYm90dG9tUGFuZVN0eWxlc1snd2lkdGgnXSA9ICdjYWxjKCcgKyAoMTAwIC0gblBlcmNlbnQpICsgJyUgLSAxMHB4KSc7XG4gICAgICB0aGlzLmJvdHRvbVBhbmVTdHlsZXNbJ2hlaWdodCddID0gXCIxMDAlXCI7XG4gICAgICB0aGlzLmJvdHRvbVBhbmVTdHlsZXNbJ2Zsb2F0J10gPSAnbGVmdCc7XG4gICAgICB0aGlzLmRpdmlkZXJDc3NDbGFzcy5wdXNoKFwidmVydGljYWxcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGl2aWRlclN0eWxlc1tcImhlaWdodFwiXSA9IFwiOHB4XCI7XG4gICAgICB0aGlzLmRpdmlkZXJTdHlsZXNbXCJ3aWR0aFwiXSA9IFwiMTAwJVwiO1xuICAgICAgdGhpcy50b3BQYW5lU3R5bGVzWydoZWlnaHQnXSA9ICdjYWxjKCcgKyB0aGlzLnNwbGl0UG9zaXRpb24gKyAnIC0gM3B4KSc7XG4gICAgICB0aGlzLnRvcFBhbmVTdHlsZXNbJ3dpZHRoJ10gPSBcIjEwMCVcIjtcbiAgICAgIGxldCBwZXJjZW50OiBzdHJpbmcgPSB0aGlzLnNwbGl0UG9zaXRpb24uc3BsaXQoJyUnLCAxKVswXTtcbiAgICAgIGxldCBuUGVyY2VudCA9ICtwZXJjZW50O1xuICAgICAgdGhpcy5ib3R0b21QYW5lU3R5bGVzWydoZWlnaHQnXSA9ICdjYWxjKCcgKyAoMTAwIC0gblBlcmNlbnQpICsgJyUgLSAxMHB4KSc7XG4gICAgICB0aGlzLmJvdHRvbVBhbmVTdHlsZXNbJ3dpZHRoJ10gPSBcIjEwMCVcIjtcbiAgICAgIHRoaXMuZGl2aWRlckNzc0NsYXNzLnB1c2goXCJob3Jpem9udGFsXCIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZnRlciB2aWV3IGluaXQgbGlmZWN5Y2xlLiBBZGQgZXZlbnQgbGlzdGVuZXJzXG4gICAqL1xuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgc3VwZXIubmdBZnRlclZpZXdJbml0KCk7XG5cbiAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcblxuICAgIHRoaXMuem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKT0+e1xuICAgICAgKHRoaXMuc3BsaXRQYW5lRGl2aWRlci5uYXRpdmVFbGVtZW50IGFzIEhUTUxFbGVtZW50KS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2hhbmRsZU1vdXNlRG93biwgdHJ1ZSk7XG5cbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMuX2hhbmRsZU1vdXNlVXAsIHRydWUpO1xuICAgIH0pO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIERlc3Ryb3kgbGlmZWN5Y2xlLiBSZW1vdmUgZXZlbnQgbGlzdGVuZXJzXG4gICAqL1xuICBuZ09uRGVzdHJveSgpIHtcbiAgICB0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCk9PntcbiAgICAgICh0aGlzLnNwbGl0UGFuZURpdmlkZXIubmF0aXZlRWxlbWVudCBhcyBIVE1MRWxlbWVudCkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVNb3VzZURvd24sIHRydWUpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcy5faGFuZGxlTW91c2VVcCwgdHJ1ZSk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMuX2hhbmRsZU1vdXNlTW92ZSwgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9oYW5kbGVNb3VzZURvd24gPSBudWxsO1xuICAgIHRoaXMuX2hhbmRsZU1vdXNlTW92ZSA9IG51bGw7XG4gICAgdGhpcy5faGFuZGxlTW91c2VVcCA9IG51bGw7XG5cbiAgICBzdXBlci5uZ09uRGVzdHJveSgpO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIEV2ZW50IGhhbmRsZXIgZm9yIHBhbmVsIHJlc2l6ZSBldmVudFxuICAgKiBAcGFyYW0gZXZlbnQgTW91c2UgZXZlbnRcbiAgICovXG4gIHByaXZhdGUgX3Jlc2l6ZVBhbmVscyhldmVudDogTW91c2VFdmVudCkge1xuICAgIGlmICghdGhpcy5fdXBkYXRlKSB7XG4gICAgICBpZiAodGhpcy5fY29udGFpbmVyV2lkdGggPT0gbnVsbCkge1xuICAgICAgICBjb25zdCBjID0gJCh0aGlzLnNwbGl0UGFuZUNvbnRhaW5lci5uYXRpdmVFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fY29udGFpbmVySGVpZ2h0ID0gYy5oZWlnaHQoKTtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyV2lkdGggPSBjLndpZHRoKCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3VwZGF0ZSA9IHRydWU7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCk9PnRoaXMuX2RvVXBkYXRlKGV2ZW50KSk7XG4gICAgfVxuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgLyoqXG4gICAqIEV2ZW50IGhhbmRsZXIgZm9yIG1vdXNlIGV2ZW50LiBVcGRhdGUgcGFuZSB3aWR0aC9oZWlnaHRcbiAgICogQHBhcmFtIGV2ZW50IE1vdXNlIGV2ZW50XG4gICAqL1xuICBwcml2YXRlIF9kb1VwZGF0ZShldmVudDogTW91c2VFdmVudCkge1xuICAgIGlmICh0aGlzLl9yZXNpemVPbiA9PT0gdHJ1ZSkge1xuICAgICAgaWYgKHRoaXMub3JpZW50YXRpb24gPT09IFwidmVydGljYWxcIikge1xuICAgICAgICBjb25zdCBkaWZmID0gdGhpcy5fcHJldlBvcyAtIGV2ZW50LnBhZ2VYO1xuICAgICAgICBjb25zdCBsZWZ0V2lkdGggPSAgKCQodGhpcy50b3BQYW5lRWxlbWVudC5uYXRpdmVFbGVtZW50KS53aWR0aCgpIC0gZGlmZik7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lcldpZHRoID0gJCh0aGlzLnNwbGl0UGFuZUNvbnRhaW5lci5uYXRpdmVFbGVtZW50KS53aWR0aCgpO1xuICAgICAgICBsZXQgbGVmdDogbnVtYmVyID0gKGxlZnRXaWR0aCAvIHRoaXMuX2NvbnRhaW5lcldpZHRoKSAqIDEwMDtcbiAgICAgICAgbGV0IG1heGltdW06IG51bWJlciA9IChsZWZ0V2lkdGggLyAodGhpcy5fY29udGFpbmVyV2lkdGggLSAxNSkpICogMTAwO1xuICAgICAgICBpZiggbWF4aW11bSA+IDEwMCApIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy50b3BQYW5lRWxlbWVudC5uYXRpdmVFbGVtZW50LCBcIndpZHRoXCIsIFwiY2FsYygxMDAlIC0gMTNweClcIik7XG4gICAgICAgIGVsc2UgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLnRvcFBhbmVFbGVtZW50Lm5hdGl2ZUVsZW1lbnQsIFwid2lkdGhcIiwgbGVmdCArIFwiJVwiKTtcbiAgICAgICAgLy8gdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLmJvdHRvbVBhbmVFbGVtZW50Lm5hdGl2ZUVsZW1lbnQsIFwid2lkdGhcIiwgKHRoaXMuX2NvbnRhaW5lcldpZHRoIC0gKGxlZnRXaWR0aCArIDYpKSArIFwicHhcIik7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5ib3R0b21QYW5lRWxlbWVudC5uYXRpdmVFbGVtZW50LCBcIndpZHRoXCIsIFwiY2FsYyhcIiArICgxMDAgLSBsZWZ0KSArIFwiJSAtIDEzcHgpXCIpO1xuICAgICAgICB0aGlzLl9wcmV2UG9zID0gZXZlbnQucGFnZVg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBkaWZmID0gdGhpcy5fcHJldlBvcyAtIGV2ZW50LnBhZ2VZO1xuICAgICAgICBjb25zdCB0b3BIZWlnaHQgPSAgKCQodGhpcy50b3BQYW5lRWxlbWVudC5uYXRpdmVFbGVtZW50KS5oZWlnaHQoKSAtIGRpZmYpO1xuICAgICAgICB0aGlzLl9jb250YWluZXJIZWlnaHQgPSAkKHRoaXMuc3BsaXRQYW5lQ29udGFpbmVyLm5hdGl2ZUVsZW1lbnQpLmhlaWdodCgpO1xuICAgICAgICBsZXQgdG9wOiBudW1iZXIgPSAodG9wSGVpZ2h0IC8gdGhpcy5fY29udGFpbmVySGVpZ2h0KSAqIDEwMDtcbiAgICAgICAgbGV0IG1heGltdW06IG51bWJlciA9ICh0b3BIZWlnaHQgLyAodGhpcy5fY29udGFpbmVySGVpZ2h0IC0gMTUpKSAqIDEwMDtcbiAgICAgICAgaWYoIG1heGltdW0gPiAxMDAgKSB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMudG9wUGFuZUVsZW1lbnQubmF0aXZlRWxlbWVudCwgXCJoZWlnaHRcIiwgXCJjYWxjKDEwMCUgLSAxM3B4XCIpO1xuICAgICAgICBlbHNlIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy50b3BQYW5lRWxlbWVudC5uYXRpdmVFbGVtZW50LCBcImhlaWdodFwiLCB0b3AgKyBcIiVcIik7XG4gICAgICAgIC8vIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5ib3R0b21QYW5lRWxlbWVudC5uYXRpdmVFbGVtZW50LCBcImhlaWdodFwiLCAodGhpcy5fY29udGFpbmVySGVpZ2h0IC0gKHRvcEhlaWdodCArIDEwKSkgKyBcInB4XCIpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMuYm90dG9tUGFuZUVsZW1lbnQubmF0aXZlRWxlbWVudCwgXCJoZWlnaHRcIiwgXCJjYWxjKFwiICsgKDEwMCAtIHRvcCkgKyBcIiUgLSAxM3B4KVwiKTtcbiAgICAgICAgdGhpcy5fcHJldlBvcyA9IGV2ZW50LnBhZ2VZO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl91cGRhdGUgPSBmYWxzZTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgU3BsaXRQYW5lQ29tcG9uZW50IH0gZnJvbSAnLi9zcGxpdC1wYW5lLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBUb3BQYW5lQ29tcG9uZW50IH0gZnJvbSAnLi90b3AtcGFuZS90b3AtcGFuZS5jb21wb25lbnQnO1xuaW1wb3J0IHsgQm90dG9tUGFuZUNvbXBvbmVudCB9IGZyb20gJy4vYm90dG9tLXBhbmUvYm90dG9tLXBhbmUuY29tcG9uZW50JztcblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogW1xuICAgIENvbW1vbk1vZHVsZVxuICBdLFxuICBkZWNsYXJhdGlvbnM6IFtcbiAgICBTcGxpdFBhbmVDb21wb25lbnQsXG4gICAgVG9wUGFuZUNvbXBvbmVudCxcbiAgICBCb3R0b21QYW5lQ29tcG9uZW50XG4gIF0sXG4gIGV4cG9ydHM6IFtcbiAgICBTcGxpdFBhbmVDb21wb25lbnQsXG4gICAgVG9wUGFuZUNvbXBvbmVudCxcbiAgICBCb3R0b21QYW5lQ29tcG9uZW50XG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgU3BsaXRQYW5lTW9kdWxlIHsgfVxuIiwiaW1wb3J0IHsgT25Jbml0IH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcbmltcG9ydCB7IEJhc2VDb21wb25lbnQgfSBmcm9tIFwiLi9iYXNlLmNvbXBvbmVudFwiO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQ3VzdG9tQXR0cmlidXRlIGltcGxlbWVudHMgT25Jbml0IHtcbiAgICBjb25zdHJ1Y3RvciAocHJpdmF0ZSBwYXJlbnQ6IEJhc2VDb21wb25lbnQpIHtcblxuICAgIH1cblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICBjb25zdCBuYW1lID0gdGhpcy5nZXRQcm9wZXJ0eU5hbWUoKTtcbiAgICAgICAgbGV0IHZhbHVlID0gdGhpcy5nZXRQcm9wZXJ0eVZhbHVlKCk7XG5cbiAgICAgICAgaWYgKHRoaXMucGFyZW50ICE9IG51bGwgJiYgbmFtZSAhPSBudWxsICYmIG5hbWUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnBhcmVudC5zZXRDdXN0b21BdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGFyZW50ID09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJVbmFibGUgdG8gc2V0IGN1c3RvbSBwcm9wZXJ0eSwgcGFyZW50IGlzIG51bGxcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIG5hbWUgb2YgdGhlIGN1c3RvbSBwcm9wZXJ0eVxuICAgICAqL1xuICAgIGFic3RyYWN0IGdldFByb3BlcnR5TmFtZSgpOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHZhbHVlIG9mIHRoZSBjdXN0b20gcHJvcGVydHlcbiAgICAgKi9cbiAgICBhYnN0cmFjdCBnZXRQcm9wZXJ0eVZhbHVlKCk6IHN0cmluZztcbn0iXSwibmFtZXMiOlsiXy51bmlxQnkiLCJfLmZpbHRlciIsIl8uZmluZCIsIl8uc29ydEJ5IiwiXy5mb3JFYWNoIiwiXy5vcmRlckJ5IiwiXy5tYXAiLCJrZXlzIiwiXy5rZXlzIiwiXy5wYXJzZUludCIsIl8ucGFkU3RhcnQiLCJtb21lbnQuaXNNb21lbnQiLCJfLmNsb25lIiwiXy51bmlxIiwiXy5yYW5kb20iLCJfLmZpbmRJbmRleCIsIm1hcCIsIl8uZ2V0IiwiXy50aHJvdHRsZSIsIm1vbWVudCIsIm1vbWVudEltcG9ydGVkIiwiXy5jb25jYXQiLCJfLmxhc3RJbmRleE9mIiwiY2xpcGJvYXJkLndyaXRlVGV4dCIsIl8uaXNFcXVhbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFRQSxJQUFJLFdBQVcsQ0FBVzs7QUFFMUIsTUFBYSxXQUFXLEdBQUcsQ0FBQyxR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